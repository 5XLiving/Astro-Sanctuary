<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title data-i18n="page_title">æœ¬å‘½æ˜Ÿç›˜ Â· Natal Chart</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0f14; --card:#11161dCC; --line:#1f2a36; --text:#e8edf3; --muted:#98a7b7;
      --brand:#d4af37; --accent:#58b9ff; --radius:14px; --shadow:0 8px 30px rgba(0,0,0,.35); --blur:10px;
    }
    html,body{height:100%} html{font-size:16px}
    @media(min-width:768px){ html{font-size:17px} } @media(min-width:1200px){ html{font-size:18px} }
    body{
      margin:0; color:var(--text);
      background: radial-gradient(1200px 600px at 70% -10%, #16202b 10%, transparent 60%) no-repeat,
                  linear-gradient(180deg,#0b0f14,#0b0f14);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans SC", Arial, sans-serif;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    body::before{
      content:""; position:fixed; inset:0; z-index:-2;
      background:url('assets/images/gate.jpg') center/cover no-repeat;
      filter:brightness(.45) saturate(.9) blur(2px);
    }
    .glow{position:fixed; inset:auto auto 10% -10%; width:45vw; height:45vw; max-width:700px; max-height:700px;
      background:radial-gradient(closest-side, #2a98ff33, transparent 70%); filter:blur(30px); z-index:-1; pointer-events:none;}
    .container{width:100%; max-width:1000px; padding:24px 16px 80px; margin:0 auto;}
    header{position:sticky; top:0; z-index:10; backdrop-filter:saturate(140%) blur(12px);
      background:#0b0f14cc; border-bottom:1px solid #0f1622;}
    .head-inner{display:flex; align-items:center; justify-content:space-between; gap:14px; padding:16px}
    .brand{display:flex; align-items:center; gap:12px}
    .brand-badge{width:36px; height:36px; border-radius:10px; background:linear-gradient(145deg,#273243,#0e141c);
      display:grid; place-items:center; color:var(--brand); font-weight:700; box-shadow:var(--shadow)}
    .title{font-family:"Noto Serif SC","Noto Serif",serif; font-weight:600; letter-spacing:.02em; font-size:1.1rem}
    .subtitle{color:var(--muted); font-size:.9rem}

    /* è¯­è¨€é€‰æ‹©å™¨ */
    .lang{display:flex; align-items:center; gap:8px}
    .lang label{color:var(--muted); font-size:.9rem}
    .lang select{
      appearance:none; border-radius:10px; border:1px solid #243244; background:#0e1520; color:var(--text);
      padding:10px 34px 10px 12px; font-size:.95rem;
      background-image:url("data:image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2398a7b7' stroke-width='2' fill='none'/%3E%3C/svg%3E");
      background-repeat:no-repeat; background-position:calc(100% - 12px) 50%;
    }

    .card{background:var(--card); border:1px solid var(--line); border-radius:var(--radius);
      box-shadow:var(--shadow); backdrop-filter: blur(var(--blur)); padding:18px;}
    .stack{display:grid; gap:12px}
    .row{display:grid; gap:10px}
    @media(min-width:640px){ .row{grid-template-columns:1fr 1fr} }
    @media(min-width:920px){ .row-3{grid-template-columns:1fr 1fr 1fr} }

    input,select,button{
      width:100%; box-sizing:border-box; border-radius:12px; border:1px solid #243244;
      background:#0e1520; color:var(--text); padding:14px 13px; font-size:1rem; outline:none;
    }
    input::placeholder{color:#6f8092}
    select{appearance:none; background-image:url("data:image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2398a7b7' stroke-width='2' fill='none'/%3E%3C/svg%3E"); background-repeat:no-repeat; background-position:calc(100% - 12px) 50%}
    .btn{background:linear-gradient(180deg,#1d2a3a,#101723); border:1px solid #28364a; font-weight:600; letter-spacing:.02em; cursor:pointer}
    .btn:hover{box-shadow:0 6px 18px rgba(88,185,255,.15), inset 0 1px 0 #2e3c50}
    .btn[disabled]{opacity:.6; cursor:not-allowed}

    .section{margin-top:18px}
    .section h2{
      font-family:"Noto Serif SC","Noto Serif",serif; font-weight:600; font-size:1.2rem; margin:0 0 12px;
      display:flex; align-items:center; gap:10px
    }
    .section h2::before{
      content:""; width:8px; height:8px; border-radius:50%; background:var(--accent); box-shadow:0 0 0 4px #58b9ff22
    }

    .muted{color:var(--muted)}
    .error{color:#ff8f8f; margin-top:8px}
    footer{color:#6c7b8c; font-size:.85rem; text-align:center; padding:30px 0}
  </style>
</head>
<body>
  <div class="glow"></div>
  <header>
    <div class="head-inner container">
      <div class="brand">
        <div class="brand-badge">5X</div>
        <div>
          <div class="title" data-i18n="site_title">æœ¬å‘½æ˜Ÿç›˜ Â· Natal Chart</div>
          <div class="subtitle" data-i18n="site_subtitle">å…è´¹ç‰ˆ Â· ç»˜åˆ¶ä½ çš„ä¸ªäººæœ¬å‘½æ˜Ÿå›¾</div>
        </div>
      </div>
      <div class="lang">
        <label for="langSelect" data-i18n="lang_label">è¯­è¨€</label>
        <select id="langSelect" aria-label="Language">
          <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
          <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
          <option value="en">English</option>
          <option value="ja">æ—¥æœ¬èª</option>
          <option value="th">à¹„à¸—à¸¢</option>
          <option value="ms">Bahasa Melayu</option>
        </select>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="card stack">
      <h2 data-i18n="form_title">å¡«å†™å‡ºç”Ÿèµ„æ–™</h2>
      <div class="row row-3">
        <input id="name" data-i18n-ph="ph_name" placeholder="å§“åï¼ˆå¯é€‰ï¼‰">
        <select id="gender">
          <option value="male" data-i18n="opt_male">ç”·æ€§ / Male</option>
          <option value="female" data-i18n="opt_female">å¥³æ€§ / Female</option>
        </select>
        <input id="place" data-i18n-ph="ph_place" placeholder="å‡ºç”Ÿåœ°ç‚¹ / Place of Birth">
      </div>
      <div class="row">
        <input type="date" id="birthdate" data-i18n-ph="ph_date" placeholder="å‡ºç”Ÿæ—¥æœŸ / Birth Date">
        <input type="time" id="birthtime" data-i18n-ph="ph_time" placeholder="å‡ºç”Ÿæ—¶é—´ / Time of Birth">
      </div>
      <button class="btn" onclick="generateNatal()" data-i18n="btn_generate">ç”Ÿæˆæ˜Ÿç›˜</button>
      <div class="muted" data-i18n="tip_tz">æç¤ºï¼šé»˜è®¤ä¸œå…«åŒºï¼ˆUTC+8ï¼‰ã€‚åç»­å°†æ”¯æŒè‡ªåŠ¨æ—¶åŒº/ç»çº¬åº¦æ¢ç®—ã€‚</div>
      <div class="error" id="error" style="display:none"></div>
    </section>

    <section id="result" class="card section" style="display:none">
      <h2 data-i18n="res_title">æ˜Ÿç›˜ç»“æœ</h2>
      <div id="chart" class="muted" style="min-height:120px; display:grid; place-items:center">
        <span data-i18n="res_placeholder">ï¼ˆè¿™é‡Œå°†æ˜¾ç¤ºæ˜Ÿç›˜å›¾ä¸è§£è¯»ï¼‰</span>
      </div>
    </section>
  </main>

  <footer>Â© 5XLiving â€¢ Astro Sanctuary</footer>

  <!-- è½»é‡ i18nï¼Œä¸ index/bazi åŒæ¨¡å¼ -->
  <script>
    const translations = {
      "zh-CN": {
        page_title:"æœ¬å‘½æ˜Ÿç›˜ Â· Natal Chart",
        site_title:"æœ¬å‘½æ˜Ÿç›˜ Â· Natal Chart",
        site_subtitle:"å…è´¹ç‰ˆ Â· ç»˜åˆ¶ä½ çš„ä¸ªäººæœ¬å‘½æ˜Ÿå›¾",
        lang_label:"è¯­è¨€",
        form_title:"å¡«å†™å‡ºç”Ÿèµ„æ–™",
        ph_name:"å§“åï¼ˆå¯é€‰ï¼‰",
        ph_place:"å‡ºç”Ÿåœ°ç‚¹ / Place of Birth",
        ph_date:"å‡ºç”Ÿæ—¥æœŸ / Birth Date",
        ph_time:"å‡ºç”Ÿæ—¶é—´ / Time of Birth",
        opt_male:"ç”·æ€§ / Male",
        opt_female:"å¥³æ€§ / Female",
        btn_generate:"ç”Ÿæˆæ˜Ÿç›˜",
        tip_tz:"æç¤ºï¼šé»˜è®¤ä¸œå…«åŒºï¼ˆUTC+8ï¼‰ã€‚åç»­å°†æ”¯æŒè‡ªåŠ¨æ—¶åŒº/ç»çº¬åº¦æ¢ç®—ã€‚",
        res_title:"æ˜Ÿç›˜ç»“æœ",
        res_placeholder:"ï¼ˆè¿™é‡Œå°†æ˜¾ç¤ºæ˜Ÿç›˜å›¾ä¸è§£è¯»ï¼‰",
        err_need_dt:"è¯·å¡«å†™å‡ºç”Ÿæ—¥æœŸä¸æ—¶é—´",
        err_generate:"ç”Ÿæˆå¤±è´¥ï¼š"
      },
      "zh-TW": {
        page_title:"æœ¬å‘½æ˜Ÿç›¤ Â· Natal Chart",
        site_title:"æœ¬å‘½æ˜Ÿç›¤ Â· Natal Chart",
        site_subtitle:"å…è²»ç‰ˆ Â· ç¹ªè£½ä½ çš„å€‹äººæœ¬å‘½æ˜Ÿåœ–",
        lang_label:"èªè¨€",
        form_title:"å¡«å¯«å‡ºç”Ÿè³‡æ–™",
        ph_name:"å§“åï¼ˆå¯é¸ï¼‰",
        ph_place:"å‡ºç”Ÿåœ°é» / Place of Birth",
        ph_date:"å‡ºç”Ÿæ—¥æœŸ / Birth Date",
        ph_time:"å‡ºç”Ÿæ™‚é–“ / Time of Birth",
        opt_male:"ç”·æ€§ / Male",
        opt_female:"å¥³æ€§ / Female",
        btn_generate:"ç”Ÿæˆæ˜Ÿç›¤",
        tip_tz:"æç¤ºï¼šé è¨­æ±å…«å€ï¼ˆUTC+8ï¼‰ã€‚å¾ŒçºŒå°‡æ”¯æ´è‡ªå‹•æ™‚å€/ç¶“ç·¯åº¦æ›ç®—ã€‚",
        res_title:"æ˜Ÿç›¤çµæœ",
        res_placeholder:"ï¼ˆæ­¤è™•å°‡é¡¯ç¤ºæ˜Ÿç›¤åœ–èˆ‡è§£è®€ï¼‰",
        err_need_dt:"è«‹å¡«å¯«å‡ºç”Ÿæ—¥æœŸèˆ‡æ™‚é–“",
        err_generate:"ç”Ÿæˆå¤±æ•—ï¼š"
      },
      "en": {
        page_title:"Natal Chart Â· Birth Chart",
        site_title:"Natal Chart Â· Birth Chart",
        site_subtitle:"Free Â· Draw your personal natal chart",
        lang_label:"Language",
        form_title:"Enter Birth Details",
        ph_name:"Name (optional)",
        ph_place:"Place of Birth",
        ph_date:"Birth Date",
        ph_time:"Time of Birth",
        opt_male:"Male",
        opt_female:"Female",
        btn_generate:"Generate Chart",
        tip_tz:"Note: default UTC+8. Auto timezone/geo support coming soon.",
        res_title:"Chart Result",
        res_placeholder:"(Your chart and reading will appear here)",
        err_need_dt:"Please enter birth date & time",
        err_generate:"Failed to generate: "
      },
      "ja": {
        page_title:"ãƒã‚¤ã‚¿ãƒ«ãƒãƒ£ãƒ¼ãƒˆ",
        site_title:"ãƒã‚¤ã‚¿ãƒ«ãƒãƒ£ãƒ¼ãƒˆ",
        site_subtitle:"ç„¡æ–™ç‰ˆ Â· å€‹äººã®æ˜Ÿå›³ã‚’ä½œæˆ",
        lang_label:"è¨€èª",
        form_title:"å‡ºç”Ÿæƒ…å ±ã‚’å…¥åŠ›",
        ph_name:"åå‰ï¼ˆä»»æ„ï¼‰",
        ph_place:"å‡ºç”Ÿåœ°",
        ph_date:"ç”Ÿå¹´æœˆæ—¥",
        ph_time:"å‡ºç”Ÿæ™‚åˆ»",
        opt_male:"ç”·æ€§",
        opt_female:"å¥³æ€§",
        btn_generate:"ãƒãƒ£ãƒ¼ãƒˆã‚’ç”Ÿæˆ",
        tip_tz:"æ³¨ï¼šæ—¢å®šã¯ UTC+8ã€‚è‡ªå‹•ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³/ç·¯çµŒåº¦ã¯ä»Šå¾Œå¯¾å¿œäºˆå®šã€‚",
        res_title:"çµæœ",
        res_placeholder:"ï¼ˆã“ã“ã«æ˜Ÿå›³ã¨ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼‰",
        err_need_dt:"ç”Ÿå¹´æœˆæ—¥ã¨æ™‚åˆ»ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
        err_generate:"ç”Ÿæˆã«å¤±æ•—ï¼š"
      },
      "th": {
        page_title:"à¸”à¸§à¸‡à¸à¸³à¹€à¸™à¸´à¸” Â· Natal Chart",
        site_title:"à¸”à¸§à¸‡à¸à¸³à¹€à¸™à¸´à¸” Â· Natal Chart",
        site_subtitle:"à¸Ÿà¸£à¸µ Â· à¸§à¸²à¸”à¹à¸œà¸™à¸œà¸±à¸‡à¸”à¸§à¸‡à¸à¸³à¹€à¸™à¸´à¸”à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§",
        lang_label:"à¸ à¸²à¸©à¸²",
        form_title:"à¸à¸£à¸­à¸à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸à¸²à¸£à¹€à¸à¸´à¸”",
        ph_name:"à¸Šà¸·à¹ˆà¸­ (à¹„à¸¡à¹ˆà¸šà¸±à¸‡à¸„à¸±à¸š)",
        ph_place:"à¸ªà¸–à¸²à¸™à¸—à¸µà¹ˆà¹€à¸à¸´à¸”",
        ph_date:"à¸§à¸±à¸™à¹€à¸à¸´à¸”",
        ph_time:"à¹€à¸§à¸¥à¸²à¹€à¸à¸´à¸”",
        opt_male:"à¸Šà¸²à¸¢",
        opt_female:"à¸«à¸à¸´à¸‡",
        btn_generate:"à¸ªà¸£à¹‰à¸²à¸‡à¸œà¸±à¸‡à¸”à¸§à¸‡",
        tip_tz:"à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸: à¸„à¹ˆà¸²à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™ UTC+8 à¸ˆà¸°à¸¡à¸µà¸à¸²à¸£à¸£à¸­à¸‡à¸£à¸±à¸šà¹‚à¸‹à¸™à¹€à¸§à¸¥à¸²à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´à¹€à¸£à¹‡à¸§à¹† à¸™à¸µà¹‰",
        res_title:"à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ",
        res_placeholder:"(à¸ˆà¸°à¹à¸ªà¸”à¸‡à¸œà¸±à¸‡à¸”à¸§à¸‡à¹à¸¥à¸°à¸„à¸³à¸­à¹ˆà¸²à¸™à¸—à¸µà¹ˆà¸™à¸µà¹ˆ)",
        err_need_dt:"à¸à¸£à¸­à¸à¸§à¸±à¸™à¹à¸¥à¸°à¹€à¸§à¸¥à¸²à¹€à¸à¸´à¸”",
        err_generate:"à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ: "
      },
      "ms": {
        page_title:"Carta Kelahiran Â· Natal Chart",
        site_title:"Carta Kelahiran Â· Natal Chart",
        site_subtitle:"Percuma Â· Lukis carta kelahiran peribadi anda",
        lang_label:"Bahasa",
        form_title:"Isi Butiran Kelahiran",
        ph_name:"Nama (pilihan)",
        ph_place:"Tempat Lahir",
        ph_date:"Tarikh Lahir",
        ph_time:"Masa Lahir",
        opt_male:"Lelaki",
        opt_female:"Perempuan",
        btn_generate:"Jana Carta",
        tip_tz:"Nota: lalai UTC+8. Sokongan zon masa/geo automatik akan datang.",
        res_title:"Keputusan Carta",
        res_placeholder:"(Carta dan bacaan akan dipaparkan di sini)",
        err_need_dt:"Sila isi tarikh & masa lahir",
        err_generate:"Gagal menjana: "
      }
    };

    const LANG_KEY="site_lang";
    function getLang(){ return localStorage.getItem(LANG_KEY) || document.documentElement.lang || "zh-CN"; }
    function setLang(code){ localStorage.setItem(LANG_KEY, code); document.documentElement.lang = code; }
    function t(key){
      const L = translations[getLang()] || translations["zh-CN"];
      return L[key] || (translations["zh-CN"][key] || key);
    }
    function applyI18n(){
      document.querySelectorAll("[data-i18n]").forEach(el=>{
        el.textContent = t(el.getAttribute("data-i18n"));
      });
      document.querySelectorAll("[data-i18n-ph]").forEach(el=>{
        el.setAttribute("placeholder", t(el.getAttribute("data-i18n-ph")));
      });
      const titleEl = document.querySelector("title[data-i18n]");
      if (titleEl) titleEl.textContent = t(titleEl.getAttribute("data-i18n"));
    }
    (function initLang(){
      const select = document.getElementById("langSelect");
      const current = getLang();
      select.value = current; applyI18n();
      select.addEventListener("change", ()=>{ setLang(select.value); applyI18n(); });
    })();
  </script>

  <!-- ç”Ÿæˆé€»è¾‘ï¼ˆå ä½ï¼Œå¯æ¥å…¥ä½ çš„åç«¯æˆ–ç¬¬ä¸‰æ–¹ APIï¼‰ -->
  <script>
    const $ = id => document.getElementById(id);
    function showErr(msg){ const e=$("error"); e.textContent=msg; e.style.display="block"; }

    async function generateNatal(){
      $("error").style.display="none";
      const birthdate = $("birthdate").value;
      const birthtime = $("birthtime").value;

      if (!birthdate || !birthtime){
        showErr(t("err_need_dt"));
        return;
      }

      // === åœ¨è¿™é‡Œæ¥å…¥ä½ çš„æ˜Ÿç›˜ API ===
      // ä¾‹å¦‚ï¼šconst res = await fetch('/api/natal', { method:'POST', body: JSON.stringify({...}) })
      // const data = await res.json(); ç„¶åæŠŠç»“æœç»˜åˆ¶åˆ° #chart
      // ç›®å‰å…ˆåšå ä½æ¼”ç¤ºï¼š
      try{
        const el = $("chart");
        el.innerHTML = `<div style="text-align:center;line-height:1.8">
          <div>ğŸŒŒ <b>${$("name").value || "Guest"}</b></div>
          <div>${birthdate} ${birthtime} @ ${$("place").value || "â€”"}</div>
          <div style="opacity:.8;margin-top:6px">ï¼ˆDemoï¼‰ä½ çš„æ˜Ÿç›˜å›¾å°†æ˜¾ç¤ºåœ¨æ­¤å¤„ã€‚</div>
        </div>`;
        document.getElementById("result").style.display="block";
        window.scrollTo({ top: document.getElementById("result").offsetTop - 12, behavior: "smooth" });
      }catch(e){
        showErr(t("err_generate") + e.message);
      }
    }
  </script>
</body>
</html>
