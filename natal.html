
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>æœ¬å‘½æ˜Ÿç›˜ Â· Natal Chart | 5XLiving</title>
  <link rel="icon" href="data:,">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600&family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0f14; --card:#11161dcc; --line:#1f2a36; --text:#e8edf3; --muted:#98a7b7;
      --brand:#d4af37; --gold:#d4af37; --gold2:#f2d27a; --accent:#58b9ff;
      --radius:14px; --shadow:0 8px 30px rgba(0,0,0,.35);
    }
    html,body{height:100%}
    body{
      margin:0; color:var(--text);
      background: radial-gradient(1200px 600px at 70% -10%, #16202b 10%, transparent 60%) no-repeat,
                  linear-gradient(180deg,#0b0f14,#0b0f14);
      font-family: Inter,system-ui,-apple-system,"Noto Sans SC","Segoe UI",Roboto,Arial,sans-serif;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    body::before{content:""; position:fixed; inset:0; z-index:-2; background:#090d13 url('') center/cover no-repeat; filter:brightness(.45) saturate(.9) blur(2px)}
    .container{max-width:1100px;margin:0 auto;padding:24px 16px 80px}

    /* â€”â€” ç»Ÿä¸€å¤´éƒ¨ â€”â€” */
    .site-header{position:sticky;top:0;z-index:10;background:#0b0f14cc;border-bottom:1px solid #0f1622;backdrop-filter:saturate(140%) blur(12px)}
    .head-inner{display:flex;align-items:center;justify-content:space-between;gap:14px;padding:14px 16px}
    .brand{display:flex; align-items:center; gap:10px; text-decoration:none; color:var(--text)}
    .brand-badge{display:inline-grid; place-items:center; width:34px; height:34px; border-radius:8px; background:linear-gradient(180deg,#0e1520,#0b1018); border:1px solid #2a3546; box-shadow:0 4px 14px rgba(0,0,0,.35); font-weight:800; color:#ffe084}
    .title{font-family:"Noto Serif SC",serif; font-weight:700; letter-spacing:.02em}
    .title a{ color: inherit; text-decoration: none; }
    .title a:hover{ text-decoration: underline; text-underline-offset: 3px; }
    .lang{display:flex; align-items:center; gap:8px}
    .lang label{white-space:nowrap; color:var(--muted)}
    .lang select{appearance:none; min-width:170px; border-radius:10px; border:1px solid #243244; background:#0e1520; color:#e8edf3; padding:10px 34px 10px 12px; font-size:.95rem; background-image:url("data:image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2398a7b7' stroke-width='2' fill='none'/%3E%3C/svg%3E"); background-repeat:no-repeat; background-position:calc(100% - 12px) 50%}
    @media (max-width:520px){ .title{font-size:1rem} .lang select{min-width:140px} }

    /* â€”â€” é¡µé¢ç»“æ„ â€”â€” */
    .h1{margin:12px 0 6px; color:#ffe084; font-weight:800; font-size:1.8rem}
    .sub{color:var(--muted)}
    .card{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);backdrop-filter:blur(10px);padding:18px;margin:16px 0}
    .row{display:grid; gap:12px; grid-template-columns:1fr}
    @media(min-width:760px){ .row.cols-2{grid-template-columns:1fr 1fr} .row.cols-3{grid-template-columns:1fr 1fr 1fr} }
    label.muted{display:block;margin-bottom:4px}
    input,select{width:100%;box-sizing:border-box;border-radius:12px;border:1px solid #243244;background:#0e1520;color:var(--text);padding:12px 12px;font-size:15px;outline:none}
    input::placeholder{color:#6f8092}
    .btn{display:inline-grid;place-items:center;padding:12px 16px;border-radius:12px;border:1px solid #e6c76e;background:linear-gradient(180deg,#fff9e6,#e6c76e);color:#191919;font-weight:800;cursor:pointer}
    .btn[disabled]{opacity:.6;cursor:not-allowed}
    .btn.ghost{background:transparent;color:var(--gold2);border:1px solid rgba(212,175,55,.45);box-shadow:none}

    /* â€”â€” ç®€æ˜“æŠ¥å‘Šæ ·å¼ â€”â€” */
    .report{margin-top:12px;display:grid;gap:10px}
    .report .sec{padding:12px;border:1px solid var(--line);background:#0e1520;border-radius:12px}
    .report .sec h3{margin:0 0 6px;color:var(--gold2);font-size:1.05rem}
    .report p,.report li{line-height:1.7}
  </style>
</head>
<body>
  <!-- ç»Ÿä¸€å¤´éƒ¨ -->
  <header class="site-header">
    <div class="head-inner container">
      <a class="brand" href="#" target="_self" rel="nofollow">
        <span class="brand-badge">5X</span>
        <span class="title">5xLiving Â· <span data-i18n="page_title">æœ¬å‘½æ˜Ÿç›˜è§£æ</span></span>
      </a>

      <div class="lang">
        <label for="langSelect" class="muted" data-i18n="lang_label">è¯­è¨€</label>
        <select id="langSelect" aria-label="Language">
          <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
          <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
          <option value="en">English</option>
          <option value="ja">æ—¥æœ¬èª</option>
          <option value="th">à¹„à¸—à¸¢</option>
          <option value="ms">Bahasa Melayu</option>
        </select>
      </div>
    </div>
  </header>

  <main class="container">
    <h1 class="h1" data-i18n="page_title">æœ¬å‘½æ˜Ÿç›˜è§£æ</h1>
    <p class="sub" data-i18n="page_sub">è¯·è¾“å…¥å‡ºç”Ÿèµ„æ–™ï¼Œæˆ‘ä»¬å°†ä¸ºä½ ç»˜åˆ¶ä¸“å±çš„æœ¬å‘½æ˜Ÿå›¾ï¼ˆæ¼”ç¤ºç‰ˆï¼‰ã€‚</p>

    <!-- è¡¨å•åŒºåŸŸ -->
    <section class="card">
      <div class="row cols-3">
        <div>
          <label class="muted" for="name" data-i18n="label_name">å§“åï¼ˆå¯é€‰ï¼‰</label>
          <input id="name" type="text" data-i18n-ph="ph_name" placeholder="ä½ çš„ç§°å‘¼ï¼ˆç”¨äºä¸ªæ€§åŒ–ï¼‰" />
        </div>
        <div>
          <label class="muted" for="gender" data-i18n="gender_label">æ€§åˆ«</label>
          <select id="gender">
            <option value="u" data-i18n="opt_gender_confidential">ä¸é€éœ²</option>
            <option value="m" data-i18n="opt_gender_male">ç”·æ€§</option>
            <option value="f" data-i18n="opt_gender_female">å¥³æ€§</option>
          </select>
        </div>
        <div>
          <label class="muted" for="place" data-i18n="label_place">å‡ºç”Ÿåœ°ç‚¹</label>
          <input id="place" type="text" data-i18n-ph="ph_place" placeholder="åŸå¸‚æˆ–åæ ‡ï¼Œå¦‚ï¼šTaipei / 25.03,121.56" />
        </div>
      </div>
      <div class="row cols-3" style="margin-top:10px">
        <div>
          <label class="muted" for="birthdate" data-i18n="label_birthdate">å‡ºç”Ÿæ—¥æœŸ</label>
          <input id="birthdate" type="date" />
        </div>
        <div>
          <label class="muted" for="birthtime" data-i18n="label_birthtime">å‡ºç”Ÿæ—¶é—´</label>
          <!-- é»˜è®¤ 12:00ï¼Œé¿å…ç©ºå¯¼è‡´ä¸ç”Ÿæˆ -->
          <input id="birthtime" type="time" value="12:00" step="60" />
        </div>
        <div style="display:flex;align-items:flex-end;gap:10px">
          <button id="genBtn" class="btn" type="button" data-i18n="btn_generate">ç”Ÿæˆæ˜Ÿç›˜</button>
          <button id="demoBtn" class="btn ghost" type="button" data-i18n="btn_demo">ç¤ºä¾‹</button>
        </div>
      </div>
      <div id="formNote" class="muted" style="margin-top:8px" data-i18n="note_privacy">æç¤ºï¼šä»…åœ¨æœ¬åœ°æ¼”ç¤ºç”¨ï¼Œä¸ä¼šä¸Šä¼ ä½ çš„ä¸ªäººä¿¡æ¯ã€‚</div>
    </section>

    <!-- ç»“æœåŒºåŸŸ -->
    <section id="result" class="card" style="display:none">
      <h2 style="margin:0 0 10px;color:var(--gold)">ä½ çš„æœ¬å‘½æŠ¥å‘Š</h2>
      <div id="chartSummary" class="muted"></div>
      <div id="chartReport" class="report"></div>
    </section>

    <!-- ä¼šå‘˜ä¸“åŒº -->
    <section class="card section">
      <h2 class="group-title" data-i18n="vip_title">ğŸŒ™ ä¼šå‘˜åŒºåŸŸ VIP Segment</h2>
      <div class="columns">
        <div class="list-block">
          <div class="group-title" data-i18n="vip_mingli">ğŸ— å‘½ç†ç©ºé—´ä¸“å±å†…å®¹</div>
          <ul>
            <li data-i18n="vip_love">å§»ç¼˜æ–¹å‘ï¼šæ‹çˆ±ç¼˜åˆ†ã€å©šå§»èµ°åŠ¿</li>
            <li data-i18n="vip_career">äº‹ä¸šæ–¹å‘ï¼šèŒåœºå‘å±•ã€åˆ›ä¸šæ½œåŠ›</li>
            <li data-i18n="vip_wealth">è´¢è¿æ–¹å‘ï¼šè´¢ä½åˆ†æã€ç†è´¢æ—¶æœº</li>
            <li data-i18n="vip_pet">å® ç‰©å‘½ç†ï¼šä¼´ä¾£åŠ¨ç‰©çš„æ€§æ ¼ä¸ç¼˜åˆ†</li>
            <li data-i18n="vip_hepan">åˆç›˜åˆ†æï¼šå©šæœŸæ‹©æ—¥ã€æ–°ç”Ÿæ‹©æ—¶</li>
            <li data-i18n="vip_name">æµ‹ååˆ†æï¼šå…¬å¸åã€å®å®åã€å‘½åæ”¹è¿</li>
            <li data-i18n="vip_fengshui">è´¢ä½åˆç›˜ï¼šä½å®¶ / åŠå…¬å®¤åŠ¨çº¿é…åˆ</li>
          </ul>
        </div>
        <div class="list-block">
          <div class="group-title" data-i18n="vip_xinlian">ğŸŒ™ å¿ƒæ€œç©ºé—´ä¸“å±å†…å®¹</div>
          <ul>
            <li data-i18n="vip_record">çµæ€§è®°å½•ï¼šç…§ç‰‡ã€æ¢¦å¢ƒã€å£°éŸ³ã€æ„¿æœ›ç¥ˆç¥·</li>
            <li data-i18n="vip_course">å‘½ç†è¯¾ç¨‹ï¼šå…«å­— / å¡”ç½— / å æ˜Ÿ / çµæ•° / äººç±»å›¾</li>
            <li data-i18n="vip_memorial">å®¶æ—çºªå¿µç³»ç»Ÿï¼šäº²äººçµæ€§çºªå¿µ & å»¶ç»­</li>
            <li data-i18n="vip_tasks">æ¯å‘¨èƒ½é‡ç»ƒä¹  / ç¥æ˜ä»ªå¼ä»»åŠ¡</li>
            <li data-i18n="vip_shop">èƒ½é‡å•†åŸä¸“å±æŠ˜æ‰£ & å¾¡å®ˆè®¢åˆ¶</li>
          </ul>
        </div>
      </div>

      <div class="group-title" style="margin-top:14px" data-i18n="login_title">ğŸ’ ç™»å…¥ VIP åŠŸèƒ½</div>

      <section class="astro-auth">
        <div class="auth-grid">
          <!-- å·¦ä¾§ï¼šè¾“å…¥ + æ³¨å†Œ/ç™»å½• -->
          <div class="panel">
            <div class="head" data-i18n="panel_login_head">è´¦æˆ·ç™»å½• / æ³¨å†Œ</div>
            <div class="body">
              <div class="row" id="authFields">
            <label for="email" class="sr-only" data-i18n="ph_email">é‚®ç®± Email</label>
            <input
               id="email"
               name="email"
               type="email"
               inputmode="email"
               autocomplete="username"   <!-- ç™»å½•/æ³¨å†Œå»ºè®®ç”¨ usernameï¼Œå¯†ç ç®¡ç†å™¨æ›´å®¹æ˜“é…å¯¹ -->
            <label for="password" class="sr-only" data-i18n="ph_label_password">å¯†ç  Password</label>    
            <input 
               id="password" 
               type="password" 
               autocomplete="new-password" 
               placeholder="å¯†ç  Passwordï¼ˆè‡³å°‘8ä½ï¼Œå«å¤§å°å†™æ•°å­—ç¬¦å·ï¼‰" data-i18n-ph="ph_password" required/>
              </div>
              <div class="spacer"></div>
              <form id="loginForm" class="row one">
                <button class="btn block" id="loginBtn" type="submit" data-i18n="btn_login">ç™»å…¥è´¦æˆ·</button>
              </form>
              <div class="spacer"></div>
              <div class="row one">
                <button class="btn ghost block" id="resetBtn" type="button" data-i18n="btn_reset">ğŸ”‘ é‡è®¾å¯†ç </button>
              </div>
              <div class="spacer"></div>
              <form class="row one" id="registerForm">
                <button class="btn block" id="registerBtn" type="submit" data-i18n="btn_register">æ³¨å†Œè´¦æˆ·</button>
                <div class="muted" data-i18n="note_price">æ³¨å†Œè´¦å·èµ é€ä¸€æ¬¡å…è´¹ä½“éªŒ</div>
                <div class="spacer"></div>
                <div class="error-message" id="authError" style="display:none"></div>
              </form>
            </div>
          </div>

          <!-- å³ä¾§ï¼šä¼šå‘˜ä¸è¿”å› -->
          <div class="panel">
            <div class="head" data-i18n="panel_member_head">ä¼šå‘˜æœåŠ¡</div>
            <div class="body">
              <div class="row one">
                <a class="btn btn-gold block" href="https://yourshopifyshop.com/products/monthly-vip" target="_blank" rel="noopener noreferrer" data-i18n="btn_upgrade">ğŸ’ å‡çº§ä¸º VIPï¼ˆæœˆè´¹ï¼‰</a>
              </div>
              <div class="spacer"></div>
              <div class="row one">
                <a class="btn ghost block" href="https://yourshopifyshop.myshopify.com" target="_blank" rel="noopener noreferrer" data-i18n="btn_backshop">â† è¿”å›å‘½ç†å•†åŸ</a>
              </div>
              <div class="spacer"></div>
              <div class="muted" data-i18n="note_price1">$9.9 / æœˆè´¹ VIPï¼ˆå‘½ç†ç©ºé—´ + å¿ƒæ€œç©ºé—´ + çµæ€§è¯¾ç¨‹ï¼‰</div>
            </div>
          </div>
        </div>
      </section>
    </section>

    <footer>Â© 5XLiving â€¢ Astro Sanctuary</footer>
  </main>

<script>
(function(){
  'use strict';

  var LANG_KEY = 'site_lang';

  /* ===== i18nï¼ˆå¤šè¯­ï¼‰ ===== */
  var natalI18n = {
    'zh-CN': {
      lang_label:'è¯­è¨€',
      btn_login:'ç™»å½•è´¦æˆ·', btn_register:'æ³¨å†Œè´¦æˆ·', btn_reset:'ğŸ”‘ é‡è®¾å¯†ç ',
      page_title:'æœ¬å‘½æ˜Ÿç›˜ï½œNatal Chart',
      page_sub:'è¯·è¾“å…¥å‡ºç”Ÿèµ„æ–™ï¼Œæˆ‘ä»¬å°†ä¸ºä½ ç»˜åˆ¶ä¸“å±çš„æœ¬å‘½æ˜Ÿç›˜ï¼ˆæ¼”ç¤ºç‰ˆï¼‰ã€‚',
      label_name:'å§“åï¼ˆå¯é€‰ï¼‰', ph_name:'ä½ çš„ç§°å‘¼ï¼ˆç”¨äºä¸ªæ€§åŒ–ï¼‰',
      gender_label:'æ€§åˆ«', opt_gender_confidential:'ä¸é€éœ²', opt_gender_male:'ç”·æ€§', opt_gender_female:'å¥³æ€§',
      label_place:'å‡ºç”Ÿåœ°ç‚¹', ph_place:'åŸå¸‚æˆ–åæ ‡ï¼Œä¾‹å¦‚ï¼šBeijingï¼39.90, 116.40',
      label_birthdate:'å‡ºç”Ÿæ—¥æœŸ', label_birthtime:'å‡ºç”Ÿæ—¶é—´',
      btn_generate:'ç”Ÿæˆæ˜Ÿç›˜', btn_demo:'ç¤ºä¾‹', note_privacy:'è¯´æ˜ï¼šä»…ä¸ºæœ¬åœ°ç¤ºèŒƒï¼Œä¸ä¼šä¸Šä¼ ä»»ä½•ä¸ªäººæ•°æ®ã€‚',
      chart_title:'ä½ çš„æœ¬å‘½æ˜Ÿç›˜', chart_placeholder:'ï¼ˆæ­¤å¤„å¯æ¥åç«¯ç»˜å›¾æˆ–å‰ç«¯ Canvasï¼Œå½“å‰ä¸ºå ä½ï¼‰',
      panel_login_head:'è´¦æˆ·ç™»å½•ï¼æ³¨å†Œ', ph_email:'é‚®ç®± Email',
      ph_password:'å¯†ç  Passwordï¼ˆè‡³å°‘ 8 ä½ï¼Œéœ€åŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ä¸ç¬¦å·ï¼‰', ph_label_password:'å¯†ç  Password',
      chat_fab:'é—®', chat_placeholder:'æƒ³äº†è§£ä»€ä¹ˆï¼Ÿï¼ˆå¦‚ï¼šåŠŸèƒ½ã€ä¼šå‘˜è¯´æ˜ï¼‰', chat_send:'å‘é€',
      err_need_ep:'è¯·è¾“å…¥é‚®ç®±ä¸å¯†ç ', err_pwd_rule:'å¯†ç è‡³å°‘ 8 ä½ï¼Œéœ€åŒ…å«å¤§å†™/å°å†™/æ•°å­—/ç¬¦å·',
      err_email_empty:'é‚®ç®±ä¸èƒ½ä¸ºç©º', err_pwd_empty:'å¯†ç ä¸èƒ½ä¸ºç©º', err_login_fail:'ç™»å½•å¤±è´¥ï¼š',
      err_register_fail:'æ³¨å†Œå¤±è´¥ï¼š', err_reset_fail:'é‡è®¾å¤±è´¥ï¼š', err_no_account:'è´¦æˆ·ä¸å­˜åœ¨ï¼Œè¯·å…ˆæ³¨å†Œ',
      err_wrong_pwd:'å¯†ç é”™è¯¯', err_expired:'ä¼šå‘˜å·²åˆ°æœŸï¼Œè¯·ç»­è´¹', msg_reset_ok:'å·²æ›´æ–°å¯†ç ï¼Œè¯·ç”¨æ–°å¯†ç ç™»å½•ã€‚',
      chat_greeting:'ä½ å¥½ï¼Œæˆ‘æ˜¯å¿ƒæ€œç®¡å®¶ï¼Œéœ€è¦æˆ‘æ€ä¹ˆååŠ©ä½ ï¼Ÿ'
    },
    'zh-TW': {
      lang_label:'èªè¨€',
      btn_login:'ç™»å…¥å¸³è™Ÿ', btn_register:'è¨»å†Šå¸³è™Ÿ', btn_reset:'ğŸ”‘ é‡è¨­å¯†ç¢¼',
      page_title:'æœ¬å‘½æ˜Ÿç›¤ï½œNatal Chart',
      page_sub:'è«‹è¼¸å…¥å‡ºç”Ÿè³‡æ–™ï¼Œæˆ‘å€‘å°‡ç‚ºä½ ç¹ªè£½å°ˆå±¬çš„æœ¬å‘½æ˜Ÿç›¤ï¼ˆç¤ºç¯„ç‰ˆï¼‰ã€‚',
      label_name:'å§“åï¼ˆé¸å¡«ï¼‰', ph_name:'ä½ çš„ç¨±å‘¼ï¼ˆç”¨æ–¼å€‹äººåŒ–ï¼‰',
      gender_label:'æ€§åˆ¥', opt_gender_confidential:'ä¸é€éœ²', opt_gender_male:'ç”·æ€§', opt_gender_female:'å¥³æ€§',
      label_place:'å‡ºç”Ÿåœ°é»', ph_place:'åŸå¸‚æˆ–åº§æ¨™ï¼Œä¾‹å¦‚ï¼šTaipeiï¼25.03, 121.56',
      label_birthdate:'å‡ºç”Ÿæ—¥æœŸ', label_birthtime:'å‡ºç”Ÿæ™‚é–“',
      btn_generate:'ç”¢ç”Ÿæ˜Ÿç›¤', btn_demo:'ç¯„ä¾‹', note_privacy:'æé†’ï¼šåƒ…ç‚ºæœ¬æ©Ÿç¤ºç¯„ï¼Œä¸æœƒä¸Šå‚³ä»»ä½•å€‹è³‡ã€‚',
      chart_title:'ä½ çš„æœ¬å‘½æ˜Ÿç›¤', chart_placeholder:'ï¼ˆæ­¤å€å¯ä¸²æ¥å¾Œç«¯ç¹ªåœ–æˆ–å‰ç«¯ Canvasï¼Œç¾ç‚ºä½”ä½ï¼‰',
      panel_login_head:'å¸³è™Ÿç™»å…¥ï¼è¨»å†Š', ph_email:'é›»å­éƒµä»¶ Email',
      ph_password:'å¯†ç¢¼ Passwordï¼ˆè‡³å°‘ 8 ç¢¼ï¼Œéœ€åŒ…å«å¤§å°å¯«å­—æ¯ã€æ•¸å­—èˆ‡ç¬¦è™Ÿï¼‰', ph_label_password:'å¯†ç¢¼ Password',
      chat_fab:'å•', chat_placeholder:'æƒ³äº†è§£ä»€éº¼ï¼Ÿï¼ˆä¾‹å¦‚ï¼šåŠŸèƒ½ã€æœƒå“¡èªªæ˜ï¼‰', chat_send:'å‚³é€',
      err_need_ep:'è«‹è¼¸å…¥é›»å­éƒµä»¶èˆ‡å¯†ç¢¼', err_pwd_rule:'å¯†ç¢¼è‡³å°‘ 8 ç¢¼ï¼Œéœ€åŒ…å«å¤§å°å¯«å­—æ¯ã€æ•¸å­—èˆ‡ç¬¦è™Ÿ',
      err_email_empty:'é›»å­éƒµä»¶ä¸èƒ½ç‚ºç©º', err_pwd_empty:'å¯†ç¢¼ä¸èƒ½ç‚ºç©º', err_login_fail:'ç™»å…¥å¤±æ•—ï¼š',
      err_register_fail:'è¨»å†Šå¤±æ•—ï¼š', err_reset_fail:'é‡è¨­å¤±æ•—ï¼š', err_no_account:'æŸ¥ç„¡å¸³è™Ÿï¼Œè«‹å…ˆè¨»å†Š',
      err_wrong_pwd:'å¯†ç¢¼ä¸æ­£ç¢º', err_expired:'æœƒå“¡å·²åˆ°æœŸï¼Œè«‹çºŒè²»', msg_reset_ok:'å·²æ›´æ–°å¯†ç¢¼ï¼Œè«‹ä»¥æ–°å¯†ç¢¼ç™»å…¥ã€‚',
      chat_greeting:'å—¨ï¼Œæˆ‘æ˜¯å¿ƒæ€œç®¡å®¶ã€‚æœ‰ä»€éº¼éœ€è¦æˆ‘å”åŠ©ï¼Ÿ'
    },
    'en': {
      lang_label:'Language',
      btn_login:'Log in', btn_register:'Create Account', btn_reset:'ğŸ”‘ Reset Password',
      page_title:'Natal Chart',
      page_sub:'Enter your birth data to generate your personal natal chart (demo).',
      label_name:'Name (optional)', ph_name:'Your name (for personalization)',
      gender_label:'Gender', opt_gender_confidential:'Prefer not to say', opt_gender_male:'Male', opt_gender_female:'Female',
      label_place:'Place of Birth', ph_place:'City or coordinates, e.g., London / 51.50, -0.12',
      label_birthdate:'Birth Date', label_birthtime:'Birth Time',
      btn_generate:'Generate Chart', btn_demo:'Demo',
      note_privacy:'Note: local demo only â€” no personal data is uploaded.',
      chart_title:'Your Natal Chart',
      chart_placeholder:'(Hook up a backend renderer or draw via Canvas; placeholder for now)',
      panel_login_head:'Account Login / Sign-up', ph_email:'Email',
      ph_password:'Password (min 8 chars with upper/lowercase, number & symbol)', ph_label_password:'Password',
      chat_fab:'Chat', chat_placeholder:'What would you like to know? (e.g., features, membership)', chat_send:'Send',
      err_need_ep:'Enter email and password', err_pwd_rule:'Password must be 8+ and include upper/lowercase, number, and symbol',
      err_email_empty:'Email cannot be empty', err_pwd_empty:'Password cannot be empty',
      err_login_fail:'Login failed: ', err_register_fail:'Registration failed: ', err_reset_fail:'Reset failed: ',
      err_no_account:'Account not found. Please sign up first.', err_wrong_pwd:'Incorrect password',
      err_expired:'Membership expired. Please renew.', msg_reset_ok:'Password updated. Please log in with the new one.',
      chat_greeting:'Hi, Iâ€™m Xinlian Butler. How can I help?'
    },
    'ja': {
      lang_label:'è¨€èª',
      btn_login:'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ­ã‚°ã‚¤ãƒ³', btn_register:'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²', btn_reset:'ğŸ”‘ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒªã‚»ãƒƒãƒˆ',
      page_title:'å‡ºç”Ÿãƒ›ãƒ­ã‚¹ã‚³ãƒ¼ãƒ—ï½œNatal Chart',
      page_sub:'ç”Ÿå¹´æœˆæ—¥ãªã©ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€ã‚ãªãŸã ã‘ã®å‡ºç”Ÿãƒ›ãƒ­ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä½œæˆã—ã¾ã™ï¼ˆãƒ‡ãƒ¢ï¼‰ã€‚',
      label_name:'åå‰ï¼ˆä»»æ„ï¼‰', ph_name:'ãŠåå‰ï¼ˆãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºç”¨ï¼‰',
      gender_label:'æ€§åˆ¥', opt_gender_confidential:'éå…¬é–‹', opt_gender_male:'ç”·æ€§', opt_gender_female:'å¥³æ€§',
      label_place:'å‡ºç”Ÿåœ°', ph_place:'éƒ½å¸‚ã¾ãŸã¯åº§æ¨™ ä¾‹ï¼šTokyoï¼35.68, 139.76',
      label_birthdate:'ç”Ÿå¹´æœˆæ—¥', label_birthtime:'å‡ºç”Ÿæ™‚åˆ»',
      btn_generate:'ãƒãƒ£ãƒ¼ãƒˆã‚’ç”Ÿæˆ', btn_demo:'ãƒ‡ãƒ¢',
      note_privacy:'æ³¨æ„ï¼šãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¢ã®ã¿ã€‚å€‹äººæƒ…å ±ã¯é€ä¿¡ã•ã‚Œã¾ã›ã‚“ã€‚',
      chart_title:'ã‚ãªãŸã®å‡ºç”Ÿãƒ›ãƒ­ã‚¹ã‚³ãƒ¼ãƒ—',
      chart_placeholder:'ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é€£æºã¾ãŸã¯ Canvas æç”»ã‚’æƒ³å®šã—ãŸãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ï¼‰',
      panel_login_head:'ãƒ­ã‚°ã‚¤ãƒ³ï¼æ–°è¦ç™»éŒ²', ph_email:'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹',
      ph_password:'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆ8æ–‡å­—ä»¥ä¸Šãƒ»è‹±å¤§å°ï¼æ•°å­—ï¼è¨˜å·ã‚’å«ã‚€ï¼‰', ph_label_password:'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰',
      chat_fab:'å•', chat_placeholder:'ä½•ã‚’çŸ¥ã‚ŠãŸã„ã§ã™ã‹ï¼Ÿï¼ˆä¾‹ï¼šæ©Ÿèƒ½ãƒ»ä¼šå“¡æ¡ˆå†…ï¼‰', chat_send:'é€ä¿¡',
      err_need_ep:'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', err_pwd_rule:'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã§ã€è‹±å¤§å°ãƒ»æ•°å­—ãƒ»è¨˜å·ã‚’å«ã‚ã¦ãã ã•ã„',
      err_email_empty:'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯å¿…é ˆã§ã™', err_pwd_empty:'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯å¿…é ˆã§ã™',
      err_login_fail:'ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—ï¼š', err_register_fail:'ç™»éŒ²å¤±æ•—ï¼š', err_reset_fail:'ãƒªã‚»ãƒƒãƒˆã«å¤±æ•—ï¼š',
      err_no_account:'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚å…ˆã«ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚', err_wrong_pwd:'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“',
      err_expired:'ä¼šå“¡æœŸé™ãŒåˆ‡ã‚Œã¦ã„ã¾ã™ã€‚æ›´æ–°ã—ã¦ãã ã•ã„ã€‚', msg_reset_ok:'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚æ–°ã—ã„æƒ…å ±ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚',
      chat_greeting:'ã“ã‚“ã«ã¡ã¯ã€å¿ƒæ€œãƒãƒˆãƒ©ãƒ¼ã§ã™ã€‚ã©ã†ãŠæ‰‹ä¼ã„ã§ãã¾ã™ã‹ï¼Ÿ'
    },
    'th': {
      lang_label:'à¸ à¸²à¸©à¸²',
      btn_login:'à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š', btn_register:'à¸ªà¸¡à¸±à¸„à¸£à¸šà¸±à¸à¸Šà¸µ', btn_reset:'ğŸ”‘ à¸£à¸µà¹€à¸‹à¹‡à¸•à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™',
      page_title:'à¸”à¸§à¸‡à¸à¸³à¹€à¸™à¸´à¸”ï½œNatal Chart',
      page_sub:'à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸§à¸±à¸™ à¹€à¸§à¸¥à¸² à¹à¸¥à¸°à¸ªà¸–à¸²à¸™à¸—à¸µà¹ˆà¹€à¸à¸´à¸” à¹€à¸à¸·à¹ˆà¸­à¸ªà¸£à¹‰à¸²à¸‡à¸”à¸§à¸‡à¸à¸³à¹€à¸™à¸´à¸”à¹€à¸‰à¸à¸²à¸°à¸•à¸±à¸§ (à¹€à¸”à¹‚à¸¡)',
      label_name:'à¸Šà¸·à¹ˆà¸­ (à¹„à¸¡à¹ˆà¸šà¸±à¸‡à¸„à¸±à¸š)', ph_name:'à¸Šà¸·à¹ˆà¸­à¸‚à¸­à¸‡à¸„à¸¸à¸“ (à¹€à¸à¸·à¹ˆà¸­à¸›à¸£à¸±à¸šà¹ƒà¸«à¹‰à¹€à¸«à¸¡à¸²à¸°à¸ªà¹ˆà¸§à¸™à¸šà¸¸à¸„à¸„à¸¥)',
      gender_label:'à¹€à¸à¸¨', opt_gender_confidential:'à¹„à¸¡à¹ˆà¸£à¸°à¸šà¸¸', opt_gender_male:'à¸Šà¸²à¸¢', opt_gender_female:'à¸«à¸à¸´à¸‡',
      label_place:'à¸ªà¸–à¸²à¸™à¸—à¸µà¹ˆà¹€à¸à¸´à¸”', ph_place:'à¹€à¸¡à¸·à¸­à¸‡à¸«à¸£à¸·à¸­à¸à¸´à¸à¸±à¸” à¹€à¸Šà¹ˆà¸™ Bangkok / 13.75, 100.50',
      label_birthdate:'à¸§à¸±à¸™à¹€à¸à¸´à¸”', label_birthtime:'à¹€à¸§à¸¥à¸²à¹€à¸à¸´à¸”',
      btn_generate:'à¸ªà¸£à¹‰à¸²à¸‡à¹à¸œà¸™à¸ à¸¹à¸¡à¸´', btn_demo:'à¹€à¸”à¹‚à¸¡',
      note_privacy:'à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸: à¹€à¸”à¹‚à¸¡à¸ à¸²à¸¢à¹ƒà¸™à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™ à¹„à¸¡à¹ˆà¸¡à¸µà¸à¸²à¸£à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§',
      chart_title:'à¸”à¸§à¸‡à¸à¸³à¹€à¸™à¸´à¸”à¸‚à¸­à¸‡à¸„à¸¸à¸“',
      chart_placeholder:'(à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¹€à¸£à¸™à¹€à¸”à¸­à¸£à¹Œà¸à¸±à¹ˆà¸‡à¹€à¸‹à¸´à¸£à¹Œà¸Ÿà¹€à¸§à¸­à¸£à¹Œà¸«à¸£à¸·à¸­à¸§à¸²à¸”à¸”à¹‰à¸§à¸¢ Canvas â€” à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡)',
      panel_login_head:'à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šï¼à¸ªà¸¡à¸±à¸„à¸£à¸ªà¸¡à¸²à¸Šà¸´à¸', ph_email:'à¸­à¸µà¹€à¸¡à¸¥',
      ph_password:'à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™ (à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 8 à¸•à¸±à¸§ à¸£à¸§à¸¡à¸•à¸±à¸§à¸à¸´à¸¡à¸à¹Œà¹ƒà¸«à¸à¹ˆ/à¹€à¸¥à¹‡à¸ à¸•à¸±à¸§à¹€à¸¥à¸‚ à¹à¸¥à¸°à¸ªà¸±à¸à¸¥à¸±à¸à¸©à¸“à¹Œ)', ph_label_password:'à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™',
      chat_fab:'à¸–à¸²à¸¡', chat_placeholder:'à¸­à¸¢à¸²à¸à¸—à¸£à¸²à¸šà¹€à¸£à¸·à¹ˆà¸­à¸‡à¹ƒà¸”? (à¹€à¸Šà¹ˆà¸™ à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¸«à¸£à¸·à¸­à¸£à¸°à¸šà¸šà¸ªà¸¡à¸²à¸Šà¸´à¸)', chat_send:'à¸ªà¹ˆà¸‡',
      err_need_ep:'à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸­à¸µà¹€à¸¡à¸¥à¹à¸¥à¸°à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™', err_pwd_rule:'à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 8 à¸•à¸±à¸§ à¹à¸¥à¸°à¸•à¹‰à¸­à¸‡à¸¡à¸µà¸•à¸±à¸§à¸à¸´à¸¡à¸à¹Œà¹ƒà¸«à¸à¹ˆ/à¹€à¸¥à¹‡à¸ à¸•à¸±à¸§à¹€à¸¥à¸‚ à¹à¸¥à¸°à¸ªà¸±à¸à¸¥à¸±à¸à¸©à¸“à¹Œ',
      err_email_empty:'à¸­à¸µà¹€à¸¡à¸¥à¸«à¹‰à¸²à¸¡à¸§à¹ˆà¸²à¸‡', err_pwd_empty:'à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¸«à¹‰à¸²à¸¡à¸§à¹ˆà¸²à¸‡',
      err_login_fail:'à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ: ', err_register_fail:'à¸ªà¸¡à¸±à¸„à¸£à¸ªà¸¡à¸²à¸Šà¸´à¸à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ: ',
      err_reset_fail:'à¸£à¸µà¹€à¸‹à¹‡à¸•à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ: ', err_no_account:'à¹„à¸¡à¹ˆà¸à¸šà¸šà¸±à¸à¸Šà¸µ à¸à¸£à¸¸à¸“à¸²à¸ªà¸¡à¸±à¸„à¸£à¸à¹ˆà¸­à¸™',
      err_wrong_pwd:'à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡', err_expired:'à¸ªà¸¡à¸²à¸Šà¸´à¸à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸ à¸à¸£à¸¸à¸“à¸²à¸•à¹ˆà¸­à¸­à¸²à¸¢à¸¸',
      msg_reset_ok:'à¸­à¸±à¸›à¹€à¸”à¸•à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¹à¸¥à¹‰à¸§ à¹‚à¸›à¸£à¸”à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¸”à¹‰à¸§à¸¢à¸£à¸«à¸±à¸ªà¹ƒà¸«à¸¡à¹ˆ',
      chat_greeting:'à¸ªà¸§à¸±à¸ªà¸”à¸µà¸„à¸£à¸±à¸š/à¸„à¹ˆà¸° à¸‰à¸±à¸™à¸„à¸·à¸­à¸œà¸¹à¹‰à¸Šà¹ˆà¸§à¸¢à¸‹à¸´à¸™à¹€à¸«à¸¥à¸µà¸¢à¸™ à¸¡à¸µà¸­à¸°à¹„à¸£à¹ƒà¸«à¹‰à¸Šà¹ˆà¸§à¸¢à¹„à¸«à¸¡'
    },
    'ms': {
      lang_label:'Bahasa',
      btn_login:'Log Masuk', btn_register:'Daftar Akaun', btn_reset:'ğŸ”‘ Tetapkan Semula Kata Laluan',
      page_title:'Carta Kelahiranï½œNatal Chart',
      page_sub:'Masukkan data kelahiran anda untuk jana carta kelahiran peribadi (demo).',
      label_name:'Nama (pilihan)', ph_name:'Nama anda (untuk personalisasi)',
      gender_label:'Jantina', opt_gender_confidential:'Rahsia', opt_gender_male:'Lelaki', opt_gender_female:'Perempuan',
      label_place:'Tempat Lahir', ph_place:'Bandar atau koordinat, cth: Kuala Lumpur / 3.14, 101.69',
      label_birthdate:'Tarikh Lahir', label_birthtime:'Masa Lahir',
      btn_generate:'Jana Carta', btn_demo:'Demo',
      note_privacy:'Nota: demo setempat sahaja â€” tiada data peribadi dihantar.',
      chart_title:'Carta Kelahiran Anda',
      chart_placeholder:'(Boleh sambung renderer belakang atau lukis melalui Canvas â€” tempat letak sementara)',
      panel_login_head:'Log Masukï¼Daftar', ph_email:'Emel',
      ph_password:'Kata Laluan (â‰¥8 aksara, huruf besar/kecil, nombor & simbol)', ph_label_password:'Kata Laluan',
      chat_fab:'Chat', chat_placeholder:'Apa yang anda ingin tahu? (cth: fungsi, keahlian)', chat_send:'Hantar',
      err_need_ep:'Masukkan emel dan kata laluan', err_pwd_rule:'Kata laluan mesti â‰¥8 dan mengandungi huruf besar/kecil, nombor dan simbol',
      err_email_empty:'Emel tidak boleh kosong', err_pwd_empty:'Kata laluan tidak boleh kosong',
      err_login_fail:'Gagal log masuk: ', err_register_fail:'Gagal mendaftar: ',
      err_reset_fail:'Gagal tetapkan semula: ', err_no_account:'Akaun tidak ditemui. Sila daftar dahulu.',
      err_wrong_pwd:'Kata laluan tidak sah', err_expired:'Keahlian tamat tempoh. Sila perbaharui.',
      msg_reset_ok:'Kata laluan dikemas kini. Log masuk dengan yang baharu.',
      chat_greeting:'Hai, saya Xinlian Butler. Bagaimana saya boleh bantu?'
    }
  };

  var I18N = natalI18n;

  /* ===== å¤ªé˜³æ˜Ÿåº§åˆ¤å®šï¼ˆè¿‘ä¼¼æ—¥æœŸæ®µï¼‰ ===== */
  var SIGN_LIST = [
    {key:'Aries',start:[3,21],end:[4,19],el:'fire', name:{'zh-CN':'ç™½ç¾Šåº§','zh-TW':'ç‰¡ç¾Šåº§','en':'Aries'}},
    {key:'Taurus',start:[4,20],end:[5,20],el:'earth',name:{'zh-CN':'é‡‘ç‰›åº§','zh-TW':'é‡‘ç‰›åº§','en':'Taurus'}},
    {key:'Gemini',start:[5,21],end:[6,21],el:'air',  name:{'zh-CN':'åŒå­åº§','zh-TW':'é›™å­åº§','en':'Gemini'}},
    {key:'Cancer',start:[6,22],end:[7,22],el:'water',name:{'zh-CN':'å·¨èŸ¹åº§','zh-TW':'å·¨èŸ¹åº§','en':'Cancer'}},
    {key:'Leo',start:[7,23],end:[8,22],el:'fire',   name:{'zh-CN':'ç‹®å­åº§','zh-TW':'ç…å­åº§','en':'Leo'}},
    {key:'Virgo',start:[8,23],end:[9,22],el:'earth',name:{'zh-CN':'å¤„å¥³åº§','zh-TW':'è™•å¥³åº§','en':'Virgo'}},
    {key:'Libra',start:[9,23],end:[10,23],el:'air', name:{'zh-CN':'å¤©ç§¤åº§','zh-TW':'å¤©ç§¤åº§','en':'Libra'}},
    {key:'Scorpio',start:[10,24],end:[11,22],el:'water',name:{'zh-CN':'å¤©èåº§','zh-TW':'å¤©è åº§','en':'Scorpio'}},
    {key:'Sagittarius',start:[11,23],end:[12,21],el:'fire',name:{'zh-CN':'å°„æ‰‹åº§','zh-TW':'å°„æ‰‹åº§','en':'Sagittarius'}},
    {key:'Capricorn',start:[12,22],end:[1,19],el:'earth',name:{'zh-CN':'æ‘©ç¾¯åº§','zh-TW':'æ‘©ç¾¯åº§','en':'Capricorn'}},
    {key:'Aquarius',start:[1,20],end:[2,18],el:'air', name:{'zh-CN':'æ°´ç“¶åº§','zh-TW':'æ°´ç“¶åº§','en':'Aquarius'}},
    {key:'Pisces',start:[2,19],end:[3,20],el:'water',name:{'zh-CN':'åŒé±¼åº§','zh-TW':'é›™é­šåº§','en':'Pisces'}}
  ];
  function inRange(m,d,sm,sd,em,ed){
    if (sm<em || (sm===em && sd<=ed)){
      return (m>sm || (m===sm && d>=sd)) && (m<em || (m===em && d<=ed));
    }
    return (m>sm || (m===sm && d>=sd)) || (m<em || (m===em && d<=ed)); // è·¨å¹´
  }
  function getSunSign(dateStr){
    var dt=new Date(dateStr); var m=dt.getMonth()+1, d=dt.getDate();
    for(var i=0;i<SIGN_LIST.length;i++){
      var s=SIGN_LIST[i];
      if(inRange(m,d,s.start[0],s.start[1],s.end[0],s.end[1])) return s;
    }
    return SIGN_LIST[11];
  }
  var EL_TEXT={
    'zh-CN':{fire:'ç«å…ƒç´ åæ—ºï¼šè¡ŒåŠ¨åŠ›å¼ºï¼Œå…ˆåšåæƒ³æ›´å¸¸è§ï¼›ç»™è‡ªå·±ç•™ä¸ªåœé¡¿æ›´å‡†ã€‚',
             earth:'åœŸå…ƒç´ åæ—ºï¼šåŠ¡å®ç»†è‡´ï¼›åˆ«è¢«å®Œç¾å¡ä½ï¼Œå…ˆä¸Šè·¯å†ä¼˜åŒ–ã€‚',
             air:'é£å…ƒç´ åæ—ºï¼šæƒ³æ³•å¤šå–„æ²Ÿé€šï¼›æ§åˆ¶ä¿¡æ¯è¿‡è½½ï¼Œç”¨â€œè½åœ°æ¸…å•â€ã€‚',
             water:'æ°´å…ƒç´ åæ—ºï¼šæ„Ÿå—åŠ›å¼ºï¼›å†™ä¸‹æ¥æˆ–åŠ¨èµ·æ¥ï¼Œè®©æƒ…ç»ªæµåŠ¨ã€‚'},
    'zh-TW':{fire:'ç«å…ƒç´ åæ—ºï¼šè¡Œå‹•åŠ›å¼·ï¼›åŠ å€‹ç·©è¡æ›´ç©©ã€‚',
             earth:'åœŸå…ƒç´ åæ—ºï¼šå‹™å¯¦ç´°ç·»ï¼›åˆ¥è¢«å®Œç¾ä¸»ç¾©å¡ä½ã€‚',
             air:'é¢¨å…ƒç´ åæ—ºï¼šé»å­å¤šï¼›ç”¨æ¸…å–®æ”¶æŸã€‚',
             water:'æ°´å…ƒç´ åæ—ºï¼šæ„Ÿå—åŠ›å¼·ï¼›æ›¸å¯«æˆ–é‹å‹•è®“æƒ…ç·’æµå‹•ã€‚'},
    'en':{fire:'Fire-leaning: bold & fastâ€”add a pause for precision.',
          earth:'Earth-leaning: practicalâ€”ship then refine.',
          air:'Air-leaning: ideas flowâ€”tame overload with a list.',
          water:'Water-leaning: sensitiveâ€”journal or move to keep emotions flowing.'}
  };

  /* ===== æŠ¥å‘Šæ¸²æŸ“ ===== */
  function renderReport(obj){
    var lang = obj.lang && I18N[obj.lang] ? obj.lang : 'zh-CN';
    var sign=getSunSign(obj.date); var signName=sign.name[lang] || sign.name['zh-CN'];
    var tips=EL_TEXT[lang][sign.el];
    var disclaimer = (lang==='zh-TW') ? 'ï¼Šç¤ºç¯„ï¼šåƒ…ä¾æ—¥æœŸæ¨å¤ªé™½æ˜Ÿåº§ï¼Œéå®Œæ•´æœ¬å‘½ç›¤ã€‚'
                    : (lang==='en')   ? '*Demo: Sun sign only (not a full chart).'
                                      : 'ï¼Šæ¼”ç¤ºï¼šä»…æŒ‰æ—¥æœŸæ¨å¤ªé˜³æ˜Ÿåº§ï¼Œéå®Œæ•´æœ¬å‘½ç›˜ã€‚';

    var container = document.querySelector('#chartReport') ||
                    document.querySelector('#chartSummary');

    if(!container){
      var tmp = document.createElement('div');
      tmp.id = 'chartReport';
      tmp.className = 'report';
      var result = document.querySelector('#result') || document.body;
      result.appendChild(tmp);
      container = tmp;
    }

    container.innerHTML =
      '<div class="sec">'+
        '<h3>'+(lang==='zh-TW'?'ç¸½è¦½':lang==='en'?'Overview':'æ¦‚è§ˆ')+'</h3>'+
        '<p>'+(obj.name?obj.name+' Â· ':'')+obj.date+' '+obj.time+' @ '+obj.place+'</p>'+
        '<p class="muted" style="opacity:.75">'+disclaimer+'</p>'+
      '</div>'+
      '<div class="sec">'+
        '<h3>'+(lang==='zh-TW'?'å¤ªé™½æ˜Ÿåº§':lang==='en'?'Sun Sign':'å¤ªé˜³æ˜Ÿåº§')+'</h3>'+
        '<p>'+ (lang==='en'?'Your Sun is in ':'ä½ çš„å¤ªé˜³åœ¨ã€Œ') + signName + (lang==='en'?'.':'ã€ã€‚') + '</p>'+
      '</div>'+
      '<div class="sec">'+
        '<h3>'+(lang==='zh-TW'?'èƒ½é‡æç¤º':lang==='en'?'Energy Tip':'èƒ½é‡æç¤º')+'</h3>'+
        '<p>'+tips+'</p>'+
      '</div>';
  }

  /* ===== è¯­è¨€å·¥å…· ===== */
  function getLang(){
    var saved = localStorage.getItem(LANG_KEY);
    if (saved && I18N[saved]) return saved;
    var raw = (navigator.language || 'zh-CN').replace('_','-');
    var map = {'zh':'zh-CN','zh-CN':'zh-CN','zh-SG':'zh-CN','zh-TW':'zh-TW','zh-HK':'zh-TW',
               'en':'en','en-US':'en','en-GB':'en','en-AU':'en',
               'ja':'ja','ja-JP':'ja','th':'th','ms':'ms'};
    return map[raw] || 'zh-CN';
  }
  function setLang(code){ localStorage.setItem(LANG_KEY, code); document.documentElement.lang = code; }
  function t(key){
    var L = I18N[getLang()] || I18N['zh-CN'];
    return L[key] || (I18N['zh-CN'][key] || key);
  }
  function applyI18n(){
    function setTxt(sel,val){ var el=document.querySelector(sel); if(el) el.textContent=val; }
    function setPh(sel,val){ var el=document.querySelector(sel); if(el) el.setAttribute('placeholder',val); }

    setTxt('[data-i18n="lang_label"]', t('lang_label'));
    var sel=document.querySelector('#langSelect'); if(sel) sel.value=getLang();
    setTxt('[data-i18n="page_title"]', t('page_title'));
    setTxt('[data-i18n="page_sub"]', t('page_sub'));
    setTxt('[data-i18n="label_name"]', t('label_name')); setPh('#name', t('ph_name'));
    setTxt('[data-i18n="gender_label"]', t('gender_label'));
    var ou=document.querySelector('#gender option[value="u"]'); if(ou) ou.textContent=t('opt_gender_confidential');
    var om=document.querySelector('#gender option[value="m"]'); if(om) om.textContent=t('opt_gender_male');
    var of=document.querySelector('#gender option[value="f"]'); if(of) of.textContent=t('opt_gender_female');
    setTxt('[data-i18n="label_place"]', t('label_place')); setPh('#place', t('ph_place'));
    setTxt('[data-i18n="label_birthdate"]', t('label_birthdate'));
    setTxt('[data-i18n="label_birthtime"]', t('label_birthtime'));
    var gb=document.querySelector('#genBtn'); if(gb) gb.textContent=t('btn_generate');
    var db=document.querySelector('#demoBtn'); if(db) db.textContent=t('btn_demo');
    setTxt('#formNote', t('note_privacy'));
  }

  /* ===== ç”Ÿæˆ ===== */
  function generateChart(){
    var nameEl=document.querySelector('#name');
    var placeEl=document.querySelector('#place');
    var dateEl=document.querySelector('#birthdate');
    var timeEl=document.querySelector('#birthtime');

    var name = nameEl && nameEl.value ? nameEl.value.trim() : '';
    var place = placeEl && placeEl.value ? placeEl.value.trim() : '';
    var d = dateEl && dateEl.value ? dateEl.value : '';
    var t = timeEl && timeEl.value ? timeEl.value : '';

    if(!d || !place){
      alert('è¯·è¡¥å…¨â€œæ—¥æœŸ/åœ°ç‚¹â€ã€‚ï¼ˆæ—¶é—´ç•™ç©ºå°†é»˜è®¤ä¸º 12:00ï¼‰');
      return;
    }
    if(!t) t='12:00';

    var summaryEl=document.querySelector('#chartSummary');
    if(summaryEl) summaryEl.textContent = (name?name+' Â· ':'') + d + ' ' + t + ' @ ' + place;
    var resultEl=document.querySelector('#result'); if(resultEl) resultEl.style.display='block';

    renderReport({name:name,date:d,time:t,place:place,lang:getLang()});
  }

  /* ===== ç¤ºä¾‹å¡«å…… ===== */
  function fillDemo(){
    var n=document.querySelector('#name'); if(n) n.value='Avery';
    var g=document.querySelector('#gender'); if(g) g.value='u';
    var p=document.querySelector('#place'); if(p) p.value='Taipei';
    var d=document.querySelector('#birthdate'); if(d) d.value='1992-08-15';
    var t=document.querySelector('#birthtime'); if(t) t.value='13:45';
    generateChart(); // ç›´æ¥å‡ºæŠ¥å‘Š
  }

  /* ===== é¡µé¢é€»è¾‘ ===== */
  document.addEventListener('DOMContentLoaded', function(){
    var sel = document.querySelector('#langSelect');
    var cur = getLang();
    if (I18N[cur]) { if (sel) sel.value = cur; document.documentElement.lang = cur; }
    else { if (sel) sel.value = 'zh-CN'; setLang('zh-CN'); }
    applyI18n();
    if (sel) sel.addEventListener('change', function(){ setLang(sel.value); applyI18n(); });

    // Buttons
    var genBtn=document.querySelector('#genBtn'); if(genBtn) genBtn.addEventListener('click', generateChart);
    var demoBtn=document.querySelector('#demoBtn'); if(demoBtn) demoBtn.addEventListener('click', fillDemo);

    // Default date today (è‹¥ä¸ºç©º)
    var bd=document.querySelector('#birthdate');
    if(bd && !bd.value){ bd.value = new Date().toISOString().split('T')[0]; }
  });

})();</script>
</body>
</html>

