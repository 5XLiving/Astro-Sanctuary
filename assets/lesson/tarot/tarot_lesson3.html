
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>å¡”ç½—è¯¾ ç¬¬3è¯¾</title>
  <style>
    body {
      background-color: #0b0b0b;
      color: #ffd700;
      font-family: "Noto Serif SC", serif;
      padding: 30px;
      max-width: 820px;
      margin: auto;
      line-height: 1.9;
      letter-spacing: 0.4px;
    }
    h1 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 30px;
    }
    section {
      background: rgba(255,255,255,0.05);
      padding: 20px;
      margin: 20px 0;
      border-left: 5px solid #ffd700;
      border-radius: 8px;
    }
    function playSpeech() {
  const synth = window.speechSynthesis;

  if (currentUtterance) {
    synth.cancel();
    document.querySelector("button").textContent = "ğŸ”Š æœ—è¯»å…¨æ–‡";
    currentUtterance = null;
    return;
  }

  const lang = document.getElementById("langSelect").value;

  // è‡ªåŠ¨æŠ“å–æ‰€æœ‰ <p data-lang=xx> å¯¹åº”è¯­è¨€çš„å†…å®¹
  const paragraphs = document.querySelectorAll(`p[data-lang="${lang}"]`);
  let combinedText = "";
  paragraphs.forEach(p => {
    combinedText += p.textContent + "\n";
  });

  if (!combinedText.trim()) {
    alert("âš ï¸ å½“å‰è¯­è¨€ä¸‹æ²¡æœ‰å¯æœ—è¯»çš„å†…å®¹");
    return;
  }

  currentUtterance = new SpeechSynthesisUtterance(combinedText);
  currentUtterance.lang = lang;
  currentUtterance.rate = 0.9;

  currentUtterance.onend = function () {
    document.querySelector("button").textContent = "ğŸ”Š æœ—è¯»å…¨æ–‡";
    currentUtterance = null;
  };

  document.querySelector("button").textContent = "â¹ï¸ åœæ­¢æœ—è¯»";

  const voices = synth.getVoices();
  const preferredVoice = voices.find(v => v.lang === lang) ||
                         voices.find(v => v.lang.startsWith(lang.split('-')[0])) ||
                         voices[0];

  if (preferredVoice) {
    currentUtterance.voice = preferredVoice;
  }

  synth.speak(currentUtterance);
}
  </style>
</head>
<body>

  <h1>ğŸ“˜ å¡”ç½—è¯¾ ç¬¬1è¯¾ï¼šå¡”ç½—ç‰Œçš„èµ·æºä¸ç¥ç§˜è±¡å¾</h1>

  <label for="langSelect">ğŸ™ï¸ æ’­æ”¾è¯­è¨€ï¼š</label>
  <select id="langSelect">
    <option value="zh-CN">ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰</option>
    <option value="zh-TW">ä¸­æ–‡ï¼ˆç¹é«”ï¼‰</option>
    <option value="en">English</option>
    <option value="ja">æ—¥æœ¬èª</option>
    <option value="ko">í•œêµ­ì–´</option>
    <option value="fr">FranÃ§ais</option>
    <option value="de">Deutsch</option>
    <option value="es">EspaÃ±ol</option>
    <option value="id">Bahasa Indonesia</option>
    <option value="th">à¸ à¸²à¸©à¸²à¹„à¸—à¸¢</option>
  </select>

  <button onclick="playSpeech()">ğŸ”Š æœ—è¯»å…¨æ–‡</button>

  <section>
    <h2>âš–ï¸ 11 æ­£ä¹‰ï¼ˆJusticeï¼‰</h2>
    <p data-lang="zh-CN">
      ç¬¬11å¼  æ­£ä¹‰ç‰Œ ï¼ˆJusticeï¼‰ ä»£è¡¨å…¬å¹³ã€å…¬æ­£ã€å› æœæŠ¥åº”ã€‚ä»£è¡¨å†³æ–­åŠ›ã€å¥‘çº¦å…³ç³»ä¸è´£ä»»ã€‚
    </p>
  </section>

  <section>
    <h2>ğŸ”« 12 åŠäººï¼ˆThe Hanged Manï¼‰</h2>
    <p data-lang="zh-CN">
      ç¬¬12å¼  åŠäººç‰Œ ï¼ˆThe Hanged Manï¼‰ä»£è¡¨åœé¡¿ã€ç‰ºç‰²ã€æ¢ä½æ€è€ƒã€‚è±¡å¾æ”¾ä¸‹æ‰§å¿µï¼Œä»¥æ–°çš„çœ¼å…‰çœ‹ä¸–ç•Œã€‚
    </p>
  </section>

  <section>
    <h2>ğŸ’€ 13 æ­»ç¥ï¼ˆDeathï¼‰</h2>
    <p data-lang="zh-CN">
      ç¬¬13å¼  æ­»ç¥ç‰Œï¼ˆDeathï¼‰ä»£è¡¨ç»“æŸã€è½¬å˜ã€é‡ç”Ÿã€‚ä¸æ˜¯ç¾éš¾ï¼Œè€Œæ˜¯ä¸€ä¸ªé˜¶æ®µçš„è½å¹•ä¸é‡å¯ã€‚
    </p>
  </section>

  <section>
    <h2>ğŸº 14 èŠ‚åˆ¶ï¼ˆTemperanceï¼‰</h2>
    <p data-lang="zh-CN">
      ç¬¬14å¼  èŠ‚åˆ¶ç‰Œ ï¼ˆTemperanceï¼‰ä»£è¡¨å¹³è¡¡ã€æ•´åˆã€ä¸­åº¸ä¹‹é“ã€‚å¼ºè°ƒå†…å¤–åè°ƒä¸èº«å¿ƒèåˆã€‚
    </p>
  </section>

  <section>
    <h2>ğŸ˜ˆ 15 é­”é¬¼ï¼ˆThe Devilï¼‰</h2>
    <p data-lang="zh-CN">
      ç¬¬15å¼  é­”é¬¼ç‰Œ ï¼ˆThe Devilï¼‰ ä»£è¡¨æ¬²æœ›ã€æŸç¼šã€ç‰©è´¨è¯±æƒ‘ã€‚æé†’æˆ‘ä»¬å¯Ÿè§‰å†…åœ¨çš„æ‰§ç€ä¸ä¾èµ–ã€‚
    </p>
  </section>

  <section>
    <h2>ğŸ° 16 å¡”ï¼ˆThe Towerï¼‰</h2>
    <p data-lang="zh-CN">
      ç¬¬16å¼  å¡”ç‰Œ ï¼ˆThe Towerï¼‰ ä»£è¡¨å´©è§£ã€çªå˜ã€è§‰é†’ã€‚å¸¸è±¡å¾çªå¦‚å…¶æ¥çš„æ”¹å˜ï¼Œæ˜¯å¿…è¦çš„éœ‡æ’¼æ•™è‚²ã€‚
    </p>
  </section>

  <section>
    <h2>ğŸŒŸ 17 æ˜Ÿæ˜Ÿï¼ˆThe Starï¼‰</h2>
    <p data-lang="zh-CN">
      ç¬¬17å¼  æ˜Ÿæ˜Ÿç‰Œ ï¼ˆThe Starï¼‰ ä»£è¡¨å¸Œæœ›ã€ç–—æ„ˆã€çµæ€§ä¹‹å…‰ã€‚æŒ‡å‘å®é™çš„ä¿¡å¿µä¸çµé­‚çš„æ…°è—‰ã€‚
    </p>
  </section>

  <section>
    <h2>ğŸŒ™ 18 æœˆäº®ï¼ˆThe Moonï¼‰</h2>
    <p data-lang="zh-CN">
      ç¬¬18å¼  æœˆäº®ç‰Œ ï¼ˆThe Moonï¼‰ ä»£è¡¨æ½œæ„è¯†ã€è¿·é›¾ã€ä¸ç¡®å®šæ€§ã€‚ä»£è¡¨å†…åœ¨çš„ææƒ§ã€å¹»è±¡ä¸æ¢¦å¢ƒã€‚
    </p>
  </section>

  <section>
    <h2>ğŸŒ 19 å¤ªé˜³ï¼ˆThe Sunï¼‰</h2>
    <p data-lang="zh-CN">
      ç¬¬19å¼  å¤ªé˜³ç‰Œ ï¼ˆThe Sunï¼‰ ä»£è¡¨å…‰æ˜ã€æˆåŠŸã€å–œæ‚¦ã€‚æ˜¯ç§¯æä¸ä¸°ç››çš„èƒ½é‡è±¡å¾ï¼Œä»£è¡¨æ­£é¢å‘å±•ã€‚
    </p>
  </section>

  <section>
    <h2>ğŸ­ 20 å®¡åˆ¤ï¼ˆJudgementï¼‰</h2>
    <p data-lang="zh-CN">
      ç¬¬20å¼  å®¡åˆ¤ç‰Œ ï¼ˆJudgementï¼‰ ä»£è¡¨è‹é†’ã€è§‰çŸ¥ã€å‘½è¿å¬å”¤ã€‚æ„å‘³ç€è¿‡å»çš„æ€»ç»“ä¸çµé­‚çš„æ–°èµ·ç‚¹ã€‚
    </p>
  </section>

  <section>
    <h2>ğŸŒ 21 å®‡å®™ï¼ˆThe Worldï¼‰</h2>
    <p data-lang="zh-CN">
      ç¬¬21å¼  å®‡å®™ç‰Œ ï¼ˆThe Worldï¼‰ ä»£è¡¨åœ†æ»¡ã€å®Œæˆã€è¾¾æˆæ„¿æ™¯ã€‚æ˜¯ä¸€æ®µæ—…ç¨‹çš„ç»ˆç‚¹ï¼Œä¹Ÿæ˜¯æ–°æ—…ç¨‹çš„èµ·ç‚¹ã€‚
    </p>
  </section>

<script>
let currentUtterance = null;
const lessonId = 'tarot_lesson_1';

function playSpeech() {
  const synth = window.speechSynthesis;
  
  // å¦‚æœæ­£åœ¨æ’­æ”¾ï¼Œå…ˆåœæ­¢
  if (currentUtterance) {
    synth.cancel();
    document.querySelector("button").textContent = "ğŸ”Š æœ—è¯»å…¨æ–‡";
    currentUtterance = null;
    return;
  }

  const lang = document.getElementById("langSelect").value;
  const text = ttsData[lessonId]?.[lang];

  if (!text) {
    alert("âš ï¸ æš‚æ— æ­¤è¯­è¨€çš„è¯­éŸ³èµ„æ–™");
    return;
  }

  currentUtterance = new SpeechSynthesisUtterance(text);
  currentUtterance.lang = lang;
  currentUtterance.rate = 0.9; // ç¨æ…¢çš„è¯­é€Ÿ
  
  // è®¾ç½®è¯­éŸ³ç»“æŸå›è°ƒ
  currentUtterance.onend = function() {
    document.querySelector("button").textContent = "ğŸ”Š æœ—è¯»å…¨æ–‡";
    currentUtterance = null;
  };

  // æ›´æ–°æŒ‰é’®çŠ¶æ€
  document.querySelector("button").textContent = "â¹ï¸ åœæ­¢æœ—è¯»";

  // å°è¯•æ‰¾åˆ°åŒ¹é…çš„è¯­éŸ³
  const voices = synth.getVoices();
  const preferredVoice = voices.find(v => v.lang === lang) || 
                       voices.find(v => v.lang.startsWith(lang.split('-')[0])) || 
                       voices[0];
  
  if (preferredVoice) {
    currentUtterance.voice = preferredVoice;
  }

  synth.speak(currentUtterance);
}

// é¢„åŠ è½½è¯­éŸ³åº“
window.speechSynthesis.onvoiceschanged = function() {
  speechSynthesis.getVoices();
};

// é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
window.addEventListener('load', function() {
  speechSynthesis.getVoices(); // è§¦å‘è¯­éŸ³åŠ è½½
});
</script>

</body>
</html>
