
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>å‘½ç†ä¾›é—¨ Index</title>
  <style>
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      background-image: url('assets/images/gate.jpg');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      z-index: -1;
      pointer-events: none;
    }

    body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      color: #d4af37;
      font-family: 'Noto Serif', serif;
      text-align: center;
    }

    .container1, .container2, .container3, .container4 {
      max-width: 480px;
      margin: 30px auto;
      padding: 32px 20px;
      background-color: rgba(0, 0, 0, 0.2);
      border: 1px solid #d4af37;
      border-radius: 12px;
    }

    h1 { font-size: 2.4rem; margin-top: 40px; }

    .grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 14px;
      margin-top: 10px;
    }

    .grid a {
      display: inline-block;
      background: #222;
      color: #d4af37;
      padding: 14px 24px;
      border-radius: 6px;
      text-decoration: none;
      font-size: 1rem;
      min-width: 300px;
    }

    .gold-button {
      background-color: #d4af37;
      color: #000;
      padding: 12px 24px;
      margin: 10px;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      text-decoration: none;
      display: inline-block;
    }

    form {
      margin-top: 20px;
    }

    input {
      padding: 10px;
      margin: 5px;
      border-radius: 5px;
      border: none;
      font-size: 1rem;
    }

    button {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      background-color: #ffd700;
      color: #000;
      font-size: 1rem;
      border: 1px solid #d4af37;
      cursor: pointer;
    }

    ul { text-align: center; padding-left: 20px; }
    li { margin: 8px 0; }

    @media screen and (max-width: 480px) {
      h1 { font-size: 2rem; }
      .grid a { font-size: 1rem; padding: 14px 20px; min-width: 90%; }
    }
  </style>
</head>
<body>

  <h1>å‘½ç†ä¾›é—¨ Soul Portal</h1>

  <div class="container1">
    <h2>ğŸŒ€ å…è´¹ä½“éªŒåŒº Free Segment</h2>
    <div class="grid">
      <a href="bazi.html">å…«å­—å‘½ç†åˆ†æ</a>
      <a href="natal.html">æœ¬å‘½æ˜Ÿç›˜åˆ†æ</a>
      <a href="life_path.html">çµæ•°åˆ†æ</a>
      <a href="tarot.html">å¡”ç½—æŒ‡å¼•åˆ†æ</a>
      <a href="kyuusei.html">ä¹æ˜Ÿæ°”å­¦åˆ†æ</a>
      <a href="energy.html">èƒ½é‡ç±»å‹åˆ†æ</a>
      <a href="vedic_astrology.html">å°åº¦å‘½ç†å é™€å æ˜Ÿ</a>
    </div>
  </div>

  <div class="container2" style="display:none;">
    <h2>ğŸ— Members Segment - å¹´è´¹ä¼šå‘˜å†…å®¹é¢„è§ˆ</h2>
    <ul>
      <li>å§»ç¼˜æ–¹å‘ï¼šæ‹çˆ±ç¼˜åˆ†ã€å©šå§»èµ°åŠ¿</li>
      <li>äº‹ä¸šæ–¹å‘ï¼šèŒåœºå‘å±•ã€åˆ›ä¸šæ½œåŠ›</li>
      <li>è´¢è¿æ–¹å‘ï¼šè´¢ä½åˆ†æã€ç†è´¢æ—¶æœº</li>
      <li>å® ç‰©å‘½ç†ï¼šä¼´ä¾£åŠ¨ç‰©çš„æ€§æ ¼ä¸ç¼˜åˆ†</li>
      <li>åˆç›˜åˆ†æï¼šå©šæœŸæ‹©æ—¥ã€æ–°ç”Ÿæ‹©æ—¶</li>
      <li>æµ‹ååˆ†æï¼šå…¬å¸åã€å®å®åã€å‘½åæ”¹è¿</li>
      <li>è´¢ä½åˆç›˜ï¼šä½å®¶ / åŠå…¬å®¤åŠ¨çº¿é…åˆ</li>
    </ul>
  </div>

  <div class="container3" style="display:none;">
    <h2>ğŸŒ™ VIP Segment - å¿ƒæ€œç©ºé—´ä¸“å±å†…å®¹</h2>
    <ul>
      <li>ğŸ§˜â€â™€ï¸ çµæ€§è®°å½•ï¼šç…§ç‰‡ã€æ¢¦å¢ƒã€å£°éŸ³ã€æ„¿æœ›ç¥ˆç¥·</li>
      <li>ğŸ“˜ å‘½ç†è¯¾ç¨‹ï¼šå…«å­— / çµæ€§ / å æ˜Ÿå…¨è§£é”</li>
      <li>ğŸ“– å®¶æ—çºªå¿µç³»ç»Ÿï¼šäº²äººçµæ€§çºªå¿µ & å»¶ç»­</li>
      <li>ğŸ”® æ¯å‘¨èƒ½é‡ç»ƒä¹  / ç¥æ˜ä»ªå¼ä»»åŠ¡</li>
      <li>ğŸ›ï¸ èƒ½é‡å•†åŸä¸“å±æŠ˜æ‰£ & å¾¡å®ˆè®¢åˆ¶</li>
    </ul>
  </div>

  <div class="container4">
    <h2>ğŸ’ åŠ å…¥ä¼šå‘˜è§£é”å‘½ç†åŠŸèƒ½</h2>
    <p>$9.9 / å¹´è´¹ä¼šå‘˜ï¼ˆå‘½ç†è§£ç›˜å…¨éƒ¨å¼€æ”¾ï¼‰<br>$9.9 / æœˆè´¹ VIPï¼ˆå¿ƒæ€œç©ºé—´ + çµæ€§è¯¾ç¨‹ï¼‰</p>
    <a class="gold-button" href="https://yourshopifyshop.com/products/yearly-member">ç«‹å³æ³¨å†Œå¹´è´¹ä¼šå‘˜</a>
    <a class="gold-button" href="https://yourshopifyshop.com/products/monthly-vip">å‡çº§ä¸ºæœˆè´¹ VIP</a>

<div style="display: flex; flex-wrap: wrap; justify-content: space-between; gap: 20px;">
  <div style="flex: 1; min-width: 240px;">
    <h3>ç™»å…¥è´¦æˆ· Login</h3>
    <form onsubmit="return handleLogin(event)">
      <input type="email" id="email" placeholder="é‚®ç®± Email" required>
      <input type="password" id="password" placeholder="å¯†ç  Password" required>
      <button type="submit">ç™»å…¥è´¦æˆ·</button>
    </form>
  </div>

  <div style="flex: 1; min-width: 240px;">
  <h3>ğŸ” é‡è®¾å¯†ç  Reset Password</h3>
  <form onsubmit="return handleReset(event)">
    <input type="email" id="resetEmail" placeholder="é‚®ç®± Email" required>
    <input type="password" id="newPassword" placeholder="æ–°å¯†ç  New Password" required>
    <button type="submit">é‡è®¾å¯†ç </button>
  </form>
</div>

  <div id="status" style="margin-top:20px;"></div>
  
  <script>
    const API_KEY = "patCNZisIV0Yl7Rnf.bd657624e4227d8133ffee4466ad48e083d210e3f406938a70edacf3c3c9f6fd";
    const BASE_ID = "apphD4o8Efxs8h0fz";
    const TABLE_NAME = "Members";

    async function handleLogin(event) {
      event.preventDefault();
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value.trim();
      const status = document.getElementById("status");

      if (!email || !password) {
        status.textContent = "è«‹è¼¸å…¥ Email å’Œ å¯†ç¢¼";
        return;
      }

      status.textContent = "ç™»å…¥ä¸­...";

      const formula = `LOWER({Email})='${email.toLowerCase()}'`;
      const url = `https://api.airtable.com/v0/${BASE_ID}/${TABLE_NAME}?filterByFormula=${encodeURIComponent(formula)}`;


      try {
        const res = await fetch(url, {
          headers: {
            Authorization: "Bearer " + API_KEY
          }
        });

        const data = await res.json();

        if (!data.records || data.records.length === 0) {
          status.textContent = "æŸ¥ç„¡æ­¤å¸³è™Ÿ";
          return;
        }

const member = data.records[0].fields;
const today = new Date().toISOString().split("T")[0];
const expire = member["Expired Date"]?.split("T")[0] || "1900-01-01";

if (member.Password !== password) {
  status.textContent = "å¯†ç¢¼éŒ¯èª¤";
  return;
}

if (today > expire) {
  status.textContent = "æœƒå“¡å·²éæœŸ";
  return;
}

// å„²å­˜ç™»å…¥è³‡æ–™
localStorage.setItem("membership", member.membership);
localStorage.setItem("email", member.email);
localStorage.setItem("name", member.name || "");

if (level === "vip") {
  window.location.href = "vip_soul_sanctuary.html";
} else if (level === "yearly") {
  window.location.href = "member_astro_report.html";
} else if (level === "guest") {
  window.location.href = "guest_preview.html";
} else {
  status.textContent = `æœªçŸ¥æœƒå“¡ç­‰ç´šï¼ˆ${member.membership}ï¼‰ï¼Œè«‹è¯ç¹«å®¢æœ`;
}

      } catch (err) {
        console.error(err);
        status.textContent = "ç™»å…¥å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦";
      }
    }
  </script>
</body>
</html>
