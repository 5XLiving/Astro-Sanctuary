<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>å‘½ç†å¿ƒæ€œç©ºé—´ Â· Index</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0f14; --card:#11161dCC; --line:#1f2a36; --text:#e8edf3; --muted:#98a7b7;
      --brand:#d4af37; --accent:#58b9ff; --radius:14px; --shadow:0 8px 30px rgba(0,0,0,.35); --blur:10px;
    }
    html,body{height:100%} html{font-size:16px}
    @media(min-width:768px){ html{font-size:17px} } @media(min-width:1200px){ html{font-size:18px} }
    body{
      margin:0; color:var(--text);
      background: radial-gradient(1200px 600px at 70% -10%, #16202b 10%, transparent 60%) no-repeat,
                  linear-gradient(180deg,#0b0f14,#0b0f14);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans SC", Arial, sans-serif;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    body::before{
      content:""; position:fixed; inset:0; z-index:-2;
      background:url('assets/images/gate.jpg') center/cover no-repeat;
      filter:brightness(.45) saturate(.9) blur(2px);
    }
    .glow{position:fixed; inset:auto auto 10% -10%; width:45vw; height:45vw; max-width:700px; max-height:700px;
      background:radial-gradient(closest-side, #2a98ff33, transparent 70%); filter:blur(30px); z-index:-1; pointer-events:none;}
    .container{width:100%; max-width:1100px; padding:24px 16px 80px; margin:0 auto;}
    header{position:sticky; top:0; z-index:10; backdrop-filter:saturate(140%) blur(12px);
      background:#0b0f14cc; border-bottom:1px solid #0f1622;}
    .head-inner{display:flex; align-items:center; gap:14px; padding:16px}
    .brand-badge{width:36px; height:36px; border-radius:10px; background:linear-gradient(145deg,#273243,#0e141c);
      display:grid; place-items:center; color:var(--brand); font-weight:700; box-shadow:var(--shadow)}
    .title{font-family:"Noto Serif SC","Noto Serif",serif; font-weight:600; letter-spacing:.02em; font-size:1.1rem}
    .subtitle{color:var(--muted); font-size:.9rem}

    .section{margin-top:18px}
    .card{background:var(--card); border:1px solid var(--line); border-radius:var(--radius);
      box-shadow:var(--shadow); backdrop-filter: blur(var(--blur)); padding:18px;}
    .grid-links{display:grid; gap:12px; grid-template-columns:repeat(1,1fr)}
    @media(min-width:640px){ .grid-links{grid-template-columns:repeat(2,1fr)} }
    @media(min-width:980px){ .grid-links{grid-template-columns:repeat(3,1fr)} }
    .link-card{display:flex; align-items:center; justify-content:center; text-align:center; padding:16px 12px;
      border:1px solid #263448; background:#0e1520; border-radius:12px; text-decoration:none; color:var(--text);
      transition:transform .05s ease, box-shadow .2s ease;}
    .link-card:hover{box-shadow:0 6px 18px rgba(88,185,255,.15)}
    .group-title{font-size:1.05rem; color:#ffe084; margin:6px 0 14px}

    .row{display:grid; gap:12px}
    @media(min-width:640px){ .row{grid-template-columns:1fr 1fr 1fr} }
    input,button{
      width:100%; box-sizing:border-box; border-radius:12px; border:1px solid #243244;
      background:#0e1520; color:var(--text); padding:14px 13px; font-size:1rem; outline:none;
    }
    input::placeholder{color:#6f8092}
    .btn{background:linear-gradient(180deg,#1d2a3a,#101723); border:1px solid #28364a; font-weight:600; letter-spacing:.02em; cursor:pointer}
    .btn:hover{box-shadow:0 6px 18px rgba(88,185,255,.15), inset 0 1px 0 #2e3c50}
    .btn[disabled]{opacity:.6; cursor:not-allowed}
    .btn-gold{background:linear-gradient(180deg,#f7e7a8,#d4af37); color:#191919; border:1px solid #d4af37}

    .columns{display:grid; gap:12px; grid-template-columns:1fr}
    @media(min-width:900px){ .columns{grid-template-columns:1fr 1fr} }
    .list-block{border:1px solid #263448; background:#0e1520; border-radius:12px; padding:16px}
    .list-block ul{margin:.2rem 0 0; padding-left:1.1rem}
    .muted{color:var(--muted)} .error{color:#ff8f8f; margin-top:8px}
    footer{color:#6c7b8c; font-size:.85rem; text-align:center; padding:30px 0}
  </style>
</head>
<body>
  <div class="glow"></div>
  <header>
    <div class="head-inner container">
      <div class="brand-badge">5X</div>
      <div>
        <div class="title">å‘½ç†å¿ƒæ€œç©ºé—´ Â· Soul Sanctuary</div>
        <div class="subtitle">å…è´¹ä½“éªŒ & ä¼šå‘˜ä¸“åŒº Â· ç»Ÿä¸€é£æ ¼ç‰ˆ</div>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- å…è´¹ä½“éªŒåŒº -->
    <section class="card section">
      <div class="group-title">ğŸŒ€ å…è´¹ä½“éªŒåŒº Free Segment</div>
      <div class="grid-links">
        <a class="link-card" href="bazi.html">å…«å­—å‘½ç†åˆ†æ</a>
        <a class="link-card" href="natal.html">æœ¬å‘½æ˜Ÿç›˜åˆ†æ</a>
        <a class="link-card" href="life_path.html">çµæ•°åˆ†æ</a>
        <a class="link-card" href="tarot.html">å¡”ç½—æŒ‡å¼•åˆ†æ</a>
        <a class="link-card" href="kyuusei.html">ä¹æ˜Ÿæ°”å­¦åˆ†æ</a>
        <a class="link-card" href="energy.html">èƒ½é‡ç±»å‹åˆ†æ</a>
        <a class="link-card" href="vedic_astrology.html">å°åº¦å‘½ç†å é™€å æ˜Ÿ</a>
      </div>
    </section>

    <!-- ä¼šå‘˜ä¸“åŒº -->
    <section class="card section">
      <h2 class="group-title">ğŸŒ™ ä¼šå‘˜åŒºåŸŸ VIP Segment</h2>
      <div class="columns">
        <div class="list-block">
          <div class="group-title">ğŸ— å‘½ç†ç©ºé—´ä¸“å±å†…å®¹</div>
          <ul>
            <li>å§»ç¼˜æ–¹å‘ï¼šæ‹çˆ±ç¼˜åˆ†ã€å©šå§»èµ°åŠ¿</li>
            <li>äº‹ä¸šæ–¹å‘ï¼šèŒåœºå‘å±•ã€åˆ›ä¸šæ½œåŠ›</li>
            <li>è´¢è¿æ–¹å‘ï¼šè´¢ä½åˆ†æã€ç†è´¢æ—¶æœº</li>
            <li>å® ç‰©å‘½ç†ï¼šä¼´ä¾£åŠ¨ç‰©çš„æ€§æ ¼ä¸ç¼˜åˆ†</li>
            <li>åˆç›˜åˆ†æï¼šå©šæœŸæ‹©æ—¥ã€æ–°ç”Ÿæ‹©æ—¶</li>
            <li>æµ‹ååˆ†æï¼šå…¬å¸åã€å®å®åã€å‘½åæ”¹è¿</li>
            <li>è´¢ä½åˆç›˜ï¼šä½å®¶ / åŠå…¬å®¤åŠ¨çº¿é…åˆ</li>
          </ul>
        </div>
        <div class="list-block">
          <div class="group-title">ğŸŒ™ å¿ƒæ€œç©ºé—´ä¸“å±å†…å®¹</div>
          <ul>
            <li>çµæ€§è®°å½•ï¼šç…§ç‰‡ã€æ¢¦å¢ƒã€å£°éŸ³ã€æ„¿æœ›ç¥ˆç¥·</li>
            <li>å‘½ç†è¯¾ç¨‹ï¼šå…«å­— / å¡”ç½— / å æ˜Ÿ / çµæ•° / äººç±»å›¾</li>
            <li>å®¶æ—çºªå¿µç³»ç»Ÿï¼šäº²äººçµæ€§çºªå¿µ & å»¶ç»­</li>
            <li>æ¯å‘¨èƒ½é‡ç»ƒä¹  / ç¥æ˜ä»ªå¼ä»»åŠ¡</li>
            <li>èƒ½é‡å•†åŸä¸“å±æŠ˜æ‰£ & å¾¡å®ˆè®¢åˆ¶</li>
          </ul>
        </div>
      </div>

      <div class="group-title" style="margin-top:14px">ğŸ’ ç™»å…¥ VIP åŠŸèƒ½</div>
      <div class="row">
        <input id="email" placeholder="é‚®ç®± Email" type="email" />
        <input id="password" placeholder="å¯†ç  Passwordï¼ˆè‡³å°‘8ä½ï¼Œå«å¤§å°å†™æ•°å­—ç¬¦å·ï¼‰" type="password" />
        <button class="btn" id="registerBtn" onclick="register()">æ³¨å†Œè´¦æˆ·</button>
      </div>
      <div class="row" style="margin-top:8px">
        <button class="btn" id="loginBtn" onclick="login()">ç™»å…¥è´¦æˆ·</button>
        <a class="btn btn-gold" href="https://yourshopifyshop.com/products/monthly-vip" style="display:grid; place-items:center; text-decoration:none;">ğŸ’ å‡çº§ä¸º VIPï¼ˆæœˆè´¹ï¼‰</a>
        <a class="btn" href="https://yourshopifyshop.myshopify.com" style="display:grid; place-items:center; text-decoration:none;">â† è¿”å›å‘½ç†å•†åŸ</a>
      </div>
      <div class="muted" style="margin-top:6px">
        $9.9 / æœˆè´¹ VIPï¼ˆå‘½ç†ç©ºé—´ + å¿ƒæ€œç©ºé—´ + çµæ€§è¯¾ç¨‹ï¼‰ Â· æ³¨å†Œè´¦å·èµ é€ä¸€æ¬¡å…è´¹ä½“éªŒ
      </div>
      <div class="error" id="error" style="display:none"></div>
    </section>
  </main>

  <footer>Â© 5XLiving â€¢ Astro Sanctuary</footer>

  <script>
    // ====== Airtableï¼ˆå»ºè®®å°½å¿«è¿ç§»åˆ°åç«¯ä»£ç†ï¼Œé¿å… TOKEN æ³„éœ²ï¼‰======
    const BASE_ID = "apphD4o8Efxs8h0fz";
    const TABLE_NAME = "members";
    const TOKEN = "patrciW8c0s9IIT2m.5fa42a27dc796b099b18f118bb640d96f1361a809a2a49d3dfffd2c81acf3553";

    const $ = id => document.getElementById(id);
    function showErr(msg){ const e=$("error"); e.textContent=msg; e.style.display="block"; }
    function hideErr(){ const e=$("error"); e.style.display="none"; e.textContent=""; }

    function strongPwd(pw){
      return pw.length>=8 && /[A-Z]/.test(pw) && /[a-z]/.test(pw) && /[0-9]/.test(pw) && /[^A-Za-z0-9]/.test(pw);
    }

    async function register(){
      hideErr();
      const email = $("email").value.trim();
      const password = $("password").value.trim();
      if (!email || !password) return showErr("è¯·è¾“å…¥é‚®ç®±ä¸å¯†ç ");
      if (!strongPwd(password)) return showErr("å¯†ç è‡³å°‘8ä½ï¼Œéœ€åŒ…å«å¤§å†™/å°å†™/æ•°å­—/ç‰¹æ®Šç¬¦å·");

      // æ˜¯å¦å·²å­˜åœ¨
      const filter = encodeURIComponent(`{Email} = '${email}'`);
      const url = `https://api.airtable.com/v0/${BASE_ID}/${TABLE_NAME}?filterByFormula=${filter}`;
      const check = await fetch(url, { headers:{ Authorization:`Bearer ${TOKEN}` }});
      const json = await check.json();
      if (json.records && json.records.length>0) return showErr("æ­¤é‚®ç®±å·²æ³¨å†Œï¼Œè¯·ç›´æ¥ç™»å…¥");

      // åˆ›å»º Trialï¼ˆ+1 å¤©ï¼‰
      const today = new Date(); const tomorrow = new Date(today); tomorrow.setDate(today.getDate()+1);
      const todayStr = today.toISOString().split("T")[0]; const expired = tomorrow.toISOString().split("T")[0];

      const creating = await fetch(`https://api.airtable.com/v0/${BASE_ID}/${TABLE_NAME}`, {
        method:"POST",
        headers:{ Authorization:`Bearer ${TOKEN}`, "Content-Type":"application/json" },
        body: JSON.stringify({ fields:{
          Email: email, Password: password, Membership:"Trial", "Start Date": todayStr, "Expired Date": expired
        }})
      });

      if (creating.ok){
        localStorage.setItem("vipEmail", email);
        location.href = "vip_trial.html";
      } else {
        const t = await creating.text(); showErr("æ³¨å†Œå¤±è´¥ï¼š" + t);
      }
    }

    async function login(){
      hideErr();
      const email = $("email").value.trim();
      const password = $("password").value.trim();
      if (!email || !password) return showErr("è¯·è¾“å…¥é‚®ç®±ä¸å¯†ç ");

      const filter = encodeURIComponent(`{Email} = '${email}'`);
      const url = `https://api.airtable.com/v0/${BASE_ID}/${TABLE_NAME}?filterByFormula=${filter}`;

      try{
        const res = await fetch(url, { headers:{ Authorization:`Bearer ${TOKEN}` }});
        const data = await res.json();
        if (!data.records || data.records.length===0) return showErr("è´¦æˆ·ä¸å­˜åœ¨ï¼Œè¯·å…ˆæ³¨å†Œ");

        const rec = data.records[0].fields;
        if (rec.Password !== password) return showErr("å¯†ç é”™è¯¯");

        const today = new Date().toISOString().split("T")[0];
        if (rec["Expired Date"] < today) return showErr("ä¼šå‘˜å·²è¿‡æœŸï¼Œè¯·ç»­è´¹");

        localStorage.setItem("vipEmail", email);
        location.href = "https://astro.5xliving.com/vip_soul_sanctuary.html";
      }catch(e){
        showErr("ç™»å…¥å¤±è´¥ï¼š" + e.message);
        console.error(e);
      }
    }
  </script>
</body>
</html>
