<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title data-i18n="page_title">命理心怜空间 · Index</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0f14; --card:#11161dCC; --line:#1f2a36; --text:#e8edf3; --muted:#98a7b7;
      --brand:#d4af37; --accent:#58b9ff; --radius:14px; --shadow:0 8px 30px rgba(0,0,0,.35); --blur:10px;
    }
    html,body{height:100%} html{font-size:16px}
    @media(min-width:768px){ html{font-size:17px} } @media(min-width:1200px){ html{font-size:18px} }
    body{
      margin:0; color:var(--text);
      background: radial-gradient(1200px 600px at 70% -10%, #16202b 10%, transparent 60%) no-repeat,
                  linear-gradient(180deg,#0b0f14,#0b0f14);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans SC", Arial, sans-serif;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    body::before{
      content:""; position:fixed; inset:0; z-index:-2;
      background:url('assets/images/gate.jpg') center/cover no-repeat;
      filter:brightness(.45) saturate(.9) blur(2px);
    }
    .glow{position:fixed; inset:auto auto 10% -10%; width:45vw; height:45vw; max-width:700px; max-height:700px;
      background:radial-gradient(closest-side, #2a98ff33, transparent 70%); filter:blur(30px); z-index:-1; pointer-events:none;}
    .container{width:100%; max-width:1100px; padding:24px 16px 80px; margin:0 auto;}
    header{position:sticky; top:0; z-index:10; backdrop-filter:saturate(140%) blur(12px);
      background:#0b0f14cc; border-bottom:1px solid #0f1622;}
    .head-inner{display:flex; align-items:center; justify-content:space-between; gap:14px; padding:16px}
    .brand{
      display:flex; align-items:center; gap:12px;
    }
    .brand-badge{width:36px; height:36px; border-radius:10px; background:linear-gradient(145deg,#273243,#0e141c);
      display:grid; place-items:center; color:var(--brand); font-weight:700; box-shadow:var(--shadow)}
    .title{font-family:"Noto Serif SC","Noto Serif",serif; font-weight:600; letter-spacing:.02em; font-size:1.1rem}
    .subtitle{color:var(--muted); font-size:.9rem}

    /* 语言选择器 */
    .lang{display:flex; align-items:center; gap:8px}
    .lang label{color:var(--muted); font-size:.9rem}
    .lang select{
      appearance:none; border-radius:10px; border:1px solid #243244; background:#0e1520; color:var(--text);
      padding:10px 34px 10px 12px; font-size:.95rem;
      background-image:url("data:image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2398a7b7' stroke-width='2' fill='none'/%3E%3C/svg%3E");
      background-repeat:no-repeat; background-position:calc(100% - 12px) 50%;
    }

    .section{margin-top:18px}
    .card{background:var(--card); border:1px solid var(--line); border-radius:var(--radius);
      box-shadow:var(--shadow); backdrop-filter: blur(var(--blur)); padding:18px;}
    .grid-links{display:grid; gap:12px; grid-template-columns:repeat(1,1fr)}
    @media(min-width:640px){ .grid-links{grid-template-columns:repeat(2,1fr)} }
    @media(min-width:980px){ .grid-links{grid-template-columns:repeat(3,1fr)} }
    .link-card{display:flex; align-items:center; justify-content:center; text-align:center; padding:16px 12px;
      border:1px solid #263448; background:#0e1520; border-radius:12px; text-decoration:none; color:var(--text);
      transition:transform .05s ease, box-shadow .2s ease;}
    .link-card:hover{box-shadow:0 6px 18px rgba(88,185,255,.15)}
    .group-title{font-size:1.05rem; color:#ffe084; margin:6px 0 14px}

    .row{display:grid; gap:12px}
    @media(min-width:640px){ .row{grid-template-columns:1fr 1fr 1fr} }
    input,button{
      width:100%; box-sizing:border-box; border-radius:12px; border:1px solid #243244;
      background:#0e1520; color:var(--text); padding:14px 13px; font-size:1rem; outline:none;
    }
    input::placeholder{color:#6f8092}
    .btn{background:linear-gradient(180deg,#1d2a3a,#101723); border:1px solid #28364a; font-weight:600; letter-spacing:.02em; cursor:pointer}
    .btn:hover{box-shadow:0 6px 18px rgba(88,185,255,.15), inset 0 1px 0 #2e3c50}
    .btn[disabled]{opacity:.6; cursor:not-allowed}
    .btn-gold{background:linear-gradient(180deg,#f7e7a8,#d4af37); color:#191919; border:1px solid #d4af37}

    .columns{display:grid; gap:12px; grid-template-columns:1fr}
    @media(min-width:900px){ .columns{grid-template-columns:1fr 1fr} }
    .list-block{border:1px solid #263448; background:#0e1520; border-radius:12px; padding:16px}
    .list-block ul{margin:.2rem 0 0; padding-left:1.1rem}
    .muted{color:var(--muted)} .error{color:#ff8f8f; margin-top:8px}
    footer{color:#6c7b8c; font-size:.85rem; text-align:center; padding:30px 0}
  </style>
</head>
<body>
  <div class="glow"></div>
  <header>
    <div class="head-inner container">
      <div class="brand">
        <div class="brand-badge">5X</div>
        <div>
          <div class="title" data-i18n="site_title">命理心怜空间 · Soul Sanctuary</div>
          <div class="subtitle" data-i18n="site_subtitle">免费体验 & 会员专区 · 统一风格版</div>
        </div>
      </div>
      <!-- 语言选择器 -->
      <div class="lang">
        <label for="langSelect" data-i18n="lang_label">语言</label>
        <select id="langSelect" aria-label="Language">
          <option value="zh-CN">简体中文</option>
          <option value="zh-TW">繁體中文</option>
          <option value="en">English</option>
          <option value="ja">日本語</option>
          <option value="th">ไทย</option>
          <option value="ms">Bahasa Melayu</option>
        </select>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- 免费体验区 -->
    <section class="card section">
      <div class="group-title" data-i18n="free_title">🌀 免费体验区 Free Segment</div>
      <div class="grid-links">
        <a class="link-card" href="bazi.html" data-i18n="link_bazi">八字命理分析</a>
        <a class="link-card" href="natal.html" data-i18n="link_natal">本命星盘分析</a>
        <a class="link-card" href="life_path.html" data-i18n="link_life">灵数分析</a>
        <a class="link-card" href="tarot.html" data-i18n="link_tarot">塔罗指引分析</a>
        <a class="link-card" href="kyuusei.html" data-i18n="link_kyuusei">九星气学分析</a>
        <a class="link-card" href="energy.html" data-i18n="link_energy">能量类型分析</a>
        <a class="link-card" href="vedic_astrology.html" data-i18n="link_vedic">印度命理吠陀占星</a>
      </div>
    </section>

    <!-- 会员专区 -->
    <section class="card section">
      <h2 class="group-title" data-i18n="vip_title">🌙 会员区域 VIP Segment</h2>
      <div class="columns">
        <div class="list-block">
          <div class="group-title" data-i18n="vip_mingli">🗝 命理空间专属内容</div>
          <ul>
            <li data-i18n="vip_love">姻缘方向：恋爱缘分、婚姻走势</li>
            <li data-i18n="vip_career">事业方向：职场发展、创业潜力</li>
            <li data-i18n="vip_wealth">财运方向：财位分析、理财时机</li>
            <li data-i18n="vip_pet">宠物命理：伴侣动物的性格与缘分</li>
            <li data-i18n="vip_hepan">合盘分析：婚期择日、新生择时</li>
            <li data-i18n="vip_name">测名分析：公司名、宝宝名、命名改运</li>
            <li data-i18n="vip_fengshui">财位合盘：住家 / 办公室动线配合</li>
          </ul>
        </div>
        <div class="list-block">
          <div class="group-title" data-i18n="vip_xinlian">🌙 心怜空间专属内容</div>
          <ul>
            <li data-i18n="vip_record">灵性记录：照片、梦境、声音、愿望祈祷</li>
            <li data-i18n="vip_course">命理课程：八字 / 塔罗 / 占星 / 灵数 / 人类图</li>
            <li data-i18n="vip_memorial">家族纪念系统：亲人灵性纪念 & 延续</li>
            <li data-i18n="vip_tasks">每周能量练习 / 神明仪式任务</li>
            <li data-i18n="vip_shop">能量商城专属折扣 & 御守订制</li>
          </ul>
        </div>
      </div>

      <div class="group-title" style="margin-top:14px" data-i18n="login_title">💎 登入 VIP 功能</div>
      <div class="row">
        <input id="email" placeholder="邮箱 Email" type="email" autocomplete="email" data-i18n-ph="ph_email"/>
        <input id="password" placeholder="密码 Password（至少8位，含大小写数字符号）" type="password" autocomplete="new-password" data-i18n-ph="ph_password"/>
        <button class="btn" id="registerBtn" onclick="register()" data-i18n="btn_register">注册账户</button>
      </div>
      <div class="row" style="margin-top:8px">
        <button class="btn" id="loginBtn" onclick="login()" data-i18n="btn_login">登入账户</button>
        <a class="btn btn-gold" href="https://yourshopifyshop.com/products/monthly-vip" style="display:grid; place-items:center; text-decoration:none;" data-i18n="btn_upgrade">💎 升级为 VIP（月费）</a>
        <a class="btn" href="https://yourshopifyshop.myshopify.com" style="display:grid; place-items:center; text-decoration:none;" data-i18n="btn_backshop">← 返回命理商城</a>
      </div>
      <div class="row" style="margin-top:8px">
        <button class="btn" onclick="resetPassword()" data-i18n="btn_reset">🔑 重设密码</button>
      </div>
      <div class="muted" style="margin-top:6px" data-i18n="note_price">
        $9.9 / 月费 VIP（命理空间 + 心怜空间 + 灵性课程） · 注册账号赠送一次免费体验
      </div>
      <div class="error" id="error" style="display:none"></div>
    </section>
  </main>

  <footer>© 5XLiving • Astro Sanctuary</footer>

  <!-- 功能脚本（注册 / 登录） -->
  <script>
    // ====== Airtable（建议尽快迁移后端代理）======
    const BASE_ID = "apphD4o8Efxs8h0fz";
    const TABLE_NAME = "members";
    const TOKEN = "patrciW8c0s9IIT2m.5fa42a27dc796b099b18f118bb640d96f1361a809a2a49d3dfffd2c81acf3553";

    const $ = id => document.getElementById(id);
    function showErr(msg){ const e=$("error"); e.textContent=msg; e.style.display="block"; setTimeout(()=>{e.style.display='none'},4000); }
    function hideErr(){ const e=$("error"); e.style.display="none"; e.textContent=""; }

    function strongPwd(pw){
      return pw.length>=8 && /[A-Z]/.test(pw) && /[a-z]/.test(pw) && /[0-9]/.test(pw) && /[^A-Za-z0-9]/.test(pw);
    }
    const lockBtns = v => document.querySelectorAll('button').forEach(b=>b.disabled=v);

    function safeEmailFilter(email){
      const safe = (email||"").replace(/'/g,"\\'");
      return encodeURIComponent(`{Email} = '${safe}'`);
    }

    async function register(){
      hideErr(); lockBtns(true);
      try{
        const email = $("email").value.trim();
        const password = $("password").value.trim();
        if (!email || !password) return showErr(t('err_need_ep'));
        if (!strongPwd(password)) return showErr(t('err_pwd_rule'));

        // 是否已存在
        const url = `https://api.airtable.com/v0/${BASE_ID}/${TABLE_NAME}?filterByFormula=${safeEmailFilter(email)}`;
        const check = await fetch(url, { headers:{ Authorization:`Bearer ${TOKEN}` }});
        const json = await check.json();
        if (json.records && json.records.length>0) return showErr(t('err_exists'));

        // Trial +1 天
        const today = new Date(); const tomorrow = new Date(today); tomorrow.setDate(today.getDate()+1);
        const todayStr = today.toISOString().split("T")[0]; const expired = tomorrow.toISOString().split("T")[0];

        const creating = await fetch(`https://api.airtable.com/v0/${BASE_ID}/${TABLE_NAME}`, {
          method:"POST",
          headers:{ Authorization:`Bearer ${TOKEN}`, "Content-Type":"application/json" },
          body: JSON.stringify({ fields:{
            Email: email, Password: password, Membership:"Trial", "Start Date": todayStr, "Expired Date": expired
          }})
        });

        if (creating.ok){
          localStorage.setItem("vipEmail", email);
          location.href = "vip_trial.html";
        } else {
          const tmsg = await creating.text(); showErr(t('err_register_fail') + tmsg);
        }
      }catch(e){ showErr(t('err_register_fail') + e.message) }
      finally{ lockBtns(false); }
    }

    async function login(){
      hideErr(); lockBtns(true);
      try{
        const email = $("email").value.trim();
        const password = $("password").value.trim();
        if (!email || !password) return showErr(t('err_need_ep'));

        const url = `https://api.airtable.com/v0/${BASE_ID}/${TABLE_NAME}?filterByFormula=${safeEmailFilter(email)}`;
        const res = await fetch(url, { headers:{ Authorization:`Bearer ${TOKEN}` }});
        const data = await res.json();
        if (!data.records || data.records.length===0) return showErr(t('err_no_account'));

        const rec = data.records[0].fields;
        if (rec.Password !== password) return showErr(t('err_wrong_pwd'));

        const today = new Date().toISOString().split("T")[0];
        if (rec["Expired Date"] < today) return showErr(t('err_expired'));

        localStorage.setItem("vipEmail", email);
        location.href = "https://astro.5xliving.com/vip_soul_sanctuary.html";
      }catch(e){ showErr(t('err_login_fail') + e.message) }
      finally{ lockBtns(false); }
    }
  </script>

  <!-- 重设密码 + 多语言 -->
  <script>
    async function resetPassword(){
      hideErr(); lockBtns(true);
      try {
        let email = prompt(t('prompt_email'));
        if (email === null) return; email = email.trim();
        if (!email) return showErr(t('err_email_empty'));

        let newPassword = prompt(t('prompt_newpwd'));
        if (newPassword === null) return; newPassword = newPassword.trim();
        if (!newPassword) return showErr(t('err_pwd_empty'));
        if (!strongPwd(newPassword)) return showErr(t('err_pwd_rule'));

        // 查找账号
        const url = `https://api.airtable.com/v0/${BASE_ID}/${TABLE_NAME}?filterByFormula=${safeEmailFilter(email)}`;
        const res = await fetch(url, { headers:{ Authorization:`Bearer ${TOKEN}` }});
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();
        if (!data.records || data.records.length === 0) return showErr(t('err_no_account'));

        const recordId = data.records[0].id;

        // 更新密码
        const updating = await fetch(`https://api.airtable.com/v0/${BASE_ID}/${TABLE_NAME}/${recordId}`, {
          method: "PATCH",
          headers: { Authorization:`Bearer ${TOKEN}`, "Content-Type":"application/json" },
          body: JSON.stringify({ fields: { Password: newPassword } })
        });

        if (!updating.ok) {
          const tmsg = await updating.text();
          return showErr(t('err_reset_fail') + tmsg);
        }
        alert(t('msg_reset_ok'));
      } catch (e) {
        showErr(t('err_reset_fail') + e.message);
      } finally {
        lockBtns(false);
      }
    }

    // ---------- 多语言（轻量级） ----------
    const translations = {
      "zh-CN": {
        page_title:"命理心怜空间 · Index",
        site_title:"命理心怜空间 · Soul Sanctuary",
        site_subtitle:"免费体验 & 会员专区 · 统一风格版",
        lang_label:"语言",
        free_title:"🌀 免费体验区 Free Segment",
        link_bazi:"八字命理分析", link_natal:"本命星盘分析", link_life:"灵数分析",
        link_tarot:"塔罗指引分析", link_kyuusei:"九星气学分析", link_energy:"能量类型分析", link_vedic:"印度命理吠陀占星",
        vip_title:"🌙 会员区域 VIP Segment",
        vip_mingli:"🗝 命理空间专属内容",
        vip_love:"姻缘方向：恋爱缘分、婚姻走势",
        vip_career:"事业方向：职场发展、创业潜力",
        vip_wealth:"财运方向：财位分析、理财时机",
        vip_pet:"宠物命理：伴侣动物的性格与缘分",
        vip_hepan:"合盘分析：婚期择日、新生择时",
        vip_name:"测名分析：公司名、宝宝名、命名改运",
        vip_fengshui:"财位合盘：住家 / 办公室动线配合",
        vip_xinlian:"🌙 心怜空间专属内容",
        vip_record:"灵性记录：照片、梦境、声音、愿望祈祷",
        vip_course:"命理课程：八字 / 塔罗 / 占星 / 灵数 / 人类图",
        vip_memorial:"家族纪念系统：亲人灵性纪念 & 延续",
        vip_tasks:"每周能量练习 / 神明仪式任务",
        vip_shop:"能量商城专属折扣 & 御守订制",
        login_title:"💎 登入 VIP 功能",
        ph_email:"邮箱 Email",
        ph_password:"密码 Password（至少8位，含大小写数字符号）",
        btn_register:"注册账户",
        btn_login:"登入账户",
        btn_upgrade:"💎 升级为 VIP（月费）",
        btn_backshop:"← 返回命理商城",
        btn_reset:"🔑 重设密码",
        note_price:"$9.9 / 月费 VIP（命理空间 + 心怜空间 + 灵性课程） · 注册账号赠送一次免费体验",

        err_need_ep:"请输入邮箱与密码",
        err_pwd_rule:"密码至少8位，需包含大写/小写/数字/特殊符号",
        err_exists:"此邮箱已注册，请直接登入",
        err_register_fail:"注册失败：",
        err_no_account:"账户不存在，请先注册",
        err_wrong_pwd:"密码错误",
        err_expired:"会员已过期，请续费",
        err_login_fail:"登入失败：",
        prompt_email:"请输入注册邮箱：",
        err_email_empty:"邮箱不能为空",
        prompt_newpwd:"请输入新密码（至少8位，含大小写、数字、符号）：",
        err_pwd_empty:"密码不能为空",
        err_reset_fail:"重设失败：",
        msg_reset_ok:"密码已成功更新，请用新密码重新登入。"
      },
      "zh-TW": {
        page_title:"命理心憐空間 · Index",
        site_title:"命理心憐空間 · Soul Sanctuary",
        site_subtitle:"免費體驗 & 會員專區 · 統一風格版",
        lang_label:"語言",
        free_title:"🌀 免費體驗區 Free Segment",
        link_bazi:"八字命理分析", link_natal:"本命星盤分析", link_life:"靈數分析",
        link_tarot:"塔羅指引分析", link_kyuusei:"九星氣學分析", link_energy:"能量類型分析", link_vedic:"印度命理吠陀占星",
        vip_title:"🌙 會員區域 VIP Segment",
        vip_mingli:"🗝 命理空間專屬內容",
        vip_love:"姻緣方向：戀愛緣分、婚姻走勢",
        vip_career:"事業方向：職場發展、創業潛力",
        vip_wealth:"財運方向：財位分析、理財時機",
        vip_pet:"寵物命理：伴侶動物的性格與緣分",
        vip_hepan:"合盤分析：婚期擇日、新生擇時",
        vip_name:"測名分析：公司名、寶寶名、命名改運",
        vip_fengshui:"財位合盤：住家 / 辦公室動線配合",
        vip_xinlian:"🌙 心憐空間專屬內容",
        vip_record:"靈性記錄：照片、夢境、聲音、願望祈禱",
        vip_course:"命理課程：八字 / 塔羅 / 占星 / 靈數 / 人類圖",
        vip_memorial:"家族紀念系統：親人靈性紀念 & 延續",
        vip_tasks:"每週能量練習 / 神明儀式任務",
        vip_shop:"能量商城專屬折扣 & 御守訂製",
        login_title:"💎 登入 VIP 功能",
        ph_email:"電子郵件 Email",
        ph_password:"密碼 Password（至少8位，含大小寫數字符號）",
        btn_register:"註冊帳戶", btn_login:"登入帳戶",
        btn_upgrade:"💎 升級為 VIP（月費）", btn_backshop:"← 返回命理商城",
        btn_reset:"🔑 重設密碼",
        note_price:"$9.9 / 月費 VIP（命理空間 + 心憐空間 + 靈性課程） · 註冊贈一次免費體驗",

        err_need_ep:"請輸入電子郵件與密碼",
        err_pwd_rule:"密碼至少8位，需包含大小寫/數字/特殊符號",
        err_exists:"此郵箱已註冊，請直接登入",
        err_register_fail:"註冊失敗：",
        err_no_account:"帳戶不存在，請先註冊",
        err_wrong_pwd:"密碼錯誤",
        err_expired:"會員已過期，請續費",
        err_login_fail:"登入失敗：",
        prompt_email:"請輸入註冊郵箱：",
        err_email_empty:"郵箱不能為空",
        prompt_newpwd:"請輸入新密碼（至少8位，含大小寫、數字、符號）：",
        err_pwd_empty:"密碼不能為空",
        err_reset_fail:"重設失敗：",
        msg_reset_ok:"密碼已成功更新，請用新密碼重新登入。"
      },
      "en": {
        page_title:"Soul Sanctuary · Index",
        site_title:"Soul Sanctuary",
        site_subtitle:"Free Segment & VIP Area · Unified Style",
        lang_label:"Language",
        free_title:"🌀 Free Segment",
        link_bazi:"Bazi Reading", link_natal:"Natal Chart", link_life:"Numerology",
        link_tarot:"Tarot Guidance", link_kyuusei:"Nine Star Ki", link_energy:"Energy Type", link_vedic:"Vedic Astrology",
        vip_title:"🌙 VIP Segment",
        vip_mingli:"🗝 Astro Sanctuary · Exclusive",
        vip_love:"Love: Dating Fate, Marriage Trend",
        vip_career:"Career: Workplace, Entrepreneurship",
        vip_wealth:"Wealth: Wealth Position, Timing",
        vip_pet:"Pet Destiny: Temperament & Bond",
        vip_hepan:"Synastry: Wedding Dates, Birthtime",
        vip_name:"Name Reading: Company/Baby/Renaming",
        vip_fengshui:"Wealth & Layout: Home / Office",
        vip_xinlian:"🌙 Soul Sanctuary · Exclusive",
        vip_record:"Spiritual Logs: Photos, Dreams, Voice, Prayers",
        vip_course:"Courses: Bazi / Tarot / Astrology / Numerology / Human Design",
        vip_memorial:"Family Memorial: Spiritual Archive & Legacy",
        vip_tasks:"Weekly Energy Practices / Divine Ritual Tasks",
        vip_shop:"Store Discounts & Omamori",
        login_title:"💎 VIP Login",
        ph_email:"Email",
        ph_password:"Password (8+ chars, upper/lower/digit/symbol)",
        btn_register:"Create Account", btn_login:"Log in",
        btn_upgrade:"💎 Upgrade to VIP (Monthly)", btn_backshop:"← Back to Store",
        btn_reset:"🔑 Reset Password",
        note_price:"$9.9 / month · VIP (Astro + Soul + Courses). New account gets one free trial.",

        err_need_ep:"Enter email and password",
        err_pwd_rule:"Password must be 8+ and include upper/lowercase, number, symbol",
        err_exists:"Email already registered. Please log in.",
        err_register_fail:"Registration failed: ",
        err_no_account:"Account not found. Please register first.",
        err_wrong_pwd:"Incorrect password",
        err_expired:"Membership expired. Please renew.",
        err_login_fail:"Login failed: ",
        prompt_email:"Enter your registered email:",
        err_email_empty:"Email cannot be empty",
        prompt_newpwd:"Enter a new password (8+, upper/lower/digit/symbol):",
        err_pwd_empty:"Password cannot be empty",
        err_reset_fail:"Reset failed: ",
        msg_reset_ok:"Password updated. Please log in with the new one."
      },
      "ja": {
        page_title:"ソウル・サンクチュアリ · Index",
        site_title:"ソウル・サンクチュアリ",
        site_subtitle:"無料体験 & VIP · 統一デザイン",
        lang_label:"言語",
        free_title:"🌀 無料体験ゾーン",
        link_bazi:"四柱推命", link_natal:"ネイタルチャート", link_life:"数秘術",
        link_tarot:"タロット", link_kyuusei:"九星気学", link_energy:"エネルギータイプ", link_vedic:"ヴェーディック占星術",
        vip_title:"🌙 VIP セグメント",
        vip_mingli:"🗝 命理エリア · 限定",
        vip_love:"縁結び：恋愛・結婚の流れ",
        vip_career:"仕事：職場・起業ポテンシャル",
        vip_wealth:"金運：財位・タイミング",
        vip_pet:"ペット命理：性格とご縁",
        vip_hepan:"相性：結婚日・出産時刻",
        vip_name:"命名：会社名・赤ちゃん名・改名",
        vip_fengshui:"財位×レイアウト：住宅 / オフィス",
        vip_xinlian:"🌙 心怜エリア · 限定",
        vip_record:"スピリチュアル記録：写真/夢/音声/祈り",
        vip_course:"講座：四柱/タロット/占星/数秘/HD",
        vip_memorial:"家族メモリアル：霊的記録と継承",
        vip_tasks:"毎週エナジー練習 / 儀式タスク",
        vip_shop:"ストア割引 & お守り",
        login_title:"💎 VIP ログイン",
        ph_email:"メール",
        ph_password:"パスワード（8文字以上、大小英字・数字・記号）",
        btn_register:"アカウント作成", btn_login:"ログイン",
        btn_upgrade:"💎 VIPにアップグレード（月額）", btn_backshop:"← ストアへ戻る",
        btn_reset:"🔑 パスワード再設定",
        note_price:"$9.9/月（命理 + 心怜 + 講座）。新規登録は1回無料体験。",

        err_need_ep:"メールとパスワードを入力してください",
        err_pwd_rule:"パスワードは8文字以上で、大小英字・数字・記号を含めてください",
        err_exists:"このメールは登録済みです。ログインしてください。",
        err_register_fail:"登録失敗：",
        err_no_account:"アカウントが見つかりません。先に登録してください。",
        err_wrong_pwd:"パスワードが違います",
        err_expired:"会員期限切れ。更新してください。",
        err_login_fail:"ログイン失敗：",
        prompt_email:"登録メールを入力してください：",
        err_email_empty:"メールは必須です",
        prompt_newpwd:"新しいパスワードを入力（8文字以上、大小英字・数字・記号）：",
        err_pwd_empty:"パスワードは必須です",
        err_reset_fail:"再設定失敗：",
        msg_reset_ok:"パスワードを更新しました。新しいパスワードでログインしてください。"
      },
      "th": {
        page_title:"Soul Sanctuary · หน้าแรก",
        site_title:"Soul Sanctuary",
        site_subtitle:"ใช้งานฟรี & พื้นที่ VIP · สไตล์เดียวกัน",
        lang_label:"ภาษา",
        free_title:"🌀 พื้นที่ทดลองใช้ฟรี",
        link_bazi:"ดวงจีน (Bazi)", link_natal:"ดวงกำเนิด", link_life:"ตัวเลขชีวิต",
        link_tarot:"ไพ่ทาโรต์", link_kyuusei:"เก้าดาวคิวเซ", link_energy:"ประเภทพลังงาน", link_vedic:"โหราศาสตร์เวท",
        vip_title:"🌙 พื้นที่ VIP",
        vip_mingli:"🗝 เนื้อหาพิเศษ · Astro",
        vip_love:"ความรัก: คู่แท้/แนวโน้มแต่งงาน",
        vip_career:"การงาน: ที่ทำงาน/ศักยภาพธุรกิจ",
        vip_wealth:"การเงิน: จุดโชคลาภ/จังหวะลงทุน",
        vip_pet:"ดวงสัตว์เลี้ยง: นิสัย & สายใย",
        vip_hepan:"ความเข้ากันได้: วันแต่ง/เวลาคลอด",
        vip_name:"ตั้งชื่อ: บริษัท/ทารก/เปลี่ยนชื่อ",
        vip_fengshui:"ฮวงจุ้ยการเงิน: บ้าน / สำนักงาน",
        vip_xinlian:"🌙 เนื้อหาเฉพาะ · Soul",
        vip_record:"บันทึกจิตวิญญาณ: รูป/ความฝัน/เสียง/คำอธิษฐาน",
        vip_course:"คอร์ส: Bazi / Tarot / Astrology / Numerology / HD",
        vip_memorial:"อนุสรณ์ครอบครัว: บันทึกวิญญาณ & สืบสาน",
        vip_tasks:"ฝึกพลังงานรายสัปดาห์ / พิธีกรรม",
        vip_shop:"ส่วนลดร้านค้า & เครื่องราง",
        login_title:"💎 เข้าสู่ระบบ VIP",
        ph_email:"อีเมล",
        ph_password:"รหัสผ่าน (8+ ตัวอักษร มีพิมพ์เล็ก/ใหญ่ ตัวเลขและสัญลักษณ์)",
        btn_register:"สมัครบัญชี", btn_login:"เข้าสู่ระบบ",
        btn_upgrade:"💎 อัปเกรด VIP (รายเดือน)", btn_backshop:"← กลับร้านค้า",
        btn_reset:"🔑 รีเซ็ตรหัสผ่าน",
        note_price:"$9.9 / เดือน (Astro + Soul + คอร์ส) สมัครใหม่ใช้ฟรี 1 ครั้ง",

        err_need_ep:"กรอกอีเมลและรหัสผ่าน",
        err_pwd_rule:"รหัสผ่านต้อง 8+ ตัวอักษร และมีพิมพ์เล็ก/ใหญ่ ตัวเลข สัญลักษณ์",
        err_exists:"อีเมลนี้มีบัญชีแล้ว กรุณาเข้าสู่ระบบ",
        err_register_fail:"สมัครไม่สำเร็จ: ",
        err_no_account:"ไม่พบบัญชี กรุณาสมัครก่อน",
        err_wrong_pwd:"รหัสผ่านไม่ถูกต้อง",
        err_expired:"สมาชิกหมดอายุ กรุณาต่ออายุ",
        err_login_fail:"เข้าสู่ระบบล้มเหลว: ",
        prompt_email:"กรอกอีเมลที่สมัคร:",
        err_email_empty:"อีเมลห้ามว่าง",
        prompt_newpwd:"กรอกรหัสใหม่ (8+, มีพิมพ์เล็ก/ใหญ่ ตัวเลข สัญลักษณ์):",
        err_pwd_empty:"รหัสผ่านห้ามว่าง",
        err_reset_fail:"รีเซ็ตล้มเหลว: ",
        msg_reset_ok:"อัปเดตรหัสผ่านแล้ว โปรดเข้าสู่ระบบด้วยรหัสใหม่"
      },
      "ms": {
        page_title:"Soul Sanctuary · Indeks",
        site_title:"Soul Sanctuary",
        site_subtitle:"Segmen Percuma & VIP · Gaya Bersatu",
        lang_label:"Bahasa",
        free_title:"🌀 Segmen Percuma",
        link_bazi:"Bazi", link_natal:"Carta Kelahiran", link_life:"Numerologi",
        link_tarot:"Tarot", link_kyuusei:"Nine Star Ki", link_energy:"Jenis Tenaga", link_vedic:"Astrologi Veda",
        vip_title:"🌙 Segmen VIP",
        vip_mingli:"🗝 Kandungan Eksklusif · Astro",
        vip_love:"Cinta: Jodoh/Lalu lintas perkahwinan",
        vip_career:"Kerjaya: Tempat kerja/Usahawan",
        vip_wealth:"Kewangan: Posisi kekayaan/Masa",
        vip_pet:"Nasib Haiwan: Perangai & Ikatan",
        vip_hepan:"Keserasian: Tarikh nikah/Waktu lahir",
        vip_name:"Nama: Syarikat/Bayi/Pertukaran nama",
        vip_fengshui:"Feng Shui Kekayaan: Rumah / Pejabat",
        vip_xinlian:"🌙 Kandungan Eksklusif · Soul",
        vip_record:"Log Spirit: Foto, Mimpi, Suara, Doa",
        vip_course:"Kursus: Bazi / Tarot / Astrologi / Numerologi / HD",
        vip_memorial:"Memorial Keluarga: Arkib & Legasi",
        vip_tasks:"Latihan Tenaga Mingguan / Ritual",
        vip_shop:"Diskaun Kedai & Omamori",
        login_title:"💎 Log Masuk VIP",
        ph_email:"Emel",
        ph_password:"Kata laluan (8+ aksara, huruf besar/kecil, nombor, simbol)",
        btn_register:"Daftar Akaun", btn_login:"Log Masuk",
        btn_upgrade:"💎 Naik Taraf VIP (Bulanan)", btn_backshop:"← Kembali ke Kedai",
        btn_reset:"🔑 Tetap Semula Kata Laluan",
        note_price:"$9.9 / bulan (Astro + Soul + Kursus). Akaun baharu percubaan percuma sekali.",

        err_need_ep:"Masukkan emel dan kata laluan",
        err_pwd_rule:"Kata laluan mesti 8+ dan ada huruf besar/kecil, nombor, simbol",
        err_exists:"Emel telah didaftarkan. Sila log masuk.",
        err_register_fail:"Pendaftaran gagal: ",
        err_no_account:"Akaun tidak ditemui. Sila daftar dahulu.",
        err_wrong_pwd:"Kata laluan salah",
        err_expired:"Keahlian tamat tempoh. Sila perbaharui.",
        err_login_fail:"Log masuk gagal: ",
        prompt_email:"Masukkan emel berdaftar:",
        err_email_empty:"Emel tidak boleh kosong",
        prompt_newpwd:"Masukkan kata laluan baharu (8+, huruf besar/kecil, nombor, simbol):",
        err_pwd_empty:"Kata laluan tidak boleh kosong",
        err_reset_fail:"Tetap semula gagal: ",
        msg_reset_ok:"Kata laluan dikemas kini. Sila log masuk semula."
      }
    };

    // 读取/保存语言
    const LANG_KEY = "site_lang";
    function getLang(){ return localStorage.getItem(LANG_KEY) || document.documentElement.lang || "zh-CN"; }
    function setLang(code){ localStorage.setItem(LANG_KEY, code); document.documentElement.lang = code; }

    // 翻译函数
    function t(key){
      const L = translations[getLang()] || translations["zh-CN"];
      return L[key] || (translations["zh-CN"][key] || key);
    }

    function applyI18n(){
      // 文本节点
      document.querySelectorAll("[data-i18n]").forEach(el=>{
        const key = el.getAttribute("data-i18n");
        el.textContent = t(key);
      });
      // placeholder
      document.querySelectorAll("[data-i18n-ph]").forEach(el=>{
        const key = el.getAttribute("data-i18n-ph");
        el.setAttribute("placeholder", t(key));
      });
      // <title>
      const titleEl = document.querySelector("title[data-i18n]");
      if (titleEl) titleEl.textContent = t(titleEl.getAttribute("data-i18n"));
    }

    // 初始化
    (function initLang(){
      const select = document.getElementById("langSelect");
      const current = getLang();
      select.value = current;
      applyI18n();
      select.addEventListener("change", ()=>{
        setLang(select.value);
        applyI18n();
      });
    })();
  </script>
</body>
</html>
