
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title data-i18n="title">å°åº¦å‘½ç†åˆ†æ Â· 5XLiving</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600&family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b0f14; --card:#11161dcc; --line:#1f2a36; --text:#e8edf3; --muted:#98a7b7;
  --brand:#d4af37; --gold:#d4af37; --gold2:#f2d27a; --accent:#58b9ff;
  --radius:14px; --shadow:0 8px 30px rgba(0,0,0,.35);
  --card-w:128px; --card-h:212px; --gap:14px;
}
@media (max-width:640px){ :root{ --card-w:100px; --card-h:168px; --gap:10px; } }

html,body{height:100%}
body{
  margin:0; color:var(--text);
  background: radial-gradient(1200px 600px at 70% -10%, #16202b 10%, transparent 60%) no-repeat,
              linear-gradient(180deg,#0b0f14,#0b0f14);
  font-family: Inter,system-ui,-apple-system,"Noto Sans SC","Segoe UI",Roboto,Arial,sans-serif;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  overflow-x: hidden;
}
body::before{
  content:"";
  position:fixed;
  inset:0;
  z-index:-2;
  background: linear-gradient(rgba(11, 15, 20, 0.85), rgba(11, 15, 20, 0.9)), 
              radial-gradient(circle at 20% 80%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
              radial-gradient(circle at 80% 20%, rgba(88, 185, 255, 0.05) 0%, transparent 50%);
}
.container{max-width:1100px;margin:0 auto;padding:24px 16px 80px}

  /* â€”â€” å¤´éƒ¨ï¼ˆTarot åŒæ¬¾ï¼‰ â€”â€” */
  .site-header{
    position:sticky;
    top:0;
    z-index:10;
    background:#0b0f14cc;
    border-bottom:1px solid #0f1622;
    backdrop-filter:saturate(140%) blur(12px);
    transition: all 0.3s ease;
  }
  .site-header.scrolled {
    background: rgba(11, 15, 20, 0.95);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  }
  .head-inner{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:14px;
    padding:14px 16px;
  }
  
.brand{display:flex; align-items:center; gap:10px; text-decoration:none; color:var(--text)}
.brand-badge{
  display:inline-grid; 
  place-items:center; 
  width:34px; 
  height:34px; 
  border-radius:8px; 
  background:linear-gradient(180deg,#0e1520,#0b1018); 
  border:1px solid #2a3546; 
  box-shadow:0 4px 14px rgba(0,0,0,.35); 
  font-weight:800; 
  color:#ffe084;
  transition: all 0.3s ease;
}
.brand:hover .brand-badge {
  transform: rotate(15deg);
  box-shadow: 0 6px 20px rgba(212, 175, 55, 0.3);
}
.title{
  font-family:"Noto Serif SC","Noto Serif",serif !important;
  font-weight:600 !important;
  letter-spacing:.02em;
  font-size:1.1rem !important;
  line-height:1.25;
}

.title{
  font-family:"Noto Serif SC","Noto Serif",serif !important;
  font-weight:600 !important;
  letter-spacing:.02em;
  font-size:1.1rem !important;
  line-height:1.25;
}

/* æ–°å¢ï¼šé¼ æ ‡åœ¨æ•´æ¡ brand ä¸Šæ—¶ï¼Œé«˜äº®æ ‡é¢˜ */
.brand:hover .title {
  color: var(--gold);
}
.lang{display:flex; align-items:center; gap:8px}
.lang label{white-space:nowrap; color:var(--muted); margin-right:4px}
.lang select{
  appearance:none; 
  min-width:170px; 
  border-radius:10px; 
  border:1px solid #243244; 
  background:#0e1520; 
  color:var(--text); 
  padding:10px 34px 10px 12px; 
  font-size:.95rem; 
  background-image:url("data:image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2398a7b7' stroke-width='2' fill='none'/%3E%3C/svg%3E"); 
  background-repeat:no-repeat; 
  background-position:calc(100% - 12px) 50%;
  transition: all 0.3s ease;
}
.lang select:focus {
  outline: none;
  border-color: var(--gold);
  box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
}
@media (max-width:520px){ .title{font-size:1rem} .lang select{min-width:140px} }

  .h1{margin:12px 0 6px; color:#ffe084; font-weight:800; font-size:1.8rem}
  .h2{font-weight:800;color:#ffe084;margin:0 0 10px}
  .sub{color:var(--muted)}
  .card{
    background:#11161dcc;border:1px solid #1f2a36;border-radius:var(--radius);
    box-shadow:var(--shadow);backdrop-filter:blur(10px);padding:18px;margin:16px 0;
  }
  .row{display:grid; gap:12px; grid-template-columns:1fr}
  @media(min-width:760px){
    .row.cols-2{grid-template-columns:1fr 1fr}
    .row.cols-3{grid-template-columns:1fr 1fr 1fr}
  }
  label.muted{display:block;margin-bottom:4px;color:#98a7b7}
  input,select,textarea{
    width:100%;box-sizing:border-box;border-radius:12px;border:1px solid #243244;
    background:#0e1520;color:#e8edf3;padding:12px;font-size:15px;outline:none;
  }
  textarea{min-height:96px}
  input::placeholder,textarea::placeholder{color:#6f8092}
  .btn{
    display:inline-grid;place-items:center;padding:12px 16px;border-radius:12px;
    border:1px solid #e6c76e;background:linear-gradient(180deg,#fff9e6,#e6c76e);
    color:#191919;font-weight:800;cursor:pointer;
  }
  .btn.secondary{background:#101826;color:#ffe084;border-color:#3a3f47}
  .btn[disabled]{opacity:.6;cursor:not-allowed}
  .muted{color:#98a7b7}
  .error{color:#ff8b8b}
  footer{color:#6c7b8c;font-size:.85rem;text-align:center;padding:30px 0}

  /* æœ¬åœ°åˆ†ææ ·å¼ */
  .local-analysis {
    margin-top: 20px;
    padding: 15px;
    border-radius: 10px;
    background: rgba(30, 41, 59, 0.5);
    border: 1px solid #2d3748;
  }
  .local-analysis h3 {
    color: #ffe084;
    margin-top: 0;
  }
  .planet-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 10px;
    margin-top: 15px;
  }
  .planet-item {
    padding: 10px;
    border-radius: 8px;
    background: rgba(15, 23, 42, 0.7);
    text-align: center;
    border: 1px solid #2d3748;
    cursor: pointer;
    transition: transform 0.2s, background 0.2s;
  }
  .planet-item:hover {
    transform: translateY(-2px);
    background: rgba(25, 35, 60, 0.9);
  }
  .planet-name {
    font-weight: bold;
    color: #ffe084;
  }
  .planet-position {
    font-size: 0.9em;
    color: #98a7b7;
  }
  .analysis-section {
    margin-top: 20px;
  }
  .analysis-section h4 {
    color: #ffe084;
    margin-bottom: 10px;
  }
  .detail-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    z-index: 1000;
    align-items: center;
    justify-content: center;
  }
  .modal-content {
    background: #11161d;
    padding: 20px;
    border-radius: 12px;
    max-width: 500px;
    width: 90%;
    border: 1px solid #2d3748;
  }
  .loading {
    text-align: center;
    padding: 20px;
    color: #ffe084;
  }

  /* ä¸»é¢˜æ ‡ç­¾é¡µæ ·å¼ */
  .topic-tabs {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin: 15px 0;
    border-bottom: 1px solid #2d3748;
    padding-bottom: 10px;
  }
  .topic-tab {
    padding: 8px 16px;
    border-radius: 8px;
    background: rgba(15, 23, 42, 0.7);
    border: 1px solid #2d3748;
    color: #98a7b7;
    cursor: pointer;
    transition: all 0.3s;
    font-size: 0.9rem;
  }
  .topic-tab:hover {
    background: rgba(25, 35, 60, 0.9);
  }
  .topic-tab.active {
    background: rgba(212, 175, 55, 0.2);
    border-color: #d4af37;
    color: #ffe084;
  }
  .topic-content {
    display: none;
    padding: 15px;
    border-radius: 8px;
    background: rgba(15, 23, 42, 0.3);
    margin-top: 10px;
  }
  .topic-content.active {
    display: block;
  }

/* ===== VIP åŒºåŸŸï¼ˆç»Ÿä¸€æ ·å¼ Â· ä¸ energy.html ä¸€è‡´ï¼‰ ===== */
.card.section{
  max-width:1100px;
  margin:32px auto 40px;
  padding:18px 18px 22px;
  border-radius:var(--radius);
  border:1px solid #1f2a36;
  background:#11161dcc;
  box-shadow:var(--shadow);
  box-sizing:border-box;
}

.group-title{
  font-weight:800;
  color:#ffe084;
  font-size:1rem;
  margin:0 0 10px;
}

/* ä¸ŠåŠéƒ¨ï¼šå·¦å³ä¸¤å— VIP åˆ—è¡¨ */
.card.section .columns{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:16px;
  margin-top:10px;
}
.card.section .list-block{
  border-radius:12px;
  border:1px solid #1f2a36;
  background:#0f141d;
  padding:14px 16px;
}
.card.section .list-block ul{
  list-style:none;
  margin:6px 0 0;
  padding:0;
}
.card.section .list-block li{
  margin:.25rem 0;
  font-size:.95rem;
  color:var(--muted);
  line-height:1.6;
}

/* ä¸‹åŠéƒ¨ï¼šç™»å½•åŒºåŸŸ */
.astro-auth{
  margin-top:16px;
}
.astro-auth .auth-grid{
  display:grid;
  grid-template-columns:1.1fr 0.9fr;
  gap:16px;
}
.astro-auth .panel{
  background:#11161dcc;
  border-radius:14px;
  border:1px solid #1f2a36;
  box-shadow:0 8px 30px rgba(0,0,0,.35);
  padding:16px 18px 18px;
  box-sizing:border-box;
}
.astro-auth .panel .head{
  font-size:.95rem;
  font-weight:800;
  color:#ffe084;
  padding-bottom:8px;
  margin-bottom:10px;
  border-bottom:1px solid #1f2a36;
}
.astro-auth .panel .body{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.astro-auth .body .row{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.astro-auth .body .spacer{
  height:4px;
}

/* è¾“å…¥æ¡† = è·Ÿ energy.html ä¸€æ ·å®½åº¦ */
.astro-auth input[type="email"],
.astro-auth input[type="password"]{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid #243244;
  background:#0e1520;
  color:#e8edf3;
  font-size:15px;
  box-sizing:border-box;
}
.astro-auth input[type="email"]::placeholder,
.astro-auth input[type="password"]::placeholder{
  color:#6f8092;
}
.astro-auth input[type="email"]:focus,
.astro-auth input[type="password"]:focus{
  outline:none;
  border-color:#d4af37;
  box-shadow:0 0 0 2px rgba(212,175,55,.2);
}

/* ç™»å½• / é‡è®¾ / æ³¨å†ŒæŒ‰é’® = å’Œè¾“å…¥æ¡†åŒå®½ï¼Œpill å½¢çŠ¶ */
.astro-auth .btn{
  display:flex;
  align-items:center;
  justify-content:center;
  width:100%;
  max-width:100%;
  padding:11px 18px;
  border-radius:999px;
  border:1px solid #e6c76e;
  background:linear-gradient(180deg,#fff9e6,#e6c76e);
  color:#191919;
  font-weight:800;
  text-align:center;
  box-shadow:0 6px 20px rgba(230,199,110,.35);
  white-space:nowrap;
  box-sizing:border-box;
  transition:.12s ease;
}
.astro-auth .btn.block{
  width:100%;
}

/* æ·±è‰²çš„ reset æŒ‰é’®æ ·å¼ */
.astro-auth .btn.ghost.block{
  background:#101826;
  border-color:#273245;
  color:#e8edf3;
  box-shadow:none;
}
.astro-auth .btn:hover{
  transform:translateY(-1px);
  box-shadow:0 10px 24px rgba(230,199,110,.45);
}
.astro-auth .btn.ghost.block:hover{
  border-color:#d4af37;
  background:rgba(212,175,55,.08);
}

.error-message{
  color:#ff7b7b;
  font-size:.85rem;
}

/* å°å±ï¼šVIP åŒºã€ç™»å½•åŒºéƒ½ä¸€åˆ—æ’å¸ƒ */
@media (max-width:768px){
  .card.section .columns{
    grid-template-columns:1fr;
  }
  .astro-auth .auth-grid{
    grid-template-columns:1fr;
  }
}

  /* AI box (ç®¡å®¶æç¤ºå—) */
  .ai-box{
    background:#0b111a;
    border:1px solid #1f2a36;
    border-radius:12px;
    padding:14px 16px;
    margin:14px 0;
  }
  .ai-box-h{
    color:#ffd88a;
    font-weight:700;
    margin-bottom:8px;
  }
  .ai-box-c{
    color:#e8edf3;
    line-height:1.7;
  }

  /* Prompt chips */
  .chips{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
    margin-top:12px;
  }
  .chip{
    padding:6px 10px;
    border-radius:999px;
    border:1px solid #2a3546;
    background:#0e1520;
    color:#e8edf3;
    cursor:pointer;
    transition:border-color .2s ease, box-shadow .2s ease;
  }
  .chip:hover{
    border-color:#f2d27a;
    box-shadow:0 0 0 2px rgba(242,210,122,.15) inset;
  }
  .chip:disabled{
    opacity:.6;
    cursor:not-allowed;
  }
  .skeleton{
    display:grid;
    gap:8px;
  }
  .skeleton div{
    height:12px;
    border-radius:6px;
    background:linear-gradient(90deg,#1a2431,#1f2b3b,#1a2431);
    animation:sh 1.2s infinite;
  }
  @keyframes sh{
    0%{opacity:.5}
    50%{opacity:1}
    100%{opacity:.5}
  }
  .ai-lock-overlay{
    margin-top:10px;
    padding-top:10px;
    border-top:1px solid #1f2a36;
    text-align:center;
  }
  .ai-lock-overlay .tip{
    color:#ffd88a;
    font-weight:700;
    margin-bottom:4px;
  }
  .ai-lock-overlay .sub{
    color:var(--muted);
  }

  /* è¯¦æƒ…é¡µï¼ˆå¦‚æœä½ çš„ VIP æŠŠæŠ¥å‘Šå±•å¼€ç”¨è¿™ä¸ªï¼‰ */
  .detail-view{display:none}
  .detail-header{
    display:flex;
    align-items:center;
    gap:12px;
    margin-bottom:20px;
  }
  .back-btn{
    background:rgba(212,175,55,.1);
    border:1px solid rgba(212,175,55,.3);
    color:var(--gold2);
    padding:8px 16px;
    border-radius:8px;
    cursor:pointer;
  }
  .detail-content{line-height:1.8}
  .detail-section{margin-bottom:24px}
  .detail-section h4{
    color:var(--gold2);
    margin-bottom:12px;
    font-size:1.1rem;
  }
  .action-list{
    list-style:none;
    padding:0;
    margin:0;
  }
  .action-list li{
    margin-bottom:8px;
    padding-left:20px;
    position:relative;
  }
  .action-list li::before{
    content:"â€¢";
    color:var(--gold2);
    position:absolute;
    left:0;
    top:0;
  }

  /* é€šç”¨å°å·¥å…· */
  .sr-only{
    position:absolute !important;
    width:1px;
    height:1px;
    padding:0;
    margin:-1px;
    overflow:hidden;
    clip:rect(0,0,0,0);
    white-space:nowrap;
    border:0;
  }
  .chips-container{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
    margin:20px 0;
    justify-content:center;
  }

  /* ===== Xinlian Butler Floating Chat (é—®) ===== */

/* ===== Chat ===== */
.ss-chat-fab{
  position:fixed;
  right:18px;
  bottom:18px;
  z-index:50;
  width:56px;
  height:56px;
  border-radius:50%;
  background:linear-gradient(180deg,#fff9e6,#e6c76e);
  color:#191919;
  display:grid;
  place-items:center;
  font-size: 22px;
  font-weight:800;
  box-shadow:0 8px 30px rgba(0,0,0,.35);
  cursor:pointer;
  border:1px solid #e6c76e;
}
.ss-chat-panel{
  position:fixed;
  right:18px;
  bottom:88px;
  z-index:50;
  width:min(460px,92vw);
  display:none;
  flex-direction:column;
  background:#0e1520;
  border:1px solid #243244;
  border-radius:14px;
  box-shadow:var(--shadow);
}
.ss-chat-panel[aria-hidden="false"]{display:flex;}
.ss-chat-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:10px 12px;
  border-bottom:1px solid #243244;
}
.ss-chat-title{font-weight:700}
.ss-chat-body{
  max-height:300px;
  overflow:auto;
  padding:10px 12px;
  display:flex;
  flex-direction:column;
  gap:8px;
}
.ss-msg{
  padding:8px 10px;
  background:#0f1624;
  border:1px solid #243244;
  border-radius:10px;
  margin:6px 0;
  max-width:80%;
  font-size:.9rem;
  line-height:1.6;
}
.ss-msg.me{
  margin-left:auto;
  background:#132033;
}
.ss-chat-input{
  display:flex;
  align-items:center;
  gap:8px;
  padding:10px 12px;
  border-top:1px solid #243244;
}
.ss-chat-input input{
  flex:1 1 auto;
  min-width:0;
}

  /* ä¸“ä¸šç‰ˆç®¡å®¶å— */
  .butler-professional{
    display:none;
    margin-top:20px;
    background:var(--card);
    border:1px solid var(--line);
    border-radius:var(--radius);
    padding:20px;
  }
  .butler-header{
    display:flex;
    align-items:center;
    gap:10px;
    margin-bottom:20px;
    color:var(--gold2);
    font-size:1.2rem;
    font-weight:700;
  }
  .butler-content{
    line-height:1.8;
    padding:15px;
    background:var(--surface);
    border-radius:10px;
    border:1px solid #253245;
  }
  .butler-section{
    margin-bottom:25px;
    padding-bottom:15px;
    border-bottom:1px solid #253245;
  }
  .butler-section h4{
    color:var(--gold2);
    margin-bottom:10px;
    font-size:1.1rem;
  }
  .butler-chat{
    margin-top:20px;
    border-top:1px solid var(--line);
    padding-top:15px;
  }
  .chat-messages{
    height:200px;
    overflow-y:auto;
    margin-bottom:15px;
    padding:10px;
    background:var(--surface);
    border-radius:8px;
    border:1px solid #253245;
  }
  .chat-input-area{
    display:flex;
    gap:10px;
  }
  .chat-input-area input{
    flex:1;
    padding:10px;
    border-radius:8px;
    border:1px solid #253245;
    background:#0e1520;
    color:#e8edf3;
  }
  .chat-send-btn{
    padding:10px 20px;
    background:var(--gold);
    color:#191919;
    border:none;
    border-radius:8px;
    font-weight:700;
    cursor:pointer;
  }

</style>
</head>
<body>
  <header class="site-header">
    <div class="head-inner container">
      <a class="brand" href="https://astro.5xliving.com" target="_self" rel="nofollow">
        <span class="brand-badge">5X</span>
        <span class="title">
        <span data-i18n="brand">5xLiving Â· Soul Sanctuary</span>
        </span>
      </a>

    <div class="lang">
      <label for="langSelect" class="muted" data-i18n="lang_label">è¯­è¨€</label>
      <select id="langSelect" aria-label="Language">
          <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
          <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
          <option value="en">English</option>
          <option value="ja">æ—¥æœ¬èª</option>
          <option value="th">à¹„à¸—à¸¢</option>
          <option value="ms">Bahasa Melayu</option>
      </select>
    </div>
  </div>
</header>

  <main class="container">
    <h1 class="h1" data-i18n="title">å°åº¦å‘½ç†åˆ†æ Â· 5XLiving</h1>

<!-- è¡¨å• -->
<div class="card">
  <div class="h2" data-i18n="form_title">å°åº¦å‘½ç†åˆ†æ Â· å¿«é€Ÿè§£è¯»</div>

  <!-- ç¬¬ 1 è¡Œï¼šå§“å / æ€§åˆ« / å‡ºç”ŸåŸå¸‚ -->
  <div class="row cols-3">
    <div>
      <label class="muted" data-i18n="name_label">å§“åï¼ˆå¯é€‰ï¼‰</label>
      <input
        type="text"
        id="name"
        data-i18n-ph="name_ph"
        placeholder="ä½ çš„ç§°å‘¼ï¼ˆç”¨äºä¸ªæ€§åŒ–ç§°å‘¼ï¼‰">
    </div>

    <div>
      <label class="muted" data-i18n="gender_label">æ€§åˆ«</label>
      <select id="gender">
        <option value="" data-i18n="gender_unknown">ä¸é€éœ²</option>
        <option value="male" data-i18n="gender_male">ç”·æ€§</option>
        <option value="female" data-i18n="gender_female">å¥³æ€§</option>
        <option value="other" data-i18n="gender_other">å…¶ä»–</option>
      </select>
    </div>

    <div>
      <label class="muted" data-i18n="birth_place_label">å‡ºç”ŸåŸå¸‚</label>
      <input
        type="text"
        id="birthplace"
        data-i18n-ph="birth_place_ph"
        placeholder="åŸå¸‚/å›½å®¶ï¼ˆç”¨äºæ—¶åŒºä¸ç»çº¬ï¼‰">
    </div>
  </div>

  <!-- ç¬¬ 2 è¡Œï¼šå‡ºç”Ÿæ—¥æœŸæ—¶é—´ + æŒ‰é’® -->
  <div class="row cols-2" style="margin-top:10px">
    <div>
      <label class="muted" data-i18n="birth_dt_label">å‡ºç”Ÿæ—¥æœŸä¸æ—¶é—´</label>
      <input type="datetime-local" id="birthdt">
    </div>

    <div style="display:flex; align-items:flex-end; justify-content:flex-start;">
      <button id="go" class="btn" data-i18n="btn_gen">ç”Ÿæˆåˆ†æ</button>
    </div>
  </div>
</div>

    <!-- ç»“æœï¼šæœ¬åœ°åˆ†æ -->
    <div id="localCard" class="card" style="display:none">
      <div class="h2" data-i18n="sec_local">æœ¬åœ°å‘½ç†åˆ†æç»“æœ</div>
      <div id="localText"></div>
      
      <!-- ä¸»é¢˜æ ‡ç­¾é¡µ -->
      <div id="topicTabs" class="topic-tabs" style="display:none"></div>
      
      <!-- ä¸»é¢˜å†…å®¹åŒºåŸŸ -->
      <div id="topicContents"></div>
    </div>

    <!-- è¡Œæ˜Ÿè¯¦æƒ…æ¨¡æ€æ¡† -->
    <div id="planetModal" class="detail-modal">
      <div class="modal-content">
        <h3 id="modalTitle"></h3>
        <div id="modalContent"></div>
        <button id="closeModal" class="btn" style="margin-top: 15px;" data-i18n="btn_close">å…³é—­</button>
      </div>
    </div>

  <!-- ä¼šå‘˜ä¸“åŒºï¼ˆåŸæ ·ä¿ç•™ï¼‰ -->
  <section class="card section">
    <h2 class="group-title" data-i18n="vip_title">ğŸŒ™ ä¼šå‘˜åŒºåŸŸ VIP Segment</h2>
    <div class="columns">
      <div class="list-block">
        <div class="group-title" data-i18n="vip_mingli">ğŸ— å‘½ç†ç©ºé—´ä¸“å±å†…å®¹</div>
        <ul>
          <li data-i18n="vip_love">å§»ç¼˜æ–¹å‘ï¼šæ‹çˆ±ç¼˜åˆ†ã€å©šå§»èµ°åŠ¿</li>
          <li data-i18n="vip_career">äº‹ä¸šæ–¹å‘ï¼šèŒåœºå‘å±•ã€åˆ›ä¸šæ½œåŠ›</li>
          <li data-i18n="vip_wealth">è´¢è¿æ–¹å‘ï¼šè´¢ä½åˆ†æã€ç†è´¢æ—¶æœº</li>
          <li data-i18n="vip_pet">å® ç‰©å‘½ç†ï¼šä¼´ä¾£åŠ¨ç‰©çš„æ€§æ ¼ä¸ç¼˜åˆ†</li>
          <li data-i18n="vip_hepan">åˆç›˜åˆ†æï¼šå©šæœŸæ‹©æ—¥ã€æ–°ç”Ÿæ‹©æ—¶</li>
          <li data-i18n="vip_name">æµ‹ååˆ†æï¼šå…¬å¸åã€å®å®åã€å‘½åæ”¹è¿</li>
          <li data-i18n="vip_fengshui">è´¢ä½åˆç›˜ï¼šä½å®¶ / åŠå…¬å®¤åŠ¨çº¿é…åˆ</li>
        </ul>
      </div>
      <div class="list-block">
        <div class="group-title" data-i18n="vip_xinlian">ğŸŒ™ å¿ƒæ€œç©ºé—´ä¸“å±å†…å®¹</div>
        <ul>
          <li data-i18n="vip_record">çµæ€§è®°å½•ï¼šç…§ç‰‡ã€æ¢¦å¢ƒã€å£°éŸ³ã€æ„¿æœ›ç¥ˆç¥·</li>
          <li data-i18n="vip_course">å‘½ç†è¯¾ç¨‹ï¼šå…«å­— / å¡”ç½— / å æ˜Ÿ / çµæ•° / äººç±»å›¾</li>
          <li data-i18n="vip_memorial">å®¶æ—çºªå¿µç³»ç»Ÿï¼šäº²äººçµæ€§çºªå¿µ & å»¶ç»­</li>
          <li data-i18n="vip_tasks">æ¯å‘¨èƒ½é‡ç»ƒä¹  / ç¥æ˜ä»ªå¼ä»»åŠ¡</li>
          <li data-i18n="vip_shop">èƒ½é‡å•†åŸä¸“å±æŠ˜æ‰£ & å¾¡å®ˆè®¢åˆ¶</li>
        </ul>
      </div>
    </div>

    <div class="group-title" style="margin-top:14px" data-i18n="login_title">ğŸ’ ç™»å…¥ VIP åŠŸèƒ½</div>

    <section class="astro-auth">
      <div class="auth-grid">
        <!-- å·¦ä¾§ï¼šè¾“å…¥ + æ³¨å†Œ/ç™»å½• -->
        <div class="panel">
          <div class="head" data-i18n="panel_login_head">è´¦æˆ·ç™»å½• / æ³¨å†Œ</div>
          <div class="body">
            <div class="row" id="authFields">
              <label for="email" class="sr-only" data-i18n="ph_email">é‚®ç®± Email</label>
              <input
                id="email"
                name="email"
                type="email"
                inputmode="email"
                autocomplete="username"
                placeholder=""
                data-i18n-ph="ph_email"
                required
              />
              <label for="password" class="sr-only" data-i18n="ph_label_password">å¯†ç  Password</label>
              <input
                id="password"
                name="password"
                type="password"
                autocomplete="current-password"
                placeholder="å¯†ç  Passwordï¼ˆè‡³å°‘8ä½ï¼Œå«å¤§å°å†™æ•°å­—ç¬¦å·ï¼‰"
                data-i18n-ph="ph_password"
                required
              />
            </div>
            <div class="spacer"></div>
            <form id="loginForm" class="row one">
              <button class="btn block" id="loginBtn" type="submit" data-i18n="btn_login">ç™»å…¥è´¦æˆ·</button>
            </form>
            <div class="spacer"></div>
            <div class="row one">
              <button class="btn ghost block" id="resetBtn" type="button" data-i18n="btn_reset">ğŸ”‘ é‡è®¾å¯†ç </button>
            </div>
            <div class="spacer"></div>
            <form class="row one" id="registerForm">
              <button class="btn block" id="registerBtn" type="submit" data-i18n="btn_register">æ³¨å†Œè´¦æˆ·</button>
              <div class="muted" data-i18n="note_price">æ³¨å†Œè´¦å·èµ é€ä¸€æ¬¡å…è´¹ä½“éªŒ</div>
              <div class="spacer"></div>
              <div class="error-message" id="authError" style="display:none"></div>
            </form>
          </div>
        </div>

        <!-- å³ä¾§ï¼šä¼šå‘˜ä¸è¿”å› -->
        <div class="panel">
          <div class="head" data-i18n="panel_member_head">ä¼šå‘˜æœåŠ¡</div>
          <div class="body">
            <div class="row one">
              <a class="btn btn-gold block" href="https://yourshopifyshop.com/products/monthly-vip" target="_blank" rel="noopener noreferrer" data-i18n="btn_upgrade">ğŸ’ å‡çº§ä¸º VIPï¼ˆæœˆè´¹ï¼‰</a>
            </div>
            <div class="spacer"></div>
            <div class="row one">
              <a class="btn ghost block" href="https://yourshopifyshop.myshopify.com" target="_blank" rel="noopener noreferrer" data-i18n="btn_backshop">â† è¿”å›å‘½ç†å•†åŸ</a>
            </div>
            <div class="spacer"></div>
            <div class="muted" data-i18n="note_price1">$9.9 / æœˆè´¹ VIPï¼ˆå‘½ç†ç©ºé—´ + å¿ƒæ€œç©ºé—´ + çµæ€§è¯¾ç¨‹ï¼‰</div>
          </div>
        </div>
      </div>
    </section>
  </section>

  <footer>Â© 5XLiving â€¢ Astro Sanctuary</footer>
</main>
</body>
          
<!-- GPT / å¿ƒæ€œç®¡å®¶ï¼ˆç»Ÿä¸€æµ®çª—ï¼‰ -->
<button class="ss-chat-fab" id="ssChatFab" type="button">
  <span data-i18n="chat_fab">é—®</span>
</button>

<div class="ss-chat-panel" id="chatPanel" aria-hidden="true">
  <div class="ss-chat-head">
    <div class="ss-chat-title" id="chatTitle" data-i18n="chat_title">
      å¿ƒæ€œç®¡å®¶ Â· GPT
    </div>
    <div class="ss-close" id="chatClose">âœ•</div>
  </div>

  <div class="ss-chat-body" id="chatBody">
    <div class="ss-msg">
      <div class="meta" data-i18n="chat_bot_name">å¿ƒæ€œç®¡å®¶</div>
      <div data-i18n="chat_welcome">
        ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„å¿ƒæ€œç®¡å®¶è§£è¯»åŠ©æ‰‹ï¼Œå¯ä»¥å¸®ä½ åˆ†ææˆ–è§£ç­”ç›¸å…³é—®é¢˜ã€‚
      </div>
    </div>
  </div>

  <div class="ss-chat-input">
    <input
      id="chatInput"
      placeholder="è¾“å…¥é—®é¢˜â€¦"
      data-i18n-ph="chat_input_ph"
    />
    <button class="btn" id="chatSend" data-i18n="chat_send">å‘é€</button>
  </div>
</div>

<script>
(function () {
  "use strict";

  const LANG_KEY = "site_lang";

  /* ===== i18n æ–‡æ¡ˆ ===== */
  const i18n = {
    "zh-CN": {
      brand:'5xLiving Â· Soul Sanctuary',
      title: "å°åº¦å‘½ç†åˆ†æ Â· 5XLiving",
      lang_label: "è¯­è¨€",

      form_title: "å°åº¦å‘½ç†åˆ†æ Â· å¿«é€Ÿè§£è¯»",
      name_label: "å§“åï¼ˆå¯é€‰ï¼‰",
      name_ph: "ä½ çš„ç§°å‘¼ï¼ˆç”¨äºä¸ªæ€§åŒ–ç§°å‘¼ï¼‰",

      gender_label: "æ€§åˆ«",
      gender_unknown: "ä¸é€éœ²",
      gender_male: "ç”·æ€§",
      gender_female: "å¥³æ€§",
      gender_other: "å…¶ä»–",

      birth_dt_label: "å‡ºç”Ÿæ—¥æœŸä¸æ—¶é—´",
      birth_place_label: "å‡ºç”ŸåŸå¸‚",
      birth_place_ph: "åŸå¸‚/å›½å®¶ï¼ˆç”¨äºæ—¶åŒºä¸ç»çº¬ï¼‰",

      topic_label: "å…³æ³¨ä¸»é¢˜",
      topic_love: "çˆ±æƒ…/å…³ç³»",
      topic_career: "äº‹ä¸š/å·¥ä½œ",
      topic_wealth: "è´¢å¯Œ/æŠ•èµ„",
      topic_health: "å¥åº·/èº«å¿ƒ",
      topic_family: "å®¶åº­/äººé™…",
      topic_study: "å­¦ä¸š/æˆé•¿",
      topic_move: "æ—…è¡Œ/æ¬è¿",
      topic_overall: "ç»¼åˆè¿åŠ¿",

      preset_label: "å¸¸ç”¨é—®é¢˜",
      preset_none: "ï¼ˆå¯é€‰ï¼‰é€‰æ‹©ä¸€ä¸ªæ¨¡æ¿",
      preset_q1: "æˆ‘æƒ³äº†è§£æœ€è¿‘çš„è¿åŠ¿èµ°å‘å’Œéœ€è¦æ³¨æ„çš„äº‹é¡¹",
      preset_q2: "æˆ‘æƒ³çŸ¥é“åœ¨äº‹ä¸š/å·¥ä½œæ–¹é¢æœ‰ä»€ä¹ˆæœºä¼šå’ŒæŒ‘æˆ˜",
      preset_q3: "æˆ‘æƒ³äº†è§£æ„Ÿæƒ…/å©šå§»æ–¹é¢çš„å‘å±•è¶‹åŠ¿",

      q_label: "ä½ çš„å…·ä½“é—®é¢˜ï¼ˆå¯ç›´æ¥ç²˜è´´ï¼‰",
      q_ph: "ä¾‹å¦‚ï¼šæˆ‘åœ¨æ‰¾å·¥ä½œï¼Œæƒ³çŸ¥é“å½“å‰å¤§è¿å°è¿å¯¹é¢è¯•ä¸å…¥èŒçš„å½±å“ï¼Œä»¥åŠæˆ‘åº”é‡‡å–çš„è¡ŒåŠ¨ã€‚",

      btn_gen: "ç”Ÿæˆåˆ†æ",
      btn_clear: "æ¸…ç©º",
      btn_close: "å…³é—­",
      btn_view_detail: "æŸ¥çœ‹è¯¦æƒ…",

      sec_local: "æœ¬åœ°å‘½ç†åˆ†æç»“æœ",
      reco_title: "æ¨è Â· ä¸‹ä¸€æ­¥è¡ŒåŠ¨",

      generating: "æ­£åœ¨ç”Ÿæˆå é™€å æ˜Ÿè§£è¯»â€¦",
      need_birth: "è¯·è‡³å°‘å¡«å†™ã€å‡ºç”Ÿæ—¥æœŸä¸æ—¶é—´ã€ä»¥åŠã€å‡ºç”ŸåŸå¸‚ã€ï¼ˆç”¨äºæ—¶åŒºä¸æ˜Ÿç›˜è®¡ç®—ï¼‰ã€‚",
      analysis_title: "å é™€å æ˜Ÿåˆ†ææŠ¥å‘Š",
      planet_positions: "è¡Œæ˜Ÿä½ç½®æ¦‚è§ˆ",
      nakshatra_analysis: "æœˆå®¿åˆ†æ",
      dasa_analysis: "å¤§è¿åˆ†æ",
      recommendations: "å»ºè®®ä¸è¡ŒåŠ¨",
      click_for_details: "ç‚¹å‡»è¡Œæ˜ŸæŸ¥çœ‹è¯¦ç»†è§£è¯»",

      tab_love: "çˆ±æƒ…å…³ç³»",
      tab_career: "äº‹ä¸šå‘å±•",
      tab_wealth: "è´¢å¯Œè¿åŠ¿",
      tab_health: "å¥åº·çŠ¶å†µ",
      tab_family: "å®¶åº­å…³ç³»",
      tab_study: "å­¦ä¸šæˆé•¿",
      tab_move: "æ—…è¡Œæ¬è¿",
      tab_overall: "ç»¼åˆè¿åŠ¿",

      sun_desc: "å¤ªé˜³ä»£è¡¨çµé­‚ã€è‡ªæˆ‘æ„è¯†å’Œé¢†å¯¼åŠ›ã€‚åœ¨å é™€å æ˜Ÿä¸­ï¼Œå¤ªé˜³è±¡å¾ç€çˆ¶äº²ã€æƒå¨å’Œç”Ÿå‘½åŠ›ã€‚",
      moon_desc: "æœˆäº®ä»£è¡¨å¿ƒçµã€æƒ…ç»ªå’Œç›´è§‰ã€‚å®ƒå½±å“æˆ‘ä»¬çš„æƒ…æ„Ÿååº”ã€å®‰å…¨æ„Ÿå’Œæ½œæ„è¯†æ¨¡å¼ã€‚",
      mercury_desc: "æ°´æ˜Ÿä»£è¡¨æ™ºåŠ›ã€æ²Ÿé€šå’Œå­¦ä¹ èƒ½åŠ›ã€‚å®ƒå½±å“æˆ‘ä»¬çš„æ€ç»´æ–¹å¼ã€è¡¨è¾¾èƒ½åŠ›å’Œå•†ä¸šæŠ€èƒ½ã€‚",
      venus_desc: "é‡‘æ˜Ÿä»£è¡¨çˆ±æƒ…ã€ç¾æ„Ÿå’Œäº«ä¹ã€‚å®ƒå½±å“æˆ‘ä»¬çš„å®¡ç¾è§‚ã€äººé™…å…³ç³»å’Œç‰©è´¨äº«å—ã€‚",
      mars_desc: "ç«æ˜Ÿä»£è¡¨èƒ½é‡ã€è¡ŒåŠ¨å’Œå‹‡æ°”ã€‚å®ƒå½±å“æˆ‘ä»¬çš„ä¸»åŠ¨æ€§ã€ç«äº‰åŠ›å’Œæ€§èƒ½é‡ã€‚",
      jupiter_desc: "æœ¨æ˜Ÿä»£è¡¨æ™ºæ…§ã€æ‰©å±•å’Œå¥½è¿ã€‚å®ƒæ˜¯æœ€å¤§çš„å‰æ˜Ÿï¼Œå¸¦æ¥æˆé•¿ã€çŸ¥è¯†å’Œè´¢å¯Œã€‚",
      saturn_desc: "åœŸæ˜Ÿä»£è¡¨è´£ä»»ã€çºªå¾‹å’Œé™åˆ¶ã€‚å®ƒæ•™å¯¼æˆ‘ä»¬è€å¿ƒã€åšæŒå’Œç°å®æ„Ÿã€‚",
      rahu_desc: "ç½—çºä»£è¡¨æ¬²æœ›ã€é‡å¿ƒå’Œç‰©è´¨è¿½æ±‚ã€‚å®ƒæ˜¯åŒ—éƒ¨äº¤ç‚¹ï¼Œå¸¦æ¥çªç„¶çš„å˜åŒ–å’Œæˆé•¿ã€‚",
      ketu_desc: "è®¡éƒ½ä»£è¡¨çµæ€§ã€è§£è„±å’Œè¿‡å»ä¸šåŠ›ã€‚å®ƒæ˜¯å—éƒ¨äº¤ç‚¹ï¼Œä¿ƒè¿›ç²¾ç¥è§‰é†’ã€‚",

      analysis_love: "é‡‘æ˜Ÿåœ¨å°„æ‰‹åº§ç¬¬10å®«ï¼Œæ˜¾ç¤ºä½ åœ¨äº‹ä¸šåœºåˆå¯èƒ½é‡åˆ°æµªæ¼«æœºä¼šã€‚æœˆäº®åœ¨æ°´ç“¶åº§ç¬¬9å®«è¡¨æ˜ä½ éœ€è¦æ€æƒ³ä¸Šçš„å…±é¸£ã€‚å¤ªé˜³åœ¨åŒé±¼åº§ç¬¬12å®«æ˜¾ç¤ºä½ åœ¨ç§ä¸‹é‡Œæµªæ¼«è€Œæ•æ„Ÿã€‚å»ºè®®å¤šå‚åŠ å­¦ä¹ äº¤æµæ´»åŠ¨ï¼Œå¯»æ‰¾æœ‰å…±åŒå…´è¶£çš„ä¼´ä¾£ã€‚",
      analysis_career: "å¤ªé˜³åœ¨åŒé±¼åº§ç¬¬12å®«ï¼Œé€‚åˆå¹•åå·¥ä½œæˆ–åˆ›æ„é¢†åŸŸã€‚æœ¨æ˜Ÿåœ¨ç‹®å­åº§ç¬¬4å®«æ˜¾ç¤ºå®¶åº­æ”¯æŒå¯¹äº‹ä¸šæœ‰å¸®åŠ©ã€‚ç«æ˜Ÿåœ¨æ°´ç“¶åº§ç¬¬11å®«å¸¦æ¥å›¢é˜Ÿåˆä½œæœºä¼šã€‚è€ƒè™‘åœ¨å®¶åŠå…¬æˆ–å®¶åº­ç›¸å…³äº‹ä¸šï¼Œç§¯æå‚ä¸ç¤¾äº¤ç½‘ç»œã€‚",
      analysis_wealth: "æ°´æ˜Ÿåœ¨å¤©èåº§ç¬¬2å®«ï¼Œæ˜¾ç¤ºä½ å¯¹è´¢åŠ¡æœ‰æ·±åˆ»çš„æ´å¯ŸåŠ›ã€‚åœŸæ˜Ÿåœ¨å·¨èŸ¹åº§ç¬¬5å®«æé†’æŠ•èµ„éœ€è°¨æ…ã€‚é‡‘æ˜Ÿåœ¨å°„æ‰‹åº§ç¬¬10å®«æ˜¾ç¤ºé€šè¿‡èŒä¸šå‘å±•å¯è·å¾—è´¢å¯Œã€‚å»ºè®®è¿›è¡Œé•¿æœŸç¨³å¥çš„æŠ•èµ„ï¼Œé¿å…æŠ•æœºè¡Œä¸ºã€‚",
      analysis_health: "ç«æ˜Ÿåœ¨æ°´ç“¶åº§ç¬¬11å®«ï¼Œéœ€è¦æ³¨æ„ç¥ç»ç³»ç»Ÿå¥åº·ã€‚å¤ªé˜³åœ¨åŒé±¼åº§ç¬¬12å®«æé†’å…³æ³¨æ½œæ„è¯†å‹åŠ›ã€‚æœ¨æ˜Ÿåœ¨ç‹®å­åº§ç¬¬4å®«æ˜¾ç¤ºå®¶åº­ç¯å¢ƒå¯¹å¥åº·æœ‰ç›Šã€‚å®šæœŸé”»ç‚¼å’Œå†¥æƒ³æœ‰åŠ©äºä¿æŒå¹³è¡¡ï¼Œæ³¨æ„ç”µå­è®¾å¤‡å¯¹å¥åº·çš„å½±å“ã€‚",
      analysis_family: "æœ¨æ˜Ÿåœ¨ç‹®å­åº§ç¬¬4å®«ï¼Œå®¶åº­å…³ç³»æ¸©æš–ä¸”æ”¯æŒæ€§å¼ºã€‚ç½—çºå’Œè®¡éƒ½åœ¨ç¬¬4å®«æ˜¾ç¤ºå®¶åº­ç¯å¢ƒå¯èƒ½æœ‰å˜åŒ–ã€‚æœˆäº®åœ¨æ°´ç“¶åº§ç¬¬9å®«æ˜¾ç¤ºå®¶åº­æˆå‘˜æ€æƒ³å¼€æ”¾ã€‚ä¿æŒå¼€æ”¾æ²Ÿé€šï¼Œå°Šé‡å½¼æ­¤ç‹¬ç«‹ç©ºé—´ã€‚",
      analysis_study: "æœˆäº®åœ¨æ°´ç“¶åº§ç¬¬9å®«ï¼Œé€‚åˆé«˜ç­‰æ•™è‚²å’Œå“²å­¦ç ”ç©¶ã€‚æ°´æ˜Ÿåœ¨å¤©èåº§ç¬¬2å®«å­¦ä¹ èƒ½åŠ›æ·±åº¦å¼ºã€‚å¤ªé˜³åœ¨åŒé±¼åº§ç¬¬12å®«æœ‰è‰ºæœ¯å¤©èµ‹ã€‚è€ƒè™‘å‡ºå›½ç•™å­¦æˆ–åœ¨çº¿è¯¾ç¨‹ï¼Œå‘å±•åˆ›æ„æ‰èƒ½ã€‚",
      analysis_move: "ç«æ˜Ÿåœ¨æ°´ç“¶åº§ç¬¬11å®«ï¼Œé€‚åˆå›½é™…æ—…è¡Œæˆ–æ¬è¿ã€‚ç¬¬9å®«çš„æœˆäº®æ˜¾ç¤ºæµ·å¤–ç»å†å¯¹æˆé•¿æœ‰ç›Šã€‚æœ¨æ˜Ÿåœ¨ç‹®å­åº§ç¬¬4å®«æ˜¾ç¤ºå®¶åº­æ”¯æŒæ¬è¿ã€‚è®¡åˆ’æ˜¥å­£å‡ºè¡Œæœ€ä½³ï¼Œè€ƒè™‘ä¸æœ‹å‹æˆ–å›¢é˜Ÿä¸€èµ·è¡ŒåŠ¨ã€‚",
      analysis_overall: "ç»¼åˆæ¥çœ‹ï¼Œå½“å‰æœ¨æ˜Ÿå¤§è¿å¸¦æ¥æˆé•¿æœºä¼šã€‚å„è¡Œæ˜Ÿä½ç½®ç›¸å¯¹å’Œè°ï¼Œé€‚åˆåˆ¶å®šé•¿æœŸè®¡åˆ’ã€‚é‡ç‚¹å‘å±•åˆ›æ„å’Œçµæ€§æ–¹é¢ï¼Œåˆ©ç”¨å®¶åº­æ”¯æŒç³»ç»Ÿã€‚ä¿æŒå¼€æ”¾å¿ƒæ€ï¼Œå‡†å¤‡è¿æ¥æ–°çš„æœºé‡ã€‚",

      reco_1: "æ¯å¤©è¿›è¡Œ10åˆ†é’Ÿå†¥æƒ³ï¼Œå¢å¼ºå†…åœ¨è§‰çŸ¥",
      reco_2: "è®°å½•æ¢¦å¢ƒå’Œç›´è§‰æ„Ÿå—ï¼ŒåŸ¹å…»çµæ€§è¿æ¥",
      reco_3: "å®šæœŸè¿›è¡Œèƒ½é‡æ¸…ç†ï¼Œä¿æŒèº«å¿ƒå¹³è¡¡",
      reco_4: "åŠ å…¥VIPä¼šå‘˜è·å–ä¸ªæ€§åŒ–æŒ‡å¯¼",
      reco_5: "è€ƒè™‘ä¸€å¯¹ä¸€ä¸“ä¸šå’¨è¯¢æ·±å…¥æ¢ç´¢",

      vip_title:"ğŸŒ™ ä¼šå‘˜åŒºåŸŸ VIP Segment",
      vip_mingli:"ğŸ— å‘½ç†ç©ºé—´ä¸“å±å†…å®¹",
      vip_xinlian:"ğŸŒ™ å¿ƒæ€œç©ºé—´ä¸“å±å†…å®¹",
      vip_love:"å§»ç¼˜æ–¹å‘ï¼šæ‹çˆ±ç¼˜åˆ†ã€å©šå§»èµ°åŠ¿",
      vip_career:"äº‹ä¸šæ–¹å‘ï¼šèŒåœºå‘å±•ã€åˆ›ä¸šæ½œåŠ›",
      vip_wealth:"è´¢è¿æ–¹å‘ï¼šè´¢ä½åˆ†æã€ç†è´¢æ—¶æœº",
      vip_pet:"å® ç‰©å‘½ç†ï¼šä¼´ä¾£åŠ¨ç‰©çš„æ€§æ ¼ä¸ç¼˜åˆ†",
      vip_hepan:"åˆç›˜åˆ†æï¼šå©šæœŸæ‹©æ—¥ã€æ–°ç”Ÿæ‹©æ—¶",
      vip_name:"æµ‹ååˆ†æï¼šå…¬å¸åã€å®å®åã€å‘½åæ”¹è¿",
      vip_fengshui:"è´¢ä½åˆç›˜ï¼šä½å®¶ / åŠå…¬å®¤åŠ¨çº¿é…åˆ",
      vip_record:"çµæ€§è®°å½•ï¼šç…§ç‰‡ã€æ¢¦å¢ƒã€å£°éŸ³ã€æ„¿æœ›ç¥ˆç¥·",
      vip_course:"å‘½ç†è¯¾ç¨‹ï¼šå…«å­— / å¡”ç½— / å æ˜Ÿ / çµæ•° / äººç±»å›¾",
      vip_memorial:"å®¶æ—çºªå¿µç³»ç»Ÿï¼šäº²äººçµæ€§çºªå¿µ & å»¶ç»­",
      vip_tasks:"æ¯å‘¨èƒ½é‡ç»ƒä¹  / ç¥æ˜ä»ªå¼ä»»åŠ¡",
      vip_shop:"èƒ½é‡å•†åŸä¸“å±æŠ˜æ‰£ & å¾¡å®ˆè®¢åˆ¶",
      login_title:"ğŸ’ ç™»å…¥ VIP åŠŸèƒ½",

      ph_email:"é‚®ç®± Email",
      ph_password:"å¯†ç  Passwordï¼ˆè‡³å°‘8ä½ï¼Œå«å¤§å°å†™æ•°å­—ç¬¦å·ï¼‰",
      ph_label_password:"å¯†ç  Password",
      panel_login_head:"è´¦æˆ·ç™»å½• / æ³¨å†Œ",
      panel_member_head:"ä¼šå‘˜æœåŠ¡",
      btn_login:"ç™»å…¥è´¦æˆ·",
      btn_reset:"ğŸ”‘ é‡è®¾å¯†ç ",
      btn_register:"æ³¨å†Œè´¦æˆ·",
      btn_upgrade:"ğŸ’ å‡çº§ä¸º VIPï¼ˆæœˆè´¹ï¼‰",
      btn_backshop:"â† è¿”å›å‘½ç†å•†åŸ",
      note_price:"æ³¨å†Œè´¦å·èµ é€ä¸€æ¬¡å…è´¹ä½“éªŒ",
      note_price1:"$9.9 / æœˆè´¹ VIPï¼ˆå‘½ç†ç©ºé—´ + å¿ƒæ€œç©ºé—´ + çµæ€§è¯¾ç¨‹ï¼‰",

      chat_fab: 'é—®',
      chat_title: 'å¿ƒæ€œç®¡å®¶ Â· GPT',
      chat_bot_name: 'å¿ƒæ€œç®¡å®¶',
      chat_welcome: 'ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„å¿ƒæ€œç®¡å®¶è§£è¯»åŠ©æ‰‹ï¼Œå¯ä»¥å¸®ä½ åˆ†ææˆ–è§£ç­”ç›¸å…³é—®é¢˜ã€‚',
      chat_input_ph: 'è¾“å…¥é—®é¢˜â€¦',
      chat_send: 'å‘é€'
    },

    /* ä½ åŸæœ¬çš„ zh-TW / en / ja / th / ms å­—å…¸å¾ˆé•¿ï¼Œè¿™é‡Œä¿æŒä¸æ”¹ã€‚
       ä¸‹é¢æˆ‘ä»¬ç”¨ EXTRA_I18N è¡¥å……ç¼ºçš„ keyï¼Œä¸ç”¨ä½ é‡æ‰“ä¸€éã€‚ */
    "zh-TW": i18n["zh-TW"] || {},
    "en": i18n["en"] || {},
    "ja": i18n["ja"] || {},
    "th": i18n["th"] || {},
    "ms": i18n["ms"] || {}
  };

  /* ===== è¡¥å……ç¼ºå°‘çš„ i18n keyï¼ˆé¿å…ä½ ç°æœ‰å­—å…¸æ¼è¯å¯¼è‡´å‡ºç°ä¸­æ–‡ç¡¬ç¼–ç ï¼‰ ===== */
  const EXTRA_I18N = {
    "zh-CN": {
      interpretation_label: "è§£è¯»",
      modal_position_label: "ä½ç½®",
      modal_reco_label: "å»ºè®®",
      auth_reveal: "æ˜¾ç¤ºç™»å½•è¾“å…¥æ¡†",
      auth_hide: "éšè—ç™»å½•è¾“å…¥æ¡†",
      auth_not_ready: "ï¼ˆæç¤ºï¼‰ç™»å½•/æ³¨å†Œåç«¯å°šæœªæ¥å…¥ï¼Œè¿™é‡Œä»…å±•ç¤º UI ç»“æ„ã€‚",
      chat_reply_stub: "æ”¶åˆ°ã€‚ä½ æƒ³é‡ç‚¹çœ‹çˆ±æƒ…ã€äº‹ä¸šã€è´¢è¿è¿˜æ˜¯ç»¼åˆï¼Ÿ"
    },
    "zh-TW": {
      interpretation_label: "è§£è®€",
      modal_position_label: "ä½ç½®",
      modal_reco_label: "å»ºè­°",
      auth_reveal: "é¡¯ç¤ºç™»å…¥è¼¸å…¥æ¡†",
      auth_hide: "éš±è—ç™»å…¥è¼¸å…¥æ¡†",
      auth_not_ready: "ï¼ˆæç¤ºï¼‰ç™»å…¥/è¨»å†Šå¾Œç«¯å°šæœªæ¥å…¥ï¼Œé€™è£¡åƒ…å±•ç¤º UI çµæ§‹ã€‚",
      chat_reply_stub: "æ”¶åˆ°ã€‚ä½ æƒ³é‡é»çœ‹æ„›æƒ…ã€äº‹æ¥­ã€è²¡é‹é‚„æ˜¯ç¶œåˆï¼Ÿ"
    },
    "en": {
      interpretation_label: "Interpretation",
      modal_position_label: "Position",
      modal_reco_label: "Suggestion",
      auth_reveal: "Reveal login inputs",
      auth_hide: "Hide login inputs",
      auth_not_ready: "(Note) Auth backend is not connected yet. This is UI only.",
      chat_reply_stub: "Got it. Do you want to focus on love, career, wealth, or overall?"
    },
    "ja": {
      interpretation_label: "è§£é‡ˆ",
      modal_position_label: "ä½ç½®",
      modal_reco_label: "ææ¡ˆ",
      auth_reveal: "ãƒ­ã‚°ã‚¤ãƒ³å…¥åŠ›æ¬„ã‚’è¡¨ç¤º",
      auth_hide: "ãƒ­ã‚°ã‚¤ãƒ³å…¥åŠ›æ¬„ã‚’éè¡¨ç¤º",
      auth_not_ready: "ï¼ˆæ³¨ï¼‰ãƒ­ã‚°ã‚¤ãƒ³/ç™»éŒ²ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯æœªæ¥ç¶šã§ã™ã€‚UI ã®ã¿ã§ã™ã€‚",
      chat_reply_stub: "äº†è§£ã€‚æ‹æ„›ãƒ»ä»•äº‹ãƒ»é‡‘é‹ãƒ»ç·åˆã®ã©ã‚Œã‚’é‡ç‚¹ã«ã—ã¾ã™ã‹ï¼Ÿ"
    },
    "th": {
      interpretation_label: "à¸„à¸³à¸•à¸µà¸„à¸§à¸²à¸¡",
      modal_position_label: "à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡",
      modal_reco_label: "à¸‚à¹‰à¸­à¹€à¸ªà¸™à¸­à¹à¸™à¸°",
      auth_reveal: "à¹à¸ªà¸”à¸‡à¸Šà¹ˆà¸­à¸‡à¸¥à¹‡à¸­à¸à¸­à¸´à¸™",
      auth_hide: "à¸‹à¹ˆà¸­à¸™à¸Šà¹ˆà¸­à¸‡à¸¥à¹‡à¸­à¸à¸­à¸´à¸™",
      auth_not_ready: "(à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸) à¸£à¸°à¸šà¸šà¸¥à¹‡à¸­à¸à¸­à¸´à¸™à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ à¹à¸ªà¸”à¸‡à¹€à¸‰à¸à¸²à¸° UI",
      chat_reply_stub: "à¸£à¸±à¸šà¸—à¸£à¸²à¸š à¸„à¸¸à¸“à¸­à¸¢à¸²à¸à¹‚à¸Ÿà¸à¸±à¸ªà¹€à¸£à¸·à¹ˆà¸­à¸‡à¸„à¸§à¸²à¸¡à¸£à¸±à¸ à¸à¸²à¸£à¸‡à¸²à¸™ à¸à¸²à¸£à¹€à¸‡à¸´à¸™ à¸«à¸£à¸·à¸­à¸ à¸²à¸à¸£à¸§à¸¡?"
    },
    "ms": {
      interpretation_label: "Tafsiran",
      modal_position_label: "Kedudukan",
      modal_reco_label: "Cadangan",
      auth_reveal: "Tunjukkan input log masuk",
      auth_hide: "Sembunyikan input log masuk",
      auth_not_ready: "(Nota) Backend log masuk belum disambungkan. Ini UI sahaja.",
      chat_reply_stub: "Baik. Anda mahu fokus cinta, kerjaya, kewangan, atau keseluruhan?"
    }
  };

  Object.keys(EXTRA_I18N).forEach((lang) => {
    if (!i18n[lang]) i18n[lang] = {};
    Object.assign(i18n[lang], EXTRA_I18N[lang]);
  });

  /* ===== helpers ===== */
  const $ = (id) => document.getElementById(id);
  let lastParams = null;
  let lastPlanetPositions = [];

  function getLang() {
    const saved = localStorage.getItem(LANG_KEY);
    if (saved && i18n[saved]) return saved;
    const nav = (navigator.language || "zh-CN").toLowerCase();
    if (nav.startsWith("zh-tw") || nav.includes("hant")) return "zh-TW";
    if (nav.startsWith("zh")) return "zh-CN";
    if (nav.startsWith("en")) return "en";
    if (nav.startsWith("ja")) return "ja";
    if (nav.startsWith("th")) return "th";
    if (nav.startsWith("ms")) return "ms";
    return "zh-CN";
  }

  function t(key) {
    const lang = getLang();
    const L = i18n[lang] || i18n["zh-CN"];
    return (L && L[key]) ? L[key] : (i18n["zh-CN"][key] || key);
  }

  function applyI18n() {
    document.querySelectorAll("[data-i18n]").forEach((el) => {
      const k = el.getAttribute("data-i18n");
      const text = t(k);
      if (text != null) el.textContent = text;
    });

    document.querySelectorAll("[data-i18n-ph]").forEach((el) => {
      const k = el.getAttribute("data-i18n-ph");
      const ph = t(k);
      if (ph != null) el.setAttribute("placeholder", ph);
    });

    const titleEl = document.querySelector("title[data-i18n='title'], title");
    if (titleEl) titleEl.textContent = t("title");
  }

  function setLang(lang) {
    if (!i18n[lang]) lang = "zh-CN";
    localStorage.setItem(LANG_KEY, lang);
    const sel = $("langSelect");
    if (sel) sel.value = lang;
    applyI18n();

    // è‹¥å·²æœ‰åˆ†æå‚æ•°ï¼Œåˆ‡æ¢è¯­è¨€æ—¶é‡ç»˜å†…å®¹ï¼ˆåŒ seedï¼ŒåŒä½ç½®ï¼Œä½†æ˜¾ç¤ºè¯­è¨€ä¼šå˜ï¼‰
    if (lastParams && lastParams.birthdt && lastParams.birthplace) {
      generateLocalAnalysis(lastParams);
    } else {
      // æ²¡æœ‰åˆ†æä¹Ÿè¦æŠŠ tab æ ‡ç­¾æ–‡å­—æ›´æ–°ä¸€æ¬¡ï¼ˆå¦‚æœé¡µé¢é‡Œå­˜åœ¨ï¼‰
      const tabs = $("topicTabs");
      if (tabs && tabs.children.length) showTopicTabs("overall");
    }
  }

  /* ===== topic tabs ===== */
  function getTopicAnalysisContent(topicId) {
    const k = `analysis_${topicId}`;
    const v = t(k);
    return v && v !== k ? v : t("analysis_overall");
  }

  function showTopicTabs(selectedTopic = "overall") {
    const topics = [
      { id: "love", name: t("tab_love") },
      { id: "career", name: t("tab_career") },
      { id: "wealth", name: t("tab_wealth") },
      { id: "health", name: t("tab_health") },
      { id: "family", name: t("tab_family") },
      { id: "study", name: t("tab_study") },
      { id: "move", name: t("tab_move") },
      { id: "overall", name: t("tab_overall") }
    ];

    const tabsContainer = $("topicTabs");
    const contentsContainer = $("topicContents");
    if (!tabsContainer || !contentsContainer) return;

    tabsContainer.innerHTML = "";
    contentsContainer.innerHTML = "";
    tabsContainer.style.display = "flex";

    topics.forEach((topic) => {
      const tab = document.createElement("button");
      tab.type = "button";
      tab.className = "topic-tab" + (topic.id === selectedTopic ? " active" : "");
      tab.textContent = topic.name;
      tab.dataset.topic = topic.id;

      tab.addEventListener("click", () => {
        document.querySelectorAll(".topic-tab").forEach((tEl) => tEl.classList.remove("active"));
        document.querySelectorAll(".topic-content").forEach((cEl) => cEl.classList.remove("active"));
        tab.classList.add("active");
        const content = $("content-" + topic.id);
        if (content) content.classList.add("active");
      });

      tabsContainer.appendChild(tab);

      const content = document.createElement("div");
      content.id = "content-" + topic.id;
      content.className = "topic-content" + (topic.id === selectedTopic ? " active" : "");
      content.innerHTML = `
        <div class="analysis-section">
          <h4>${topic.name}</h4>
          <p>${getTopicAnalysisContent(topic.id)}</p>
        </div>
      `;
      contentsContainer.appendChild(content);
    });
  }

  /* ===== planet detail ===== */
  function getPlanetDescription(planetKey) {
    const map = {
      sun: t("sun_desc"),
      moon: t("moon_desc"),
      mercury: t("mercury_desc"),
      venus: t("venus_desc"),
      mars: t("mars_desc"),
      jupiter: t("jupiter_desc"),
      saturn: t("saturn_desc"),
      rahu: t("rahu_desc"),
      ketu: t("ketu_desc")
    };
    return map[planetKey] || "";
  }

  function showPlanetDetail(planetInfo) {
    const modal = $("planetModal");
    const modalTitle = $("modalTitle");
    const modalContent = $("modalContent");
    if (!modal || !modalTitle || !modalContent) return;

    modalTitle.textContent = `${planetInfo.planet} Â· ${planetInfo.sign} Â· ${planetInfo.house}`;

    const desc = getPlanetDescription(planetInfo.key);

    modalContent.innerHTML = `
      <p><strong>${t("modal_position_label")}:</strong> ${planetInfo.sign} Â· ${planetInfo.house}</p>
      <p><strong>${t("interpretation_label")}:</strong></p>
      <p>${desc}</p>
      <p><strong>${t("modal_reco_label")}:</strong> ${t("reco_1")}</p>
    `;

    modal.style.display = "flex";
  }

  function closePlanetModal() {
    const modal = $("planetModal");
    if (modal) modal.style.display = "none";
  }

  /* ===== local analysis (deterministic fake chart) ===== */
  const PLANET_KEYS = ["sun", "moon", "mercury", "venus", "mars", "jupiter", "saturn", "rahu", "ketu"];

  const PLANET_LABELS = {
    "zh-CN": ["å¤ªé˜³", "æœˆäº®", "æ°´æ˜Ÿ", "é‡‘æ˜Ÿ", "ç«æ˜Ÿ", "æœ¨æ˜Ÿ", "åœŸæ˜Ÿ", "ç½—çº", "è®¡éƒ½"],
    "zh-TW": ["å¤ªé™½", "æœˆäº®", "æ°´æ˜Ÿ", "é‡‘æ˜Ÿ", "ç«æ˜Ÿ", "æœ¨æ˜Ÿ", "åœŸæ˜Ÿ", "ç¾…çº", "è¨ˆéƒ½"],
    en: ["Sun", "Moon", "Mercury", "Venus", "Mars", "Jupiter", "Saturn", "Rahu", "Ketu"],
    ja: ["å¤ªé™½", "æœˆ", "æ°´æ˜Ÿ", "é‡‘æ˜Ÿ", "ç«æ˜Ÿ", "æœ¨æ˜Ÿ", "åœŸæ˜Ÿ", "ãƒ©ãƒ¼ãƒ•", "ã‚±ãƒ¼ãƒˆã‚¥"],
    th: ["à¸”à¸§à¸‡à¸­à¸²à¸—à¸´à¸•à¸¢à¹Œ", "à¸”à¸§à¸‡à¸ˆà¸±à¸™à¸—à¸£à¹Œ", "à¸”à¸²à¸§à¸à¸¸à¸˜", "à¸”à¸²à¸§à¸¨à¸¸à¸à¸£à¹Œ", "à¸”à¸²à¸§à¸­à¸±à¸‡à¸„à¸²à¸£", "à¸”à¸²à¸§à¸à¸¤à¸«à¸±à¸ªà¸šà¸”à¸µ", "à¸”à¸²à¸§à¹€à¸ªà¸²à¸£à¹Œ", "à¸£à¸²à¸«à¸¹", "à¹€à¸à¸•à¸¸"],
    ms: ["Matahari", "Bulan", "Utarid", "Zuhrah", "Marikh", "Musytari", "Zuhal", "Rahu", "Ketu"]
  };

  const SIGNS = {
    "zh-CN": ["ç™½ç¾Šåº§","é‡‘ç‰›åº§","åŒå­åº§","å·¨èŸ¹åº§","ç‹®å­åº§","å¤„å¥³åº§","å¤©ç§¤åº§","å¤©èåº§","å°„æ‰‹åº§","æ‘©ç¾¯åº§","æ°´ç“¶åº§","åŒé±¼åº§"],
    "zh-TW": ["ç™½ç¾Šåº§","é‡‘ç‰›åº§","é›™å­åº§","å·¨èŸ¹åº§","ç…å­åº§","è™•å¥³åº§","å¤©ç§¤åº§","å¤©è åº§","å°„æ‰‹åº§","æ‘©ç¾¯åº§","æ°´ç“¶åº§","é›™é­šåº§"],
    en: ["Aries","Taurus","Gemini","Cancer","Leo","Virgo","Libra","Scorpio","Sagittarius","Capricorn","Aquarius","Pisces"],
    ja: ["ç‰¡ç¾Šåº§","ç‰¡ç‰›åº§","åŒå­åº§","èŸ¹åº§","ç…å­åº§","ä¹™å¥³åº§","å¤©ç§¤åº§","è åº§","å°„æ‰‹åº§","å±±ç¾Šåº§","æ°´ç“¶åº§","é­šåº§"],
    th: ["à¹€à¸¡à¸©","à¸à¸¤à¸©à¸ ","à¹€à¸¡à¸–à¸¸à¸™","à¸à¸£à¸à¸","à¸ªà¸´à¸‡à¸«à¹Œ","à¸à¸±à¸™à¸¢à¹Œ","à¸•à¸¸à¸¥à¸¢à¹Œ","à¸à¸´à¸ˆà¸´à¸","à¸˜à¸™à¸¹","à¸¡à¸±à¸‡à¸à¸£","à¸à¸¸à¸¡à¸ à¹Œ","à¸¡à¸µà¸™"],
    ms: ["Aries","Taurus","Gemini","Cancer","Leo","Virgo","Libra","Scorpio","Sagittarius","Capricorn","Aquarius","Pisces"]
  };

  const HOUSES = {
    "zh-CN": ["ç¬¬1å®«","ç¬¬2å®«","ç¬¬3å®«","ç¬¬4å®«","ç¬¬5å®«","ç¬¬6å®«","ç¬¬7å®«","ç¬¬8å®«","ç¬¬9å®«","ç¬¬10å®«","ç¬¬11å®«","ç¬¬12å®«"],
    "zh-TW": ["ç¬¬1å®®","ç¬¬2å®®","ç¬¬3å®®","ç¬¬4å®®","ç¬¬5å®®","ç¬¬6å®®","ç¬¬7å®®","ç¬¬8å®®","ç¬¬9å®®","ç¬¬10å®®","ç¬¬11å®®","ç¬¬12å®®"],
    en: ["1st House","2nd House","3rd House","4th House","5th House","6th House","7th House","8th House","9th House","10th House","11th House","12th House"],
    ja: ["ç¬¬1å®¤","ç¬¬2å®¤","ç¬¬3å®¤","ç¬¬4å®¤","ç¬¬5å®¤","ç¬¬6å®¤","ç¬¬7å®¤","ç¬¬8å®¤","ç¬¬9å®¤","ç¬¬10å®¤","ç¬¬11å®¤","ç¬¬12å®¤"],
    th: ["à¹€à¸£à¸·à¸­à¸™à¸—à¸µà¹ˆ1","à¹€à¸£à¸·à¸­à¸™à¸—à¸µà¹ˆ2","à¹€à¸£à¸·à¸­à¸™à¸—à¸µà¹ˆ3","à¹€à¸£à¸·à¸­à¸™à¸—à¸µà¹ˆ4","à¹€à¸£à¸·à¸­à¸™à¸—à¸µà¹ˆ5","à¹€à¸£à¸·à¸­à¸™à¸—à¸µà¹ˆ6","à¹€à¸£à¸·à¸­à¸™à¸—à¸µà¹ˆ7","à¹€à¸£à¸·à¸­à¸™à¸—à¸µà¹ˆ8","à¹€à¸£à¸·à¸­à¸™à¸—à¸µà¹ˆ9","à¹€à¸£à¸·à¸­à¸™à¸—à¸µà¹ˆ10","à¹€à¸£à¸·à¸­à¸™à¸—à¸µà¹ˆ11","à¹€à¸£à¸·à¸­à¸™à¸—à¸µà¹ˆ12"],
    ms: ["Rumah 1","Rumah 2","Rumah 3","Rumah 4","Rumah 5","Rumah 6","Rumah 7","Rumah 8","Rumah 9","Rumah 10","Rumah 11","Rumah 12"]
  };

  function generateLocalAnalysis({ name, gender, birthdt, birthplace, topic }) {
    lastParams = { name, gender, birthdt, birthplace, topic };

    const localCard = $("localCard");
    const localText = $("localText");
    if (!localCard || !localText) return;

    const lang = getLang();
    const planets = PLANET_LABELS[lang] || PLANET_LABELS["zh-CN"];
    const signs = SIGNS[lang] || SIGNS["zh-CN"];
    const houses = HOUSES[lang] || HOUSES["zh-CN"];

    // seed (stable deterministic)
    const hashStr = (birthdt || "") + "|" + (birthplace || "") + "|" + (gender || "");
    let seed = 0;
    for (let i = 0; i < hashStr.length; i++) seed = (seed * 31 + hashStr.charCodeAt(i)) | 0;

    function rnd(n) {
      const x = Math.sin(seed + n * 13.37) * 10000;
      return x - Math.floor(x);
    }

    lastPlanetPositions = planets.map((label, idx) => {
      const r1 = rnd(idx + 1);
      const r2 = rnd(idx + 101);
      const signIndex = Math.abs(Math.floor(r1 * signs.length)) % signs.length;
      const houseIndex = Math.abs(Math.floor(r2 * houses.length)) % houses.length;
      return {
        planet: label,
        sign: signs[signIndex],
        house: houses[houseIndex],
        key: PLANET_KEYS[idx] || "sun"
      };
    });

    // render
    localText.innerHTML = "";
    const wrap = document.createElement("div");
    wrap.className = "local-analysis";

    const h3 = document.createElement("h3");
    h3.textContent = t("analysis_title");
    wrap.appendChild(h3);

    const meta = document.createElement("div");
    meta.className = "muted";
    const birthLabel = birthdt ? String(birthdt).replace("T", " ") : "";
    const namePart = name ? `${name} Â· ` : "";
    meta.textContent = `${namePart}${birthLabel} Â· ${birthplace || ""}`;
    wrap.appendChild(meta);

    // planet section
    const sec1 = document.createElement("div");
    sec1.className = "analysis-section";

    const h4a = document.createElement("h4");
    h4a.textContent = t("planet_positions");
    sec1.appendChild(h4a);

    const tip = document.createElement("div");
    tip.className = "muted";
    tip.textContent = t("click_for_details");
    sec1.appendChild(tip);

    const grid = document.createElement("div");
    grid.className = "planet-grid";

    lastPlanetPositions.forEach((p) => {
      const item = document.createElement("div");
      item.className = "planet-item";
      item.setAttribute("role", "button");
      item.setAttribute("tabindex", "0");

      const n = document.createElement("div");
      n.className = "planet-name";
      n.textContent = p.planet;

      const pos = document.createElement("div");
      pos.className = "planet-position";
      pos.textContent = `${p.sign} Â· ${p.house}`;

      item.appendChild(n);
      item.appendChild(pos);

      item.addEventListener("click", () => showPlanetDetail(p));
      item.addEventListener("keydown", (ev) => {
        if (ev.key === "Enter" || ev.key === " ") {
          ev.preventDefault();
          showPlanetDetail(p);
        }
      });

      grid.appendChild(item);
    });

    sec1.appendChild(grid);
    wrap.appendChild(sec1);

    // topic tabs
    const topicTabs = $("topicTabs");
    if (topicTabs) topicTabs.style.display = "flex";
    showTopicTabs(topic || "overall");

    // recommendations
    const sec2 = document.createElement("div");
    sec2.className = "analysis-section";

    const h4b = document.createElement("h4");
    h4b.textContent = t("recommendations");
    sec2.appendChild(h4b);

    const ul = document.createElement("ul");
    ul.className = "action-list";
    ["reco_1","reco_2","reco_3","reco_4","reco_5"].forEach((k) => {
      const li = document.createElement("li");
      li.textContent = t(k);
      ul.appendChild(li);
    });
    sec2.appendChild(ul);

    wrap.appendChild(sec2);

    localText.appendChild(wrap);
    localCard.style.display = "block";

    // scroll into view
    try { localCard.scrollIntoView({ behavior: "smooth", block: "start" }); } catch (_) {}
  }

  /* ===== header scroll effect ===== */
  function initHeaderScroll() {
    const header = document.querySelector(".site-header");
    if (!header) return;
    const onScroll = () => {
      if (window.scrollY > 10) header.classList.add("scrolled");
      else header.classList.remove("scrolled");
    };
    window.addEventListener("scroll", onScroll, { passive: true });
    onScroll();
  }

  /* ===== chat (floating) ===== */
  function initChat() {
    const fab = $("ssChatFab");
    const panel = $("chatPanel");
    const close = $("chatClose");
    const sendBtn = $("chatSend");
    const input = $("chatInput");
    const body = $("chatBody");

    if (!fab || !panel || !close || !sendBtn || !input || !body) return;

    const open = () => panel.setAttribute("aria-hidden", "false");
    const shut = () => panel.setAttribute("aria-hidden", "true");

    fab.addEventListener("click", () => {
      const hidden = panel.getAttribute("aria-hidden") !== "false";
      if (hidden) open();
      else shut();
      if (panel.getAttribute("aria-hidden") === "false") input.focus();
    });

    close.addEventListener("click", shut);

    function appendMsg(text, isMe) {
      const msg = document.createElement("div");
      msg.className = "ss-msg" + (isMe ? " me" : "");
      msg.textContent = text;
      body.appendChild(msg);
      body.scrollTop = body.scrollHeight;
    }

    function send() {
      const q = (input.value || "").trim();
      if (!q) return;
      appendMsg(q, true);
      input.value = "";

      // è¿™é‡Œå…ˆåšæœ¬åœ° stubï¼ˆä½ ä»¥åæ¥ worker å†æ›¿æ¢ï¼‰
      window.setTimeout(() => appendMsg(t("chat_reply_stub"), false), 250);
    }

    sendBtn.addEventListener("click", send);
    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        send();
      }
    });
  }

  /* ===== VIP auth: hide inputs by default, reveal on click ===== */
  function initAuthReveal() {
    const fields = $("authFields");
    if (!fields) return;

    const loginBtn = $("loginBtn");
    const registerBtn = $("registerBtn");
    const resetBtn = $("resetBtn");
    const err = $("authError");

    // insert toggle button before fields
    const toggle = document.createElement("button");
    toggle.type = "button";
    toggle.className = "btn ghost block";
    toggle.id = "authToggle";
    toggle.setAttribute("data-i18n", "auth_reveal");

    fields.parentElement.insertBefore(toggle, fields);

    let shown = false;

    function update() {
      fields.style.display = shown ? "flex" : "none";
      if (loginBtn) loginBtn.disabled = !shown;
      if (registerBtn) registerBtn.disabled = !shown;
      if (resetBtn) resetBtn.disabled = !shown;

      toggle.setAttribute("data-i18n", shown ? "auth_hide" : "auth_reveal");
      applyI18n();

      if (err) {
        err.style.display = "block";
        err.textContent = t("auth_not_ready");
      }
    }

    toggle.addEventListener("click", () => {
      shown = !shown;
      update();
      if (shown) {
        const email = $("email");
        if (email) email.focus();
      }
    });

    // prevent default submit (no backend here)
    const loginForm = $("loginForm");
    const registerForm = $("registerForm");
    if (loginForm) loginForm.addEventListener("submit", (e) => e.preventDefault());
    if (registerForm) registerForm.addEventListener("submit", (e) => e.preventDefault());
    if (resetBtn) resetBtn.addEventListener("click", () => { /* UI only */ });

    update();
  }

  /* ===== init ===== */
  function init() {
    // language
    const sel = $("langSelect");
    const lang = getLang();
    if (sel) {
      sel.value = lang;
      sel.addEventListener("change", (e) => setLang(e.target.value));
    }
    setLang(lang);

    // modal close
    const closeBtn = $("closeModal");
    const modal = $("planetModal");
    if (closeBtn) closeBtn.addEventListener("click", closePlanetModal);
    if (modal) {
      modal.addEventListener("click", (e) => {
        if (e.target === modal) closePlanetModal();
      });
    }

    // generate button
    const go = $("go");
    if (go) {
      go.addEventListener("click", (e) => {
        e.preventDefault();
        const params = {
          name: ($("name") && $("name").value || "").trim(),
          gender: ($("gender") && $("gender").value || ""),
          birthdt: ($("birthdt") && $("birthdt").value || ""),
          birthplace: ($("birthplace") && $("birthplace").value || "").trim(),
          topic: "overall"
        };

        if (!params.birthdt || !params.birthplace) {
          alert(t("need_birth"));
          return;
        }
        generateLocalAnalysis(params);
      });
    }

    initHeaderScroll();
    initChat();
    initAuthReveal();
  }

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", init);
  } else {
    init();
  }

})();
</script>
</body>
</html>






















