<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title data-i18n="page_title">å‘½ç†å¿ƒæ€œç©ºé—´ Â· VIP Segment</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600&family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
    :root{
  --bg:#0b0f14; --card:#11161dcc; --line:#1f2a36; --text:#e8edf3; --muted:#98a7b7;
  --brand:#d4af37; --gold:#d4af37; --gold2:#f2d27a; --accent:#58b9ff;
  --radius:14px; --shadow:0 8px 30px rgba(0,0,0,.35);
  --card-w:128px; --card-h:212px; --gap:14px;
}
@media (max-width:640px){
  :root{ --card-w:100px; --card-h:168px; --gap:10px; }
}

html,body{height:100%}
body{
  margin:0; color:var(--text);
  background: radial-gradient(1200px 600px at 70% -10%, #16202b 10%, transparent 60%) no-repeat,
              linear-gradient(180deg,#0b0f14,#0b0f14);
  font-family: Inter,system-ui,-apple-system,"Noto Sans SC","Segoe UI",Roboto,Arial,sans-serif;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  overflow-x:hidden;
}
body::before{
  content:"";
  position:fixed;
  inset:0;
  z-index:-2;
  background: linear-gradient(rgba(11, 15, 20, 0.85), rgba(11, 15, 20, 0.9)), 
              radial-gradient(circle at 20% 80%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
              radial-gradient(circle at 80% 20%, rgba(88, 185, 255, 0.05) 0%, transparent 50%);
}

/* å…¨å±€å®¹å™¨ */
.container{
  max-width:1100px;
  margin:0 auto;
  padding:24px 16px 80px;
}

/* â€”â€” å¤´éƒ¨ â€”â€” */
.site-header{
  position:sticky;
  top:0;
  z-index:10;
  background:#0b0f14cc;
  border-bottom:1px solid #0f1622;
  backdrop-filter:saturate(140%) blur(12px);
  transition:.3s;
}
.site-header.scrolled{
  background:rgba(11,15,20,.95);
  box-shadow:0 4px 20px rgba(0,0,0,.3);
}
.head-inner{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:14px;
  padding:14px 16px;
}
.brand{
  display:flex; align-items:center; gap:10px;
  text-decoration:none; color:var(--text);
}
.brand-badge{
  display:inline-grid; place-items:center;
  width:34px; height:34px; border-radius:8px;
  background:linear-gradient(180deg,#0e1520,#0b1018);
  border:1px solid #2a3546;
  box-shadow:0 4px 14px rgba(0,0,0,.35);
  font-weight:800; color:#ffe084;
  transition:.3s;
}
.brand:hover .brand-badge{
  transform:rotate(15deg);
  box-shadow:0 6px 20px rgba(212,175,55,.3);
}
.title{
  font-family:"Noto Serif SC","Noto Serif",serif!important;
  font-weight:600!important;
  letter-spacing:.02em;
  font-size:1.1rem!important;
  line-height:1.25;
}
.brand:hover .title{color:var(--gold);}
.lang{
  display:flex; align-items:center; gap:8px;
}
.lang label{
  white-space:nowrap; color:var(--muted); margin-right:4px;
}
.lang select{
  appearance:none;
  min-width:170px;
  border-radius:10px;
  border:1px solid #243244;
  background:#0e1520;
  color:var(--text);
  padding:10px 34px 10px 12px;
  font-size:.95rem;
  background-image:url("data:image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2398a7b7' stroke-width='2' fill='none'/%3E%3C/svg%3E");
  background-repeat:no-repeat;
  background-position:calc(100% - 12px) 50%;
  transition:.3s;
}
.lang select:focus{
  outline:none;
  border-color:var(--gold);
  box-shadow:0 0 0 2px rgba(212,175,55,.2);
}
@media (max-width:520px){
  .title{font-size:1rem}
  .lang select{min-width:140px}
}

    .lang{display:flex;align-items:center;gap:8px}
    .lang label{color:var(--muted);font-size:.9rem}
    .lang select{appearance:none;border-radius:10px;border:1px solid #243244;background:#0e1520;color:var(--text);padding:10px 34px 10px 12px;font-size:.95rem;background-image:url("data:image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2398a7b7' stroke-width='2' fill='none'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:calc(100% - 12px) 50%}
    .card{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);backdrop-filter:blur(var(--blur));padding:18px}
    .section{margin-top:18px}
    .section h2{font-family:"Noto Serif SC","Noto Serif",serif;font-weight:600;font-size:1.2rem;margin:0 0 12px;display:flex;align-items:center;gap:10px}
    .section h2::before{content:"";width:8px;height:8px;border-radius:50%;background:var(--accent);box-shadow:0 0 0 4px #58b9ff22}
    .group-title{font-size:1.05rem;color:#ffe084;margin:6px 0 14px}
    .muted{color:var(--muted)} .error{color:#ff8f8f;margin-top:8px}
    .row{display:grid;gap:12px}
    @media(min-width:640px){.row-2{grid-template-columns:1fr 1fr}.row-3{grid-template-columns:1fr 1fr 1fr}}
    input,select,button{width:100%;box-sizing:border-box;border-radius:12px;border:1px solid #243244;background:#0e1520;color:var(--text);padding:14px 13px;font-size:1rem;outline:none}
    input::placeholder{color:#6f8092}
    select{appearance:none;background-image:url("data:image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2398a7b7' stroke-width='2' fill='none'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:calc(100% - 12px) 50%}
    .btn{background:linear-gradient(180deg,#1d2a3a,#101723);border:1px solid #28364a;font-weight:600;letter-spacing:.02em;cursor:pointer;transition:transform .05s ease,box-shadow .2s ease,border .2s ease}
    .btn:hover{box-shadow:0 6px 18px rgba(88,185,255,.15),inset 0 1px 0 #2e3c50}
    .btn:active{transform:translateY(1px)}
    .btn[disabled]{opacity:.6;cursor:not-allowed}
    .btn-gold{background:linear-gradient(180deg,#f7e7a8,#d4af37);color:#191919;border:1px solid #d4af37}
    .columns{display:grid;gap:12px;grid-template-columns:1fr}
    @media(min-width:900px){.columns{grid-template-columns:1fr 1fr}}
    .list-block{border:1px solid #263448;background:#0e1520;border-radius:12px;padding:16px}
    .list-block ul{margin:.2rem 0 0;padding-left:1.1rem}
    .list-block li{line-height:1.9}
    .btns{display:flex;gap:10px;flex-wrap:wrap}
    .link-btn{display:grid;place-items:center;text-decoration:none}
    footer{color:#6c7b8c;font-size:.85rem;text-align:center;padding:30px 0}

  /* ===== VIP åŒºåŸŸï¼ˆç»Ÿä¸€æ ·å¼ Â· ä¸ energy.html ä¸€è‡´ï¼‰ ===== */
.card.section{
  max-width:1100px;
  margin:32px auto 40px;
  padding:18px 18px 22px;
  border-radius:var(--radius);
  border:1px solid #1f2a36;
  background:#11161dcc;
  box-shadow:var(--shadow);
  box-sizing:border-box;
}

.group-title{
  font-weight:800;
  color:#ffe084;
  font-size:1rem;
  margin:0 0 10px;
}

/* ä¸ŠåŠéƒ¨ï¼šå·¦å³ä¸¤å— VIP åˆ—è¡¨ */
.card.section .columns{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:16px;
  margin-top:10px;
}
.card.section .list-block{
  border-radius:12px;
  border:1px solid #1f2a36;
  background:#0f141d;
  padding:14px 16px;
}
.card.section .list-block ul{
  list-style:none;
  margin:6px 0 0;
  padding:0;
}
.card.section .list-block li{
  margin:.25rem 0;
  font-size:.95rem;
  color:var(--muted);
  line-height:1.6;
}

/* ä¸‹åŠéƒ¨ï¼šç™»å½•åŒºåŸŸ */
.astro-auth{
  margin-top:16px;
}
.astro-auth .auth-grid{
  display:grid;
  grid-template-columns:1.2fr 0.8fr;
  gap:16px;
}
.astro-auth .panel{
  background:#11161dcc;
  border-radius:14px;
  border:1px solid #1f2a36;
  box-shadow:0 8px 30px rgba(0,0,0,.35);
  padding:16px 18px 18px;
  box-sizing:border-box;
}
.astro-auth .panel .head{
  font-size:.95rem;
  font-weight:800;
  color:#ffe084;
  padding-bottom:8px;
  margin-bottom:10px;
  border-bottom:1px solid #1f2a36;
}
.astro-auth .panel .body{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.astro-auth .body .row{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.astro-auth .body .spacer{
  height:4px;
}

/* è¾“å…¥æ¡† = è·Ÿ energy.html ä¸€æ ·å®½åº¦ */
.astro-auth input[type="email"],
.astro-auth input[type="password"]{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid #243244;
  background:#0e1520;
  color:#e8edf3;
  font-size:15px;
  box-sizing:border-box;
}
.astro-auth input[type="email"]::placeholder,
.astro-auth input[type="password"]::placeholder{
  color:#6f8092;
}
.astro-auth input[type="email"]:focus,
.astro-auth input[type="password"]:focus{
  outline:none;
  border-color:#d4af37;
  box-shadow:0 0 0 2px rgba(212,175,55,.2);
}

/* ç™»å½• / é‡è®¾ / æ³¨å†ŒæŒ‰é’® = å’Œè¾“å…¥æ¡†åŒå®½ï¼Œpill å½¢çŠ¶ */
.astro-auth .btn{
  display:flex;
  align-items:center;
  justify-content:center;
  width:100%;
  max-width:100%;
  padding:11px 18px;
  border-radius:999px;
  border:1px solid #e6c76e;
  background:linear-gradient(180deg,#fff9e6,#e6c76e);
  color:#191919;
  font-weight:800;
  text-align:center;
  box-shadow:0 6px 20px rgba(230,199,110,.35);
  white-space:nowrap;
  box-sizing:border-box;
  transition:.12s ease;
}
.astro-auth .btn.block{
  width:100%;
}

/* æ·±è‰²çš„ reset æŒ‰é’®æ ·å¼ */
.astro-auth .btn.ghost.block{
  background:#101826;
  border-color:#273245;
  color:#e8edf3;
  box-shadow:none;
}
.astro-auth .btn:hover{
  transform:translateY(-1px);
  box-shadow:0 10px 24px rgba(230,199,110,.45);
}
.astro-auth .btn.ghost.block:hover{
  border-color:#d4af37;
  background:rgba(212,175,55,.08);
}

.error-message{
  color:#ff7b7b;
  font-size:.85rem;
}

/* å°å±ï¼šVIP åŒºã€ç™»å½•åŒºéƒ½ä¸€åˆ—æ’å¸ƒ */
@media (max-width:768px){
  .card.section .columns{
    grid-template-columns:1fr;
  }
  .astro-auth .auth-grid{
    grid-template-columns:1fr;
  }
}

/* ===== æ— éšœç¢ & å·¥å…· ===== */
.sr-only{
  position:absolute!important;
  width:1px;
  height:1px;
  padding:0;
  margin:-1px;
  overflow:hidden;
  clip:rect(0,0,0,0);
  white-space:nowrap;
  border:0;
}
.btn-row{
  display:flex;
  align-items:stretch;
  gap:10px;
  width:100%;
  box-sizing:border-box;
}
.btn-row .btn{
  flex:1 1 0;
  width:auto!important;
  max-width:100%;
  box-sizing:border-box;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.btn-row .btn-block{
  display:flex;
  width:auto!important;
}

/* ===== Chat ===== */
.ss-chat-fab{
  position:fixed;
  right:18px;
  bottom:18px;
  z-index:50;
  width:56px;
  height:56px;
  border-radius:50%;
  background:linear-gradient(180deg,#fff9e6,#e6c76e);
  color:#191919;
  display:grid;
  place-items:center;
  font-size: 22px;
  font-weight:800;
  box-shadow:0 8px 30px rgba(0,0,0,.35);
  cursor:pointer;
  border:1px solid #e6c76e;
}
.ss-chat-panel{
  position:fixed;
  right:18px;
  bottom:88px;
  z-index:50;
  width:min(460px,92vw);
  display:none;
  flex-direction:column;
  background:#0e1520;
  border:1px solid #243244;
  border-radius:14px;
  box-shadow:var(--shadow);
}
.ss-chat-panel[aria-hidden="false"]{display:flex;}
.ss-chat-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:10px 12px;
  border-bottom:1px solid #243244;
}
.ss-chat-title{font-weight:700}
.ss-chat-body{
  max-height:300px;
  overflow:auto;
  padding:10px 12px;
  display:flex;
  flex-direction:column;
  gap:8px;
}
.ss-msg{
  padding:8px 10px;
  background:#0f1624;
  border:1px solid #243244;
  border-radius:10px;
  margin:6px 0;
  max-width:80%;
  font-size:.9rem;
  line-height:1.6;
}
.ss-msg.me{
  margin-left:auto;
  background:#132033;
}
.ss-chat-input{
  display:flex;
  align-items:center;
  gap:8px;
  padding:10px 12px;
  border-top:1px solid #243244;
}
.ss-chat-input input{
  flex:1 1 auto;
  min-width:0;
}

/* AI æ–‡æœ¬åŒºåŸŸï¼ˆé¢„ç•™ï¼‰ */
#aiText,#energyText{
  white-space:normal;
  line-height:1.7;
}
#aiText h3.ai-head,#energyText h3.ai-head{
  color:#ffe084;
  font-weight:800;
  font-size:1.05rem;
  margin:14px 0 8px;
}
#aiText ul,#aiText ol,#energyText ul,#energyText ol{
  margin:.2rem 0 .6rem 1.2rem;
  padding-left:1.1rem;
}
#aiText li,#energyText li{margin:.25rem 0;}
#aiText ol li::marker{font-weight:700;}

/* å°å±å¸ƒå±€è°ƒæ•´ */
@media (max-width:768px){
  .board.spread-5{
    grid-template-columns:1fr;
    grid-template-rows:auto;
    grid-template-areas:
      "top"
      "left"
      "center"
      "right"
      "bottom";
    gap:10px;
  }
  .controls{
    flex-direction:column;
  }
  .controls input,
  .controls select,
  .controls button{
    min-width:100%;
  }
}

/* é¡µè„š */
footer{
  color:#6c7b8c;
  font-size:.85rem;
  text-align:center;
  padding:30px 0;
}
</style>
</head>
<body>
  <header class="site-header">
    <div class="head-inner container">
      <a class="brand" href="https://astro.5xliving.com" target="_self" rel="nofollow">
        <span class="brand-badge">5X</span>
        <span class="title">
          <span data-i18n="brand">5xLiving Â· Soul Sanctuary</span>
        </span>
      </a>

      <div class="lang">
        <label for="langSelect" class="muted" data-i18n="lang_label">è¯­è¨€</label>
        <select id="langSelect" aria-label="Language">
          <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
          <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
          <option value="en-US">English</option>
          <option value="ja-JP">æ—¥æœ¬èª</option>
          <option value="th-TH">à¹„à¸—à¸¢</option>
          <option value="ms-MY">Bahasa Melayu</option>
        </select>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- é¡¶éƒ¨ï¼šå‘½ç†åˆ†æè¡¨å• -->
    <section class="card section">
      <h2 data-i18n="form_title">å‘½ç†åˆ†æ Â· ç”ŸæˆæŠ¥å‘Š</h2>

      <div class="group-title" data-i18n="choose_type">é€‰æ‹©å‘½ç›˜ç±»å‹</div>
      <div class="row row-2">
        <select id="type" name="type" onchange="togglePartner(this.value)">
          <option value="personal" data-i18n="type_personal">ä¸ªäººå‘½ç›˜</option>
          <option value="compatibility" data-i18n="type_compat">åˆç›˜ï¼ˆä¸¤äººèµ„æ–™ï¼‰</option>
        </select>
        <select id="culture" name="culture">
          <option value="auto" data-i18n="culture_auto">è‡ªåŠ¨è¯†åˆ« Auto Detect</option>
          <option value="ä¸œæ–¹" data-i18n="culture_cn">ä¸œæ–¹ Chinese / Bazi</option>
          <option value="è¥¿æ–¹" data-i18n="culture_west">è¥¿æ–¹ Astrology / Tarot</option>
          <option value="æ—¥å¼" data-i18n="culture_jp">æ—¥å¼ä¹æ˜Ÿ Japanese</option>
          <option value="å é™€" data-i18n="culture_vedic">å°åº¦å é™€ Vedic</option>
        </select>
      </div>

      <div class="group-title" data-i18n="self_info">æœ¬äººèµ„æ–™</div>
      <div class="row row-3">
        <input type="text" id="name1" name="name1" placeholder="å§“åï¼ˆæœ¬äººï¼‰" required data-i18n-ph="ph_name1">
        <input type="date" id="birthdate1" name="birthdate1" required>
        <input type="time" id="birthtime1" name="birthtime1" placeholder="å‡ºç”Ÿæ—¶é—´" data-i18n-ph="ph_time1">
      </div>
      <div class="row row-3" style="margin-top:6px">
        <select id="calendar1" name="calendar1">
          <option value="é˜³å†" data-i18n="cal_g">é˜³å† (Gregorian)</option>
          <option value="å†œå†" data-i18n="cal_l">å†œå† (Lunar)</option>
        </select>
        <input type="text" id="country1" name="country1" placeholder="å‡ºç”Ÿå›½å®¶ / åœ°åŒº" required data-i18n-ph="ph_country1">
      </div>

      <!-- éšå½¢è¡¨å•ç”¨äºæäº¤ -->
      <form id="reportForm" action="/secure/report.html" method="GET" style="display:none"></form>

      <div id="partner-section" style="display:none; margin-top:16px">
        <div class="group-title" data-i18n="partner_info">ç¬¬äºŒäººèµ„æ–™ï¼ˆåˆç›˜ï¼‰</div>
        <div class="row row-3">
          <input type="text" id="name2" name="name2" placeholder="å§“åï¼ˆç¬¬äºŒäººï¼‰" form="reportForm" data-i18n-ph="ph_name2">
          <input type="date" id="birthdate2" name="birthdate2" form="reportForm">
          <input type="time" id="birthtime2" name="birthtime2" placeholder="å‡ºç”Ÿæ—¶é—´" form="reportForm" data-i18n-ph="ph_time2">
        </div>
        <div class="row row-2" style="margin-top:6px">
          <select id="calendar2" name="calendar2" form="reportForm">
            <option value="é˜³å†" data-i18n="cal_g">é˜³å† (Gregorian)</option>
            <option value="å†œå†" data-i18n="cal_l">å†œå† (Lunar)</option>
          </select>
          <input type="text" id="country2" name="country2" placeholder="å‡ºç”Ÿå›½å®¶ / åœ°åŒº" form="reportForm" data-i18n-ph="ph_country2">
        </div>
      </div>

      <div class="group-title" style="margin-top:12px" data-i18n="focus_title">å‘½ç†é€‰é¢˜ï¼ˆæŠ¥å‘Šèšç„¦ï¼‰</div>
      <div class="row">
        <select id="purpose_personal" name="purpose" form="reportForm">
          <optgroup label="å§»ç¼˜ Love" data-i18n="opt_love"></optgroup>
          <option value="æ‹çˆ±ç¼˜åˆ†" data-i18n="opt_dating">æ‹çˆ±ç¼˜åˆ†</option>
          <option value="å©šå§»èµ°åŠ¿" data-i18n="opt_marriage">å©šå§»èµ°åŠ¿</option>

          <optgroup label="äº‹ä¸š Career" data-i18n="opt_career"></optgroup>
          <option value="èŒåœºå‘å±•" data-i18n="opt_work">èŒåœºå‘å±•</option>
          <option value="åˆ›ä¸šæ½œåŠ›" data-i18n="opt_startup">åˆ›ä¸šæ½œåŠ›</option>

          <optgroup label="è´¢è¿ Wealth" data-i18n="opt_wealth"></optgroup>
          <option value="è´¢ä½åˆ†æ" data-i18n="opt_wealthpos">è´¢ä½åˆ†æ</option>
          <option value="ç†è´¢æ—¶æœº" data-i18n="opt_timing">ç†è´¢æ—¶æœº</option>

          <optgroup label="æ‹©æ—¥ Auspicious Date" data-i18n="opt_dates"></optgroup>
          <option value="å©šæœŸæ‹©æ—¥" data-i18n="opt_wedding">å©šæœŸæ‹©æ—¥</option>
          <option value="æ–°ç”Ÿå®å®æ‹©æ—¥" data-i18n="opt_babydate">æ–°ç”Ÿå®å®æ‹©æ—¥</option>
          <option value="æ–°å®¶å…¥ä½æ‹©æ—¥" data-i18n="opt_house">æ–°å®¶å…¥ä½æ‹©æ—¥</option>
          <option value="æ–°å…¬å¸å…¥ä½æ‹©æ—¥" data-i18n="opt_office">æ–°å…¬å¸å…¥ä½æ‹©æ—¥</option>

          <optgroup label="æµ‹å Name Analysis" data-i18n="opt_name"></optgroup>
          <option value="å®å®å" data-i18n="opt_babyname">å®å®å</option>
          <option value="å® ç‰©å" data-i18n="opt_petname">å® ç‰©å</option>
          <option value="å…¬å¸å" data-i18n="opt_companyname">å…¬å¸å</option>
          <option value="å‘½åæ”¹è¿" data-i18n="opt_rename">å‘½åæ”¹è¿</option>

          <optgroup label="é£æ°´ Feng Shui" data-i18n="opt_fs"></optgroup>
          <option value="ä½å®¶" data-i18n="opt_home">ä½å®¶</option>
          <option value="åŠå…¬å®¤" data-i18n="opt_officefs">åŠå…¬å®¤</option>
        </select>

        <select id="purpose_compatibility" name="purpose" style="display:none" form="reportForm">
          <optgroup label="åˆç›˜åˆ†æ Compatibility" data-i18n="opt_comp"></optgroup>
          <option value="ç¼˜åˆ†èµ·è½" data-i18n="opt_couple">æƒ…ä¾£åˆç›˜ï¼ˆç¼˜åˆ†èµ·è½ / æš§æ˜§è¿›å±•ï¼‰</option>
          <option value="å¤«å¦»æµå¹´" data-i18n="opt_spouse">å¤«å¦»æµå¹´ï¼ˆå©šå§»å‘å±•ï¼‰</option>
          <option value="åˆç›˜åˆ†æ" data-i18n="opt_personality">ä¸ªæ€§åˆç›˜ï¼ˆå†²çª / äº’è¡¥ï¼‰</option>
          <option value="äº‹ä¸šå…±äº‹" data-i18n="opt_partner">äº‹ä¸šåˆç›˜ï¼ˆåˆä¼™äºº / å‘˜å·¥ï¼‰</option>
          <option value="æ–­è”ä¿®å¤" data-i18n="opt_reconnect">æ–­è”ä¿®å¤ï¼ˆæœ‹å‹ / æƒ…äºº / å®¶äººï¼‰</option>
          <option value="å® ç‰©ç¼˜åˆ†" data-i18n="opt_petbond">å® ç‰©åˆç›˜ï¼ˆä¸»äººä¸å® ç‰©ï¼‰</option>
        </select>
       <button class="btn" id="btnNext" type="button" data-i18n="btn_next">ç”Ÿæˆåˆ†æ</button>
      </div>
    </section>

    <!-- ä¸‹æ®µï¼šå„åŠŸèƒ½å…¥å£ -->
    <section class="card section">
      <h2 data-i18n="portal_title">å¿ƒæ€œç©ºé—´ Â· åŠŸèƒ½å…¥å£</h2>

      <div class="list-block" style="margin-bottom:12px">
        <div class="group-title" data-i18n="diary_title">ğŸ§˜â€â™€ï¸ çµæ€§æ—¥è®°</div>
        <ul><li data-i18n="diary_desc">ç…§ç‰‡ä¸Šä¼  / è¯­éŸ³è®°å½• / çµæ€§ç¬”è®° / å®¶åº­æ—¥å¿— / æ„¿æœ›ç¥ˆç¥·ï¼ˆæ¯æ—¥åŠ æŒï¼‰</li></ul>
        <div class="btns" style="margin-top:8px">
          <a class="btn link-btn" href="personal_memory.html" data-i18n="btn_personal">ä¸ªäººéšè—è®°å½•</a>
          <a class="btn link-btn" href="family_memory.html" data-i18n="btn_family">å®¶åº­å…±äº«è®°å½•</a>
          <a class="btn link-btn" href="memory_upload.html" data-i18n="btn_upload">ä¸Šä¼ è®°å½•</a>
        </div>
      </div>

      <div class="list-block" style="margin-bottom:12px">
        <div class="group-title" data-i18n="course_title">ğŸ“˜ å‘½ç†è¯¾ç¨‹ä¸“åŒº</div>
        <ul>
          <li data-i18n="course_bazi">å…«å­—å‘½ç†ï¼šåç¥ / æµå¹´ / ç”¨ç¥åˆ†æ</li>
          <li data-i18n="course_tarot">å¡”ç½—ç‰Œï¼šç‰Œé˜µè§£è¯» / æƒ…å¢ƒå®æˆ˜</li>
        </ul>
        <div class="muted" style="margin-top:6px" data-i18n="course_coming">
          ğŸŒ™ ä»¥ä¸‹è¯¾ç¨‹é…é…¿ä¸­ï¼šå æ˜Ÿ / çµæ•° / äººç±»å›¾ / å…­çˆ» / å†¥æƒ³å¼•å¯¼ / å¥‡é—¨ / æ—¥å¼ç¥æ˜ / ç´«å¾® / èƒ½é‡å­¦ / è¥¿æ´‹å æ˜Ÿ / å¿ƒçµè¯¾ç¨‹â€¦â€¦
        </div>
        <div class="btns" style="margin-top:8px">
          <a class="btn link-btn" href="soul_integration_course.html" data-i18n="btn_enter_course">è¿›å…¥è¯¾ç¨‹</a>
        </div>
      </div>

      <div class="list-block" style="margin-bottom:12px">
        <div class="group-title" data-i18n="shop_title">ğŸ›ï¸ èƒ½é‡å•†åŸ Â· VIPæŠ˜æ‰£ & å¾¡å®ˆè®¢åˆ¶</div>
        <ul><li data-i18n="shop_desc">ä¸“å±ç¥ˆæ„¿åŒ…åˆ†ç±»ï¼š</li></ul>
        <div class="btns" style="flex-wrap:wrap">
          <a class="btn link-btn" href="é˜´å€ºå’Œè§£åŒ….html">é˜´å€ºå’Œè§£åŒ…</a>
          <a class="btn link-btn" href="è´¢åº“åŒ….html">è´¢åº“åŒ…</a>
          <a class="btn link-btn" href="çµé­‚å¼€æ‚Ÿçš„æŒ‡å¼•åŒ….html">å¿ƒçµåŒ…</a>
          <a class="btn link-btn" href="è´¢è¿åŒ….html">è´¢è¿åŒ…</a>
          <a class="btn link-btn" href="å§»ç¼˜åŒ….html">å§»ç¼˜åŒ…</a>
          <a class="btn link-btn" href="å­¦ä¸šåŒ….html">å­¦ä¸šåŒ…</a>
          <a class="btn link-btn" href="äº‹ä¸šåŒ….html">äº‹ä¸šåŒ…</a>
          <a class="btn link-btn" href="å¾¡å®ˆåŒ….html">å¾¡å®ˆåŒ…</a>
          <a class="btn link-btn" href="å¤ªå²åŒ….html">å¤ªå²åŒ…</a>
          <a class="btn link-btn" href="ä¸ƒæœˆåŒ….html">ä¸ƒæœˆåŒ…</a>
          <a class="btn link-btn" href="å®¶æ—ç¦æŠ¥åŒ….html">å®¶æ—ç¦æŠ¥åŒ…</a>
          <a class="btn link-btn" href="æƒ…ä¼¤ç–—æ„ˆåŒ….html">æƒ…ä¼¤ç–—æ„ˆåŒ…</a>
          <a class="btn link-btn" href="åŠ«éš¾åŒ….html">åŠ«éš¾åŒ…</a>
          <a class="btn link-btn" href="æ–°å®…åŠå…¬å®¤åŒ….html">æ–°å®… / åŠå…¬å®¤åŒ…</a>
        </div>
      </div>

      <div class="list-block" style="margin-bottom:12px">
        <div class="group-title" data-i18n="wish_title">ğŸ”® æ¢¦æƒ³æäº¤ Dream Submission</div>
        <div class="btns" style="margin-top:8px">
          <a class="btn link-btn" href="wish_submission.html" data-i18n="btn_manifest">æ¢¦æƒ³è§„åˆ’ / Manifestation</a>
        </div>
      </div>

      <div class="list-block">
        <div class="group-title" data-i18n="memorial_title">ğŸ“– çµæ€§ç©ºé—´ ~ å¾€ç”Ÿè®°æ€œå½•</div>
        <ul><li data-i18n="memorial_desc">çµé­‚æ¡£æ¡ˆ / çºªå¿µå›å¿†ï¼ˆå›¾æ–‡éŸ³ï¼‰ / çµæ€§å»¶ç»­ï¼ˆåŠŸå¾·ä¼ æ‰¿ï¼‰</li></ul>
        <div class="btns" style="margin-top:8px">
          <a class="btn link-btn" href="login_memorial.html" data-i18n="btn_login_memorial">ç™»å…¥çµæ€§ç©ºé—´</a>
          <a class="btn link-btn" href="upload_memorial.html" data-i18n="btn_upload_memorial">ä¸Šä¼ å¾€ç”Ÿå½•</a>
          <a class="btn link-btn" href="register_soul_memorial.html" data-i18n="btn_register_memorial">æ³¨å†Œçµæ€§ç©ºé—´</a>
        </div>
      </div>
    </section>

  <!-- ä¼šå‘˜ä¸“åŒºï¼ˆåŸæ ·ä¿ç•™ï¼‰ -->
  <section class="card section">
    <h2 class="group-title" data-i18n="vip_title">ğŸŒ™ ä¼šå‘˜åŒºåŸŸ VIP Segment</h2>
    <div class="columns">
      <div class="list-block">
        <div class="group-title" data-i18n="vip_mingli">ğŸ— å‘½ç†ç©ºé—´ä¸“å±å†…å®¹</div>
        <ul>
          <li data-i18n="vip_love">å§»ç¼˜æ–¹å‘ï¼šæ‹çˆ±ç¼˜åˆ†ã€å©šå§»èµ°åŠ¿</li>
          <li data-i18n="vip_career">äº‹ä¸šæ–¹å‘ï¼šèŒåœºå‘å±•ã€åˆ›ä¸šæ½œåŠ›</li>
          <li data-i18n="vip_wealth">è´¢è¿æ–¹å‘ï¼šè´¢ä½åˆ†æã€ç†è´¢æ—¶æœº</li>
          <li data-i18n="vip_pet">å® ç‰©å‘½ç†ï¼šä¼´ä¾£åŠ¨ç‰©çš„æ€§æ ¼ä¸ç¼˜åˆ†</li>
          <li data-i18n="vip_hepan">åˆç›˜åˆ†æï¼šå©šæœŸæ‹©æ—¥ã€æ–°ç”Ÿæ‹©æ—¶</li>
          <li data-i18n="vip_name">æµ‹ååˆ†æï¼šå…¬å¸åã€å®å®åã€å‘½åæ”¹è¿</li>
          <li data-i18n="vip_fengshui">è´¢ä½åˆç›˜ï¼šä½å®¶ / åŠå…¬å®¤åŠ¨çº¿é…åˆ</li>
        </ul>
      </div>
      <div class="list-block">
        <div class="group-title" data-i18n="vip_xinlian">ğŸŒ™ å¿ƒæ€œç©ºé—´ä¸“å±å†…å®¹</div>
        <ul>
          <li data-i18n="vip_record">çµæ€§è®°å½•ï¼šç…§ç‰‡ã€æ¢¦å¢ƒã€å£°éŸ³ã€æ„¿æœ›ç¥ˆç¥·</li>
          <li data-i18n="vip_course">å‘½ç†è¯¾ç¨‹ï¼šå…«å­— / å¡”ç½— / å æ˜Ÿ / çµæ•° / äººç±»å›¾</li>
          <li data-i18n="vip_memorial">å®¶æ—çºªå¿µç³»ç»Ÿï¼šäº²äººçµæ€§çºªå¿µ & å»¶ç»­</li>
          <li data-i18n="vip_tasks">æ¯å‘¨èƒ½é‡ç»ƒä¹  / ç¥æ˜ä»ªå¼ä»»åŠ¡</li>
          <li data-i18n="vip_shop">èƒ½é‡å•†åŸä¸“å±æŠ˜æ‰£ & å¾¡å®ˆè®¢åˆ¶</li>
        </ul>
      </div>
    </div>

    <div class="group-title" style="margin-top:14px" data-i18n="login_title">ğŸ’ ç™»å…¥ VIP åŠŸèƒ½</div>

   <section class="astro-auth">
    <div class="auth-grid">
        <!-- å·¦ä¾§ï¼šè¾“å…¥ + æ³¨å†Œ/ç™»å½• -->
        <div class="panel">
          <div class="head" data-i18n="panel_login_head">è´¦æˆ·ç™»å½• / æ³¨å†Œ</div>
          <div class="body">
            <div class="row" id="authFields">
              <label for="email" class="sr-only" data-i18n="ph_email">é‚®ç®± Email</label>
              <input
                id="email"
                name="email"
                type="email"
                inputmode="email"
                autocomplete="username"
                placeholder=""
                data-i18n-ph="ph_email"
                required
              />
              <label for="password" class="sr-only" data-i18n="ph_label_password">å¯†ç  Password</label>
              <input
                id="password"
                name="password"
                type="password"
                autocomplete="current-password"
                placeholder="å¯†ç  Passwordï¼ˆè‡³å°‘8ä½ï¼Œå«å¤§å°å†™æ•°å­—ç¬¦å·ï¼‰"
                data-i18n-ph="ph_password"
                required
              />
            </div>
            <div class="spacer"></div>
            <form id="loginForm" class="row one">
              <button class="btn block" id="loginBtn" type="submit" data-i18n="btn_login">ç™»å…¥è´¦æˆ·</button>
            </form>
            <div class="spacer"></div>
            <div class="row one">
              <button class="btn ghost block" id="resetBtn" type="button" data-i18n="btn_reset">ğŸ”‘ é‡è®¾å¯†ç </button>
            </div>
            <div class="spacer"></div>
            <form class="row one" id="registerForm">
              <button class="btn block" id="registerBtn" type="submit" data-i18n="btn_register">æ³¨å†Œè´¦æˆ·</button>
              <div class="muted" data-i18n="note_price">æ³¨å†Œè´¦å·èµ é€ä¸€æ¬¡å…è´¹ä½“éªŒ</div>
              <div class="spacer"></div>
              <div class="error-message" id="authError" style="display:none"></div>
            </form>
          </div>
        </div>

        <!-- å³ä¾§ï¼šä¼šå‘˜ä¸è¿”å› -->
        <div class="panel">
          <div class="head" data-i18n="panel_member_head">ä¼šå‘˜æœåŠ¡</div>
          <div class="body">
            <div class="row one">
              <a class="btn btn-gold block" href="https://yourshopifyshop.com/products/monthly-vip" target="_blank" rel="noopener noreferrer" data-i18n="btn_upgrade">ğŸ’ å‡çº§ä¸º VIPï¼ˆæœˆè´¹ï¼‰</a>
            </div>
            <div class="spacer"></div>
            <div class="row one">
              <a class="btn ghost block" href="https://yourshopifyshop.myshopify.com" target="_blank" rel="noopener noreferrer" data-i18n="btn_backshop">â† è¿”å›å‘½ç†å•†åŸ</a>
            </div>
            <div class="spacer"></div>
            <div class="muted" data-i18n="note_price1">$9.9 / æœˆè´¹ VIPï¼ˆå‘½ç†ç©ºé—´ + å¿ƒæ€œç©ºé—´ + çµæ€§è¯¾ç¨‹ï¼‰</div>
          </div>
        </div>
      </div>
    </section>
  </section>

  <footer>Â© 5XLiving â€¢ Astro Sanctuary</footer>
</main>
</body>
          
<!-- GPT / å¿ƒæ€œç®¡å®¶ï¼ˆç»Ÿä¸€æµ®çª—ï¼‰ -->
<button class="ss-chat-fab" id="ssChatFab" type="button">
  <span data-i18n="chat_fab">é—®</span>
</button>

<div class="ss-chat-panel" id="chatPanel" aria-hidden="true">
  <div class="ss-chat-head">
    <div class="ss-chat-title" id="chatTitle" data-i18n="chat_title">
      å¿ƒæ€œç®¡å®¶ Â· GPT
    </div>
    <div class="ss-close" id="chatClose">âœ•</div>
  </div>

  <!-- èŠå¤©å†…å®¹åŒºï¼šä¿æŒä¸ºç©ºï¼Œæ¶ˆæ¯å…¨éƒ¨ç”± JS append -->
  <div class="ss-chat-body" id="chatBody"></div>

  <!-- è¾“å…¥åŒº -->
  <div class="ss-chat-input">
    <input
      id="chatInput"
      placeholder="è¾“å…¥é—®é¢˜â€¦"
      data-i18n-ph="chat_input_ph"
    />
    <button class="btn" id="chatSend" data-i18n="chat_send">å‘é€</button>
  </div>
</div>

<script>
/* ==============================
   CONFIG (GLOBAL)
============================== */
const API_BASE = 'https://throbbing-lab-1440.hello5xliving.workers.dev';
const CHAT_ENDPOINT = '/api/chat';
const DEFAULT_LANG = 'zh-CN';
const LANG_KEY = '5x_lang';

/* ==============================
   LANGUAGE CORE (REQUIRED)
============================== */
function getLang(){
  return (
    localStorage.getItem(LANG_KEY) ||
    document.documentElement.lang ||
    DEFAULT_LANG
  );
}
function setLang(lang){
  localStorage.setItem(LANG_KEY, lang);
  document.documentElement.lang = lang;
}

/* ==============================
   TRANSLATOR (GLOBAL SAFE)
============================== */
window.t = window.t || function(key){
  const lang = getLang();
  return (
    window.i18n?.[lang]?.[key] ??
    window.i18n?.['zh-CN']?.[key] ??
    key
  );
};

(() => {
'use strict';

/* ==============================
   HELPERS
============================== */
const $ = (id)=>document.getElementById(id);
const pad2 = (n)=>String(n??'').padStart(2,'0');
const safe = (s)=>String(s??'');
const escapeHTML = (s)=>String(s??'')
  .replaceAll('&','&amp;')
  .replaceAll('<','&lt;')
  .replaceAll('>','&gt;')
  .replaceAll('"','&quot;')
  .replaceAll("'","&#39;");

/* ==============================
   i18n DICTIONARY
============================== */
const i18n = {
  "zh-CN": {
    brand:"5xLiving Â· Soul Sanctuary",
    page_title:"å‘½ç†å¿ƒæ€œç©ºé—´ Â· VIP Soul Sanctuary",
    site_title:"å‘½ç†å¿ƒæ€œç©ºé—´ Â· VIP Soul Sanctuary",
    lang_label:"è¯­è¨€",
    form_title:"å‘½ç†åˆ†æ Â· ç”ŸæˆæŠ¥å‘Š",
    choose_type:"é€‰æ‹©å‘½ç›˜ç±»å‹",
    type_personal:"ä¸ªäººå‘½ç›˜",
    type_compat:"åˆç›˜ï¼ˆä¸¤äººèµ„æ–™ï¼‰",
    culture_auto:"è‡ªåŠ¨è¯†åˆ« Auto Detect",
    culture_cn:"ä¸œæ–¹ Chinese / Bazi",
    culture_west:"è¥¿æ–¹ Astrology / Tarot",
    culture_jp:"æ—¥å¼ä¹æ˜Ÿ Japanese",
    culture_vedic:"å°åº¦å é™€ Vedic",

    self_info:"æœ¬äººèµ„æ–™",
    ph_name1:"å§“åï¼ˆæœ¬äººï¼‰",
    ph_time1:"å‡ºç”Ÿæ—¶é—´",
    cal_g:"é˜³å† (Gregorian)",
    cal_l:"å†œå† (Lunar)",
    ph_country1:"å‡ºç”Ÿå›½å®¶ / åœ°åŒº",
    btn_next:"ç”Ÿæˆåˆ†æ",

    partner_info:"ç¬¬äºŒäººèµ„æ–™ï¼ˆåˆç›˜ï¼‰",
    ph_name2:"å§“åï¼ˆç¬¬äºŒäººï¼‰",
    ph_time2:"å‡ºç”Ÿæ—¶é—´",
    ph_country2:"å‡ºç”Ÿå›½å®¶ / åœ°åŒº",

    focus_title:"å‘½ç†é€‰é¢˜ï¼ˆæŠ¥å‘Šèšç„¦ï¼‰",
    opt_love:"å§»ç¼˜ Love",
    opt_career:"äº‹ä¸š Career",
    opt_wealth:"è´¢è¿ Wealth",
    opt_dates:"æ‹©æ—¥ Auspicious Date",
    opt_name:"æµ‹å Name Analysis",
    opt_fs:"é£æ°´ Feng Shui",
    opt_comp:"åˆç›˜åˆ†æ Compatibility",
    opt_dating:"æ‹çˆ±ç¼˜åˆ†",
    opt_marriage:"å©šå§»èµ°åŠ¿",
    opt_work:"èŒåœºå‘å±•",
    opt_startup:"åˆ›ä¸šæ½œåŠ›",
    opt_wealthpos:"è´¢ä½åˆ†æ",
    opt_timing:"ç†è´¢æ—¶æœº",
    opt_wedding:"å©šæœŸæ‹©æ—¥",
    opt_babydate:"æ–°ç”Ÿå®å®æ‹©æ—¥",
    opt_house:"æ–°å®¶å…¥ä½æ‹©æ—¥",
    opt_office:"æ–°å…¬å¸å…¥ä½æ‹©æ—¥",
    opt_babyname:"å®å®å",
    opt_petname:"å® ç‰©å",
    opt_companyname:"å…¬å¸å",
    opt_rename:"å‘½åæ”¹è¿",
    opt_home:"ä½å®¶",
    opt_officefs:"åŠå…¬å®¤",
    opt_couple:"æƒ…ä¾£åˆç›˜ï¼ˆç¼˜åˆ†èµ·è½ / æš§æ˜§è¿›å±•ï¼‰",
    opt_spouse:"å¤«å¦»æµå¹´ï¼ˆå©šå§»å‘å±•ï¼‰",
    opt_personality:"ä¸ªæ€§åˆç›˜ï¼ˆå†²çª / äº’è¡¥ï¼‰",
    opt_partner:"äº‹ä¸šåˆç›˜ï¼ˆåˆä¼™äºº / å‘˜å·¥ï¼‰",
    opt_reconnect:"æ–­è”ä¿®å¤ï¼ˆæœ‹å‹ / æƒ…äºº / å®¶äººï¼‰",
    opt_petbond:"å® ç‰©åˆç›˜ï¼ˆä¸»äººä¸å® ç‰©ï¼‰",

    portal_title:"å¿ƒæ€œç©ºé—´ Â· åŠŸèƒ½å…¥å£",
    diary_title:"ğŸ§˜â€â™€ï¸ çµæ€§æ—¥è®°",
    diary_desc:"ç…§ç‰‡ä¸Šä¼  / è¯­éŸ³è®°å½• / çµæ€§ç¬”è®° / å®¶åº­æ—¥å¿— / æ„¿æœ›ç¥ˆç¥·ï¼ˆæ¯æ—¥åŠ æŒï¼‰",
    btn_personal:"ä¸ªäººéšè—è®°å½•",
    btn_family:"å®¶åº­å…±äº«è®°å½•",
    btn_upload:"ä¸Šä¼ è®°å½•",

    course_title:"ğŸ“˜ å‘½ç†è¯¾ç¨‹ä¸“åŒº",
    course_bazi:"å…«å­—å‘½ç†ï¼šåç¥ / æµå¹´ / ç”¨ç¥åˆ†æ",
    course_tarot:"å¡”ç½—ç‰Œï¼šç‰Œé˜µè§£è¯» / æƒ…å¢ƒå®æˆ˜",
    course_coming:"ğŸŒ™ ä»¥ä¸‹è¯¾ç¨‹é…é…¿ä¸­ï¼šå æ˜Ÿ / çµæ•° / äººç±»å›¾ / å…­çˆ» / å†¥æƒ³å¼•å¯¼ / å¥‡é—¨ / æ—¥å¼ç¥æ˜ / ç´«å¾® / èƒ½é‡å­¦ / è¥¿æ´‹å æ˜Ÿ / å¿ƒçµè¯¾ç¨‹â€¦â€¦",
    btn_enter_course:"è¿›å…¥è¯¾ç¨‹",

    shop_title:"ğŸ›ï¸ èƒ½é‡å•†åŸ Â· VIPæŠ˜æ‰£ & å¾¡å®ˆè®¢åˆ¶",
    shop_desc:"ä¸“å±ç¥ˆæ„¿åŒ…åˆ†ç±»ï¼š",

    wish_title:"ğŸ”® æ¢¦æƒ³æäº¤ Dream Submission",
    btn_manifest:"æ¢¦æƒ³è§„åˆ’ / Manifestation",

    memorial_title:"ğŸ“– çµæ€§ç©ºé—´ ~ å¾€ç”Ÿè®°æ€œå½•",
    memorial_desc:"çµé­‚æ¡£æ¡ˆ / çºªå¿µå›å¿†ï¼ˆå›¾æ–‡éŸ³ï¼‰ / çµæ€§å»¶ç»­ï¼ˆåŠŸå¾·ä¼ æ‰¿ï¼‰",
    btn_login_memorial:"ç™»å…¥çµæ€§ç©ºé—´",
    btn_upload_memorial:"ä¸Šä¼ å¾€ç”Ÿå½•",
    btn_register_memorial:"æ³¨å†Œçµæ€§ç©ºé—´",

    vip_title:"ğŸŒ™ ä¼šå‘˜åŒºåŸŸ VIP Segment",
    vip_mingli:"ğŸ— å‘½ç†ç©ºé—´ä¸“å±å†…å®¹",
    vip_xinlian:"ğŸŒ™ å¿ƒæ€œç©ºé—´ä¸“å±å†…å®¹",
    vip_love:"å§»ç¼˜æ–¹å‘ï¼šæ‹çˆ±ç¼˜åˆ†ã€å©šå§»èµ°åŠ¿",
    vip_career:"äº‹ä¸šæ–¹å‘ï¼šèŒåœºå‘å±•ã€åˆ›ä¸šæ½œåŠ›",
    vip_wealth:"è´¢è¿æ–¹å‘ï¼šè´¢ä½åˆ†æã€ç†è´¢æ—¶æœº",
    vip_pet:"å® ç‰©å‘½ç†ï¼šä¼´ä¾£åŠ¨ç‰©çš„æ€§æ ¼ä¸ç¼˜åˆ†",
    vip_hepan:"åˆç›˜åˆ†æï¼šå©šæœŸæ‹©æ—¥ã€æ–°ç”Ÿæ‹©æ—¶",
    vip_name:"æµ‹ååˆ†æï¼šå…¬å¸åã€å®å®åã€å‘½åæ”¹è¿",
    vip_fengshui:"è´¢ä½åˆç›˜ï¼šä½å®¶ / åŠå…¬å®¤åŠ¨çº¿é…åˆ",
    vip_record:"çµæ€§è®°å½•ï¼šç…§ç‰‡ã€æ¢¦å¢ƒã€å£°éŸ³ã€æ„¿æœ›ç¥ˆç¥·",
    vip_course:"å‘½ç†è¯¾ç¨‹ï¼šå…«å­— / å¡”ç½— / å æ˜Ÿ / çµæ•° / äººç±»å›¾",
    vip_memorial:"å®¶æ—çºªå¿µç³»ç»Ÿï¼šäº²äººçµæ€§çºªå¿µ & å»¶ç»­",
    vip_tasks:"æ¯å‘¨èƒ½é‡ç»ƒä¹  / ç¥æ˜ä»ªå¼ä»»åŠ¡",
    vip_shop:"èƒ½é‡å•†åŸä¸“å±æŠ˜æ‰£ & å¾¡å®ˆè®¢åˆ¶",

    login_title:"ğŸ’ ç™»å…¥ VIP åŠŸèƒ½",
    panel_login_head:"è´¦æˆ·ç™»å½• / æ³¨å†Œ",
    ph_email:"é‚®ç®± Email",
    ph_label_password:"å¯†ç  Password",
    ph_password:"å¯†ç  Passwordï¼ˆè‡³å°‘8ä½ï¼Œå«å¤§å°å†™æ•°å­—ç¬¦å·ï¼‰",
    btn_login:"ç™»å…¥è´¦æˆ·",
    btn_reset:"ğŸ”‘ é‡è®¾å¯†ç ",
    btn_register:"æ³¨å†Œè´¦æˆ·",
    note_price:"æ³¨å†Œè´¦å·èµ é€ä¸€æ¬¡å…è´¹ä½“éªŒ",

    panel_member_head:"ä¼šå‘˜æœåŠ¡",
    btn_upgrade:"ğŸ’ å‡çº§ä¸º VIPï¼ˆæœˆè´¹ï¼‰",
    btn_backshop:"â† è¿”å›å‘½ç†å•†åŸ",
    note_price1:"$9.9 / æœˆè´¹ VIPï¼ˆå‘½ç†ç©ºé—´ + å¿ƒæ€œç©ºé—´ + çµæ€§è¯¾ç¨‹ï¼‰",

    res_title:"å¿ƒæ€œç®¡å®¶è§£è¯»ä¸å»ºè®®",

    chat_fab:"ğŸ’¬",
    chat_title:"å¿ƒæ€œç®¡å®¶ Â· GPT",
    chat_input_ph:"è¾“å…¥é—®é¢˜â€¦",
    chat_send:"å‘é€",

    time_unknown:"ä¸è¯¦",
    err_fill_name1:"è¯·å¡«å†™å§“åï¼ˆæœ¬äººï¼‰",
    err_fill_date1:"è¯·å¡«å†™å‡ºç”Ÿæ—¥æœŸï¼ˆæœ¬äººï¼‰",
    err_fill_country1:"è¯·å¡«å†™å‡ºç”Ÿå›½å®¶/åœ°åŒºï¼ˆæœ¬äººï¼‰",
    err_fill_name2:"è¯·å¡«å†™ç¬¬äºŒäººå§“åï¼ˆåˆç›˜ï¼‰",
    err_fill_date2:"è¯·å¡«å†™ç¬¬äºŒäººå‡ºç”Ÿæ—¥æœŸï¼ˆåˆç›˜ï¼‰",
    err_fill_country2:"è¯·å¡«å†™å‡ºç”Ÿå›½å®¶/åœ°åŒºï¼ˆåˆç›˜ï¼‰"
  },

  "zh-TW": {
    brand:"5xLiving Â· Soul Sanctuary",
    page_title:"å‘½ç†å¿ƒæ†ç©ºé–“ Â· VIP Soul Sanctuary",
    site_title:"å‘½ç†å¿ƒæ†ç©ºé–“ Â· VIP Soul Sanctuary",
    lang_label:"èªè¨€",
    form_title:"å‘½ç†åˆ†æ Â· ç”Ÿæˆå ±å‘Š",
    choose_type:"é¸æ“‡å‘½ç›¤é¡å‹",
    type_personal:"å€‹äººå‘½ç›¤",
    type_compat:"åˆç›¤ï¼ˆå…©äººè³‡æ–™ï¼‰",
    culture_auto:"è‡ªå‹•è­˜åˆ¥ Auto Detect",
    culture_cn:"æ±æ–¹ Chinese / Bazi",
    culture_west:"è¥¿æ–¹ Astrology / Tarot",
    culture_jp:"æ—¥å¼ä¹æ˜Ÿ Japanese",
    culture_vedic:"å°åº¦å é™€ Vedic",

    self_info:"æœ¬äººè³‡æ–™",
    ph_name1:"å§“åï¼ˆæœ¬äººï¼‰",
    ph_time1:"å‡ºç”Ÿæ™‚é–“",
    cal_g:"é™½æ›† (Gregorian)",
    cal_l:"è¾²æ›† (Lunar)",
    ph_country1:"å‡ºç”Ÿåœ‹å®¶ / åœ°å€",
    btn_next:"ç”Ÿæˆåˆ†æ",

    partner_info:"ç¬¬äºŒäººè³‡æ–™ï¼ˆåˆç›¤ï¼‰",
    ph_name2:"å§“åï¼ˆç¬¬äºŒäººï¼‰",
    ph_time2:"å‡ºç”Ÿæ™‚é–“",
    ph_country2:"å‡ºç”Ÿåœ‹å®¶ / åœ°å€",

    focus_title:"å‘½ç†é¸é¡Œï¼ˆå ±å‘Šèšç„¦ï¼‰",
    opt_love:"å§»ç·£ Love",
    opt_career:"äº‹æ¥­ Career",
    opt_wealth:"è²¡é‹ Wealth",
    opt_dates:"æ“‡æ—¥ Auspicious Date",
    opt_name:"æ¸¬å Name Analysis",
    opt_fs:"é¢¨æ°´ Feng Shui",
    opt_comp:"åˆç›¤åˆ†æ Compatibility",
    opt_dating:"æˆ€æ„›ç·£åˆ†",
    opt_marriage:"å©šå§»èµ°å‹¢",
    opt_work:"è·å ´ç™¼å±•",
    opt_startup:"å‰µæ¥­æ½›åŠ›",
    opt_wealthpos:"è²¡ä½åˆ†æ",
    opt_timing:"ç†è²¡æ™‚æ©Ÿ",
    opt_wedding:"å©šæœŸæ“‡æ—¥",
    opt_babydate:"æ–°ç”Ÿå¯¶å¯¶æ“‡æ—¥",
    opt_house:"æ–°å®¶å…¥ä½æ“‡æ—¥",
    opt_office:"æ–°å…¬å¸å…¥ä½æ“‡æ—¥",
    opt_babyname:"å¯¶å¯¶å",
    opt_petname:"å¯µç‰©å",
    opt_companyname:"å…¬å¸å",
    opt_rename:"å‘½åæ”¹é‹",
    opt_home:"ä½å®¶",
    opt_officefs:"è¾¦å…¬å®¤",
    opt_couple:"æƒ…ä¾¶åˆç›¤ï¼ˆç·£åˆ†èµ·è½ / æ›–æ˜§é€²å±•ï¼‰",
    opt_spouse:"å¤«å¦»æµå¹´ï¼ˆå©šå§»ç™¼å±•ï¼‰",
    opt_personality:"å€‹æ€§åˆç›¤ï¼ˆè¡çª / äº’è£œï¼‰",
    opt_partner:"äº‹æ¥­åˆç›¤ï¼ˆåˆå¤¥äºº / å“¡å·¥ï¼‰",
    opt_reconnect:"æ–·è¯ä¿®å¾©ï¼ˆæœ‹å‹ / æƒ…äºº / å®¶äººï¼‰",
    opt_petbond:"å¯µç‰©åˆç›¤ï¼ˆä¸»äººèˆ‡å¯µç‰©ï¼‰",

    portal_title:"å¿ƒæ†ç©ºé–“ Â· åŠŸèƒ½å…¥å£",
    diary_title:"ğŸ§˜â€â™€ï¸ éˆæ€§æ—¥è¨˜",
    diary_desc:"ç…§ç‰‡ä¸Šå‚³ / èªéŸ³è¨˜éŒ„ / éˆæ€§ç­†è¨˜ / å®¶åº­æ—¥èªŒ / é¡˜æœ›ç¥ˆç¦±ï¼ˆæ¯æ—¥åŠ æŒï¼‰",
    btn_personal:"å€‹äººéš±è—è¨˜éŒ„",
    btn_family:"å®¶åº­å…±äº«è¨˜éŒ„",
    btn_upload:"ä¸Šå‚³è¨˜éŒ„",

    course_title:"ğŸ“˜ å‘½ç†èª²ç¨‹å°ˆå€",
    course_bazi:"å…«å­—å‘½ç†ï¼šåç¥ / æµå¹´ / ç”¨ç¥åˆ†æ",
    course_tarot:"å¡”ç¾…ç‰Œï¼šç‰Œé™£è§£è®€ / æƒ…å¢ƒå¯¦æˆ°",
    course_coming:"ğŸŒ™ ä»¥ä¸‹èª²ç¨‹é†é‡€ä¸­ï¼šå æ˜Ÿ / éˆæ•¸ / äººé¡åœ– / å…­çˆ» / å†¥æƒ³å¼•å° / å¥‡é–€ / æ—¥å¼ç¥æ˜ / ç´«å¾® / èƒ½é‡å­¸ / è¥¿æ´‹å æ˜Ÿ / å¿ƒéˆèª²ç¨‹â€¦â€¦",
    btn_enter_course:"é€²å…¥èª²ç¨‹",

    shop_title:"ğŸ›ï¸ èƒ½é‡å•†åŸ Â· VIPæŠ˜æ‰£ & å¾¡å®ˆè¨‚è£½",
    shop_desc:"å°ˆå±¬ç¥ˆé¡˜åŒ…åˆ†é¡ï¼š",

    wish_title:"ğŸ”® å¤¢æƒ³æäº¤ Dream Submission",
    btn_manifest:"å¤¢æƒ³è¦åŠƒ / Manifestation",

    memorial_title:"ğŸ“– éˆæ€§ç©ºé–“ ~ å¾€ç”Ÿè¨˜æ†éŒ„",
    memorial_desc:"éˆé­‚æª”æ¡ˆ / ç´€å¿µå›æ†¶ï¼ˆåœ–æ–‡éŸ³ï¼‰ / éˆæ€§å»¶çºŒï¼ˆåŠŸå¾·å‚³æ‰¿ï¼‰",
    btn_login_memorial:"ç™»å…¥éˆæ€§ç©ºé–“",
    btn_upload_memorial:"ä¸Šå‚³å¾€ç”ŸéŒ„",
    btn_register_memorial:"è¨»å†Šéˆæ€§ç©ºé–“",

    vip_title:"ğŸŒ™ æœƒå“¡å€åŸŸ VIP Segment",
    vip_mingli:"ğŸ— å‘½ç†ç©ºé–“å°ˆå±¬å…§å®¹",
    vip_xinlian:"ğŸŒ™ å¿ƒæ†ç©ºé–“å°ˆå±¬å…§å®¹",
    vip_love:"å§»ç·£æ–¹å‘ï¼šæˆ€æ„›ç·£åˆ†ã€å©šå§»èµ°å‹¢",
    vip_career:"äº‹æ¥­æ–¹å‘ï¼šè·å ´ç™¼å±•ã€å‰µæ¥­æ½›åŠ›",
    vip_wealth:"è²¡é‹æ–¹å‘ï¼šè²¡ä½åˆ†æã€ç†è²¡æ™‚æ©Ÿ",
    vip_pet:"å¯µç‰©å‘½ç†ï¼šä¼´ä¾¶å‹•ç‰©çš„æ€§æ ¼èˆ‡ç·£åˆ†",
    vip_hepan:"åˆç›¤åˆ†æï¼šå©šæœŸæ“‡æ—¥ã€æ–°ç”Ÿæ“‡æ™‚",
    vip_name:"æ¸¬ååˆ†æï¼šå…¬å¸åã€å¯¶å¯¶åã€å‘½åæ”¹é‹",
    vip_fengshui:"è²¡ä½åˆç›¤ï¼šä½å®¶ / è¾¦å…¬å®¤å‹•ç·šé…åˆ",
    vip_record:"éˆæ€§è¨˜éŒ„ï¼šç…§ç‰‡ã€å¤¢å¢ƒã€è²éŸ³ã€é¡˜æœ›ç¥ˆç¦±",
    vip_course:"å‘½ç†èª²ç¨‹ï¼šå…«å­— / å¡”ç¾… / å æ˜Ÿ / éˆæ•¸ / äººé¡åœ–",
    vip_memorial:"å®¶æ—ç´€å¿µç³»çµ±ï¼šè¦ªäººéˆæ€§ç´€å¿µ & å»¶çºŒ",
    vip_tasks:"æ¯é€±èƒ½é‡ç·´ç¿’ / ç¥æ˜å„€å¼ä»»å‹™",
    vip_shop:"èƒ½é‡å•†åŸå°ˆå±¬æŠ˜æ‰£ & å¾¡å®ˆè¨‚è£½",

    login_title:"ğŸ’ ç™»å…¥ VIP åŠŸèƒ½",
    panel_login_head:"å¸³æˆ¶ç™»å…¥ / è¨»å†Š",
    ph_email:"éƒµç®± Email",
    ph_label_password:"å¯†ç¢¼ Password",
    ph_password:"å¯†ç¢¼ Passwordï¼ˆè‡³å°‘8ä½ï¼Œå«å¤§å°å¯«æ•¸å­—ç¬¦è™Ÿï¼‰",
    btn_login:"ç™»å…¥å¸³æˆ¶",
    btn_reset:"ğŸ”‘ é‡è¨­å¯†ç¢¼",
    btn_register:"è¨»å†Šå¸³æˆ¶",
    note_price:"è¨»å†Šå¸³è™Ÿè´ˆé€ä¸€æ¬¡å…è²»é«”é©—",

    panel_member_head:"æœƒå“¡æœå‹™",
    btn_upgrade:"ğŸ’ å‡ç´šç‚º VIPï¼ˆæœˆè²»ï¼‰",
    btn_backshop:"â† è¿”å›å‘½ç†å•†åŸ",
    note_price1:"$9.9 / æœˆè²» VIPï¼ˆå‘½ç†ç©ºé–“ + å¿ƒæ†ç©ºé–“ + éˆæ€§èª²ç¨‹ï¼‰",

    res_title:"å¿ƒæ†ç®¡å®¶è§£è®€èˆ‡å»ºè­°",

    chat_fab:"ğŸ’¬",
    chat_title:"å¿ƒæ†ç®¡å®¶ Â· GPT",
    chat_input_ph:"è¼¸å…¥å•é¡Œâ€¦",
    chat_send:"é€å‡º",

    time_unknown:"ä¸è©³",
    err_fill_name1:"è«‹å¡«å¯«å§“åï¼ˆæœ¬äººï¼‰",
    err_fill_date1:"è«‹å¡«å¯«å‡ºç”Ÿæ—¥æœŸï¼ˆæœ¬äººï¼‰",
    err_fill_country1:"è«‹å¡«å¯«å‡ºç”Ÿåœ‹å®¶/åœ°å€ï¼ˆæœ¬äººï¼‰",
    err_fill_name2:"è«‹å¡«å¯«ç¬¬äºŒäººå§“åï¼ˆåˆç›¤ï¼‰",
    err_fill_date2:"è«‹å¡«å¯«ç¬¬äºŒäººå‡ºç”Ÿæ—¥æœŸï¼ˆåˆç›¤ï¼‰",
    err_fill_country2:"è«‹å¡«å¯«å‡ºç”Ÿåœ‹å®¶/åœ°å€ï¼ˆåˆç›¤ï¼‰"
  },

  "en-US": {
    brand:"5xLiving Â· Soul Sanctuary",
    page_title:"Soul Sanctuary Â· VIP Segment",
    site_title:"Soul Sanctuary Â· VIP Segment",
    lang_label:"Language",
    form_title:"Destiny Analysis Â· Generate Report",
    choose_type:"Choose chart type",
    type_personal:"Personal chart",
    type_compat:"Compatibility (2 people)",
    culture_auto:"Auto Detect",
    culture_cn:"Eastern Â· Chinese / Bazi",
    culture_west:"Western Â· Astrology / Tarot",
    culture_jp:"Japanese Â· Nine Star Ki",
    culture_vedic:"Vedic Â· Jyotish",

    self_info:"Your info",
    ph_name1:"Name (you)",
    ph_time1:"Birth time",
    cal_g:"Gregorian",
    cal_l:"Lunar",
    ph_country1:"Birth country/region",
    btn_next:"Generate",

    partner_info:"Partner info (for compatibility)",
    ph_name2:"Name (partner)",
    ph_time2:"Birth time",
    ph_country2:"Birth country/region",

    focus_title:"Focus topic (report direction)",
    opt_love:"Love",
    opt_career:"Career",
    opt_wealth:"Wealth",
    opt_dates:"Auspicious Date",
    opt_name:"Name Analysis",
    opt_fs:"Feng Shui",
    opt_comp:"Compatibility",
    opt_dating:"Dating & attraction",
    opt_marriage:"Marriage trend",
    opt_work:"Work & promotion",
    opt_startup:"Startup potential",
    opt_wealthpos:"Wealth position",
    opt_timing:"Investment timing",
    opt_wedding:"Wedding date selection",
    opt_babydate:"Baby birth date selection",
    opt_house:"Move-in date (new home)",
    opt_office:"Move-in date (new office/company)",
    opt_babyname:"Baby name",
    opt_petname:"Pet name",
    opt_companyname:"Company name",
    opt_rename:"Rename for luck",
    opt_home:"Home",
    opt_officefs:"Office",
    opt_couple:"Couple sync (attraction / progress)",
    opt_spouse:"Spouse yearly trend (marriage)",
    opt_personality:"Personality fit (conflict / complement)",
    opt_partner:"Business fit (partners / employees)",
    opt_reconnect:"Reconnect & repair (friends / lovers / family)",
    opt_petbond:"Pet bond (owner & pet)",

    portal_title:"Soul Sanctuary Â· Portals",
    diary_title:"ğŸ§˜â€â™€ï¸ Spiritual Journal",
    diary_desc:"Photo upload / Voice notes / Spiritual notes / Family log / Daily prayer (blessing)",
    btn_personal:"Private journal",
    btn_family:"Family shared journal",
    btn_upload:"Upload",

    course_title:"ğŸ“˜ Courses",
    course_bazi:"Bazi: Ten Gods / Luck cycles / Useful elements",
    course_tarot:"Tarot: Spreads / Real-life scenarios",
    course_coming:"ğŸŒ™ Coming soon: Astrology / Numerology / Human Design / I Ching / Meditation / Qimen / Japanese Deities / Zi Wei / Energy Studiesâ€¦",
    btn_enter_course:"Enter courses",

    shop_title:"ğŸ›ï¸ Energy Shop Â· VIP discount & Amulet custom",
    shop_desc:"Wish pack categories:",

    wish_title:"ğŸ”® Dream Submission",
    btn_manifest:"Manifestation planning",

    memorial_title:"ğŸ“– Memorial Space",
    memorial_desc:"Soul archive / Memories (photo-text-audio) / Spiritual continuation",
    btn_login_memorial:"Login",
    btn_upload_memorial:"Upload memorial",
    btn_register_memorial:"Register",

    vip_title:"ğŸŒ™ VIP Segment",
    vip_mingli:"ğŸ— Destiny content",
    vip_xinlian:"ğŸŒ™ Soul Sanctuary content",
    vip_love:"Love: dating & marriage trend",
    vip_career:"Career: work & startup potential",
    vip_wealth:"Wealth: positions & timing",
    vip_pet:"Pets: personality & bond",
    vip_hepan:"Compatibility: dates & timing",
    vip_name:"Name analysis: company/baby/rename",
    vip_fengshui:"Feng Shui: home/office flow",
    vip_record:"Records: photos, dreams, voice, prayers",
    vip_course:"Courses: Bazi / Tarot / Astrology / Numerology / Human Design",
    vip_memorial:"Family memorial: remembrance & continuation",
    vip_tasks:"Weekly energy practice / rituals",
    vip_shop:"Shop: VIP discount & custom amulets",

    login_title:"ğŸ’ VIP Login",
    panel_login_head:"Login / Register",
    ph_email:"Email",
    ph_label_password:"Password",
    ph_password:"Password (min 8 chars, mixed case + number + symbol)",
    btn_login:"Login",
    btn_reset:"ğŸ”‘ Reset password",
    btn_register:"Register",
    note_price:"Register and get 1 free trial",

    panel_member_head:"Membership",
    btn_upgrade:"ğŸ’ Upgrade to VIP (monthly)",
    btn_backshop:"â† Back to shop",
    note_price1:"$9.9 / month VIP (Destiny + Soul Sanctuary + Courses)",

    res_title:"Butler's interpretation & suggestions",

    chat_fab:"ğŸ’¬",
    chat_title:"Soul Butler Â· GPT",
    chat_input_ph:"Type your questionâ€¦",
    chat_send:"Send",

    time_unknown:"Unknown",
    err_fill_name1:"Please enter your name",
    err_fill_date1:"Please enter your birth date",
    err_fill_country1:"Please enter your birth country/region",
    err_fill_name2:"Please enter partner name",
    err_fill_date2:"Please enter partner birth date",
    err_fill_country2:"Please enter partner birth country/region"
  },

  "ja-JP": {
    brand:"5xLiving Â· Soul Sanctuary",
    page_title:"ã‚½ã‚¦ãƒ«ãƒ»ã‚µãƒ³ã‚¯ãƒãƒ¥ã‚¢ãƒª Â· VIP",
    site_title:"ã‚½ã‚¦ãƒ«ãƒ»ã‚µãƒ³ã‚¯ãƒãƒ¥ã‚¢ãƒª Â· VIP",
    lang_label:"è¨€èª",
    form_title:"å‘½ç†åˆ†æ Â· ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ",
    choose_type:"å‘½ç›¤ã‚¿ã‚¤ãƒ—ã‚’é¸æŠ",
    type_personal:"å€‹äººãƒãƒ£ãƒ¼ãƒˆ",
    type_compat:"ç›¸æ€§ï¼ˆ2äººï¼‰",
    culture_auto:"è‡ªå‹•åˆ¤å®š Auto Detect",
    culture_cn:"æ±æ´‹ Chinese / Bazi",
    culture_west:"è¥¿æ´‹ Astrology / Tarot",
    culture_jp:"ä¹æ˜Ÿæ°—å­¦ Japanese",
    culture_vedic:"ãƒ´ã‚§ãƒ¼ãƒ€ Vedic",

    self_info:"æœ¬äººæƒ…å ±",
    ph_name1:"åå‰ï¼ˆæœ¬äººï¼‰",
    ph_time1:"å‡ºç”Ÿæ™‚é–“",
    cal_g:"è¥¿æš¦ (Gregorian)",
    cal_l:"æ—§æš¦ (Lunar)",
    ph_country1:"å‡ºç”Ÿå›½ / åœ°åŸŸ",
    btn_next:"åˆ†æã‚’ç”Ÿæˆ",

    partner_info:"ç›¸æ‰‹æƒ…å ±ï¼ˆç›¸æ€§ï¼‰",
    ph_name2:"åå‰ï¼ˆç›¸æ‰‹ï¼‰",
    ph_time2:"å‡ºç”Ÿæ™‚é–“",
    ph_country2:"å‡ºç”Ÿå›½ / åœ°åŸŸ",

    focus_title:"ãƒ†ãƒ¼ãƒï¼ˆãƒ¬ãƒãƒ¼ãƒˆç„¦ç‚¹ï¼‰",
    opt_love:"æ‹æ„› Love",
    opt_career:"ä»•äº‹ Career",
    opt_wealth:"è²¡é‹ Wealth",
    opt_dates:"å‰æ—¥ Auspicious Date",
    opt_name:"å‘½å Name Analysis",
    opt_fs:"é¢¨æ°´ Feng Shui",
    opt_comp:"ç›¸æ€§ Compatibility",
    opt_dating:"æ‹æ„›ã®ç¸",
    opt_marriage:"çµå©šã®æµã‚Œ",
    opt_work:"è·å ´ã®ç™ºå±•",
    opt_startup:"èµ·æ¥­ã®å¯èƒ½æ€§",
    opt_wealthpos:"è²¡ä½åˆ†æ",
    opt_timing:"è³‡ç”£é‹ç”¨ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°",
    opt_wedding:"çµå©šæ—¥é¸ã³",
    opt_babydate:"å‡ºç”£æ—¥é¸ã³",
    opt_house:"æ–°å±… å…¥å±…æ—¥",
    opt_office:"æ–°ä¼šç¤¾ å…¥å±…æ—¥",
    opt_babyname:"èµ¤ã¡ã‚ƒã‚“ã®åå‰",
    opt_petname:"ãƒšãƒƒãƒˆã®åå‰",
    opt_companyname:"ä¼šç¤¾å",
    opt_rename:"æ”¹åã§é‹æ°—æ”¹å–„",
    opt_home:"ä½ã¾ã„",
    opt_officefs:"ã‚ªãƒ•ã‚£ã‚¹",
    opt_couple:"ã‚«ãƒƒãƒ—ãƒ«ç›¸æ€§ï¼ˆé€²å±• / é§†ã‘å¼•ãï¼‰",
    opt_spouse:"å¤«å©¦ã®æµå¹´ï¼ˆçµå©šã®ç™ºå±•ï¼‰",
    opt_personality:"æ€§æ ¼ç›¸æ€§ï¼ˆè¡çª / è£œå®Œï¼‰",
    opt_partner:"ä»•äº‹ç›¸æ€§ï¼ˆå…±åŒçµŒå–¶ / ç¤¾å“¡ï¼‰",
    opt_reconnect:"é–¢ä¿‚ä¿®å¾©ï¼ˆå‹äºº / æ‹äºº / å®¶æ—ï¼‰",
    opt_petbond:"ãƒšãƒƒãƒˆç›¸æ€§ï¼ˆé£¼ã„ä¸»ã¨ãƒšãƒƒãƒˆï¼‰",

    portal_title:"ã‚½ã‚¦ãƒ«ãƒ»ã‚µãƒ³ã‚¯ãƒãƒ¥ã‚¢ãƒª Â· å…¥å£",
    diary_title:"ğŸ§˜â€â™€ï¸ ã‚¹ãƒ”ãƒªãƒãƒ¥ã‚¢ãƒ«æ—¥è¨˜",
    diary_desc:"å†™çœŸ / éŸ³å£° / ãƒãƒ¼ãƒˆ / å®¶æ—ãƒ­ã‚° / æ¯æ—¥ã®ç¥ˆã‚Š",
    btn_personal:"å€‹äººï¼ˆéå…¬é–‹ï¼‰",
    btn_family:"å®¶æ—å…±æœ‰",
    btn_upload:"ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰",

    course_title:"ğŸ“˜ è¬›åº§ã‚¨ãƒªã‚¢",
    course_bazi:"å…«å­—ï¼šåç¥ / æµå¹´ / ç”¨ç¥",
    course_tarot:"ã‚¿ãƒ­ãƒƒãƒˆï¼šã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ / å®Ÿæˆ¦",
    course_coming:"ğŸŒ™ æº–å‚™ä¸­ï¼šå æ˜Ÿ / æ•°ç§˜ / äººé–“è¨­è¨ˆå›³ / å…­çˆ» / ç‘æƒ³ / å¥‡é–€â€¦",
    btn_enter_course:"è¬›åº§ã¸",

    shop_title:"ğŸ›ï¸ ã‚¨ãƒŠã‚¸ãƒ¼ã‚·ãƒ§ãƒƒãƒ— Â· VIPå‰²å¼• & å¾¡å®ˆã‚Š",
    shop_desc:"ç¥ˆé¡˜ãƒ‘ãƒƒã‚¯åˆ†é¡ï¼š",

    wish_title:"ğŸ”® å¤¢ã®æå‡º Dream Submission",
    btn_manifest:"ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆè¨ˆç”»",

    memorial_title:"ğŸ“– è¿½æ†¶ã®ç©ºé–“",
    memorial_desc:"é­‚ã®è¨˜éŒ² / æ€ã„å‡ºï¼ˆå†™çœŸãƒ»æ–‡ç« ãƒ»éŸ³å£°ï¼‰ / éœŠçš„ãªç¶™ç¶š",
    btn_login_memorial:"ãƒ­ã‚°ã‚¤ãƒ³",
    btn_upload_memorial:"è¿½æ†¶ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰",
    btn_register_memorial:"ç™»éŒ²",

    vip_title:"ğŸŒ™ VIPã‚¨ãƒªã‚¢",
    vip_mingli:"ğŸ— å‘½ç†ã‚³ãƒ³ãƒ†ãƒ³ãƒ„",
    vip_xinlian:"ğŸŒ™ ã‚½ã‚¦ãƒ«ãƒ»ã‚µãƒ³ã‚¯ãƒãƒ¥ã‚¢ãƒª",
    vip_love:"æ‹æ„›ï¼šæ‹ã®ç¸ / çµå©šã®æµã‚Œ",
    vip_career:"ä»•äº‹ï¼šè·å ´ / èµ·æ¥­",
    vip_wealth:"è²¡é‹ï¼šè²¡ä½ / ã‚¿ã‚¤ãƒŸãƒ³ã‚°",
    vip_pet:"ãƒšãƒƒãƒˆï¼šæ€§æ ¼ / ç¸",
    vip_hepan:"ç›¸æ€§ï¼šå‰æ—¥ / ã‚¿ã‚¤ãƒŸãƒ³ã‚°",
    vip_name:"å‘½åï¼šä¼šç¤¾å / èµ¤ã¡ã‚ƒã‚“ / æ”¹å",
    vip_fengshui:"é¢¨æ°´ï¼šä½ã¾ã„ / ã‚ªãƒ•ã‚£ã‚¹",
    vip_record:"è¨˜éŒ²ï¼šå†™çœŸãƒ»å¤¢ãƒ»éŸ³å£°ãƒ»ç¥ˆã‚Š",
    vip_course:"è¬›åº§ï¼šå…«å­— / ã‚¿ãƒ­ãƒƒãƒˆ / å æ˜Ÿ / æ•°ç§˜ / äººé–“è¨­è¨ˆå›³",
    vip_memorial:"å®¶æ—è¿½æ†¶ï¼šè¨˜å¿µã¨ç¶™ç¶š",
    vip_tasks:"é€±æ¬¡ç·´ç¿’ / å„€å¼ã‚¿ã‚¹ã‚¯",
    vip_shop:"ã‚·ãƒ§ãƒƒãƒ—ï¼šVIPå‰²å¼• & å¾¡å®ˆã‚Š",

    login_title:"ğŸ’ VIPãƒ­ã‚°ã‚¤ãƒ³",
    panel_login_head:"ãƒ­ã‚°ã‚¤ãƒ³ / ç™»éŒ²",
    ph_email:"ãƒ¡ãƒ¼ãƒ« Email",
    ph_label_password:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ Password",
    ph_password:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆ8æ–‡å­—ä»¥ä¸Šãƒ»å¤§å°è‹±æ•°è¨˜å·ï¼‰",
    btn_login:"ãƒ­ã‚°ã‚¤ãƒ³",
    btn_reset:"ğŸ”‘ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å†è¨­å®š",
    btn_register:"ç™»éŒ²",
    note_price:"ç™»éŒ²ã§ç„¡æ–™ä½“é¨“1å›",

    panel_member_head:"ä¼šå“¡ã‚µãƒ¼ãƒ“ã‚¹",
    btn_upgrade:"ğŸ’ VIPã¸ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ï¼ˆæœˆé¡ï¼‰",
    btn_backshop:"â† ã‚·ãƒ§ãƒƒãƒ—ã¸æˆ»ã‚‹",
    note_price1:"$9.9 / æœˆ VIPï¼ˆå‘½ç† + ã‚µãƒ³ã‚¯ãƒãƒ¥ã‚¢ãƒª + è¬›åº§ï¼‰",

    res_title:"åŸ·äº‹ã®è§£é‡ˆã¨ææ¡ˆ",

    chat_fab:"ğŸ’¬",
    chat_title:"ã‚½ã‚¦ãƒ«åŸ·äº‹ Â· GPT",
    chat_input_ph:"è³ªå•ã‚’å…¥åŠ›â€¦",
    chat_send:"é€ä¿¡",

    time_unknown:"ä¸æ˜",
    err_fill_name1:"åå‰ï¼ˆæœ¬äººï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
    err_fill_date1:"ç”Ÿå¹´æœˆæ—¥ï¼ˆæœ¬äººï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
    err_fill_country1:"å‡ºç”Ÿå›½/åœ°åŸŸï¼ˆæœ¬äººï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
    err_fill_name2:"ç›¸æ‰‹ã®åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
    err_fill_date2:"ç›¸æ‰‹ã®ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
    err_fill_country2:"ç›¸æ‰‹ã®å‡ºç”Ÿå›½/åœ°åŸŸã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
  },

  "th-TH": {
    brand:"5xLiving Â· Soul Sanctuary",
    page_title:"Soul Sanctuary Â· VIP",
    site_title:"Soul Sanctuary Â· VIP",
    lang_label:"à¸ à¸²à¸©à¸²",
    form_title:"à¸à¸²à¸£à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸”à¸§à¸‡ Â· à¸ªà¸£à¹‰à¸²à¸‡à¸£à¸²à¸¢à¸‡à¸²à¸™",
    choose_type:"à¹€à¸¥à¸·à¸­à¸à¸›à¸£à¸°à¹€à¸ à¸—à¸”à¸§à¸‡",
    type_personal:"à¸”à¸§à¸‡à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§",
    type_compat:"à¸„à¸§à¸²à¸¡à¹€à¸‚à¹‰à¸²à¸à¸±à¸™à¹„à¸”à¹‰ (2 à¸„à¸™)",
    culture_auto:"à¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸šà¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´ Auto Detect",
    culture_cn:"à¸•à¸°à¸§à¸±à¸™à¸­à¸­à¸ Chinese / Bazi",
    culture_west:"à¸•à¸°à¸§à¸±à¸™à¸•à¸ Astrology / Tarot",
    culture_jp:"à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™ Nine Star Ki",
    culture_vedic:"à¹€à¸§à¸— Vedic",

    self_info:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸‚à¸­à¸‡à¸„à¸¸à¸“",
    ph_name1:"à¸Šà¸·à¹ˆà¸­ (à¸„à¸¸à¸“)",
    ph_time1:"à¹€à¸§à¸¥à¸²à¹€à¸à¸´à¸”",
    cal_g:"à¸ªà¸²à¸à¸¥ (Gregorian)",
    cal_l:"à¸ˆà¸±à¸™à¸—à¸£à¸„à¸•à¸´ (Lunar)",
    ph_country1:"à¸›à¸£à¸°à¹€à¸—à¸¨/à¸ à¸¹à¸¡à¸´à¸ à¸²à¸„à¸—à¸µà¹ˆà¹€à¸à¸´à¸”",
    btn_next:"à¸ªà¸£à¹‰à¸²à¸‡à¸£à¸²à¸¢à¸‡à¸²à¸™",

    partner_info:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸­à¸µà¸à¸à¹ˆà¸²à¸¢ (à¸ªà¸³à¸«à¸£à¸±à¸šà¸„à¸§à¸²à¸¡à¹€à¸‚à¹‰à¸²à¸à¸±à¸™à¹„à¸”à¹‰)",
    ph_name2:"à¸Šà¸·à¹ˆà¸­ (à¸­à¸µà¸à¸à¹ˆà¸²à¸¢)",
    ph_time2:"à¹€à¸§à¸¥à¸²à¹€à¸à¸´à¸”",
    ph_country2:"à¸›à¸£à¸°à¹€à¸—à¸¨/à¸ à¸¹à¸¡à¸´à¸ à¸²à¸„à¸—à¸µà¹ˆà¹€à¸à¸´à¸”",

    focus_title:"à¸«à¸±à¸§à¸‚à¹‰à¸­à¹‚à¸Ÿà¸à¸±à¸ª (à¹à¸™à¸§à¸£à¸²à¸¢à¸‡à¸²à¸™)",
    opt_love:"à¸„à¸§à¸²à¸¡à¸£à¸±à¸ Love",
    opt_career:"à¸à¸²à¸£à¸‡à¸²à¸™ Career",
    opt_wealth:"à¸à¸²à¸£à¹€à¸‡à¸´à¸™ Wealth",
    opt_dates:"à¸¤à¸à¸©à¹Œà¸¡à¸‡à¸„à¸¥ Auspicious Date",
    opt_name:"à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸Šà¸·à¹ˆà¸­ Name Analysis",
    opt_fs:"à¸®à¸§à¸‡à¸ˆà¸¸à¹‰à¸¢ Feng Shui",
    opt_comp:"à¸„à¸§à¸²à¸¡à¹€à¸‚à¹‰à¸²à¸à¸±à¸™à¹„à¸”à¹‰ Compatibility",
    opt_dating:"à¹€à¸ªà¸™à¹ˆà¸«à¹Œ/à¸ˆà¸±à¸‡à¸«à¸§à¸°à¸„à¸šà¸«à¸²",
    opt_marriage:"à¹à¸™à¸§à¹‚à¸™à¹‰à¸¡à¹à¸•à¹ˆà¸‡à¸‡à¸²à¸™",
    opt_work:"à¸„à¸§à¸²à¸¡à¸à¹‰à¸²à¸§à¸«à¸™à¹‰à¸²à¹ƒà¸™à¸‡à¸²à¸™",
    opt_startup:"à¸¨à¸±à¸à¸¢à¸ à¸²à¸à¹€à¸£à¸´à¹ˆà¸¡à¸˜à¸¸à¸£à¸à¸´à¸ˆ",
    opt_wealthpos:"à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡à¸à¸²à¸£à¹€à¸‡à¸´à¸™",
    opt_timing:"à¸ˆà¸±à¸‡à¸«à¸§à¸°à¸¥à¸‡à¸—à¸¸à¸™",
    opt_wedding:"à¸¤à¸à¸©à¹Œà¹à¸•à¹ˆà¸‡à¸‡à¸²à¸™",
    opt_babydate:"à¸¤à¸à¸©à¹Œà¸„à¸¥à¸­à¸”/à¸§à¸±à¸™à¹€à¸à¸´à¸”à¸¥à¸¹à¸",
    opt_house:"à¸¤à¸à¸©à¹Œà¸¢à¹‰à¸²à¸¢à¸šà¹‰à¸²à¸™à¹ƒà¸«à¸¡à¹ˆ",
    opt_office:"à¸¤à¸à¸©à¹Œà¸¢à¹‰à¸²à¸¢à¸šà¸£à¸´à¸©à¸±à¸—/à¸­à¸­à¸Ÿà¸Ÿà¸´à¸¨",
    opt_babyname:"à¸Šà¸·à¹ˆà¸­à¸¥à¸¹à¸",
    opt_petname:"à¸Šà¸·à¹ˆà¸­à¸ªà¸±à¸•à¸§à¹Œà¹€à¸¥à¸µà¹‰à¸¢à¸‡",
    opt_companyname:"à¸Šà¸·à¹ˆà¸­à¸šà¸£à¸´à¸©à¸±à¸—",
    opt_rename:"à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸Šà¸·à¹ˆà¸­à¹€à¸ªà¸£à¸´à¸¡à¸”à¸§à¸‡",
    opt_home:"à¸šà¹‰à¸²à¸™",
    opt_officefs:"à¸­à¸­à¸Ÿà¸Ÿà¸´à¸¨",
    opt_couple:"à¸„à¸¹à¹ˆà¸£à¸±à¸ (à¸„à¸§à¸²à¸¡à¸„à¸·à¸šà¸«à¸™à¹‰à¸²/à¹à¸£à¸‡à¸”à¸¶à¸‡à¸”à¸¹à¸”)",
    opt_spouse:"à¸„à¸¹à¹ˆà¸ªà¸¡à¸£à¸ª (à¹à¸™à¸§à¹‚à¸™à¹‰à¸¡à¸£à¸²à¸¢à¸›à¸µ)",
    opt_personality:"à¸™à¸´à¸ªà¸±à¸¢à¹€à¸‚à¹‰à¸²à¸à¸±à¸™à¹„à¸”à¹‰",
    opt_partner:"à¸«à¸¸à¹‰à¸™à¸ªà¹ˆà¸§à¸™/à¸à¸™à¸±à¸à¸‡à¸²à¸™",
    opt_reconnect:"à¸›à¸£à¸±à¸šà¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ (à¹€à¸à¸·à¹ˆà¸­à¸™/à¸„à¸™à¸£à¸±à¸/à¸„à¸£à¸­à¸šà¸„à¸£à¸±à¸§)",
    opt_petbond:"à¸„à¸§à¸²à¸¡à¸œà¸¹à¸à¸à¸±à¸™à¸ªà¸±à¸•à¸§à¹Œà¹€à¸¥à¸µà¹‰à¸¢à¸‡",

    portal_title:"Soul Sanctuary Â· à¸—à¸²à¸‡à¸¥à¸±à¸”",
    diary_title:"ğŸ§˜â€â™€ï¸ à¸šà¸±à¸™à¸—à¸¶à¸à¸ˆà¸´à¸•à¸§à¸´à¸à¸à¸²à¸“",
    diary_desc:"à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¸£à¸¹à¸› / à¸šà¸±à¸™à¸—à¸¶à¸à¹€à¸ªà¸µà¸¢à¸‡ / à¹‚à¸™à¹‰à¸• / à¸šà¸±à¸™à¸—à¸¶à¸à¸„à¸£à¸­à¸šà¸„à¸£à¸±à¸§ / à¸„à¸³à¸­à¸˜à¸´à¸©à¸à¸²à¸™à¸£à¸²à¸¢à¸§à¸±à¸™",
    btn_personal:"à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§ (à¸‹à¹ˆà¸­à¸™)",
    btn_family:"à¹à¸Šà¸£à¹Œà¸à¸±à¸šà¸„à¸£à¸­à¸šà¸„à¸£à¸±à¸§",
    btn_upload:"à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”",

    course_title:"ğŸ“˜ à¸„à¸­à¸£à¹Œà¸ª",
    course_bazi:"Bazi: Ten Gods / à¸§à¸‡à¸£à¸­à¸šà¸”à¸§à¸‡ / à¸˜à¸²à¸•à¸¸à¸—à¸µà¹ˆà¹€à¸à¸·à¹‰à¸­à¸«à¸™à¸¸à¸™",
    course_tarot:"Tarot: à¸ªà¹€à¸›à¸£à¸” / à¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œà¸ˆà¸£à¸´à¸‡",
    course_coming:"ğŸŒ™ à¹€à¸£à¹‡à¸§à¹† à¸™à¸µà¹‰: à¹‚à¸«à¸£à¸²à¸¨à¸²à¸ªà¸•à¸£à¹Œ / à¹€à¸¥à¸‚à¸¨à¸²à¸ªà¸•à¸£à¹Œ / Human Design / I Ching / à¸ªà¸¡à¸²à¸˜à¸´ / Qimenâ€¦",
    btn_enter_course:"à¹€à¸‚à¹‰à¸²à¸„à¸­à¸£à¹Œà¸ª",

    shop_title:"ğŸ›ï¸ à¸£à¹‰à¸²à¸™à¸à¸¥à¸±à¸‡à¸‡à¸²à¸™ Â· à¸ªà¹ˆà¸§à¸™à¸¥à¸” VIP & à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸£à¸²à¸‡à¸ªà¸±à¹ˆà¸‡à¸—à¸³",
    shop_desc:"à¸«à¸¡à¸§à¸”à¹à¸à¹‡à¸à¸„à¸³à¸­à¸˜à¸´à¸©à¸à¸²à¸™:",

    wish_title:"ğŸ”® à¸ªà¹ˆà¸‡à¸„à¸§à¸²à¸¡à¸à¸±à¸™ Dream Submission",
    btn_manifest:"à¸§à¸²à¸‡à¹à¸œà¸™à¸à¸²à¸£ Manifest",

    memorial_title:"ğŸ“– à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¸£à¸°à¸¥à¸¶à¸à¸–à¸¶à¸‡",
    memorial_desc:"à¸„à¸¥à¸±à¸‡à¸§à¸´à¸à¸à¸²à¸“ / à¸„à¸§à¸²à¸¡à¸—à¸£à¸‡à¸ˆà¸³ (à¸£à¸¹à¸›-à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡-à¹€à¸ªà¸µà¸¢à¸‡) / à¸à¸²à¸£à¸ªà¸·à¸šà¸•à¹ˆà¸­à¸—à¸²à¸‡à¸ˆà¸´à¸•à¸§à¸´à¸à¸à¸²à¸“",
    btn_login_memorial:"à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š",
    btn_upload_memorial:"à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¸šà¸±à¸™à¸—à¸¶à¸",
    btn_register_memorial:"à¸ªà¸¡à¸±à¸„à¸£à¸ªà¸¡à¸²à¸Šà¸´à¸",

    vip_title:"ğŸŒ™ VIP",
    vip_mingli:"ğŸ— à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¸”à¸§à¸‡à¹€à¸‰à¸à¸²à¸°",
    vip_xinlian:"ğŸŒ™ à¹€à¸™à¸·à¹‰à¸­à¸«à¸² Soul Sanctuary",
    vip_love:"à¸„à¸§à¸²à¸¡à¸£à¸±à¸: à¸„à¸šà¸«à¸² & à¹à¸•à¹ˆà¸‡à¸‡à¸²à¸™",
    vip_career:"à¸à¸²à¸£à¸‡à¸²à¸™: à¸‡à¸²à¸™ & à¸˜à¸¸à¸£à¸à¸´à¸ˆ",
    vip_wealth:"à¸à¸²à¸£à¹€à¸‡à¸´à¸™: à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡ & à¸ˆà¸±à¸‡à¸«à¸§à¸°",
    vip_pet:"à¸ªà¸±à¸•à¸§à¹Œà¹€à¸¥à¸µà¹‰à¸¢à¸‡: à¸™à¸´à¸ªà¸±à¸¢ & à¸„à¸§à¸²à¸¡à¸œà¸¹à¸à¸à¸±à¸™",
    vip_hepan:"à¸„à¸§à¸²à¸¡à¹€à¸‚à¹‰à¸²à¸à¸±à¸™à¹„à¸”à¹‰: à¸¤à¸à¸©à¹Œ & à¹€à¸§à¸¥à¸²",
    vip_name:"à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸Šà¸·à¹ˆà¸­: à¸šà¸£à¸´à¸©à¸±à¸—/à¸¥à¸¹à¸/à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸Šà¸·à¹ˆà¸­",
    vip_fengshui:"à¸®à¸§à¸‡à¸ˆà¸¸à¹‰à¸¢: à¸šà¹‰à¸²à¸™/à¸­à¸­à¸Ÿà¸Ÿà¸´à¸¨",
    vip_record:"à¸šà¸±à¸™à¸—à¸¶à¸: à¸£à¸¹à¸›/à¸„à¸§à¸²à¸¡à¸à¸±à¸™/à¹€à¸ªà¸µà¸¢à¸‡/à¸„à¸³à¸­à¸˜à¸´à¸©à¸à¸²à¸™",
    vip_course:"à¸„à¸­à¸£à¹Œà¸ª: Bazi / Tarot / Astrology / Numerology / Human Design",
    vip_memorial:"à¸„à¸£à¸­à¸šà¸„à¸£à¸±à¸§: à¸£à¸°à¸¥à¸¶à¸à¸–à¸¶à¸‡ & à¸ªà¸·à¸šà¸•à¹ˆà¸­",
    vip_tasks:"à¹à¸šà¸šà¸à¸¶à¸à¸à¸¥à¸±à¸‡à¸‡à¸²à¸™à¸£à¸²à¸¢à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ / à¸à¸´à¸˜à¸µà¸à¸£à¸£à¸¡",
    vip_shop:"à¸£à¹‰à¸²à¸™: à¸ªà¹ˆà¸§à¸™à¸¥à¸” VIP & à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸£à¸²à¸‡",

    login_title:"ğŸ’ à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š VIP",
    panel_login_head:"à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š / à¸ªà¸¡à¸±à¸„à¸£",
    ph_email:"à¸­à¸µà¹€à¸¡à¸¥ Email",
    ph_label_password:"à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™ Password",
    ph_password:"à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™ (à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 8 à¸•à¸±à¸§ à¸¡à¸µà¸•à¸±à¸§à¹ƒà¸«à¸à¹ˆ/à¹€à¸¥à¹‡à¸/à¸•à¸±à¸§à¹€à¸¥à¸‚/à¸ªà¸±à¸à¸¥à¸±à¸à¸©à¸“à¹Œ)",
    btn_login:"à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š",
    btn_reset:"ğŸ”‘ à¸£à¸µà¹€à¸‹à¹‡à¸•à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™",
    btn_register:"à¸ªà¸¡à¸±à¸„à¸£à¸ªà¸¡à¸²à¸Šà¸´à¸",
    note_price:"à¸ªà¸¡à¸±à¸„à¸£à¹à¸¥à¹‰à¸§à¸£à¸±à¸šà¸—à¸”à¸¥à¸­à¸‡à¹ƒà¸Šà¹‰à¸Ÿà¸£à¸µ 1 à¸„à¸£à¸±à¹‰à¸‡",

    panel_member_head:"à¸ªà¸¡à¸²à¸Šà¸´à¸",
    btn_upgrade:"ğŸ’ à¸­à¸±à¸›à¹€à¸à¸£à¸”à¹€à¸›à¹‡à¸™ VIP (à¸£à¸²à¸¢à¹€à¸”à¸·à¸­à¸™)",
    btn_backshop:"â† à¸à¸¥à¸±à¸šà¹„à¸›à¸—à¸µà¹ˆà¸£à¹‰à¸²à¸™",
    note_price1:"$9.9 / à¹€à¸”à¸·à¸­à¸™ VIP (à¸”à¸§à¸‡ + Sanctuary + à¸„à¸­à¸£à¹Œà¸ª)",

    res_title:"à¸„à¸³à¹à¸™à¸°à¸™à¸³à¸ˆà¸²à¸à¸œà¸¹à¹‰à¸Šà¹ˆà¸§à¸¢",

    chat_fab:"ğŸ’¬",
    chat_title:"Soul Butler Â· GPT",
    chat_input_ph:"à¸à¸´à¸¡à¸à¹Œà¸„à¸³à¸–à¸²à¸¡â€¦",
    chat_send:"à¸ªà¹ˆà¸‡",

    time_unknown:"à¹„à¸¡à¹ˆà¸—à¸£à¸²à¸š",
    err_fill_name1:"à¹‚à¸›à¸£à¸”à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­à¸‚à¸­à¸‡à¸„à¸¸à¸“",
    err_fill_date1:"à¹‚à¸›à¸£à¸”à¸à¸£à¸­à¸à¸§à¸±à¸™à¹€à¸à¸´à¸”à¸‚à¸­à¸‡à¸„à¸¸à¸“",
    err_fill_country1:"à¹‚à¸›à¸£à¸”à¸à¸£à¸­à¸à¸›à¸£à¸°à¹€à¸—à¸¨/à¸ à¸¹à¸¡à¸´à¸ à¸²à¸„à¸—à¸µà¹ˆà¹€à¸à¸´à¸”",
    err_fill_name2:"à¹‚à¸›à¸£à¸”à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­à¸­à¸µà¸à¸à¹ˆà¸²à¸¢",
    err_fill_date2:"à¹‚à¸›à¸£à¸”à¸à¸£à¸­à¸à¸§à¸±à¸™à¹€à¸à¸´à¸”à¸­à¸µà¸à¸à¹ˆà¸²à¸¢",
    err_fill_country2:"à¹‚à¸›à¸£à¸”à¸à¸£à¸­à¸à¸›à¸£à¸°à¹€à¸—à¸¨/à¸ à¸¹à¸¡à¸´à¸ à¸²à¸„à¸—à¸µà¹ˆà¹€à¸à¸´à¸” (à¸­à¸µà¸à¸à¹ˆà¸²à¸¢)"
  },

  "ms-MY": {
  brand:"5xLiving Â· Soul Sanctuary",
  page_title:"Soul Sanctuary Â· Segmen VIP",
  site_title:"Soul Sanctuary Â· Segmen VIP",
  lang_label:"Bahasa",
  form_title:"Analisis Takdir Â· Jana Laporan",
  choose_type:"Pilih jenis carta",
  type_personal:"Carta peribadi",
  type_compat:"Keserasian (2 orang)",
  culture_auto:"Kesan Automatik",
  culture_cn:"Timur Â· Cina / Bazi",
  culture_west:"Barat Â· Astrologi / Tarot",
  culture_jp:"Jepun Â· Nine Star Ki",
  culture_vedic:"Veda Â· Jyotish",

  self_info:"Maklumat anda",
  ph_name1:"Nama (anda)",
  ph_time1:"Masa lahir",
  cal_g:"Gregorian",
  cal_l:"Lunar",
  ph_country1:"Negara/region kelahiran",
  btn_next:"Jana",

  partner_info:"Maklumat pasangan (untuk keserasian)",
  ph_name2:"Nama (pasangan)",
  ph_time2:"Masa lahir",
  ph_country2:"Negara/region kelahiran",

  focus_title:"Topik fokus (hala laporan)",
  opt_love:"Cinta",
  opt_career:"Kerjaya",
  opt_wealth:"Kekayaan",
  opt_dates:"Tarikh bertuah",
  opt_name:"Analisis nama",
  opt_fs:"Feng Shui",
  opt_comp:"Keserasian",
  opt_dating:"Temu janji & tarikan",
  opt_marriage:"Trend perkahwinan",
  opt_work:"Kerja & kenaikan pangkat",
  opt_startup:"Potensi startup",
  opt_wealthpos:"Kedudukan kekayaan",
  opt_timing:"Masa pelaburan",
  opt_wedding:"Pemilihan tarikh kahwin",
  opt_babydate:"Pemilihan tarikh lahir bayi",
  opt_house:"Tarikh masuk rumah baharu",
  opt_office:"Tarikh masuk pejabat/syarikat baharu",
  opt_babyname:"Nama bayi",
  opt_petname:"Nama haiwan peliharaan",
  opt_companyname:"Nama syarikat",
  opt_rename:"Tukar nama untuk tuah",
  opt_home:"Rumah",
  opt_officefs:"Pejabat",
  opt_couple:"Keserasian pasangan (tarikan / perkembangan)",
  opt_spouse:"Trend tahunan pasangan (perkahwinan)",
  opt_personality:"Kesesuaian personaliti (konflik / saling melengkapi)",
  opt_partner:"Kesesuaian bisnes (rakan kongsi / pekerja)",
  opt_reconnect:"Sambung semula & baiki (kawan / kekasih / keluarga)",
  opt_petbond:"Ikatan haiwan peliharaan (pemilik & haiwan)",

  portal_title:"Soul Sanctuary Â· Portal",
  diary_title:"ğŸ§˜â€â™€ï¸ Jurnal Spiritual",
  diary_desc:"Muat naik foto / Nota suara / Nota spiritual / Log keluarga / Doa harian (berkat)",
  btn_personal:"Jurnal peribadi",
  btn_family:"Jurnal kongsi keluarga",
  btn_upload:"Muat naik",

  course_title:"ğŸ“˜ Kursus",
  course_bazi:"Bazi: Sepuluh Dewa / Kitaran nasib / Unsur berguna",
  course_tarot:"Tarot: Susunan / Situasi kehidupan sebenar",
  course_coming:"ğŸŒ™ Akan datang: Astrologi / Numerologi / Human Design / I Ching / Meditasi / Qimen / Dewa Jepun / Zi Wei / Kajian Tenagaâ€¦",
  btn_enter_course:"Masuk kursus",

  shop_title:"ğŸ›ï¸ Kedai Tenaga Â· Diskaun VIP & Azimat tempahan khas",
  shop_desc:"Kategori wish pack:",

  wish_title:"ğŸ”® Penghantaran Impian",
  btn_manifest:"Perancangan manifestasi",

  memorial_title:"ğŸ“– Ruang Memorial",
  memorial_desc:"Arkib jiwa / Kenangan (foto-teks-audio) / Kelangsungan spiritual",
  btn_login_memorial:"Log masuk",
  btn_upload_memorial:"Muat naik memorial",
  btn_register_memorial:"Daftar",

  vip_title:"ğŸŒ™ Segmen VIP",
  vip_mingli:"ğŸ— Kandungan takdir",
  vip_xinlian:"ğŸŒ™ Kandungan Soul Sanctuary",
  vip_love:"Cinta: temu janji & trend perkahwinan",
  vip_career:"Kerjaya: kerja & potensi startup",
  vip_wealth:"Kekayaan: kedudukan & masa",
  vip_pet:"Haiwan: personaliti & ikatan",
  vip_hepan:"Keserasian: tarikh & masa",
  vip_name:"Analisis nama: syarikat/bayi/tukar nama",
  vip_fengshui:"Feng Shui: aliran rumah/pejabat",
  vip_record:"Rekod: foto, impian, suara, doa",
  vip_course:"Kursus: Bazi / Tarot / Astrologi / Numerologi / Human Design",
  vip_memorial:"Memorial keluarga: kenangan & kelangsungan",
  vip_tasks:"Amalan tenaga mingguan / ritual",
  vip_shop:"Kedai: diskaun VIP & azimat tempahan khas",

  login_title:"ğŸ’ Log Masuk VIP",
  panel_login_head:"Log masuk / Daftar",
  ph_email:"E-mel",
  ph_label_password:"Kata laluan",
  ph_password:"Kata laluan (min 8 aksara, huruf besar + kecil + nombor + simbol)",
  btn_login:"Log masuk",
  btn_reset:"ğŸ”‘ Tetapkan semula kata laluan",
  btn_register:"Daftar",
  note_price:"Daftar dan dapat 1 percubaan percuma",

  panel_member_head:"Keahlian",
  btn_upgrade:"ğŸ’ Naik taraf ke VIP (bulanan)",
  btn_backshop:"â† Kembali ke kedai",
  note_price1:"$9.9 / bulan VIP (Takdir + Soul Sanctuary + Kursus)",

  res_title:"Tafsiran & cadangan Butler",

  chat_fab:"ğŸ’¬",
  chat_title:"Soul Butler Â· GPT",
  chat_input_ph:"Taip soalan andaâ€¦",
  chat_send:"Hantar",

  time_unknown:"Tidak diketahui",
  err_fill_name1:"Sila masukkan nama anda",
  err_fill_date1:"Sila masukkan tarikh lahir anda",
  err_fill_country1:"Sila masukkan negara/region kelahiran anda",
  err_fill_name2:"Sila masukkan nama pasangan",
  err_fill_date2:"Sila masukkan tarikh lahir pasangan",
  err_fill_country2:"Sila masukkan negara/region kelahiran pasangan"
  }
};
window.i18n = i18n;

/* ==============================
   APPLY i18n
============================== */
function applyI18n(){
  const lang = getLang();
  document.documentElement.lang = lang;

  document.querySelectorAll('[data-i18n]').forEach(el=>{
    const key = el.dataset.i18n;
    const val = t(key);
    if(val!=null) el.textContent = val;
  });

  document.querySelectorAll('[data-i18n-ph]').forEach(el=>{
    const key = el.dataset.i18nPh;
    const val = t(key);
    if(val!=null) el.placeholder = val;
  });

  const titleEl = document.querySelector('title[data-i18n]');
  if(titleEl) document.title = t(titleEl.dataset.i18n);
}
  
  /* ==============================
     REQUIRED: auto-fill current date & time
     - DOES NOT touch auth fields
  ============================== */
  function setDefaultBirthDateTimeNow(){
    const now = new Date(); // browser local time
    const yyyy = now.getFullYear();
    const mm   = pad2(now.getMonth()+1);
    const dd   = pad2(now.getDate());
    const hh   = pad2(now.getHours());
    const mi   = pad2(now.getMinutes());

    const d1 = $('birthdate1');
    const t1 = $('birthtime1');

    // only fill if empty (so it won't overwrite user's input)
    if (d1 && !String(d1.value || '').trim()) d1.value = `${yyyy}-${mm}-${dd}`;
    if (t1 && !String(t1.value || '').trim()) t1.value = `${hh}:${mi}`;
  }

  /* ==============================
     Mini styles (generated report blocks)
  ============================== */
  function injectMiniStylesOnce() {
    if (document.getElementById('vip-mini-styles')) return;
    const style = document.createElement('style');
    style.id = 'vip-mini-styles';
    style.textContent = `
      #xl-free-report .h2{font-weight:800;color:#ffe084;font-size:1.05rem;margin:0 0 8px}
      #xl-free-report .sub{color:#98a7b7;font-size:.9rem}
      #xl-free-report .pillars{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:10px;margin-top:10px}
      #xl-free-report .pillar{border:1px solid #243244;background:#0e1520;border-radius:12px;padding:10px;text-align:center}
      #xl-free-report .pillar .tit{color:#98a7b7;font-size:.78rem}
      #xl-free-report .pillar .gz{font-weight:800;font-size:1.05rem;margin-top:4px;color:#ffe084}
      #xl-free-report .bar{height:8px;border-radius:999px;background:#0b0f14;border:1px solid #243244;overflow:hidden;margin-top:6px}
      #xl-free-report .bar i{display:block;height:100%;width:0;background:linear-gradient(90deg,#58b9ff,#d4af37)}
      #rich-report{line-height:1.8}
      #rich-report h4{margin:14px 0 8px;color:#ffe084}
      #rich-report p{margin:8px 0;color:#e8edf3}
      #rich-report .muted{color:#98a7b7}
    `;
    document.head.appendChild(style);
  }

  /* ==============================
     Error box
  ============================== */
  function ensureErrorBox() {
    let box = $('error');
    if (!box) {
      box = document.createElement('div');
      box.id = 'error';
      box.className = 'error';
      box.style.cssText = 'margin-top:10px;color:#ff8b8b;display:none';
      const firstCard = document.querySelector('main .card.section') || document.querySelector('main') || document.body;
      firstCard.appendChild(box);
    }
    return box;
  }
  function showErr(msg) {
    const e = ensureErrorBox();
    e.textContent = msg;
    e.style.display = 'block';
    clearTimeout(showErr._t);
    showErr._t = setTimeout(() => {
      e.style.display = 'none';
      e.textContent = '';
    }, 5200);
  }
  function hideErr() {
    const e = $('error');
    if (e) { e.style.display = 'none'; e.textContent = ''; }
  }

  /* ==============================
     Result Mount (guaranteed)
  ============================== */
  function ensureResultSection() {
    let root = $('result');
    if (root) return root;

    const firstCard = document.querySelector('main .card.section');
    root = document.createElement('section');
    root.id = 'result';
    root.className = 'card section';
    root.style.display = 'none';
    root.innerHTML = `
      <h2 data-i18n="res_title">${escapeHTML(t('res_title'))}</h2>
      <div id="butler-host"></div>
      <div id="rich-report" style="margin-top:12px"></div>
    `;
    if (firstCard && firstCard.parentElement) {
      firstCard.parentElement.insertBefore(root, firstCard.nextSibling);
    } else {
      (document.querySelector('main') || document.body).appendChild(root);
    }
    return root;
  }

  function clearResultArea() {
    const root = ensureResultSection();
    root.style.display = 'none';
    const butler = $('butler-host');
    const rich = $('rich-report');
    if (butler) butler.innerHTML = '';
    if (rich) rich.innerHTML = '';
  }

  function showResultArea() {
    const root = ensureResultSection();
    root.style.display = 'block';
    applyI18n();
  }

/* ==============================
   CULTURE NORMALIZATION
============================== */
function normalizeCulture(v){
  if(!v||v==='auto') return 'ä¸œæ–¹';
  if(['cn','bazi','east'].includes(v)) return 'ä¸œæ–¹';
  if(['west','western'].includes(v)) return 'è¥¿æ–¹';
  if(['jp','nine'].includes(v)) return 'æ—¥å¼';
  if(['vedic','jyotish'].includes(v)) return 'å é™€';
  return v;
}
function getCultureResolved(){
  return normalizeCulture($('culture')?.value||'ä¸œæ–¹');
}
function normalizeType(v){
  return (v==='compatibility'||v==='compat')?'compatibility':'personal';
}

/* ==============================
   ä¿®å¤ï¼šæ–‡åŒ–ç³»ç»Ÿé€‰æ‹©é¡¹æ˜ å°„
============================== */
const culturePurposeMap = {
  'ä¸œæ–¹': {
    personal: [
      'æ‹çˆ±ç¼˜åˆ†',
      'å©šå§»èµ°åŠ¿',
      'èŒåœºå‘å±•',
      'åˆ›ä¸šæ½œåŠ›',
      'è´¢ä½åˆ†æ',
      'ç†è´¢æ—¶æœº',
      'å©šæœŸæ‹©æ—¥',
      'æ–°ç”Ÿå®å®æ‹©æ—¥',
      'æ–°å®¶å…¥ä½æ‹©æ—¥',
      'æ–°å…¬å¸å…¥ä½æ‹©æ—¥',
      'å®å®å',
      'å® ç‰©å',
      'å…¬å¸å',
      'å‘½åæ”¹è¿',
      'ä½å®¶',
      'åŠå…¬å®¤'
    ],
    compatibility: [
      'æƒ…ä¾£åˆç›˜ï¼ˆç¼˜åˆ†èµ·è½ / æš§æ˜§è¿›å±•ï¼‰',
      'å¤«å¦»æµå¹´ï¼ˆå©šå§»å‘å±•ï¼‰',
      'ä¸ªæ€§åˆç›˜ï¼ˆå†²çª / äº’è¡¥ï¼‰',
      'äº‹ä¸šåˆç›˜ï¼ˆåˆä¼™äºº / å‘˜å·¥ï¼‰',
      'æ–­è”ä¿®å¤ï¼ˆæœ‹å‹ / æƒ…äºº / å®¶äººï¼‰',
      'å® ç‰©ç¼˜åˆ†ï¼ˆä¸»äººä¸å® ç‰©ï¼‰'
    ]
  },
  'è¥¿æ–¹': {
    personal: [
      'æ‹çˆ±ç¼˜åˆ†',
      'å©šå§»èµ°åŠ¿',
      'èŒåœºå‘å±•',
      'åˆ›ä¸šæ½œåŠ›',
      'è´¢ä½åˆ†æ',
      'ç†è´¢æ—¶æœº',
      'å©šæœŸæ‹©æ—¥',
      'æ–°ç”Ÿå®å®æ‹©æ—¥',
      'æ–°å®¶å…¥ä½æ‹©æ—¥',
      'æ–°å…¬å¸å…¥ä½æ‹©æ—¥',
      'å®å®å',
      'å® ç‰©å',
      'å…¬å¸å',
      'å‘½åæ”¹è¿',
      'ä½å®¶',
      'åŠå…¬å®¤'
    ],
    compatibility: [
      'æƒ…ä¾£åˆç›˜ï¼ˆç¼˜åˆ†èµ·è½ / æš§æ˜§è¿›å±•ï¼‰',
      'å¤«å¦»æµå¹´ï¼ˆå©šå§»å‘å±•ï¼‰',
      'ä¸ªæ€§åˆç›˜ï¼ˆå†²çª / äº’è¡¥ï¼‰',
      'äº‹ä¸šåˆç›˜ï¼ˆåˆä¼™äºº / å‘˜å·¥ï¼‰',
      'æ–­è”ä¿®å¤ï¼ˆæœ‹å‹ / æƒ…äºº / å®¶äººï¼‰',
      'å® ç‰©ç¼˜åˆ†ï¼ˆä¸»äººä¸å® ç‰©ï¼‰'
    ]
  },
  'æ—¥å¼': {
    personal: [
      'æ‹çˆ±ç¼˜åˆ†',
      'å©šå§»èµ°åŠ¿',
      'èŒåœºå‘å±•',
      'åˆ›ä¸šæ½œåŠ›',
      'è´¢ä½åˆ†æ',
      'ç†è´¢æ—¶æœº',
      'å©šæœŸæ‹©æ—¥',
      'æ–°ç”Ÿå®å®æ‹©æ—¥',
      'æ–°å®¶å…¥ä½æ‹©æ—¥',
      'æ–°å…¬å¸å…¥ä½æ‹©æ—¥',
      'å®å®å',
      'å® ç‰©å',
      'å…¬å¸å',
      'å‘½åæ”¹è¿',
      'ä½å®¶',
      'åŠå…¬å®¤'
    ],
    compatibility: [
      'æƒ…ä¾£åˆç›˜ï¼ˆç¼˜åˆ†èµ·è½ / æš§æ˜§è¿›å±•ï¼‰',
      'å¤«å¦»æµå¹´ï¼ˆå©šå§»å‘å±•ï¼‰',
      'ä¸ªæ€§åˆç›˜ï¼ˆå†²çª / äº’è¡¥ï¼‰',
      'äº‹ä¸šåˆç›˜ï¼ˆåˆä¼™äºº / å‘˜å·¥ï¼‰',
      'æ–­è”ä¿®å¤ï¼ˆæœ‹å‹ / æƒ…äºº / å®¶äººï¼‰',
      'å® ç‰©ç¼˜åˆ†ï¼ˆä¸»äººä¸å® ç‰©ï¼‰'
    ]
  },
  'å é™€': {
    personal: [
      'æ‹çˆ±ç¼˜åˆ†',
      'å©šå§»èµ°åŠ¿',
      'èŒåœºå‘å±•',
      'åˆ›ä¸šæ½œåŠ›',
      'è´¢ä½åˆ†æ',
      'ç†è´¢æ—¶æœº',
      'å©šæœŸæ‹©æ—¥',
      'æ–°ç”Ÿå®å®æ‹©æ—¥',
      'æ–°å®¶å…¥ä½æ‹©æ—¥',
      'æ–°å…¬å¸å…¥ä½æ‹©æ—¥',
      'å®å®å',
      'å® ç‰©å',
      'å…¬å¸å',
      'å‘½åæ”¹è¿',
      'ä½å®¶',
      'åŠå…¬å®¤'
    ],
    compatibility: [
      'æƒ…ä¾£åˆç›˜ï¼ˆç¼˜åˆ†èµ·è½ / æš§æ˜§è¿›å±•ï¼‰',
      'å¤«å¦»æµå¹´ï¼ˆå©šå§»å‘å±•ï¼‰',
      'ä¸ªæ€§åˆç›˜ï¼ˆå†²çª / äº’è¡¥ï¼‰',
      'äº‹ä¸šåˆç›˜ï¼ˆåˆä¼™äºº / å‘˜å·¥ï¼‰',
      'æ–­è”ä¿®å¤ï¼ˆæœ‹å‹ / æƒ…äºº / å®¶äººï¼‰',
      'å® ç‰©ç¼˜åˆ†ï¼ˆä¸»äººä¸å® ç‰©ï¼‰'
    ]
  }
};

/* ==============================
   ä¿®å¤ï¼šæ·»åŠ ç¼ºå¤±çš„å‡½æ•°
============================== */
function updatePurposeOptionsBasedOnCulture(cultureResolved) {
  const type = normalizeType($('type')?.value || 'personal');
  const config = culturePurposeMap[cultureResolved] || culturePurposeMap['ä¸œæ–¹'];
  
  if (type === 'personal') {
    updatePersonalPurposeOptions(config.personal);
  } else {
    updateCompatibilityPurposeOptions(config.compatibility);
  }
}

/* ==============================
   CULTURE CONFIGURATION
============================== */
const cultureConfig = {
  'ä¸œæ–¹': {
    calculate: ({year,month,day,hour,minute,timeUnknown,country}) =>
      baziCalculator.calculateBaziAccurate(year,month,day,hour,minute,timeUnknown,country),
    render: (data, info) => renderBaziReport(data, info),
    analysis: (data, focus, info) => generateAIReport(data, focus, info, 'ä¸œæ–¹')
  },
  'è¥¿æ–¹': {
    calculate: ({year,month,day,hour,timeUnknown}) => {
      const zodiacSigns = ['æ‘©ç¾¯åº§','æ°´ç“¶åº§','åŒé±¼åº§','ç™½ç¾Šåº§','é‡‘ç‰›åº§','åŒå­åº§','å·¨èŸ¹åº§','ç‹®å­åº§','å¤„å¥³åº§','å¤©ç§¤åº§','å¤©èåº§','å°„æ‰‹åº§'];
      const signIndex = (month - 1) % 12;
      return {
        zodiac: zodiacSigns[signIndex],
        rising: timeUnknown ? 'æœªçŸ¥' : ['ç™½ç¾Šåº§','é‡‘ç‰›åº§','åŒå­åº§','å·¨èŸ¹åº§','ç‹®å­åº§','å¤„å¥³åº§','å¤©ç§¤åº§','å¤©èåº§','å°„æ‰‹åº§','æ‘©ç¾¯åº§','æ°´ç“¶åº§','åŒé±¼åº§'][hour % 12],
        moon: ['å·¨èŸ¹åº§','ç‹®å­åº§','å¤„å¥³åº§','å¤©ç§¤åº§','å¤©èåº§','å°„æ‰‹åº§','æ‘©ç¾¯åº§','æ°´ç“¶åº§','åŒé±¼åº§','ç™½ç¾Šåº§','é‡‘ç‰›åº§','åŒå­åº§'][day % 12]
      };
    },
    render: (data) => renderSimpleCard('è¥¿æ´‹å æ˜Ÿç®€æŠ¥', [
      `å¤ªé˜³æ˜Ÿåº§ï¼š${safe(data.zodiac)}`,
      `ä¸Šå‡æ˜Ÿåº§ï¼š${safe(data.rising)}`,
      `æœˆäº®æ˜Ÿåº§ï¼š${safe(data.moon)}`
    ]),
    analysis: (data, focus, info) => generateAIReport(data, focus, info, 'è¥¿æ–¹')
  },
  'æ—¥å¼': {
    calculate: ({year,month,day}) => {
      const numbers = ['ä¸€ç™½æ°´æ˜Ÿ','äºŒé»’åœŸæ˜Ÿ','ä¸‰ç¢§æœ¨æ˜Ÿ','å››ç·‘æœ¨æ˜Ÿ','äº”é»„åœŸæ˜Ÿ','å…­ç™½é‡‘æ˜Ÿ','ä¸ƒèµ¤é‡‘æ˜Ÿ','å…«ç™½åœŸæ˜Ÿ','ä¹ç´«ç«æ˜Ÿ'];
      const starIndex = (year + month + day) % 9;
      return {
        number: numbers[starIndex],
        element: ['æ°´','åœŸ','æœ¨','æœ¨','åœŸ','é‡‘','é‡‘','åœŸ','ç«'][starIndex],
        direction: ['åŒ—','è¥¿å—','æ±','æ±å—','ä¸­å¤®','è¥¿åŒ—','è¥¿','æ±åŒ—','å—'][starIndex],
        luck: ['å‰','å‡¶','å‰','å‰','å‡¶','å‰','å‰','å‰','å‰'][starIndex]
      };
    },
    render: (data) => renderSimpleCard('ä¹æ˜Ÿæ°”å­¦ç®€æŠ¥', [
      `æœ¬å‘½æ˜Ÿï¼š${safe(data.number)}`,
      `äº”è¡Œï¼š${safe(data.element)}`,
      `æ–¹ä½ï¼š${safe(data.direction)}`,
      `è¿åŠ¿ï¼š${safe(data.luck)}`
    ]),
    analysis: (data, focus, info) => generateAIReport(data, focus, info, 'æ—¥å¼')
  },
  'å é™€': {
    calculate: ({year,month,day}) => {
      const rashis = ['Mesha','Vrishabha','Mithuna','Karka','Simha','Kanya','Tula','Vrishchika','Dhanu','Makara','Kumbha','Meena'];
      const rashiIndex = (month - 1) % 12;
      return {
        rashi: rashis[rashiIndex],
        nakshatra: ['Ashwini','Bharani','Krittika','Rohini','Mrigashira','Ardra','Punarvasu','Pushya','Ashlesha','Magha','Purva Phalguni','Uttara Phalguni'][day % 12]
      };
    },
    render: (data) => renderSimpleCard('å é™€å æ˜Ÿç®€æŠ¥', [
      `Rashiï¼š${safe(data.rashi)}`,
      `Nakshatraï¼š${safe(data.nakshatra)}`
    ]),
    analysis: (data, focus, info) => generateAIReport(data, focus, info, 'å é™€')
  }
};

/* ==============================
   å¢å¼ºç‰ˆ AI æŠ¥å‘Šç”Ÿæˆå‡½æ•°
============================== */
async function generateAIReport(data, focus, info, culture) {
  const type = normalizeType($('type')?.value || 'personal');
  const me = readBirthInputs('1');
  const cultureName = culture === 'ä¸œæ–¹' ? 'å…«å­—å‘½ç†' : 
                     culture === 'è¥¿æ–¹' ? 'è¥¿æ´‹å æ˜Ÿ' : 
                     culture === 'æ—¥å¼' ? 'ä¹æ˜Ÿæ°”å­¦' : 'å é™€å æ˜Ÿ';
  
  try {
    // ç”Ÿæˆé’ˆå¯¹æ€§æŠ¥å‘Š
    const reportContent = generateDetailedReport(focus, cultureName, data, me, type);
    return reportContent;
  } catch (error) {
    return generateFallbackReport(focus, data, cultureName);
  }
}

/* ==============================
   ç”Ÿæˆè¯¦ç»†æŠ¥å‘Šå†…å®¹
============================== */
function generateDetailedReport(focus, cultureName, data, me, type) {
  const now = new Date();
  const currentYear = now.getFullYear();
  const currentMonth = now.getMonth() + 1;
  const nextYear = currentYear + 1;
  
  let specificAnalysis = '';
  let titleEmoji = 'ğŸ”®';
  let specificTitle = '';
  let isCompatibility = type === 'compatibility';
  
  // å¦‚æœé€‰æ‹©åˆç›˜ä¸”æ²¡è¾“å…¥ç¬¬äºŒäººï¼Œæ˜¾ç¤ºæç¤º
  if (isCompatibility && !readBirthInputs('2').name) {
    return `
      <div class="ai-report">
        <h4>ğŸ” åˆç›˜åˆ†ææç¤º</h4>
        <div class="ai-section">
          <h5>ğŸ“ éœ€è¦ç¬¬äºŒäººä¿¡æ¯</h5>
          <p>è¦è¿›è¡Œ"${focus}"çš„åˆç›˜åˆ†æï¼Œè¯·å¡«å†™ç¬¬äºŒäººçš„å‡ºç”Ÿä¿¡æ¯ã€‚</p>
          <p>è¯·åœ¨"ç¬¬äºŒäººèµ„æ–™"éƒ¨åˆ†å¡«å†™å®Œæ•´ä¿¡æ¯ï¼Œç„¶åé‡æ–°ç”ŸæˆæŠ¥å‘Šã€‚</p>
        </div>
      </div>
    `;
  }
  
  // æ ¹æ®å…·ä½“focusç”Ÿæˆé’ˆå¯¹æ€§å†…å®¹
  switch(focus) {
    // å§»ç¼˜ç›¸å…³
    case 'æ‹çˆ±ç¼˜åˆ†':
      titleEmoji = 'ğŸ’–';
      specificTitle = 'æ‹çˆ±ç¼˜åˆ†æ·±åº¦åˆ†æ';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ’˜ æ¡ƒèŠ±è¿åŠ¿åˆ†æ</h5>
          <p>åŸºäºæ‚¨çš„${cultureName}ï¼Œæ‚¨åœ¨æ„Ÿæƒ…æ–¹é¢å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
          <ul>
            <li><strong>æ¡ƒèŠ±ç±»å‹ï¼š</strong>æ­£æ¡ƒèŠ±ä¸ºä¸»ï¼Œé€‚åˆé•¿æœŸç¨³å®šå…³ç³»</li>
            <li><strong>æœ€ä½³ç›¸é‡æ—¶é—´ï¼š</strong>${currentYear}å¹´ç§‹å†¬å­£æ˜¯æ„Ÿæƒ…æœºé‡æœŸ</li>
            <li><strong>ç†æƒ³ä¼´ä¾£ç‰¹å¾ï¼š</strong>æ€§æ ¼æ¸©å’Œã€æœ‰è´£ä»»æ„Ÿã€äº”è¡Œäº’è¡¥çš„äººå£«</li>
            <li><strong>æ³¨æ„äº‹é¡¹ï¼š</strong>é¿å…æ€¥äºæ±‚æˆï¼Œè®©æ„Ÿæƒ…è‡ªç„¶å‘å±•</li>
          </ul>
        </div>
      `;
      break;
      
    case 'å©šå§»èµ°åŠ¿':
      titleEmoji = 'ğŸ’';
      specificTitle = 'å©šå§»èµ°åŠ¿æ·±åº¦åˆ†æ';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ¡ å©šå§»ç¨³å®šæ€§åˆ†æ</h5>
          <p>ä»${cultureName}çœ‹æ‚¨çš„å©šå§»å‘å±•è¶‹åŠ¿ï¼š</p>
          <ul>
            <li><strong>å©šå§»ç‰¹ç‚¹ï¼š</strong>æ™šå©šè¾ƒå‰ï¼Œå©šå§»ç¨³å®šæ€§è¾ƒé«˜</li>
            <li><strong>é…å¶ç‰¹å¾ï¼š</strong>æ€§æ ¼äº’è¡¥ï¼Œèƒ½åœ¨äº‹ä¸šä¸Šç›¸äº’æ”¯æŒ</li>
            <li><strong>å©šæœŸå»ºè®®ï¼š</strong>${nextYear}å¹´æœ‰è¾ƒå¥½çš„å©šç¼˜æ—¶æœº</li>
            <li><strong>ç›¸å¤„å»ºè®®ï¼š</strong>å¤šæ²Ÿé€šï¼Œé¿å…å› å·¥ä½œç¹å¿™å¿½ç•¥æ„Ÿæƒ…ç»´æŠ¤</li>
          </ul>
        </div>
      `;
      break;
      
    // äº‹ä¸šç›¸å…³
    case 'èŒåœºå‘å±•':
      titleEmoji = 'ğŸ’¼';
      specificTitle = 'èŒåœºå‘å±•æ·±åº¦åˆ†æ';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ“ˆ èŒä¸šå‘å±•è·¯å¾„</h5>
          <p>åŸºäºæ‚¨çš„å‘½ç†ç‰¹ç‚¹ï¼ŒèŒåœºå‘å±•å»ºè®®ï¼š</p>
          <ul>
            <li><strong>é€‚åˆé¢†åŸŸï¼š</strong>ç®¡ç†ã€ç­–åˆ’ã€æ•™è‚²æˆ–åˆ›æ„è¡Œä¸š</li>
            <li><strong>æ™‹å‡æ—¶æœºï¼š</strong>${currentYear}å¹´åº•è‡³${nextYear}å¹´åˆæ˜¯å…³é”®æœŸ</li>
            <li><strong>è´µäººæ–¹ä½ï¼š</strong>ä¸œæ–¹å’Œä¸œå—æ–¹çš„åŒäº‹æˆ–ä¸Šå¸å¯¹æ‚¨å¸®åŠ©è¾ƒå¤§</li>
            <li><strong>å‘å±•å»ºè®®ï¼š</strong>åŠ å¼ºä¸“ä¸šæŠ€èƒ½ï¼Œé€‚å½“å±•ç°é¢†å¯¼èƒ½åŠ›</li>
          </ul>
        </div>
      `;
      break;
      
    case 'åˆ›ä¸šæ½œåŠ›':
      titleEmoji = 'ğŸš€';
      specificTitle = 'åˆ›ä¸šæ½œåŠ›æ·±åº¦åˆ†æ';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ’° åˆ›ä¸šæœºé‡è¯„ä¼°</h5>
          <p>æ‚¨çš„åˆ›ä¸šæ½œåŠ›åˆ†æå¦‚ä¸‹ï¼š</p>
          <ul>
            <li><strong>åˆ›ä¸šä¼˜åŠ¿ï¼š</strong>å†³ç­–æœæ–­ï¼Œå¸‚åœºæ•æ„Ÿåº¦è¾ƒé«˜</li>
            <li><strong>æœ€ä½³æ—¶æœºï¼š</strong>${nextYear}å¹´æ˜¥å­£æ˜¯è¾ƒå¥½çš„åˆ›ä¸šèµ·ç‚¹</li>
            <li><strong>é€‚åˆè¡Œä¸šï¼š</strong>æ–‡åŒ–åˆ›æ„ã€æ•™è‚²åŸ¹è®­ã€å¥åº·å…»ç”Ÿé¢†åŸŸ</li>
            <li><strong>é£é™©æç¤ºï¼š</strong>æ³¨æ„èµ„é‡‘æµç®¡ç†ï¼Œé¿å…è¿‡åº¦æ‰©å¼ </li>
          </ul>
        </div>
      `;
      break;
      
    // è´¢è¿ç›¸å…³
    case 'è´¢ä½åˆ†æ':
      titleEmoji = 'ğŸ’°';
      specificTitle = 'è´¢ä½åˆ†ææ·±åº¦æŠ¥å‘Š';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ“ è´¢å¯Œæ–¹ä½æŒ‡å—</h5>
          <p>æ ¹æ®æ‚¨çš„è´¢æ˜Ÿå®šä½ï¼š</p>
          <ul>
            <li><strong>æ­£è´¢æ–¹ä½ï¼š</strong>ä¸œå—æ–¹ï¼Œé€‚åˆå›ºå®šæ”¶å…¥æ¥æº</li>
            <li><strong>åè´¢æ–¹ä½ï¼š</strong>è¥¿åŒ—æ–¹ï¼Œé€‚åˆæŠ•èµ„ç†è´¢æœºä¼š</li>
            <li><strong>è´¢åº“ä½ç½®ï¼š</strong>å®¶ä¸­æˆ–åŠå…¬å®¤çš„ä¸œåŒ—è§’</li>
            <li><strong>å‚¬è´¢æ–¹æ³•ï¼š</strong>åœ¨è´¢ä½æ”¾ç½®ç»¿æ¤æˆ–æµåŠ¨æ°´æ™¯</li>
          </ul>
        </div>
      `;
      break;
      
    case 'ç†è´¢æ—¶æœº':
      titleEmoji = 'ğŸ“Š';
      specificTitle = 'ç†è´¢æ—¶æœºæ·±åº¦åˆ†æ';
      specificAnalysis = `
        <div class="ai-section">
          <h5>â° æŠ•èµ„æ—¶æœºå»ºè®®</h5>
          <p>åŸºäºæ‚¨çš„è´¢è¿ç®—å‘½ï¼š</p>
          <ul>
            <li><strong>çŸ­æœŸæŠ•èµ„ï¼š</strong>${currentMonth}æœˆ-${(currentMonth + 3) % 12 || 12}æœˆé€‚åˆçŸ­æœŸç†è´¢</li>
            <li><strong>é•¿æœŸæŠ•èµ„ï¼š</strong>${nextYear}å¹´å¼€å§‹å¸ƒå±€ä¸­é•¿æœŸèµ„äº§</li>
            <li><strong>é£é™©æ§åˆ¶ï¼š</strong>é¿å…åœ¨å†œå†ä¸‰æœˆå’Œä¹æœˆè¿›è¡Œå¤§é¢æŠ•èµ„</li>
            <li><strong>ç†è´¢å»ºè®®ï¼š</strong>åˆ†æ•£æŠ•èµ„ï¼Œæˆ¿åœ°äº§å’Œç¨³å¥å‹åŸºé‡‘æ¯”ä¾‹é€‚å½“</li>
          </ul>
        </div>
      `;
      break;
      
    // æ‹©æ—¥ç›¸å…³
    case 'å©šæœŸæ‹©æ—¥':
      titleEmoji = 'ğŸ“…';
      specificTitle = 'å©šæœŸæ‹©æ—¥ä¸“ä¸šå»ºè®®';
      specificAnalysis = `
        <div class="ai-section">
          <h5>â¤ï¸ å‰æ—¥é€‰æ‹©æŒ‡å—</h5>
          <p>æ ¹æ®æ‚¨å’Œä¼´ä¾£çš„å…«å­—åˆå©šï¼š</p>
          <ul>
            <li><strong>æœ€ä½³å¹´ä»½ï¼š</strong>${currentYear}å¹´æˆ–${currentYear + 2}å¹´</li>
            <li><strong>å‰åˆ©æœˆä»½ï¼š</strong>å†œå†äºŒæœˆã€äº”æœˆã€å…«æœˆã€åä¸€æœˆ</li>
            <li><strong>é€‚å®œæ—¥æœŸï¼š</strong>å¸¦æœ‰6ã€8ã€9çš„æ—¥å­è¾ƒä¸ºå‰ç¥¥</li>
            <li><strong>é¿è®³æ—¥æœŸï¼š</strong>é¿å…åœ¨åŒæ–¹ç”Ÿè‚–ç›¸å†²çš„æ—¥å­</li>
          </ul>
        </div>
      `;
      break;
      
    case 'æ–°ç”Ÿå®å®æ‹©æ—¥':
      titleEmoji = 'ğŸ‘¶';
      specificTitle = 'æ–°ç”Ÿå®å®æ‹©æ—¥æŒ‡å—';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸŒŸ å®å®å‡ºç”Ÿå‰æ—¥</h5>
          <p>ä¸ºå®å®é€‰æ‹©è‰¯è¾°å‰æ—¥ï¼š</p>
          <ul>
            <li><strong>æœ€ä½³æœˆä»½ï¼š</strong>å†œå†æ­£æœˆã€å››æœˆã€ä¸ƒæœˆã€åæœˆ</li>
            <li><strong>å‰åˆ©æ—¶è¾°ï¼š</strong>è¾°æ—¶ï¼ˆ7-9ç‚¹ï¼‰ã€åˆæ—¶ï¼ˆ11-13ç‚¹ï¼‰ã€ç”³æ—¶ï¼ˆ15-17ç‚¹ï¼‰</li>
            <li><strong>äº”è¡Œå¹³è¡¡ï¼š</strong>é€‰æ‹©ä¸çˆ¶æ¯äº”è¡Œç›¸ç”Ÿçš„æ—¥å­</li>
            <li><strong>é¿è®³ï¼š</strong>é¿å…ä¸çˆ¶æ¯ç”Ÿè‚–ç›¸å†²çš„æ—¥å­</li>
          </ul>
        </div>
      `;
      break;
      
    case 'æ–°å®¶å…¥ä½æ‹©æ—¥':
      titleEmoji = 'ğŸ ';
      specificTitle = 'æ–°å®¶å…¥ä½æ‹©æ—¥å»ºè®®';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ”‘ å…¥å®…å‰æ—¥é€‰æ‹©</h5>
          <p>æ–°å®¶å…¥ä½æ‹©æ—¥æŒ‡å—ï¼š</p>
          <ul>
            <li><strong>æœ€ä½³æœˆä»½ï¼š</strong>å†œå†ä¸‰æœˆã€å…­æœˆã€ä¹æœˆã€åäºŒæœˆ</li>
            <li><strong>å‰åˆ©æ—¥æœŸï¼š</strong>é»„é“å‰æ—¥ï¼Œé¿å¼€é»‘é“æ—¥</li>
            <li><strong>é€‚å®œæ—¶è¾°ï¼š</strong>ä¸Šåˆ9-11ç‚¹é˜³æ°”æœ€æ—ºçš„æ—¶é—´</li>
            <li><strong>å…¥å®…ä»ªå¼ï¼š</strong>å…ˆæ¬å…¥å¨æˆ¿ç”¨å…·ï¼Œè±¡å¾è¡£é£Ÿæ— å¿§</li>
          </ul>
        </div>
      `;
      break;
      
    case 'æ–°å…¬å¸å…¥ä½æ‹©æ—¥':
      titleEmoji = 'ğŸ¢';
      specificTitle = 'æ–°å…¬å¸å¼€ä¸šæ‹©æ—¥';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ’¼ å¼€ä¸šå¤§å‰æŒ‡å—</h5>
          <p>å…¬å¸å¼€ä¸šæ‹©æ—¥å»ºè®®ï¼š</p>
          <ul>
            <li><strong>æœ€ä½³æœˆä»½ï¼š</strong>å†œå†æ­£æœˆã€äº”æœˆã€å…«æœˆ</li>
            <li><strong>å‰åˆ©æ—¥æœŸï¼š</strong>é€‰æ‹©ä¸è¡Œä¸šäº”è¡Œç›¸ç”Ÿçš„æ—¥å­</li>
            <li><strong>å¼€ä¸šæ—¶è¾°ï¼š</strong>ä¸Šåˆ9ç‚¹ã€11ç‚¹ã€ä¸‹åˆ1ç‚¹</li>
            <li><strong>æ‹›è´¢å¸ƒå±€ï¼š</strong>é—¨å£æ”¾ç½®æ‹›è´¢æ¤ç‰©ï¼Œå‰å°è®¾ç½®æµæ°´æ‘†ä»¶</li>
          </ul>
        </div>
      `;
      break;
      
    // æµ‹åç›¸å…³
    case 'å®å®å':
      titleEmoji = 'ğŸ‘¶';
      specificTitle = 'å®å®å‘½ååˆ†æ';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ“ å‘½ååŸåˆ™æŒ‡å—</h5>
          <p>ä¸ºå®å®å–åçš„å…³é”®åŸåˆ™ï¼š</p>
          <ul>
            <li><strong>äº”è¡Œå¹³è¡¡ï¼š</strong>è¡¥å……å‘½ç†ä¸­è¾ƒå¼±çš„äº”è¡Œå…ƒç´ </li>
            <li><strong>éŸ³éŸµå’Œè°ï¼š</strong>åå­—è¯»éŸ³æµç•…ï¼Œé¿å…æ‹—å£</li>
            <li><strong>å­—ä¹‰å‰ç¥¥ï¼š</strong>é€‰æ‹©å¯“æ„ç¾å¥½ã€ç§¯æå‘ä¸Šçš„å­—</li>
            <li><strong>ç¬”ç”»å‰åˆ©ï¼š</strong>æ€»ç¬”ç”»æ•°åœ¨å‰ç¥¥èŒƒå›´å†…</li>
          </ul>
        </div>
      `;
      break;
      
    case 'å® ç‰©å':
      titleEmoji = 'ğŸ¶';
      specificTitle = 'å® ç‰©å‘½åå»ºè®®';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ¾ å® ç‰©å‘½ååŸåˆ™</h5>
          <p>ä¸ºå® ç‰©å–åçš„å»ºè®®ï¼š</p>
          <ul>
            <li><strong>ç®€çŸ­æ˜“è®°ï¼š</strong>2-3ä¸ªå­—çš„åå­—æœ€ä½³</li>
            <li><strong>éŸ³è°ƒå“äº®ï¼š</strong>å® ç‰©å®¹æ˜“è¾¨è¯†çš„å‘éŸ³</li>
            <li><strong>ä¸ªæ€§ç‰¹å¾ï¼š</strong>æ ¹æ®å® ç‰©å¤–è²Œæˆ–æ€§æ ¼å–å</li>
            <li><strong>å‰ç¥¥å¯“æ„ï¼š</strong>é€‰æ‹©å¯“æ„å¥åº·ã€å¿«ä¹çš„åç§°</li>
          </ul>
        </div>
      `;
      break;
      
    case 'å…¬å¸å':
      titleEmoji = 'ğŸ¢';
      specificTitle = 'å…¬å¸å‘½ååˆ†æ';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ’¼ å…¬å¸å‘½åæŒ‡å—</h5>
          <p>å…¬å¸å‘½åçš„å…³é”®è¦ç´ ï¼š</p>
          <ul>
            <li><strong>è¡Œä¸šå±æ€§ï¼š</strong>ä½“ç°å…¬å¸ä¸»è¥ä¸šåŠ¡</li>
            <li><strong>å“ç‰Œå®šä½ï¼š</strong>ç¬¦åˆç›®æ ‡å®¢æˆ·ç¾¤ä½“çš„è®¤çŸ¥</li>
            <li><strong>æ˜“äºä¼ æ’­ï¼š</strong>ç®€æ´æ˜“è®°ï¼Œä¾¿äºå£ç¢‘ä¼ æ’­</li>
            <li><strong>æ³•å¾‹åˆè§„ï¼š</strong>ç¡®ä¿åç§°å¯ä»¥æ³¨å†Œ</li>
          </ul>
        </div>
      `;
      break;
      
    case 'å‘½åæ”¹è¿':
      titleEmoji = 'âœ¨';
      specificTitle = 'æ”¹åæ”¹è¿åˆ†æ';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ”® æ”¹åæ”¹è¿æŒ‡å—</h5>
          <p>é€šè¿‡æ”¹åè°ƒæ•´è¿åŠ¿ï¼š</p>
          <ul>
            <li><strong>é—®é¢˜åˆ†æï¼š</strong>åˆ†æç°æœ‰åå­—çš„ä¸è¶³ä¹‹å¤„</li>
            <li><strong>è°ƒæ•´æ–¹å‘ï¼š</strong>æ ¹æ®å‘½ç†ç‰¹ç‚¹ç¡®å®šæ”¹åç­–ç•¥</li>
            <li><strong>æ–°åå»ºè®®ï¼š</strong>æä¾›3-5ä¸ªå¤‡é€‰æ–¹æ¡ˆ</li>
            <li><strong>æ”¹åæ—¶æœºï¼š</strong>é€‰æ‹©å‰æ—¥è¿›è¡Œæ”¹åä»ªå¼</li>
          </ul>
        </div>
      `;
      break;
      
    // é£æ°´ç›¸å…³
    case 'ä½å®¶':
      titleEmoji = 'ğŸ ';
      specificTitle = 'ä½å®¶é£æ°´åˆ†æ';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸŒ¿ å®¶å±…é£æ°´å¸ƒå±€</h5>
          <p>ä½å®¶é£æ°´çš„å…³é”®è¦ç‚¹ï¼š</p>
          <ul>
            <li><strong>å¤§é—¨æ–¹ä½ï¼š</strong>ä¿æŒå¹²å‡€æ•´æ´ï¼Œé¿å…æ­£å¯¹ç”µæ¢¯</li>
            <li><strong>å®¢å…å¸ƒå±€ï¼š</strong>æ²™å‘é å®å¢™ï¼Œå½¢æˆèšæ°”æ ¼å±€</li>
            <li><strong>å§å®¤é£æ°´ï¼š</strong>åºŠä¸å¯¹é—¨ï¼ŒåºŠå¤´é å®å¢™</li>
            <li><strong>å¨æˆ¿ä½ç½®ï¼š</strong>é¿å…æ­£å¯¹å«ç”Ÿé—´</li>
          </ul>
        </div>
      `;
      break;
      
    case 'åŠå…¬å®¤':
      titleEmoji = 'ğŸ’¼';
      specificTitle = 'åŠå…¬å®¤é£æ°´åˆ†æ';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ“Š åŠå…¬é£æ°´å¸ƒå±€</h5>
          <p>åŠå…¬å®¤é£æ°´çš„å…³é”®è¦ç´ ï¼š</p>
          <ul>
            <li><strong>åº§ä½æ–¹ä½ï¼š</strong>èƒŒåæœ‰é ï¼Œå‰æ–¹å¼€é˜”</li>
            <li><strong>åŠå…¬æ¡Œå¸ƒå±€ï¼š</strong>å·¦é«˜å³ä½ï¼Œå·¦åŠ¨å³é™</li>
            <li><strong>è´¢ä½å¸ƒç½®ï¼š</strong>åœ¨è´¢ä½æ”¾ç½®æ‹›è´¢ç‰©å“</li>
            <li><strong>é¿å…ç…æ°”ï¼š</strong>é¿å¼€æ¨ªæ¢å‹é¡¶ã€å°–è§’å†²å°„</li>
          </ul>
        </div>
      `;
      break;
      
    // åˆç›˜ç›¸å…³
    case 'æƒ…ä¾£åˆç›˜ï¼ˆç¼˜åˆ†èµ·è½ / æš§æ˜§è¿›å±•ï¼‰':
      titleEmoji = 'ğŸ’‘';
      specificTitle = 'æƒ…ä¾£åˆç›˜æ·±åº¦åˆ†æ';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ’ ç¼˜åˆ†æ·±æµ…åˆ†æ</h5>
          <p>åŒæ–¹${cultureName}åˆç›˜ç»“æœæ˜¾ç¤ºï¼š</p>
          <ul>
            <li><strong>ç¼˜åˆ†æŒ‡æ•°ï¼š</strong>85%ï¼ˆå±äºæ·±ç¼˜ï¼‰</li>
            <li><strong>å…³ç³»èŠ‚å¥ï¼š</strong>é€‚åˆå¾ªåºæ¸è¿›ï¼Œé¿å…æ€¥äºæ¨è¿›</li>
            <li><strong>ç”œèœœæœŸï¼š</strong>æœªæ¥3-6ä¸ªæœˆæ˜¯å…³ç³»å‡æ¸©æœŸ</li>
            <li><strong>æ²Ÿé€šå»ºè®®ï¼š</strong>å¤šä½¿ç”¨æ¸©å’Œçš„è¡¨è¾¾æ–¹å¼ï¼Œå‡å°‘ç›´æ¥å†²çª</li>
          </ul>
        </div>
      `;
      break;
      
    case 'å¤«å¦»æµå¹´ï¼ˆå©šå§»å‘å±•ï¼‰':
      titleEmoji = 'ğŸ‘«';
      specificTitle = 'å¤«å¦»æµå¹´åˆç›˜åˆ†æ';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ’‘ å©šå§»å‘å±•è¶‹åŠ¿</h5>
          <p>å¤«å¦»${cultureName}åˆç›˜åˆ†æï¼š</p>
          <ul>
            <li><strong>å’Œè°æŒ‡æ•°ï¼š</strong>78%ï¼ˆå±äºå’Œè°å©šå§»ï¼‰</li>
            <li><strong>å…³é”®å¹´ä»½ï¼š</strong>${nextYear}å¹´æ˜¯å©šå§»å‘å±•é‡è¦èŠ‚ç‚¹</li>
            <li><strong>å…±åŒå‘å±•ï¼š</strong>åœ¨äº‹ä¸šå’Œå®¶åº­è§„åˆ’ä¸Šèƒ½å¤Ÿç›¸äº’æ”¯æŒ</li>
            <li><strong>æ³¨æ„äº‹é¡¹ï¼š</strong>æ³¨æ„${currentYear}å¹´åº•çš„æ²Ÿé€šé—®é¢˜</li>
          </ul>
        </div>
      `;
      break;
      
    case 'ä¸ªæ€§åˆç›˜ï¼ˆå†²çª / äº’è¡¥ï¼‰':
      titleEmoji = 'ğŸ¤';
      specificTitle = 'ä¸ªæ€§åˆç›˜åˆ†æ';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ§© æ€§æ ¼åŒ¹é…åˆ†æ</h5>
          <p>åŒæ–¹æ€§æ ¼åˆç›˜ç»“æœï¼š</p>
          <ul>
            <li><strong>åŒ¹é…åº¦ï¼š</strong>82%ï¼ˆé«˜åº¦åŒ¹é…ï¼‰</li>
            <li><strong>äº’è¡¥é¢†åŸŸï¼š</strong>å†³ç­–æ–¹å¼ã€é£é™©åå¥½ã€ç¤¾äº¤é£æ ¼</li>
            <li><strong>æ½œåœ¨å†²çªï¼š</strong>æ¶ˆè´¹è§‚å¿µã€ç”Ÿæ´»èŠ‚å¥å·®å¼‚</li>
            <li><strong>è°ƒå’Œå»ºè®®ï¼š</strong>å»ºç«‹å®šæœŸæ²Ÿé€šæœºåˆ¶ï¼Œå°Šé‡å½¼æ­¤å·®å¼‚</li>
          </ul>
        </div>
      `;
      break;
      
    case 'äº‹ä¸šåˆç›˜ï¼ˆåˆä¼™äºº / å‘˜å·¥ï¼‰':
      titleEmoji = 'ğŸ¤';
      specificTitle = 'äº‹ä¸šåˆç›˜åˆ†æ';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ’¼ äº‹ä¸šåˆä½œè¯„ä¼°</h5>
          <p>äº‹ä¸š${cultureName}åˆç›˜åˆ†æï¼š</p>
          <ul>
            <li><strong>åˆä½œè¿åŠ¿ï¼š</strong>76%ï¼ˆé€‚åˆåˆä½œï¼‰</li>
            <li><strong>æœ€ä½³åˆ†å·¥ï¼š</strong>ä¸€äººä¸»å¤–å¼€æ‹“ï¼Œä¸€äººä¸»å†…ç®¡ç†</li>
            <li><strong>å…±åŒå‘å±•ï¼š</strong>${nextYear}å¹´æ˜¯åˆä½œäº‹ä¸šçš„å…³é”®å‘å±•æœŸ</li>
            <li><strong>é£é™©æç¤ºï¼š</strong>æ³¨æ„è´¢åŠ¡ç®¡ç†å’Œå†³ç­–æµç¨‹çš„æ˜ç¡®</li>
          </ul>
        </div>
      `;
      break;
      
    case 'æ–­è”ä¿®å¤ï¼ˆæœ‹å‹ / æƒ…äºº / å®¶äººï¼‰':
      titleEmoji = 'ğŸ’”';
      specificTitle = 'æ–­è”ä¿®å¤åˆ†æ';
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ”„ å…³ç³»ä¿®å¤æŒ‡å—</h5>
          <p>æ–­è”ä¿®å¤çš„${cultureName}åˆ†æï¼š</p>
          <ul>
            <li><strong>ä¿®å¤å¯èƒ½æ€§ï¼š</strong>68%ï¼ˆæœ‰æœºä¼šä¿®å¤ï¼‰</li>
            <li><strong>æœ€ä½³æ—¶æœºï¼š</strong>${currentYear}å¹´å†¬å­£æ˜¯ä¿®å¤å…³ç³»çš„è¾ƒå¥½æ—¶æœº</li>
            <li><strong>ä¿®å¤æ–¹å¼ï¼š</strong>å¾ªåºæ¸è¿›ï¼Œä»ç®€å•æ²Ÿé€šå¼€å§‹</li>
            <li><strong>æ³¨æ„äº‹é¡¹ï¼š</strong>é¿å…æ—§äº‹é‡æï¼Œå…³æ³¨å½“ä¸‹å’Œæœªæ¥</li>
          </ul>
        </div>
      `;
      break;
      
    case 'å® ç‰©ç¼˜åˆ†ï¼ˆä¸»äººä¸å® ç‰©ï¼‰':
      titleEmoji = 'ğŸ¾';
      specificTitle = 'å® ç‰©ç¼˜åˆ†åˆ†æ';
      specificAnalysis = `
        <div class="ai-section">
          <h5>â¤ï¸ ä¸»å® ç¼˜åˆ†åˆ†æ</h5>
          <p>ä¸»äººä¸å® ç‰©çš„${cultureName}åˆ†æï¼š</p>
          <ul>
            <li><strong>ç¼˜åˆ†æŒ‡æ•°ï¼š</strong>92%ï¼ˆæ·±åšç¼˜åˆ†ï¼‰</li>
            <li><strong>æœ€ä½³å® ç‰©ï¼š</strong>ä¸­å°å‹çŠ¬ã€çŒ«ç§‘åŠ¨ç‰©</li>
            <li><strong>äº’åŠ¨æ–¹å¼ï¼š</strong>æ¸©æŸ”è€å¿ƒï¼Œå»ºç«‹ä¿¡ä»»å…³ç³»</li>
            <li><strong>å¥åº·æ³¨æ„ï¼š</strong>å…³æ³¨å® ç‰©æƒ…ç»ªå’Œæ¶ˆåŒ–ç³»ç»Ÿå¥åº·</li>
          </ul>
        </div>
      `;
      break;
      
    // é»˜è®¤æƒ…å†µ
    default:
      titleEmoji = 'ğŸ“‹';
      specificTitle = `${focus}æ·±åº¦åˆ†æ`;
      specificAnalysis = `
        <div class="ai-section">
          <h5>ğŸ¯ ${focus}ä¸“é¡¹åˆ†æ</h5>
          <p>åŸºäºæ‚¨çš„${cultureName}ï¼Œå…³äº"${focus}"çš„åˆ†æå¦‚ä¸‹ï¼š</p>
          <ul>
            <li><strong>æ•´ä½“è¿åŠ¿ï¼š</strong>å½“å‰å¤„äºå¹³ç¨³å‘å±•æœŸ</li>
            <li><strong>æœºé‡æ—¶æ®µï¼š</strong>${currentYear}å¹´ä¸‹åŠå¹´æœºé‡è¾ƒå¤š</li>
            <li><strong>æ³¨æ„äº‹é¡¹ï¼š</strong>ä¿æŒè€å¿ƒï¼Œé¿å…å†²åŠ¨å†³ç­–</li>
            <li><strong>å‘å±•æ–¹å‘ï¼š</strong>å‘æŒ¥è‡ªèº«ä¼˜åŠ¿ï¼Œç¨³æ­¥æ¨è¿›</li>
          </ul>
        </div>
      `;
  }
  
  return `
    <div class="ai-report">
      <h4>${titleEmoji} ${cultureName} Â· ${specificTitle}</h4>
      
      <div class="ai-section">
        <h5>ğŸ“Š æŠ¥å‘Šæ¦‚è¦</h5>
        <p>æœ¬æŠ¥å‘ŠåŸºäºä¸“ä¸šçš„${cultureName}ä½“ç³»ï¼Œé’ˆå¯¹"${focus}"è¿™ä¸€å…·ä½“éœ€æ±‚è¿›è¡Œæ·±åº¦åˆ†æã€‚ç»“åˆä¸ªäººå‘½ç†ç‰¹ç‚¹ä¸å½“å‰è¿åŠ¿å‘¨æœŸï¼Œæä¾›å…·æœ‰å®é™…æ“ä½œæ€§çš„å»ºè®®ã€‚</p>
      </div>
      
      ${specificAnalysis}
      
      <div class="ai-section">
        <h5>ğŸ“ ä¸ªæ€§åŒ–å»ºè®®</h5>
        <ol>
          <li><strong>ç«‹å³è¡ŒåŠ¨ï¼š</strong>æ¸…ç†å¯¹åº”æ–¹ä½ï¼Œè°ƒæ•´ç¯å¢ƒèƒ½é‡</li>
          <li><strong>çŸ­æœŸè®¡åˆ’ï¼ˆ1-3ä¸ªæœˆï¼‰ï¼š</strong>åˆ¶å®šå…·ä½“ç›®æ ‡ï¼Œå¼€å§‹è¡ŒåŠ¨</li>
          <li><strong>ä¸­æœŸè§„åˆ’ï¼ˆ3-6ä¸ªæœˆï¼‰ï¼š</strong>å·©å›ºæˆæœï¼Œé€‚å½“æ‹“å±•</li>
          <li><strong>é•¿æœŸå‘å±•ï¼ˆ6-12ä¸ªæœˆï¼‰ï¼š</strong>å¸ƒå±€æœªæ¥ï¼Œå»ºç«‹ç¨³å®šåŸºç¡€</li>
        </ol>
      </div>
      
      <div class="ai-section">
        <h5>ğŸŒŸ å¼€è¿å°è´´å£«</h5>
        <ul>
          <li>ä½©æˆ´ä¸è‡ªèº«äº”è¡Œç›¸ç”Ÿçš„é¥°å“</li>
          <li>åœ¨å‰æ—¶è¿›è¡Œé‡è¦å†³ç­–</li>
          <li>ä¿æŒç§¯æå¿ƒæ€ï¼Œç›¸ä¿¡è‡ªèº«èƒ½åŠ›</li>
          <li>å®šæœŸæ¸…ç†è´Ÿé¢èƒ½é‡ï¼Œä¿æŒç¯å¢ƒæ•´æ´</li>
        </ul>
      </div>
      
      <div class="ai-note">
        <small>ğŸ’¡ æ¸©é¦¨æç¤ºï¼šæœ¬åˆ†æåŸºäºä¼ ç»Ÿå‘½ç†å­¦åŸç†ï¼Œæ—¨åœ¨æä¾›å‚è€ƒã€‚çœŸæ­£çš„å¹¸ç¦ä¸æˆåŠŸéœ€è¦ç»“åˆç°å®è¡ŒåŠ¨ä¸ä¸ªäººåŠªåŠ›ã€‚å‘½ç†æ˜¯å¯¼èˆªï¼Œè¡ŒåŠ¨æ‰æ˜¯å…³é”®ã€‚</small>
      </div>
    </div>
  `;
}

/* ==============================
   å¤‡ç”¨æŠ¥å‘Šç”Ÿæˆ
============================== */
function generateFallbackReport(focus, data, cultureName) {
  return `
    <div class="ai-report">
      <h4>${cultureName}åˆ†ææŠ¥å‘Š Â· ${focus}</h4>
      <div class="ai-section">
        <h5>ğŸ“Š åˆ†ææ¦‚è¦</h5>
        <p>åŸºäºæ‚¨æä¾›çš„${focus}éœ€æ±‚çš„åŸºç¡€åˆ†æï¼š</p>
      </div>
      
      <div class="ai-section">
        <h5>ğŸ¯ æ ¸å¿ƒå»ºè®®</h5>
        <p>é’ˆå¯¹"${focus}"è¿™ä¸€å…·ä½“éœ€æ±‚ï¼Œå»ºè®®æ‚¨ï¼š</p>
        <ul>
          <li>å…³æ³¨è¿‘æœŸèƒ½é‡è¾ƒå¼ºçš„æ–¹ä½å’Œæ—¶é—´æ®µ</li>
          <li>ç»“åˆä¸ªäººå‘½ç†ç‰¹ç‚¹è°ƒæ•´è¡ŒåŠ¨ç­–ç•¥</li>
          <li>é‡è¦å†³ç­–å‰å¯è€ƒè™‘æ‹©æ—¥è¿›è¡Œ</li>
          <li>ä¿æŒå¼€æ”¾å¿ƒæ€ï¼ŒæŠŠæ¡é€‚å½“æ—¶æœº</li>
        </ul>
      </div>
    </div>
  `;
}

/* ==============================
   æ·»åŠ åŠ è½½æ ·å¼
============================== */
const loadingStyle = document.createElement('style');
loadingStyle.textContent = `
  .loading {
    text-align: center;
    padding: 40px 20px;
    color: #98a7b7;
  }
  .ai-report {
    background: rgba(15, 22, 45, 0.5);
    border: 1px solid #243244;
    border-radius: 12px;
    padding: 20px;
    margin-top: 16px;
  }
  .ai-report h4 {
    color: #ffe084;
    margin-top: 0;
    border-bottom: 1px solid #243244;
    padding-bottom: 10px;
  }
  .ai-section {
    margin: 16px 0;
    padding: 12px;
    background: rgba(11, 15, 20, 0.3);
    border-radius: 8px;
    border-left: 4px solid #58b9ff;
  }
  .ai-section h5 {
    color: #f2d27a;
    margin-top: 0;
  }
  .ai-note {
    margin-top: 20px;
    padding: 10px;
    background: rgba(212, 175, 55, 0.1);
    border-radius: 6px;
    border: 1px solid rgba(212, 175, 55, 0.3);
    color: #98a7b7;
    font-size: 0.85rem;
  }
`;
document.head.appendChild(loadingStyle);

/* ==============================
   æ ¸å¿ƒå‡½æ•°ï¼šonGenerate
============================== */
async function onGenerate() {
  hideErr();
  clearResultArea();

  const type = normalizeType($('type')?.value || 'personal');
  const err = validate(type);
  if (err) return showErr(err);

  const me = readBirthInputs('1');
  const focus = getFocus();
  const culture = getCultureResolved();
  const config = cultureConfig[culture] || cultureConfig['ä¸œæ–¹'];

  const payload = {
    year: me.year,
    month: me.month,
    day: me.day,
    hour: me.hour,
    minute: me.minute,
    timeUnknown: me.timeUnknown,
    country: me.country,
    name: me.name,
    focus: focus,
    culture: culture
  };

  try {
    // è®¡ç®—å‘½ç†æ•°æ®
    const result = config.calculate(payload);
    
    // æ˜¾ç¤ºç»“æœåŒºåŸŸ
    showResultArea();
    
    // æ¸²æŸ“åŸºç¡€æŠ¥å‘Š
    config.render(result, payload);
    
    // ç”Ÿæˆæ·±åº¦AIåˆ†æ
    const richHost = $('rich-report');
    if (richHost) {
      richHost.innerHTML = '<div class="loading">æ­£åœ¨ç”Ÿæˆæ·±åº¦åˆ†ææŠ¥å‘Š...</div>';
      
      // ä½¿ç”¨å¢å¼ºç‰ˆAIæŠ¥å‘Šç”Ÿæˆ
      const aiReport = await generateAIReport(result, focus, payload, culture);
      richHost.innerHTML = aiReport;
    }
    
    // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
    const resultSection = $('result');
    if (resultSection) {
      resultSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
    
  } catch (error) {
    console.error('åˆ†æç”Ÿæˆå¤±è´¥ï¼š', error);
    showErr('åˆ†æç”Ÿæˆå¤±è´¥ï¼Œè¯·æ£€æŸ¥è¾“å…¥ä¿¡æ¯');
  }
}

  function togglePartner(typeValueRaw) {
    const typeValue = normalizeType(typeValueRaw);
    const section = $('partner-section');
    const personal = $('purpose_personal');
    const compat = $('purpose_compatibility');
    const show = (typeValue === 'compatibility');

    if (section) section.style.display = show ? 'block' : 'none';
    if (personal) {
      personal.style.display = show ? 'none' : 'block';
      personal.disabled = show;
    }
    if (compat) {
      compat.style.display = show ? 'block' : 'none';
      compat.disabled = !show;
    }

    updatePurposeOptionsBasedOnCulture(getCultureResolved());
  }

  function updatePurposeOptions(cultureResolved) {
    const type = normalizeType($('type')?.value || 'personal');
    const config = culturePurposeMap[cultureResolved] || culturePurposeMap['ä¸œæ–¹'];

    if (type === 'personal') updatePersonalPurposeOptions(config.personal);
    else updateCompatibilityPurposeOptions(config.compatibility);
  }

  function updatePersonalPurposeOptions(options) {
    if (!Array.isArray(options)) return;
    const select = $('purpose_personal');
    if (!select) return;
    const currentValue = select.value;

    select.innerHTML = '';
    const groups = {
      'å§»ç¼˜ Love': ['æ‹çˆ±ç¼˜åˆ†', 'å©šå§»èµ°åŠ¿'],
      'äº‹ä¸š Career': ['èŒåœºå‘å±•', 'åˆ›ä¸šæ½œåŠ›'],
      'è´¢è¿ Wealth': ['è´¢ä½åˆ†æ', 'ç†è´¢æ—¶æœº'],
      'æ‹©æ—¥ Auspicious Date': ['å©šæœŸæ‹©æ—¥', 'æ–°ç”Ÿå®å®æ‹©æ—¥', 'æ–°å®¶å…¥ä½æ‹©æ—¥', 'æ–°å…¬å¸å…¥ä½æ‹©æ—¥'],
      'æµ‹å Name Analysis': ['å®å®å', 'å® ç‰©å', 'å…¬å¸å', 'å‘½åæ”¹è¿'],
      'é£æ°´ Feng Shui': ['ä½å®¶', 'åŠå…¬å®¤']
    };

    Object.entries(groups).forEach(([label, items]) => {
      const available = items.filter(x => options.includes(x));
      if (!available.length) return;

      const og = document.createElement('optgroup');
      og.label = label;
      available.forEach(item => {
        const op = document.createElement('option');
        op.value = item;
        op.textContent = item;
        og.appendChild(op);
      });
      select.appendChild(og);
    });

    try{
      if (currentValue && select.querySelector(`option[value="${CSS.escape(currentValue)}"]`)) {
        select.value = currentValue;
      }
    }catch(_){}
  }

  function updateCompatibilityPurposeOptions(options) {
    if (!Array.isArray(options)) return;
    const select = $('purpose_compatibility');
    if (!select) return;
    const currentValue = select.value;

    select.innerHTML = '';
    const og = document.createElement('optgroup');
    og.label = 'åˆç›˜åˆ†æ Compatibility';
    options.forEach(item => {
      const op = document.createElement('option');
      op.value = item;
      op.textContent = item;
      og.appendChild(op);
    });
    select.appendChild(og);

    try{
      if (currentValue && select.querySelector(`option[value="${CSS.escape(currentValue)}"]`)) {
        select.value = currentValue;
      }
    }catch(_){}
  }

  /* ==============================
     âœ… NEW: Accurate BaZi Engine (replaces the simplified one)
     - Year: LiChun boundary (approx Feb 4)
     - Month: solar-term boundaries (approx fixed dates)
     - Day: JDN + JiaZi reference
     - Hour: optional true-solar-time correction (SG default)
  ============================== */
const baziCalculator = window.baziCalculator || {
  heavenlyStems: ['ç”²','ä¹™','ä¸™','ä¸','æˆŠ','å·±','åºš','è¾›','å£¬','ç™¸'],
  earthlyBranches: ['å­','ä¸‘','å¯…','å¯','è¾°','å·³','åˆ','æœª','ç”³','é…‰','æˆŒ','äº¥'],

  getStemElement(stem){
    const m = { 'ç”²':'æœ¨','ä¹™':'æœ¨','ä¸™':'ç«','ä¸':'ç«','æˆŠ':'åœŸ','å·±':'åœŸ','åºš':'é‡‘','è¾›':'é‡‘','å£¬':'æ°´','ç™¸':'æ°´' };
    return m[stem] || 'æœ¨';
  },
  getBranchElement(branch){
    const m = { 'å­':'æ°´','ä¸‘':'åœŸ','å¯…':'æœ¨','å¯':'æœ¨','è¾°':'åœŸ','å·³':'ç«','åˆ':'ç«','æœª':'åœŸ','ç”³':'é‡‘','é…‰':'é‡‘','æˆŒ':'åœŸ','äº¥':'æ°´' };
    return m[branch] || 'æœ¨';
  },

  // Gregorian -> JDN noon integer
  jdnNoon(y, m, d){
    const a = Math.floor((14 - m) / 12);
    const y2 = y + 4800 - a;
    const m2 = m + 12 * a - 3;
    return d
      + Math.floor((153 * m2 + 2) / 5)
      + 365 * y2
      + Math.floor(y2 / 4)
      - Math.floor(y2 / 100)
      + Math.floor(y2 / 400)
      - 32045;
  },

  // treat JDN(noon)=2458511 as JiaZi day (index 0)
  sexagenaryIndexFromJDN(JDN){
    let idx = (JDN - 2458511) % 60;
    if (idx < 0) idx += 60;
    return idx;
  },

  pillarFromIndex60(idx){
    const stemIndex = idx % 10;
    const branchIndex = idx % 12;
    const stem = this.heavenlyStems[stemIndex];
    const branch = this.earthlyBranches[branchIndex];
    return { stemIndex, branchIndex, stem, branch, element: this.getStemElement(stem) };
  },

  // LiChun boundary approx Feb 4
  isBeforeLiChun(y, m, d){
    if (m < 2) return true;
    if (m > 2) return false;
    return d < 4;
  },

  calculateYearPillarSolar(y, m, d){
    const solarYear = this.isBeforeLiChun(y, m, d) ? (y - 1) : y;
    const stemIndex = (solarYear - 4) % 10;
    const branchIndex = (solarYear - 4) % 12;
    const stem = this.heavenlyStems[(stemIndex + 10) % 10];
    const branch = this.earthlyBranches[(branchIndex + 12) % 12];
    return {
      stemIndex: (stemIndex + 10) % 10,
      branchIndex: (branchIndex + 12) % 12,
      stem, branch,
      element: this.getStemElement(stem),
      solarYear
    };
  },

  // month number by approximate solar-term boundaries
  solarMonthNo(y, m, d){
    const key = y * 10000 + m * 100 + d;
    const b = [
      { mm: 1, dd: 6,  no: 12 },
      { mm: 2, dd: 4,  no: 1  },
      { mm: 3, dd: 6,  no: 2  },
      { mm: 4, dd: 5,  no: 3  },
      { mm: 5, dd: 6,  no: 4  },
      { mm: 6, dd: 6,  no: 5  },
      { mm: 7, dd: 7,  no: 6  },
      { mm: 8, dd: 8,  no: 7  },
      { mm: 9, dd: 8,  no: 8  },
      { mm:10, dd: 8,  no: 9  },
      { mm:11, dd: 7,  no: 10 },
      { mm:12, dd: 7,  no: 11 },
    ];
    let found = null;
    for (const it of b){
      const k = y * 10000 + it.mm * 100 + it.dd;
      if (key >= k) found = it.no;
    }
    return found ?? 11; // before Jan6 => å­æœˆ
  },

  tigerMonthStemIndexFromYearStem(yearStemIndex){
    // ç”²å·±ä¸™å¯…, ä¹™åºšæˆŠå¯…, ä¸™è¾›åºšå¯…, ä¸å£¬å£¬å¯…, æˆŠç™¸ç”²å¯…
    if (yearStemIndex === 0 || yearStemIndex === 5) return 2; // ä¸™
    if (yearStemIndex === 1 || yearStemIndex === 6) return 4; // æˆŠ
    if (yearStemIndex === 2 || yearStemIndex === 7) return 6; // åºš
    if (yearStemIndex === 3 || yearStemIndex === 8) return 8; // å£¬
    return 0; // ç”²
  },

  calculateMonthPillarSolar(y, m, d, yearP){
    const mNo = this.solarMonthNo(y, m, d);
    const branchIndex = (mNo + 1) % 12; // 1->å¯…
    const tigerStem = this.tigerMonthStemIndexFromYearStem(yearP.stemIndex);
    const stemIndex = (tigerStem + (mNo - 1)) % 10;
    const stem = this.heavenlyStems[stemIndex];
    const branch = this.earthlyBranches[branchIndex];
    return { stemIndex, branchIndex, stem, branch, element: this.getStemElement(stem), monthNo: mNo };
  },

  calculateDayPillarJDN(y, m, d){
    const JDN = this.jdnNoon(y, m, d);
    const idx60 = this.sexagenaryIndexFromJDN(JDN);
    const p = this.pillarFromIndex60(idx60);
    p.JDN = JDN;
    p.idx60 = idx60;
    return p;
  },

  // true solar time correction (SG default)
  applyTrueSolarTime(y, m, d, hh, mm, opts){
    const tzHours = Number(opts?.tzHours ?? 8);
    const longitude = Number(opts?.longitude ?? 103.8198);
    const stdMeridian = tzHours * 15;
    const corrMin = (longitude - stdMeridian) * 4;

    let total = hh * 60 + mm + corrMin;
    let dayDelta = 0;
    while (total < 0){ total += 1440; dayDelta -= 1; }
    while (total >= 1440){ total -= 1440; dayDelta += 1; }

    const newH = Math.floor(total / 60);
    const newM = Math.round(total % 60);

    const dt = new Date(y, m - 1, d, 12, 0, 0, 0);
    dt.setDate(dt.getDate() + dayDelta);

    return { y: dt.getFullYear(), m: dt.getMonth()+1, d: dt.getDate(), hh: newH, mm: newM, corrMin };
  },

  calculateHourPillar(dayStemIndex, hh, mm){
    const hourBranchIndex = (Math.floor((hh + 1) / 2)) % 12;
    const hourStemIndex = (dayStemIndex * 2 + hourBranchIndex) % 10;
    const stem = this.heavenlyStems[hourStemIndex];
    const branch = this.earthlyBranches[hourBranchIndex];
    return { stemIndex: hourStemIndex, branchIndex: hourBranchIndex, stem, branch, element: this.getStemElement(stem) };
  },

  resolveGeo(country){
    const c = String(country || '').toLowerCase();
    if (c.includes('singapore') || c === 'sg' || c.includes('æ–°åŠ å¡')) return { useTrueSolarTime:true, tzHours:8, longitude:103.8198 };
    if (c.includes('malaysia') || c === 'my' || c.includes('é©¬æ¥')) return { useTrueSolarTime:true, tzHours:8, longitude:101.6869 };
    if (c.includes('china') || c === 'cn' || c.includes('ä¸­å›½')) return { useTrueSolarTime:true, tzHours:8, longitude:116.4074 };
    if (c.includes('japan') || c === 'jp' || c.includes('æ—¥æœ¬')) return { useTrueSolarTime:true, tzHours:9, longitude:139.6917 };
    return { useTrueSolarTime:false, tzHours:8, longitude:103.8198 };
  },

  calculateBaziAccurate(year, month, day, hour, minute, timeUnknown, country){
    const geo = this.resolveGeo(country);
    let Y=year, M=month, D=day, H=hour, Min=minute;
    let usedTST = false;
    let corrMin = 0;

    if (!timeUnknown && geo.useTrueSolarTime){
      const adj = this.applyTrueSolarTime(year, month, day, hour, minute, geo);
      Y=adj.y; M=adj.m; D=adj.d; H=adj.hh; Min=adj.mm;
      corrMin = adj.corrMin;
      usedTST = true;
    }

    const yearP = this.calculateYearPillarSolar(Y, M, D);
    const monthP = this.calculateMonthPillarSolar(Y, M, D, yearP);
    const dayP = this.calculateDayPillarJDN(Y, M, D);
    const hourP = timeUnknown ? { stem:'?', branch:'?', element:'æœªçŸ¥' } : this.calculateHourPillar(dayP.stemIndex, H, Min);

    const pillars = {
      year: { stem: yearP.stem, branch: yearP.branch, element: yearP.element },
      month:{ stem: monthP.stem, branch: monthP.branch, element: monthP.element },
      day:  { stem: dayP.stem, branch: dayP.branch, element: dayP.element },
      hour: hourP
    };

    const elements = { 'æœ¨':0,'ç«':0,'åœŸ':0,'é‡‘':0,'æ°´':0 };
    Object.values(pillars).forEach(p => {
      if (p.element && p.element !== 'æœªçŸ¥') elements[p.element] += 3;
      if (p.branch && p.branch !== '?') elements[this.getBranchElement(p.branch)] += 2;
    });
    const total = Object.values(elements).reduce((a,b)=>a+b,0) || 1;

    const percents = {
      wood: Math.round((elements['æœ¨']/total)*100),
      fire: Math.round((elements['ç«']/total)*100),
      earth: Math.round((elements['åœŸ']/total)*100),
      metal: Math.round((elements['é‡‘']/total)*100),
      water: Math.round((elements['æ°´']/total)*100)
    };

    return { pillars, percents, timeUnknown, adjusted:{year:Y,month:M,day:D,hour:H,minute:Min,usedTrueSolarTime:usedTST,corrMin} };
  },

  // keep compatibility
  calculateBazi(year, month, day, hour, timeUnknown){
    return this.calculateBaziAccurate(year, month, day, hour, 0, timeUnknown, '');
  }
};

  function generateBaziReportFallback(result, focus){
    const p = result?.pillars;
    const pc = result?.percents || {};
    if (!p?.day?.stem) return `<p class="muted">æ•°æ®ä¸è¶³ï¼Œæ— æ³•ç”ŸæˆæŠ¥å‘Šã€‚</p>`;
    const list = [
      {name:'æœ¨',v:Number(pc.wood||0)},
      {name:'ç«',v:Number(pc.fire||0)},
      {name:'åœŸ',v:Number(pc.earth||0)},
      {name:'é‡‘',v:Number(pc.metal||0)},
      {name:'æ°´',v:Number(pc.water||0)},
    ].sort((a,b)=>b.v-a.v);
    const strong = list[0], weak = list[list.length-1];
    return `
      <h4>å‘½ç†æ ¸å¿ƒåˆ†æ</h4>
      <p><strong>æ—¥æŸ±ï¼š</strong><span style="color:#f2d27a;font-weight:800">${escapeHTML(p.day.stem + p.day.branch)}</span></p>
      <p><strong>äº”è¡Œå€¾å‘ï¼š</strong>åå¼ºï¼š${escapeHTML(strong.name)}ï¼ˆ${escapeHTML(strong.v)}%ï¼‰ï½œåå¼±ï¼š${escapeHTML(weak.name)}ï¼ˆ${escapeHTML(weak.v)}%ï¼‰</p>
      <h4>èšç„¦ï¼š${escapeHTML(focus || 'ç»¼åˆ')}</h4>
      <p>å»ºè®®ï¼šå‘æŒ¥${escapeHTML(strong.name)}çš„ä¼˜åŠ¿ï¼ŒåŒæ—¶ç”¨æ—¥å¸¸ä¹ æƒ¯ä¸ç¯å¢ƒå¸ƒç½®è¡¥è¶³${escapeHTML(weak.name)}ã€‚</p>
    `;
  }

  /* ==============================
     Renderers
  ============================== */
  function ensureBaziFreeReportBlock() {
    ensureResultSection();
    const butler = $('butler-host');
    if (!butler) return;
    if ($('xl-free-report')) return;

    const free = document.createElement('div');
    free.id = 'xl-free-report';
    free.innerHTML = `
      <div class="card" style="margin-top:8px">
        <div class="h2">å‘½ç†ç®€æŠ¥</div>
        <div id="bazi-date" class="sub" style="margin-bottom:8px"></div>
        <div id="bazi-pillars" class="pillars"></div>

        <div class="row cols-5" style="align-items:center;margin-top:10px">
          <div><div>æœ¨</div><div class="bar"><i id="bar-æœ¨"></i></div><div id="pct-æœ¨" class="muted" style="margin-top:4px"></div></div>
          <div><div>ç«</div><div class="bar"><i id="bar-ç«"></i></div><div id="pct-ç«" class="muted" style="margin-top:4px"></div></div>
          <div><div>åœŸ</div><div class="bar"><i id="bar-åœŸ"></i></div><div id="pct-åœŸ" class="muted" style="margin-top:4px"></div></div>
          <div><div>é‡‘</div><div class="bar"><i id="bar-é‡‘"></i></div><div id="pct-é‡‘" class="muted" style="margin-top:4px"></div></div>
          <div><div>æ°´</div><div class="bar"><i id="bar-æ°´"></i></div><div id="pct-æ°´" class="muted" style="margin-top:4px"></div></div>
        </div>

        <div id="bazi-elements-balance" class="sub" style="margin-top:8px"></div>
      </div>
    `;
    butler.appendChild(free);
  }

  function setText(id, txt) {
    const el = $(id);
    if (el) el.textContent = safe(txt);
  }
  function setBar(el, pct) {
    if (!el) return;
    const v = Math.max(0, Math.min(100, Number(pct) || 0));
    el.style.width = v + '%';
    el.setAttribute('aria-valuenow', String(Math.round(v)));
  }

  function renderPillars(root, p, timeUnknown=false){
    if(!root) return;
    root.innerHTML = '';
    const items = [['å¹´æŸ±',p.year], ['æœˆæŸ±',p.month], ['æ—¥æŸ±',p.day], ['æ—¶æŸ±',p.hour]];
    items.forEach(([tit,v])=>{
      const isUnknown = (tit==='æ—¶æŸ±' && timeUnknown);
      const stem = isUnknown ? 'ï¼Ÿ' : v.stem;
      const branch = isUnknown ? 'ï¼Ÿ' : v.branch;

      const div = document.createElement('div');
      div.className = 'pillar';
      div.innerHTML = `
        <div class="tit">${escapeHTML(tit)}</div>
        <div class="gz">${escapeHTML(stem + branch)}</div>
        ${v.element && v.element !== 'æœªçŸ¥' ? `<div style="color:#98a7b7;font-size:.75rem;margin-top:4px">${escapeHTML(v.element)}</div>` : ``}
      `;
      root.appendChild(div);
    });
  }

  function renderBaziReport(result, info){
    injectMiniStylesOnce();
    ensureBaziFreeReportBlock();

    const { pillars, percents, timeUnknown, note } = result;
    const { year, month, day, hour, minute } = info;

    const timeText = timeUnknown ? t('time_unknown') : `${pad2(hour)}:${pad2(minute)}`;
    setText('bazi-date', `${year}-${pad2(month)}-${pad2(day)}  ${timeText}${note ? ' ' + note : ''}`);
    renderPillars($('bazi-pillars'), pillars, timeUnknown);

    setBar($('bar-æœ¨'), percents.wood); setText('pct-æœ¨', Math.round(percents.wood) + '%');
    setBar($('bar-ç«'), percents.fire); setText('pct-ç«', Math.round(percents.fire) + '%');
    setBar($('bar-åœŸ'), percents.earth); setText('pct-åœŸ', Math.round(percents.earth) + '%');
    setBar($('bar-é‡‘'), percents.metal); setText('pct-é‡‘', Math.round(percents.metal) + '%');
    setBar($('bar-æ°´'), percents.water); setText('pct-æ°´', Math.round(percents.water) + '%');

    const elements = [
      { name:'æœ¨', value:percents.wood },
      { name:'ç«', value:percents.fire },
      { name:'åœŸ', value:percents.earth },
      { name:'é‡‘', value:percents.metal },
      { name:'æ°´', value:percents.water }
    ].sort((a,b)=>b.value-a.value);

    setText('bazi-elements-balance',
      `å…ƒç´ å¹³è¡¡ï¼š${elements[0].name}åå¼º (${elements[0].value}%) Â· ${elements[4].name}åå¼± (${elements[4].value}%)`
    );
  }

  function renderSimpleCard(title, lines){
    const butler = $('butler-host') || ensureResultSection();
    const card = document.createElement('div');
    card.className = 'card';
    card.style.marginTop = '8px';
    card.innerHTML = `
      <div style="font-weight:800;color:#ffe084">${escapeHTML(title)}</div>
      <div style="margin-top:8px;line-height:1.8;color:#e8edf3">
        ${lines.map(x=>`<div>${escapeHTML(x)}</div>`).join('')}
      </div>
    `;
    butler.appendChild(card);
  }

  /* ==============================
     Other culture calculators
  ============================== */
  const calculators = {
    'ä¸œæ–¹': {
      calculate: ({year,month,day,hour,minute,timeUnknown,country}) =>
        baziCalculator.calculateBaziAccurate(year,month,day,hour,minute,timeUnknown,country),
      render: (data, info) => renderBaziReport(data, info),
      analysis: (data, focus) => (window.generateBaziReport ? window.generateBaziReport(data, focus) : generateBaziReportFallback(data, focus))
    },

    'è¥¿æ–¹': {
      calculate: ({year,month,day,hour,timeUnknown}) => {
        const zodiacSigns = ['æ‘©ç¾¯åº§','æ°´ç“¶åº§','åŒé±¼åº§','ç™½ç¾Šåº§','é‡‘ç‰›åº§','åŒå­åº§','å·¨èŸ¹åº§','ç‹®å­åº§','å¤„å¥³åº§','å¤©ç§¤åº§','å¤©èåº§','å°„æ‰‹åº§'];
        const signIndex = (month - 1) % 12;
        return {
          zodiac: zodiacSigns[signIndex],
          rising: timeUnknown ? 'æœªçŸ¥' : ['ç™½ç¾Šåº§','é‡‘ç‰›åº§','åŒå­åº§','å·¨èŸ¹åº§','ç‹®å­åº§','å¤„å¥³åº§','å¤©ç§¤åº§','å¤©èåº§','å°„æ‰‹åº§','æ‘©ç¾¯åº§','æ°´ç“¶åº§','åŒé±¼åº§'][hour % 12],
          moon: ['å·¨èŸ¹åº§','ç‹®å­åº§','å¤„å¥³åº§','å¤©ç§¤åº§','å¤©èåº§','å°„æ‰‹åº§','æ‘©ç¾¯åº§','æ°´ç“¶åº§','åŒé±¼åº§','ç™½ç¾Šåº§','é‡‘ç‰›åº§','åŒå­åº§'][day % 12]
        };
      },
      render: (data) => renderSimpleCard('è¥¿æ´‹å æ˜Ÿç®€æŠ¥', [
        `å¤ªé˜³æ˜Ÿåº§ï¼š${safe(data.zodiac)}`,
        `ä¸Šå‡æ˜Ÿåº§ï¼š${safe(data.rising)}`,
        `æœˆäº®æ˜Ÿåº§ï¼š${safe(data.moon)}`
      ]),
      analysis: (data, focus) => (window.generateWesternReport
        ? window.generateWesternReport(data, focus)
        : `<h4>èšç„¦ï¼š${escapeHTML(focus||'ç»¼åˆ')}</h4><p>ï¼ˆè¥¿æ´‹å æ˜Ÿæ·±åº¦è§£è¯»å‡½æ•°æœªåŠ è½½ï¼Œå½“å‰ä¸ºç®€åŒ–å±•ç¤ºã€‚ï¼‰</p>`)
    },

    'æ—¥å¼': {
      calculate: ({year,month,day}) => {
        const numbers = ['ä¸€ç™½æ°´æ˜Ÿ','äºŒé»’åœŸæ˜Ÿ','ä¸‰ç¢§æœ¨æ˜Ÿ','å››ç·‘æœ¨æ˜Ÿ','äº”é»„åœŸæ˜Ÿ','å…­ç™½é‡‘æ˜Ÿ','ä¸ƒèµ¤é‡‘æ˜Ÿ','å…«ç™½åœŸæ˜Ÿ','ä¹ç´«ç«æ˜Ÿ'];
        const starIndex = (year + month + day) % 9;
        return {
          number: numbers[starIndex],
          element: ['æ°´','åœŸ','æœ¨','æœ¨','åœŸ','é‡‘','é‡‘','åœŸ','ç«'][starIndex],
          direction: ['åŒ—','è¥¿å—','æ±','æ±å—','ä¸­å¤®','è¥¿åŒ—','è¥¿','æ±åŒ—','å—'][starIndex],
          luck: ['å‰','å‡¶','å‰','å‰','å‡¶','å‰','å‰','å‰','å‰'][starIndex]
        };
      },
      render: (data) => renderSimpleCard('ä¹æ˜Ÿæ°”å­¦ç®€æŠ¥', [
        `æœ¬å‘½æ˜Ÿï¼š${safe(data.number)}`,
        `äº”è¡Œï¼š${safe(data.element)}`,
        `æ–¹ä½ï¼š${safe(data.direction)}`,
        `è¿åŠ¿ï¼š${safe(data.luck)}`
      ]),
      analysis: (data, focus) => (window.generateJapaneseReport
        ? window.generateJapaneseReport(data, focus)
        : `<h4>èšç„¦ï¼š${escapeHTML(focus||'ç»¼åˆ')}</h4><p>ï¼ˆä¹æ˜Ÿæ·±åº¦è§£è¯»å‡½æ•°æœªåŠ è½½ï¼Œå½“å‰ä¸ºç®€åŒ–å±•ç¤ºã€‚ï¼‰</p>`)
    },

    'å é™€': {
      calculate: ({year,month,day}) => {
        const rashis = ['Mesha','Vrishabha','Mithuna','Karka','Simha','Kanya','Tula','Vrishchika','Dhanu','Makara','Kumbha','Meena'];
        const rashiIndex = (month - 1) % 12;
        return {
          rashi: rashis[rashiIndex],
          nakshatra: ['Ashwini','Bharani','Krittika','Rohini','Mrigashira','Ardra','Punarvasu','Pushya','Ashlesha','Magha','Purva Phalguni','Uttara Phalguni'][day % 12]
        };
      },
      render: (data) => renderSimpleCard('å é™€å æ˜Ÿç®€æŠ¥', [
        `Rashiï¼š${safe(data.rashi)}`,
        `Nakshatraï¼š${safe(data.nakshatra)}`
      ]),
      analysis: (data, focus) => (window.generateVedicReport
        ? window.generateVedicReport(data, focus)
        : `<h4>èšç„¦ï¼š${escapeHTML(focus||'ç»¼åˆ')}</h4><p>ï¼ˆå é™€æ·±åº¦è§£è¯»å‡½æ•°æœªåŠ è½½ï¼Œå½“å‰ä¸ºç®€åŒ–å±•ç¤ºã€‚ï¼‰</p>`)
    }
  };

  function resolveCalc() {
    const culture = getCultureResolved();
    return calculators[culture] || calculators['ä¸œæ–¹'];
  }

  /* ==============================
     Generate Functions
  ============================== */
  function readBirthInputs(prefix='1') {
    const name = ($(`name${prefix}`)?.value || '').trim();
    const birthdate = ($(`birthdate${prefix}`)?.value || '').trim();
    const birthtime = ($(`birthtime${prefix}`)?.value || '').trim();
    const country = ($(`country${prefix}`)?.value || '').trim();
    const timeUnknown = !birthtime;

    let year=0, month=0, day=0, hour=0, minute=0;
    if (birthdate) {
      const parts = birthdate.split('-').map(Number);
      year = parts[0] || 0;
      month = parts[1] || 0;
      day = parts[2] || 0;
    }
    if (birthtime) {
      const tp = birthtime.split(':').map(Number);
      hour = tp[0] || 0;
      minute = tp[1] || 0;
    }
    return { name, birthdate, birthtime, country, timeUnknown, year, month, day, hour, minute };
}

function getFocus() {
    const type = normalizeType($('type')?.value || 'personal');
    if (type === 'compatibility') return $('purpose_compatibility')?.value || '';
    return $('purpose_personal')?.value || '';
  }

  function validate(typeRaw) {
    const type = normalizeType(typeRaw);
    const me = readBirthInputs('1');
    if (!me.name) return t('err_fill_name1');
    if (!me.birthdate) return t('err_fill_date1');
    if (!me.country) return t('err_fill_country1');
    
    // æ£€æŸ¥æ—¥æœŸæ˜¯å¦æœ‰æ•ˆ
    if (me.year < 1900 || me.year > new Date().getFullYear()) {
      return 'è¯·è¾“å…¥æœ‰æ•ˆçš„å‡ºç”Ÿå¹´ä»½ï¼ˆ1900-ç°åœ¨ï¼‰';
    }
    
    // æ£€æŸ¥æ—¶é—´æ ¼å¼
    if (me.birthtime && !validateBirthTime(me.birthtime)) {
      return 'è¯·è¾“å…¥æœ‰æ•ˆçš„æ—¶é—´æ ¼å¼ï¼ˆHH:MMï¼‰';
    }

    if (type === 'compatibility') {
      const p = readBirthInputs('2');
      if (!p.name) return t('err_fill_name2');
      if (!p.birthdate) return t('err_fill_date2');
      if (!p.country) return t('err_fill_country2');
      
      // æ£€æŸ¥ç¬¬äºŒäººæ—¥æœŸ
      if (p.year < 1900 || p.year > new Date().getFullYear()) {
        return 'è¯·è¾“å…¥æœ‰æ•ˆçš„ç¬¬äºŒäººå‡ºç”Ÿå¹´ä»½ï¼ˆ1900-ç°åœ¨ï¼‰';
      }
      
      // æ£€æŸ¥ç¬¬äºŒäººæ—¶é—´æ ¼å¼
      if (p.birthtime && !validateBirthTime(p.birthtime)) {
        return 'è¯·è¾“å…¥æœ‰æ•ˆçš„ç¬¬äºŒäººæ—¶é—´æ ¼å¼ï¼ˆHH:MMï¼‰';
      }
    }
    return '';
  }

function validateBirthTime(timeStr) {
  if (!timeStr) return true;
  const regex = /^([01]?[0-9]|2[0-3]):[0-5][0-9]$/;
  return regex.test(timeStr);
}  

  /* ==============================
     VIP Auth: hide fields by default (no echo/log)
  ============================== */
  function refreshAuthRevealBtnText(){
    const btn = $('authRevealBtn');
    const fields = $('authFields');
    if (!btn || !fields) return;

    const shown = fields.style.display !== 'none';
    const isEN = (window.getLang ? window.getLang() : (document.documentElement.lang || 'zh-CN')).startsWith('en');
    btn.textContent = shown
      ? (isEN ? 'Hide login fields' : 'éšè—ç™»å½•è¾“å…¥æ¡†')
      : (isEN ? 'Show login fields' : 'æ˜¾ç¤ºç™»å½•è¾“å…¥æ¡†');
  }

  function setupAuthReveal() {
    const fields = $('authFields');
    if (!fields) return;

    fields.style.display = 'none';

    const panelBody = fields.closest('.body') || fields.parentElement;
    if (!panelBody) return;

    if ($('authRevealBtn')) {
      refreshAuthRevealBtnText();
      return;
    }

    const btn = document.createElement('button');
    btn.id = 'authRevealBtn';
    btn.type = 'button';
    btn.className = 'btn ghost block';
    btn.style.marginBottom = '8px';

    btn.addEventListener('click', () => {
      const shown = fields.style.display !== 'none';
      fields.style.display = shown ? 'none' : 'flex';
      refreshAuthRevealBtnText();
    });

    panelBody.insertBefore(btn, fields);
    refreshAuthRevealBtnText();
  }

  /* ==============================
     Chat (UI wiring only)
  ============================== */
  let chatHistory = [];

  function appendChat(role, text) {
    const body = $('chatBody');
    if (!body) return;
    const msg = document.createElement('div');
    msg.className = 'ss-msg' + (role === 'user' ? ' me' : '');
    msg.textContent = text;
    body.appendChild(msg);
    body.scrollTop = body.scrollHeight;
  }

  function openChat(open) {
    const panel = $('chatPanel');
    if (!panel) return;
    panel.setAttribute('aria-hidden', open ? 'false' : 'true');
  }

  async function sendChat() {
    const input = $('chatInput');
    if (!input) return;
    const q = (input.value || '').trim();
    if (!q) return;

    input.value = '';
    appendChat('user', q);

    const me = readBirthInputs('1');
    const context = {
      lang: (window.getLang ? window.getLang() : (document.documentElement.lang || 'zh-CN')),
      culture: getCultureResolved(),
      type: normalizeType($('type')?.value || 'personal'),
      focus: getFocus(),
      name: me.name,
      birthdate: me.birthdate,
      birthtime: me.birthtime || t('time_unknown'),
      country: me.country
    };

    if (!chatHistory.length) {
      chatHistory.push({
        role: 'system',
        content: `You are Xinlian Butler. Reply in the selected language. Keep it warm, practical, and concise. Context: ${JSON.stringify(context)}`
      });
    }
    chatHistory.push({ role: 'user', content: q });

    try {
      const resp = await fetch(API_BASE + CHAT_ENDPOINT, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ messages: chatHistory, lang: context.lang, context })
      });

      if (!resp.ok) throw new Error('HTTP ' + resp.status);
      const data = await resp.json();

      const answer =
        data?.reply ||
        data?.message ||
        data?.choices?.[0]?.message?.content ||
        data?.content ||
        'ï¼ˆNo responseï¼‰';

      chatHistory.push({ role: 'assistant', content: answer });
      appendChat('assistant', answer);
    } catch (e) {
      appendChat('assistant', 'ï¼ˆç½‘ç»œæˆ–æœåŠ¡é”™è¯¯ï¼Œè¯·ç¨åå†è¯•ã€‚ï¼‰');
    }
  }

  function setupChatUI() {
    const fab = $('ssChatFab');
    const close = $('chatClose');
    const send = $('chatSend');
    const input = $('chatInput');

    if (fab) fab.addEventListener('click', () => openChat(true));
    if (close) close.addEventListener('click', () => openChat(false));
    if (send) send.addEventListener('click', sendChat);
    if (input) input.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') sendChat();
    });
  }

/* ==============================
   Init
============================== */
function init(){
  // generate button
  $('btnNext')?.addEventListener('click', onGenerate);

  // type/culture changes
  $('type')?.addEventListener('change', (e) => {
    togglePartner(e.target.value);
    updatePurposeOptionsBasedOnCulture(getCultureResolved());
  });
  
  $('culture')?.addEventListener('change', () => {
    updatePurposeOptionsBasedOnCulture(getCultureResolved());
  });

  // language select
  const langSelect = $('langSelect');
  if (langSelect) {
    langSelect.value = getLang();
    langSelect.addEventListener('change', (e) => {
      setLang(e.target.value);
      applyI18n();
      updatePurposeOptionsBasedOnCulture(getCultureResolved());
    });
  }

  // initial state
  applyI18n();
  setDefaultBirthDateTimeNow(); // è®¾ç½®é»˜è®¤æ—¥æœŸæ—¶é—´
  togglePartner($('type')?.value || 'personal');
  updatePurposeOptionsBasedOnCulture(getCultureResolved());

  // VIP auth hide inputs by default
  setupAuthReveal();

  // chat
  setupChatUI();
}

// DOMåŠ è½½å®Œæˆååˆå§‹åŒ–
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', init);
} else {
  init();
}

})(); // ç»“æŸç«‹å³æ‰§è¡Œå‡½æ•°
</script>
</body>
</html>
