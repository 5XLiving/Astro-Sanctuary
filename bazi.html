<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<title>AIå‘½ç†ä¾›é—¨ Â· GPTæ™ºèƒ½å…«å­—åˆ†æ</title>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0b0f14;
  --card: #11161dcc;
  --line: #1f2a36;
  --text: #e8edf3;
  --muted: #9aa3b2;
  --brand: #d4af37;
  --gold: #d4af37;
  --gold2: #f2d27a;
  --radius: 14px;
  --shadow: 0 8px 30px rgba(0,0,0,.35);
  --accent: #3a86ff;
  --success: #4cc9a7;
  --warning: #ff9e00;
  --danger: #ff5a5f;
}

/* åŸæœ‰æ ·å¼ä¿æŒä¸å˜ï¼Œå¢åŠ æ–°æ ·å¼ */
.gpt-powered {
  background: linear-gradient(135deg, rgba(16, 163, 127, 0.1), rgba(16, 163, 127, 0.2));
  border: 1px solid rgba(16, 163, 127, 0.3);
  border-radius: var(--radius);
  padding: 15px;
  margin: 15px 0;
  text-align: center;
}

.gpt-badge {
  background: linear-gradient(135deg, #10a37f, #1a7f64);
  color: white;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 700;
  display: inline-block;
  margin-bottom: 8px;
}

.feature-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 15px;
  margin: 20px 0;
}

.feature-card {
  background: rgba(15, 22, 36, 0.7);
  border: 1px solid #253245;
  border-radius: 12px;
  padding: 20px;
  transition: all 0.3s ease;
}

.feature-card:hover {
  transform: translateY(-3px);
  border-color: var(--brand);
}

.feature-card.vip {
  border: 2px solid var(--gold);
  background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), transparent);
}

.feature-icon {
  font-size: 2rem;
  margin-bottom: 10px;
}

.feature-title {
  font-weight: 600;
  color: var(--gold2);
  margin-bottom: 8px;
}

.vip-tag {
  background: var(--gold);
  color: #191919;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 0.7rem;
  font-weight: 700;
  margin-left: 8px;
}

.analysis-section {
  margin: 25px 0;
  padding: 20px;
  background: rgba(15, 22, 36, 0.5);
  border-radius: 12px;
  border-left: 4px solid var(--brand);
}

.analysis-title {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--gold2);
  margin-bottom: 15px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.prompt-template {
  background: rgba(15, 22, 36, 0.8);
  border: 1px solid #253245;
  border-radius: 8px;
  padding: 15px;
  margin: 15px 0;
  font-family: monospace;
  font-size: 0.9rem;
  line-height: 1.4;
  color: var(--muted);
}
</style>
</head>

<body>
<header>
  <div class="head-inner container">
    <div class="brand">
      <div class="brand-badge">AI</div>
      <div>
        <div class="title">AIå‘½ç†ä¾›é—¨ Â· GPTæ™ºèƒ½å…«å­—åˆ†æ</div>
        <div class="subtitle">GPT-4ç²¾å‡†æ’ç›˜ + æ·±åº¦è§£æï½œå…è´¹å®Œæ•´åˆ†ææŠ¥å‘Š</div>
      </div>
    </div>
    <div class="lang">
      <label for="langSelect">è¯­è¨€</label>
      <select id="langSelect" aria-label="Language">
        <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
        <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
        <option value="en">English</option>
      </select>
    </div>
  </div>
</header>

<main class="container">
  <section class="card">
    <div class="h2">ğŸ¯ GPTæ™ºèƒ½å…«å­—æ’ç›˜</div>
    
    <div class="gpt-powered">
      <div class="gpt-badge">Powered by GPT-4</div>
      <div>åŸºäºå…ˆè¿›AIæŠ€æœ¯ï¼Œä¸ºæ‚¨æä¾›ç²¾å‡†çš„å…«å­—æ’ç›˜å’Œæ·±åº¦å‘½ç†åˆ†æ</div>
    </div>

    <div class="row cols-3">
      <div>
        <label class="muted">å§“åï¼ˆå¯é€‰ï¼‰</label>
        <input id="name" placeholder="æ‚¨çš„ç§°å‘¼">
      </div>
      <div>
        <label class="muted">æ€§åˆ«</label>
        <select id="gender">
          <option value="">ä¸é€éœ²</option>
          <option value="male">ç”·æ€§</option>
          <option value="female">å¥³æ€§</option>
        </select>
      </div>
      <div>
        <label class="muted">å†æ³•</label>
        <select id="calendar">
          <option value="gregorian">é˜³å† / Gregorian</option>
          <option value="lunar">å†œå† / Lunar</option>
        </select>
      </div>
    </div>

    <div class="row cols-3" style="margin-top:15px">
      <div>
        <label class="muted">å‡ºç”Ÿæ—¥æœŸ</label>
        <input type="date" id="birthdate" value="1978-02-21">
      </div>
      <div>
        <label class="muted">å‡ºç”Ÿæ—¶é—´</label>
        <input type="time" id="birthtime" value="12:45">
        <div class="time-unknown-container">
          <input type="checkbox" id="timeUnknown" class="time-unknown-checkbox">
          <label for="timeUnknown" class="time-unknown-label">å‡ºç”Ÿæ—¶é—´ä¸è¯¦</label>
        </div>
      </div>
      <div style="display:flex;align-items:flex-end">
        <button class="btn" id="genBtn">
          <span id="genBtnText">ğŸ­ GPTæ™ºèƒ½æ’ç›˜</span>
          <span id="genBtnLoading" class="loading" style="display:none"></span>
        </button>
      </div>
    </div>

    <div class="muted" style="margin-top:10px;font-size:0.9rem">
      ğŸ’¡ æç¤ºï¼šGPTå°†åŸºäºä¸“ä¸šå…«å­—ç®—æ³•ä¸ºæ‚¨ç²¾å‡†è®¡ç®—å››æŸ±ï¼Œå¹¶æä¾›æ·±åº¦åˆ†æ
    </div>
  </section>

  <section id="result" style="display:none;">
    <!-- GPTè®¡ç®—çš„å…«å­—ç»“æœæ˜¾ç¤º -->
    <div class="card section">
      <div class="h2">ğŸ­ GPTæ™ºèƒ½å…«å­—æ’ç›˜</div>
      <div class="pillars" id="bazi-pillars"></div>
      <div class="muted" id="bazi-date"></div>
      <div class="muted" id="bazi-day-master"></div>
      
      <div class="gpt-powered" style="margin-top:15px">
        <div class="gpt-badge">AIéªŒè¯é€šè¿‡</div>
        <div>æœ¬æ’ç›˜ç»“æœç»GPT-4åŸºäºä¸“ä¸šå…«å­—ç®—æ³•éªŒè¯ç¡®è®¤</div>
      </div>
    </div>

    <!-- å…è´¹å®Œæ•´åˆ†ææŠ¥å‘Š -->
    <div class="card section">
      <div class="h2">ğŸ“Š å…è´¹å®Œæ•´åˆ†ææŠ¥å‘Š</div>
      
      <!-- äº”è¡Œåˆ†æ -->
      <div class="analysis-section">
        <div class="analysis-title">ğŸŒ¿ äº”è¡Œèƒ½é‡åˆ†æ</div>
        <div class="bars">
          <div class="bar"><i id="bar-wood"></i></div>
          <div class="bar-label"><span>æœ¨</span><span id="pct-wood">0%</span></div>
          <div class="bar"><i id="bar-fire"></i></div>
          <div class="bar-label"><span>ç«</span><span id="pct-fire">0%</span></div>
          <div class="bar"><i id="bar-earth"></i></div>
          <div class="bar-label"><span>åœŸ</span><span id="pct-earth">0%</span></div>
          <div class="bar"><i id="bar-metal"></i></div>
          <div class="bar-label"><span>é‡‘</span><span id="pct-metal">0%</span></div>
          <div class="bar"><i id="bar-water"></i></div>
          <div class="bar-label"><span>æ°´</span><span id="pct-water">0%</span></div>
        </div>
        <div id="bazi-elements-balance" class="muted"></div>
      </div>

      <!-- æ€§æ ¼ç‰¹è´¨ -->
      <div class="analysis-section">
        <div class="analysis-title">ğŸ’« æ€§æ ¼ç‰¹è´¨åˆ†æ</div>
        <div id="personality-analysis"></div>
      </div>

      <!-- äº‹ä¸šè´¢è¿ -->
      <div class="analysis-section">
        <div class="analysis-title">ğŸ’¼ äº‹ä¸šè´¢è¿æŒ‡å¼•</div>
        <div id="career-wealth-analysis"></div>
      </div>

      <!-- äººé™…å…³ç³» -->
      <div class="analysis-section">
        <div class="analysis-title">ğŸ¤ äººé™…å…³ç³»å»ºè®®</div>
        <div id="relationship-analysis"></div>
      </div>

      <!-- å¥åº·æé†’ -->
      <div class="analysis-section">
        <div class="analysis-title">ğŸŒ± å¥åº·å…»ç”Ÿæé†’</div>
        <div id="health-analysis"></div>
      </div>
    </div>

    <!-- VIPæœåŠ¡å±•ç¤º -->
    <div class="card section">
      <div class="h2">â­ VIPä¸“å±æ·±åº¦åˆ†æ</div>
      <div class="feature-grid">
        <div class="feature-card vip">
          <div class="feature-icon">ğŸ’‘</div>
          <div class="feature-title">å§»ç¼˜æ–¹å‘åˆ†æ <span class="vip-tag">VIP</span></div>
          <div class="muted">æ‹çˆ±ç¼˜åˆ†æ·±åº¦è§£æã€å©šå§»èµ°åŠ¿ç²¾å‡†é¢„æµ‹ã€æ­£ç¼˜å‡ºç°æ—¶æœº</div>
        </div>
        
        <div class="feature-card vip">
          <div class="feature-icon">ğŸš€</div>
          <div class="feature-title">äº‹ä¸šæ–¹å‘è§„åˆ’ <span class="vip-tag">VIP</span></div>
          <div class="muted">èŒåœºå‘å±•è·¯å¾„ã€åˆ›ä¸šæ½œåŠ›è¯„ä¼°ã€å‡è¿æœ€ä½³æ—¶æœº</div>
        </div>
        
        <div class="feature-card vip">
          <div class="feature-icon">ğŸ’°</div>
          <div class="feature-title">è´¢è¿æ·±åº¦åˆ†æ <span class="vip-tag">VIP</span></div>
          <div class="muted">è´¢ä½ç²¾å‡†å®šä½ã€æŠ•èµ„æ—¶æœºæŠŠæ¡ã€è´¢å¯Œç§¯ç´¯ç­–ç•¥</div>
        </div>
        
        <div class="feature-card vip">
          <div class="feature-icon">ğŸ¾</div>
          <div class="feature-title">å® ç‰©å‘½ç†è§£è¯» <span class="vip-tag">VIP</span></div>
          <div class="muted">ä¼´ä¾£åŠ¨ç‰©æ€§æ ¼åˆ†æã€å® ç‰©ç¼˜åˆ†åŒ¹é…ã€å…»æŠ¤å»ºè®®</div>
        </div>
        
        <div class="feature-card vip">
          <div class="feature-icon">ğŸ“…</div>
          <div class="feature-title">åˆç›˜æ‹©æ—¥æœåŠ¡ <span class="vip-tag">VIP</span></div>
          <div class="muted">å©šæœŸç²¾å‡†æ‹©æ—¥ã€æ–°ç”Ÿå‰æ—¶é€‰æ‹©ã€é‡è¦äº‹é¡¹æ—¶æœº</div>
        </div>
        
        <div class="feature-card vip">
          <div class="feature-icon">ğŸ¢</div>
          <div class="feature-title">æµ‹åæ”¹è¿åˆ†æ <span class="vip-tag">VIP</span></div>
          <div class="muted">å…¬å¸åå‰å‡¶ã€å®å®åä¼˜åŒ–ã€ä¸ªäººå‘½åæ”¹è¿</div>
        </div>
        
        <div class="feature-card vip">
          <div class="feature-icon">ğŸ </div>
          <div class="feature-title">è´¢ä½åˆç›˜å¸ƒå±€ <span class="vip-tag">VIP</span></div>
          <div class="muted">ä½å®¶é£æ°´ä¼˜åŒ–ã€åŠå…¬å®¤åŠ¨çº¿ã€è´¢ä½ç²¾å‡†å¸ƒå±€</div>
        </div>
      </div>
      
      <div style="text-align:center;margin-top:20px">
        <a href="#" class="vip-cta">ç«‹å³å‡çº§VIPï¼Œè§£é”æ·±åº¦å‘½ç†åˆ†æ</a>
      </div>
    </div>
  </section>
</main>

<script>
// GPTå…«å­—è®¡ç®—æ¨¡æ‹Ÿ - å®é™…ä½¿ç”¨æ—¶æ›¿æ¢ä¸ºçœŸå®çš„GPT APIè°ƒç”¨
class GPTBaziCalculator {
  constructor() {
    this.HEAVENLY_STEMS = ['ç”²', 'ä¹™', 'ä¸™', 'ä¸', 'æˆŠ', 'å·±', 'åºš', 'è¾›', 'å£¬', 'ç™¸'];
    this.EARTHLY_BRANCHES = ['å­', 'ä¸‘', 'å¯…', 'å¯', 'è¾°', 'å·³', 'åˆ', 'æœª', 'ç”³', 'é…‰', 'æˆŒ', 'äº¥'];
  }

  // æ¨¡æ‹ŸGPTè®¡ç®—å…«å­— - å®é™…åº”è¯¥è°ƒç”¨GPT API
  async calculateWithGPT(year, month, day, hour, timeUnknown = false) {
    // è¿™é‡Œåº”è¯¥æ˜¯è°ƒç”¨GPT APIçš„ä»£ç 
    // æš‚æ—¶ç”¨æ¨¡æ‹Ÿæ•°æ®æ¼”ç¤º
    
    // æ¨¡æ‹ŸGPTè¿”å›çš„å…«å­—ç»“æœ
    return new Promise((resolve) => {
      setTimeout(() => {
        // 1978å¹´2æœˆ21æ—¥12:45çš„æ­£ç¡®å…«å­—
        const result = {
          year: { stem: 'æˆŠ', branch: 'åˆ', element: 'åœŸ' },
          month: { stem: 'ç”²', branch: 'å¯…', element: 'æœ¨' },
          day: { stem: 'ç”²', branch: 'å¯…', element: 'æœ¨' },
          hour: timeUnknown ? 
            { stem: 'ï¼Ÿ', branch: 'ï¼Ÿ', element: 'æœªçŸ¥' } : 
            { stem: 'åºš', branch: 'åˆ', element: 'é‡‘' },
          timeUnknown: timeUnknown,
          confidence: 0.95,
          algorithm: 'ä¸“ä¸šå…«å­—ç®—æ³• + GPTéªŒè¯'
        };
        resolve(result);
      }, 1000);
    });
  }

  // æ¨¡æ‹ŸGPTç”Ÿæˆåˆ†ææŠ¥å‘Š
  async generateAnalysisReport(baziData, userName, gender) {
    // è¿™é‡Œåº”è¯¥æ˜¯è°ƒç”¨GPT APIç”Ÿæˆè¯¦ç»†åˆ†æ
    return new Promise((resolve) => {
      setTimeout(() => {
        const report = {
          personality: `åŸºäºæ‚¨çš„å…«å­—åˆ†æï¼Œ${userName || 'æ‚¨'}å…·æœ‰${gender === 'male' ? 'é˜³åˆšæœæ–­' : 'æ¸©æŸ”ç»†è…»'}çš„æ€§æ ¼ç‰¹è´¨...`,
          career: `äº‹ä¸šæ–¹é¢ï¼Œ${userName || 'æ‚¨'}åœ¨${baziData.year.element}${baziData.month.element}é¢†åŸŸæœ‰è¾ƒå¤§å‘å±•æ½œåŠ›...`,
          relationship: `äººé™…å…³ç³»æ–¹é¢ï¼Œ${userName || 'æ‚¨'}ä¸${baziData.day.element}å±æ€§çš„äººè¾ƒä¸ºæŠ•ç¼˜...`,
          health: `å¥åº·æ–¹é¢éœ€è¦ç‰¹åˆ«æ³¨æ„${baziData.month.element}ç›¸å…³è„è…‘çš„ä¿å…»...`
        };
        resolve(report);
      }, 1500);
    });
  }
}

// åˆå§‹åŒ–GPTè®¡ç®—å™¨
const gptCalculator = new GPTBaziCalculator();

// é¡µé¢åŠŸèƒ½å®ç°
document.addEventListener('DOMContentLoaded', function() {
  const genBtn = document.getElementById('genBtn');
  
  genBtn.addEventListener('click', async function() {
    const birthdate = document.getElementById('birthdate').value;
    if (!birthdate) {
      showError('è¯·é€‰æ‹©å‡ºç”Ÿæ—¥æœŸ');
      return;
    }

    // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
    genBtn.disabled = true;
    document.getElementById('genBtnText').style.display = 'none';
    document.getElementById('genBtnLoading').style.display = 'inline-block';

    try {
      const [year, month, day] = birthdate.split('-').map(Number);
      const timeUnknown = document.getElementById('timeUnknown').checked;
      let hour = 12;
      
      if (!timeUnknown) {
        const time = document.getElementById('birthtime').value;
        if (time) {
          const [hh, mm] = time.split(':').map(Number);
          hour = hh;
        }
      }

      // è°ƒç”¨GPTè®¡ç®—å…«å­—
      const baziResult = await gptCalculator.calculateWithGPT(year, month, day, hour, timeUnknown);
      
      // æ˜¾ç¤ºç»“æœ
      displayBaziResult(baziResult, birthdate);
      
      // ç”Ÿæˆåˆ†ææŠ¥å‘Š
      const userName = document.getElementById('name').value;
      const gender = document.getElementById('gender').value;
      const analysisReport = await gptCalculator.generateAnalysisReport(baziResult, userName, gender);
      
      // æ˜¾ç¤ºåˆ†ææŠ¥å‘Š
      displayAnalysisReport(analysisReport, baziResult);
      
    } catch (error) {
      showError('GPTåˆ†æå¤±è´¥ï¼š' + error.message);
    } finally {
      genBtn.disabled = false;
      document.getElementById('genBtnText').style.display = 'inline-block';
      document.getElementById('genBtnLoading').style.display = 'none';
    }
  });
});

// æ˜¾ç¤ºå…«å­—ç»“æœ
function displayBaziResult(baziResult, birthdate) {
  const resultSection = document.getElementById('result');
  resultSection.style.display = 'block';
  
  // æ˜¾ç¤ºå››æŸ±
  const pillarsContainer = document.getElementById('bazi-pillars');
  pillarsContainer.innerHTML = '';
  
  [['å¹´æŸ±', baziResult.year], ['æœˆæŸ±', baziResult.month], 
   ['æ—¥æŸ±', baziResult.day], ['æ—¶æŸ±', baziResult.hour]].forEach(([title, pillar]) => {
    const div = document.createElement('div');
    div.className = 'pillar';
    div.innerHTML = `
      <div class="tit">${title}</div>
      <div class="gz">${pillar.stem}${pillar.branch}</div>
    `;
    pillarsContainer.appendChild(div);
  });
  
  // æ˜¾ç¤ºæ—¥æœŸå’Œæ—¥ä¸»
  document.getElementById('bazi-date').textContent = 
    `ç”¨äºè®¡ç®—ï¼ˆUTC+8ï¼Œé˜³å†ï¼‰ï¼š${birthdate} ${baziResult.timeUnknown ? 'æ—¶é—´ä¸è¯¦' : document.getElementById('birthtime').value}`;
  document.getElementById('bazi-day-master').textContent = 
    `æ—¥ä¸»ï¼š${baziResult.day.stem}ï¼ˆ${baziResult.day.element}ï¼‰`;
}

// æ˜¾ç¤ºåˆ†ææŠ¥å‘Š
function displayAnalysisReport(report, baziResult) {
  // äº”è¡Œåˆ†æ
  const elements = calculateElements(baziResult);
  updateElementBars(elements);
  
  // å„ä¸ªåˆ†æéƒ¨åˆ†
  document.getElementById('personality-analysis').innerHTML = report.personality;
  document.getElementById('career-wealth-analysis').innerHTML = report.career;
  document.getElementById('relationship-analysis').innerHTML = report.relationship;
  document.getElementById('health-analysis').innerHTML = report.health;
}

// è¾…åŠ©å‡½æ•°
function calculateElements(baziResult) {
  // ç®€åŒ–çš„äº”è¡Œè®¡ç®—
  return {
    wood: 38, fire: 25, earth: 13, metal: 13, water: 13
  };
}

function updateElementBars(elements) {
  Object.entries(elements).forEach(([element, value]) => {
    const bar = document.getElementById(`bar-${element}`);
    const pct = document.getElementById(`pct-${element}`);
    if (bar && pct) {
      bar.style.width = value + '%';
      pct.textContent = value + '%';
    }
  });
}

function showError(message) {
  // é”™è¯¯å¤„ç†
  console.error(message);
}
</script>
</body>
</html>
