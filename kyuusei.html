

<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<title data-i18n="title">ä¹æ˜Ÿæ°”å­¦æ·±åº¦åˆ†æ Â· 5XLiving</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600&family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b0f14; --card:#11161dcc; --line:#1f2a36; --text:#e8edf3; --muted:#98a7b7;
  --brand:#d4af37; --gold:#d4af37; --gold2:#f2d27a; --accent:#58b9ff;
  --radius:14px; --shadow:0 8px 30px rgba(0,0,0,.35);
  --card-w:128px; --card-h:212px; --gap:14px;
}
@media (max-width:640px){ :root{ --card-w:100px; --card-h:168px; --gap:10px; } }

html,body{height:100%}
body{
  margin:0; color:var(--text);
  background: radial-gradient(1200px 600px at 70% -10%, #16202b 10%, transparent 60%) no-repeat,
              linear-gradient(180deg,#0b0f14,#0b0f14);
  font-family: Inter,system-ui,-apple-system,"Noto Sans SC","Segoe UI",Roboto,Arial,sans-serif;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  overflow-x: hidden;
}
body::before{
  content:"";
  position:fixed;
  inset:0;
  z-index:-2;
  background: linear-gradient(rgba(11, 15, 20, 0.85), rgba(11, 15, 20, 0.9)), 
              radial-gradient(circle at 20% 80%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
              radial-gradient(circle at 80% 20%, rgba(88, 185, 255, 0.05) 0%, transparent 50%);
}
.container{max-width:1100px;margin:0 auto;padding:24px 16px 80px}

  /* â€”â€” å¤´éƒ¨ï¼ˆTarot åŒæ¬¾ï¼‰ â€”â€” */
  .site-header{
    position:sticky;
    top:0;
    z-index:10;
    background:#0b0f14cc;
    border-bottom:1px solid #0f1622;
    backdrop-filter:saturate(140%) blur(12px);
    transition: all 0.3s ease;
  }
  .site-header.scrolled {
    background: rgba(11, 15, 20, 0.95);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  }
  .head-inner{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:14px;
    padding:14px 16px;
  }
  
.brand{display:flex; align-items:center; gap:10px; text-decoration:none; color:var(--text)}
.brand-badge{
  display:inline-grid; 
  place-items:center; 
  width:34px; 
  height:34px; 
  border-radius:8px; 
  background:linear-gradient(180deg,#0e1520,#0b1018); 
  border:1px solid #2a3546; 
  box-shadow:0 4px 14px rgba(0,0,0,.35); 
  font-weight:800; 
  color:#ffe084;
  transition: all 0.3s ease;
}
.brand:hover .brand-badge {
  transform: rotate(15deg);
  box-shadow: 0 6px 20px rgba(212, 175, 55, 0.3);
}
.title{
  font-family:"Noto Serif SC","Noto Serif",serif !important;
  font-weight:600 !important;
  letter-spacing:.02em;
  font-size:1.1rem !important;
  line-height:1.25;
}

.title{
  font-family:"Noto Serif SC","Noto Serif",serif !important;
  font-weight:600 !important;
  letter-spacing:.02em;
  font-size:1.1rem !important;
  line-height:1.25;
}

/* æ–°å¢ï¼šé¼ æ ‡åœ¨æ•´æ¡ brand ä¸Šæ—¶ï¼Œé«˜äº®æ ‡é¢˜ */
.brand:hover .title {
  color: var(--gold);
}
.lang{display:flex; align-items:center; gap:8px}
.lang label{white-space:nowrap; color:var(--muted); margin-right:4px}
.lang select{
  appearance:none; 
  min-width:170px; 
  border-radius:10px; 
  border:1px solid #243244; 
  background:#0e1520; 
  color:var(--text); 
  padding:10px 34px 10px 12px; 
  font-size:.95rem; 
  background-image:url("data:image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2398a7b7' stroke-width='2' fill='none'/%3E%3C/svg%3E"); 
  background-repeat:no-repeat; 
  background-position:calc(100% - 12px) 50%;
  transition: all 0.3s ease;
}
.lang select:focus {
  outline: none;
  border-color: var(--gold);
  box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
}
@media (max-width:520px){ .title{font-size:1rem} .lang select{min-width:140px} }

/* å°å±æ—¶è®©å³ä¾§è¯­è¨€ä¸æŒ¤æ¢è¡Œå¾—å¤ªéš¾çœ‹ */
@media (max-width: 520px){
  .head-inner{
    gap: 8px;
  }
  .lang select{
    min-width: 140px;
  }
}
  
  .section{margin-top:18px}
  .card{
    background:var(--card);
    border:1px solid var(--line);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    backdrop-filter:blur(10px);
    padding:18px;
    margin:16px 0;
  }
  .h2{
    font-size:1.2rem;margin:0 0 12px;
    font-weight:800;color:#ffe084;
    display:flex;gap:8px;align-items:center
  }
  .h2::before{
    content:"";width:4px;height:18px;
    background:var(--brand);border-radius:2px
  }

  .row{display:grid;gap:12px}
  @media(min-width:760px){
    .row.cols-3{grid-template-columns:1fr 1fr 1fr}
    .row.cols-2{grid-template-columns:1fr 1fr}
  }

  input,select,textarea{
    width:100%;box-sizing:border-box;border-radius:12px;
    border:1px solid #243244;background:#0e1520;color:var(--text);
    padding:12px 12px;font-size:15px;outline:none;
  }
  input::placeholder{color:#6f8092}
  .btn{
    display:inline-grid;place-items:center;
    padding:12px 16px;border-radius:12px;
    border:1px solid #e6c76e;
    background:linear-gradient(180deg,#fff9e6,#e6c76e);
    color:#191919;font-weight:800;cursor:pointer
  }
  .btn:hover{transform:translateY(-1px);box-shadow:0 10px 22px rgba(230,199,110,.5)}
  .btn[disabled]{opacity:.6;cursor:not-allowed}
  .btn.ghost{
    background:transparent;color:var(--gold2);
    border:1px solid rgba(212,175,55,.45);box-shadow:none
  }
  .btn.block{display:block;width:100%}
  .muted{color:var(--muted)}
  .badge{
    display:inline-block;padding:4px 8px;margin:2px 4px 2px 0;
    background:rgba(212,175,55,.15);
    border:1px solid rgba(212,175,55,.3);
    border-radius:6px;font-size:.85rem
  }

  /* æ·±åº¦åˆ†æå¸ƒå±€ */
  .analysis-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 16px;
    margin-top: 20px;
  }
  @media (min-width: 768px) {
    .analysis-grid {
      grid-template-columns: 1fr 1fr;
    }
  }
  .analysis-card {
    background: linear-gradient(145deg, rgba(17,22,29,0.9), rgba(12,16,22,0.9));
    border: 1px solid var(--line);
    border-radius: var(--radius);
    padding: 20px;
    position: relative;
  }
  .analysis-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
  }
  .analysis-title {
    font-family: "Noto Serif SC", serif;
    font-weight: 600;
    color: var(--gold2);
    margin-bottom: 12px;
    font-size: 1.1rem;
  }
  .analysis-content {
    line-height: 1.6;
    font-size: 0.95rem;
  }

  .element-chart {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 8px;
    margin: 15px 0;
  }
  .element-item {
    text-align: center;
    padding: 10px 5px;
    border-radius: 8px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
  }
  .element-item.strong {
    background: rgba(212,175,55,0.2);
    border-color: var(--gold);
  }
  .element-name {
    font-weight: 600;
    margin-bottom: 4px;
  }
  .element-value {
    font-size: 0.9rem;
    color: var(--muted);
  }

  /* è¿åŠ¿æ—¶é—´çº¿ */
  .timeline { position: relative; padding-left: 20px; }
  .timeline::before {
    content: '';
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 2px;
    background: linear-gradient(180deg, var(--gold), transparent);
  }
  .timeline-item {
    position: relative;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
  }
  .timeline-item::before {
    content: '';
    position: absolute;
    left: -24px; top: 6px;
    width: 8px;height: 8px;border-radius: 50%;
    background: var(--gold);
  }
  .timeline-period {
    font-weight: 600;
    color: var(--gold2);
    margin-bottom: 5px;
  }

  /* ä¸“ä¸šå»ºè®® */
  .advice-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 16px;
    margin-top: 20px;
  }
  .advice-card {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 10px;
    padding: 16px;
    transition: all 0.3s ease;
  }
  .advice-card:hover {
    border-color: var(--gold);
    transform: translateY(-2px);
  }
  .advice-category {
    font-weight: 600;
    color: var(--gold2);
    margin-bottom: 8px;
    font-size: 0.95rem;
  }

  .analysis-type-indicator {
    display: inline-block;
    padding: 4px 12px;
    background: rgba(212,175,55,0.2);
    border: 1px solid var(--gold);
    border-radius: 20px;
    font-size: 0.85rem;
    color: var(--gold2);
    margin-left: 10px;
  }

  /* Butler AI + æŠ¥å‘Š sec æ ·å¼ */
  .report{margin-top:12px;display:grid;gap:10px}
  .report .sec{
    padding:12px;border:1px solid var(--line);
    background:#0e1520;border-radius:12px
  }
  .report .sec h3{
    margin:0 0 6px;color:var(--gold2);font-size:1.05rem
  }
  .report p,.report li{line-height:1.7}

  /* VIP åŒºåŸŸå¸ƒå±€ï¼ˆä¿ç•™ï¼‰ */
  .columns{display:grid;gap:12px;grid-template-columns:1fr}
  @media(min-width:900px){ .columns{grid-template-columns:1fr 1fr} }
  .list-block{
    border:1px solid #263448;
    background:#0e1520;
    border-radius:12px;padding:16px
  }
  .list-block ul{margin:.2rem 0 0;padding-left:1.1rem}
  .group-title{
    font-size:1.05rem;color:#ffe084;
    margin:6px 0 14px
  }
  .astro-auth{
    max-width:980px;margin:28px auto;
    padding:20px 18px;
    background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01));
    border:1px solid rgba(212,175,55,.22);
    border-radius:14px;
    box-shadow:0 18px 50px rgba(0,0,0,.35)
  }
  .auth-grid{display:grid;gap:18px;grid-template-columns:1.2fr .8fr}
  @media(max-width:860px){ .auth-grid{grid-template-columns:1fr} }
  .panel{
    background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01));
    border:1px solid rgba(212,175,55,.22);
    border-radius:14px;
    box-shadow:0 10px 30px rgba(0,0,0,.35)
  }
  .panel .head{
    padding:16px 18px;border-bottom:1px solid rgba(212,175,55,.22);
    color:var(--gold);font-weight:700;letter-spacing:.3px
  }
  .panel .body{padding:18px; overflow:hidden;}
  .spacer{height:12px}

  footer{
    color:#6c7b8c;font-size:.85rem;
    text-align:center;padding:30px 0
  }

  /* Butler chips / skeleton */
  .ai-content{white-space:pre-wrap;line-height:1.7}
  .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
  .chip{
    padding:6px 10px;border-radius:999px;
    border:1px solid #2a3546;background:#0e1520;
    color:#e8edf3;cursor:pointer
  }
  .chip:hover{border-color:#f2d27a;box-shadow:0 0 0 2px rgba(242,210,122,.15) inset}
  .skeleton{display:grid;gap:8px}
  .skeleton div{
    height:12px;border-radius:6px;
    background:linear-gradient(90deg,#1a2431,#1f2b3b,#1a2431);
    animation:sh 1.2s infinite
  }
  @keyframes sh{0%{opacity:.5}50%{opacity:1}100%{opacity:.5}}

  .sr-only{
    position:absolute !important;
    width:1px;height:1px;padding:0;margin:-1px;
    overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;
  }

.ss-chat-fab{
  position:fixed;right:18px;bottom:18px;z-index:50;width:56px;height:56px;border-radius:50%;
  background:linear-gradient(180deg,#fff9e6,#e6c76e);color:#191919;display:grid;place-items:center;font-weight:800;
  box-shadow:0 8px 30px rgba(0,0,0,.35);cursor:pointer;border:1px solid #e6c76e
}
.ss-chat-panel{
  position:fixed;right:18px;bottom:88px;z-index:50;width:min(460px,92vw);display:none;
  background:#0e1520;border:1px solid #243244;border-radius:14px;box-shadow:var(--shadow)
}

  .ss-chat-head{
  display:flex;align-items:center;justify-content:space-between;
  padding:10px 12px;border-bottom:1px solid #243244;
  background:#0b1018;border-radius:14px 14px 0 0;
}
.ss-chat-title{font-weight:600;color:#ffe084;font-size:.95rem}
.ss-close{
  border:none;background:transparent;color:#98a7b7;cursor:pointer;font-size:1rem;
}
.ss-chat-body{
  max-height:360px;min-height:160px;
  padding:10px 12px;overflow-y:auto;
  font-size:.9rem;line-height:1.6;
}
.ss-chat-input{
  display:flex;gap:8px;
  padding:10px;border-top:1px solid #243244;
  background:#0b1018;border-radius:0 0 14px 14px;
}
.ss-chat-input input{
  flex:1;border-radius:999px;border:1px solid #243244;
  background:#0e1520;color:var(--text);padding:8px 12px;font-size:.9rem;
}
.ss-chat-input .btn{
  padding:8px 14px;border-radius:999px;font-size:.9rem;
  white-space:nowrap;
}

.chat-bubble{
  display:inline-block;max-width:90%;
  padding:8px 10px;border-radius:10px;
  margin:4px 0;font-size:.9rem;
}
.chat-bubble.user{
  margin-left:auto;display:block;
  background:linear-gradient(180deg,#fff9e6,#e6c76e);
  color:#191919;
}
.chat-bubble.bot{
  background:#141c29;border:1px solid #243244;
}
  
  /* å°å±ä¼˜åŒ– */
  @media (max-width:520px){
    .title{font-size:1rem}
    .lang select{min-width:140px}
  }

  /* æ ¹å­—å·ä¸æ ‡é¢˜ç»Ÿä¸€ */
  html { font-size: 16px; }
  @media (min-width: 768px){ html { font-size: 17px; } }
  @media (min-width: 1200px){ html { font-size: 18px; } }
  .site-header .brand .title,
  .site-header .title{
    font-family: "Noto Serif SC","Noto Serif",serif !important;
    font-weight: 600 !important;
    letter-spacing: .02em;
    font-size: 1.1rem !important;
    line-height: 1.25;
  }
</style>
</head>
<body>
<header class="site-header">
  <div class="container head-inner">
    <!-- å·¦ä¾§å“ç‰Œ -->
    <a class="brand" href="https://astro.5xliving.com" target="_self" rel="nofollow">
      <span class="brand-badge">5X</span>
      <span class="title">5xLiving Â· <span data-i18n="brand">Soul Sanctuary</span></span>
    </a>

    <!-- å³ä¾§è¯­è¨€é€‰æ‹© -->
    <div class="lang">
      <label for="langSelect" class="muted" data-i18n="lang_label">è¯­è¨€</label>
      <select id="langSelect" aria-label="Language">
        <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
        <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
        <option value="en">English</option>
        <option value="ja-JP">æ—¥æœ¬èª</option>
        <option value="th-TH">à¹„à¸—à¸¢</option>
        <option value="ms">Bahasa Melayu</option>
      </select>
    </div>
  </div>
</header>

<main class="container">
  <!-- ä¸“ä¸šåˆ†æè¡¨å• -->
  <div class="card">
    <div class="h2" data-i18n="form_title">ä¹æ˜Ÿæ°”å­¦ Â· ä¸“ä¸šå‘½ç†åˆ†æ</div>
    <div class="row cols-3">
      <div>
        <label class="muted" data-i18n="birth_label">å‡ºç”Ÿæ—¥æœŸ</label>
        <input type="date" id="birthdate">
      </div>
      <div>
        <label class="muted" data-i18n="gender_label">æ€§åˆ«</label>
        <select id="gender">
          <option value="male" data-i18n="gender_male">ç”·æ€§</option>
          <option value="female" data-i18n="gender_female">å¥³æ€§</option>
        </select>
      </div>
      <div>
        <label class="muted" data-i18n="analysis_type">åˆ†æç±»å‹</label>
        <select id="analysisType">
          <option value="comprehensive" data-i18n="analysis_type_comprehensive">ç»¼åˆå‘½ç†åˆ†æ</option>
          <option value="career" data-i18n="analysis_type_career">äº‹ä¸šè´¢è¿ä¸“é¡¹</option>
          <option value="relationship" data-i18n="analysis_type_relationship">æ„Ÿæƒ…å©šå§»ä¸“é¡¹</option>
          <option value="health" data-i18n="analysis_type_health">å¥åº·è¿åŠ¿ä¸“é¡¹</option>
        </select>
      </div>
    </div>
    <div style="margin-top:16px">
      <button id="go" class="btn block" data-i18n="btn_gen">ç”Ÿæˆä¸“ä¸šåˆ†ææŠ¥å‘Š</button>
    </div>
    <div class="muted" style="margin-top:8px;font-size:0.85rem" id="nowInfo"></div>
  </div>

  <!-- ä¸»æ˜Ÿåˆ†æ -->
  <div id="starCard" class="section card" style="display:none">
    <div class="h2">
      <span data-i18n="sec_star">æ‚¨çš„ä¹æ˜Ÿå‘½ç›˜åˆ†æ</span>
      <span class="analysis-type-indicator" id="analysisTypeIndicator"></span>
    </div>
    <div class="row cols-2">
      <div>
        <h3 style="color:var(--gold2); margin-bottom:12px;" data-i18n="sec_star_main">æœ¬å‘½ä¸»æ˜Ÿ</h3>
        <p><strong id="starName"></strong>ï¼ˆ<span id="starJP"></span>ï¼‰</p>
        <div id="starBadges" style="margin:12px 0"></div>
        <div id="starAbout" class="muted"></div>
      </div>
      <div>
        <h3 style="color:var(--gold2); margin-bottom:12px;" data-i18n="sec_star_elements">äº”è¡Œèƒ½é‡åˆ†å¸ƒ</h3>
        <div class="element-chart" id="elementChart"></div>
        <div id="elementAnalysis" class="muted" style="font-size:0.9rem; line-height:1.5"></div>
      </div>
    </div>
  </div>

  <!-- æ·±åº¦åˆ†æ -->
  <div id="analysisCard" class="section card" style="display:none">
    <div class="h2" data-i18n="sec_deep">æ·±åº¦å‘½ç†è§£è¯»</div>
    <div class="analysis-grid">
      <div class="analysis-card">
        <div class="analysis-title" data-i18n="sec_personality">æ€§æ ¼ç‰¹è´¨åˆ†æ</div>
        <div class="analysis-content" id="personalityAnalysis"></div>
      </div>
      <div class="analysis-card">
        <div class="analysis-title" data-i18n="sec_talent">å¤©èµ‹æ½œèƒ½</div>
        <div class="analysis-content" id="talentAnalysis"></div>
      </div>
      <div class="analysis-card">
        <div class="analysis-title" data-i18n="sec_challenge">äººç”Ÿè¯¾é¢˜</div>
        <div class="analysis-content" id="challengeAnalysis"></div>
      </div>
      <div class="analysis-card">
        <div class="analysis-title" data-i18n="sec_development">å‘å±•å»ºè®®</div>
        <div class="analysis-content" id="developmentAdvice"></div>
      </div>
    </div>
  </div>

  <!-- ä¸“é¡¹åˆ†æ -->
  <div id="specializedCard" class="section card" style="display:none">
    <div class="h2" id="specializedTitle">ä¸“é¡¹æ·±åº¦åˆ†æ</div>
    <div class="analysis-grid">
      <div class="analysis-card">
        <div class="analysis-title" id="specializedSubtitle1">æ ¸å¿ƒåˆ†æ</div>
        <div class="analysis-content" id="specializedContent1"></div>
      </div>
      <div class="analysis-card">
        <div class="analysis-title" id="specializedSubtitle2">å…³é”®æœºé‡</div>
        <div class="analysis-content" id="specializedContent2"></div>
      </div>
      <div class="analysis-card">
        <div class="analysis-title" id="specializedSubtitle3">é£é™©æç¤º</div>
        <div class="analysis-content" id="specializedContent3"></div>
      </div>
      <div class="analysis-card">
        <div class="analysis-title" id="specializedSubtitle4">è¡ŒåŠ¨æŒ‡å—</div>
        <div class="analysis-content" id="specializedContent4"></div>
      </div>
    </div>
  </div>

  <!-- è¿åŠ¿åˆ†æ -->
  <div id="fortuneCard" class="section card" style="display:none">
    <div class="h2" data-i18n="sec_fortune">è¿åŠ¿èµ°åŠ¿åˆ†æ</div>
    <div class="timeline" id="fortuneTimeline"></div>
  </div>

  <!-- ä¸“ä¸šå»ºè®® -->
  <div id="adviceCard" class="section card" style="display:none">
    <div class="h2" data-i18n="sec_advice">ä¸“ä¸šè°ƒæ•´å»ºè®®</div>
    <div class="advice-grid">
      <div class="advice-card">
        <div class="advice-category" data-i18n="advice_direction">æ–¹ä½è°ƒæ•´</div>
        <div id="directionAdvice"></div>
      </div>
      <div class="advice-card">
        <div class="advice-category" data-i18n="advice_color">è‰²å½©è¿ç”¨</div>
        <div id="colorAdvice"></div>
      </div>
      <div class="advice-card">
        <div class="advice-category" data-i18n="advice_career">èŒä¸šå‘å±•</div>
        <div id="careerAdvice"></div>
      </div>
      <div class="advice-card">
        <div class="advice-category" data-i18n="advice_relationship">äººé™…å…³ç³»</div>
        <div id="relationshipAdvice"></div>
      </div>
    </div>
  </div>

  <!-- Butler AI è§£è¯»ï¼ˆå¹³é¢ GPT åŒºï¼‰ -->
  <div id="aiCard" class="section card" style="display:none">
    <div class="h2" data-i18n="sec_ai">å¿ƒæ€œç®¡å®¶è§£è¯»ä¸å»ºè®®</div>
    <pre id="aiText" class="ai-content"></pre>
    <div id="aiChips" class="chips"></div>
    <div id="aiReco" style="margin-top:10px"></div>
  </div>

  <!-- ä¼šå‘˜ä¸“åŒºï¼ˆåŸæ ·ä¿ç•™ï¼‰ -->
  <section class="card section">
    <h2 class="group-title" data-i18n="vip_title">ğŸŒ™ ä¼šå‘˜åŒºåŸŸ VIP Segment</h2>
    <div class="columns">
      <div class="list-block">
        <div class="group-title" data-i18n="vip_mingli">ğŸ— å‘½ç†ç©ºé—´ä¸“å±å†…å®¹</div>
        <ul>
          <li data-i18n="vip_love">å§»ç¼˜æ–¹å‘ï¼šæ‹çˆ±ç¼˜åˆ†ã€å©šå§»èµ°åŠ¿</li>
          <li data-i18n="vip_career">äº‹ä¸šæ–¹å‘ï¼šèŒåœºå‘å±•ã€åˆ›ä¸šæ½œåŠ›</li>
          <li data-i18n="vip_wealth">è´¢è¿æ–¹å‘ï¼šè´¢ä½åˆ†æã€ç†è´¢æ—¶æœº</li>
          <li data-i18n="vip_pet">å® ç‰©å‘½ç†ï¼šä¼´ä¾£åŠ¨ç‰©çš„æ€§æ ¼ä¸ç¼˜åˆ†</li>
          <li data-i18n="vip_hepan">åˆç›˜åˆ†æï¼šå©šæœŸæ‹©æ—¥ã€æ–°ç”Ÿæ‹©æ—¶</li>
          <li data-i18n="vip_name">æµ‹ååˆ†æï¼šå…¬å¸åã€å®å®åã€å‘½åæ”¹è¿</li>
          <li data-i18n="vip_fengshui">è´¢ä½åˆç›˜ï¼šä½å®¶ / åŠå…¬å®¤åŠ¨çº¿é…åˆ</li>
        </ul>
      </div>
      <div class="list-block">
        <div class="group-title" data-i18n="vip_xinlian">ğŸŒ™ å¿ƒæ€œç©ºé—´ä¸“å±å†…å®¹</div>
        <ul>
          <li data-i18n="vip_record">çµæ€§è®°å½•ï¼šç…§ç‰‡ã€æ¢¦å¢ƒã€å£°éŸ³ã€æ„¿æœ›ç¥ˆç¥·</li>
          <li data-i18n="vip_course">å‘½ç†è¯¾ç¨‹ï¼šå…«å­— / å¡”ç½— / å æ˜Ÿ / çµæ•° / äººç±»å›¾</li>
          <li data-i18n="vip_memorial">å®¶æ—çºªå¿µç³»ç»Ÿï¼šäº²äººçµæ€§çºªå¿µ & å»¶ç»­</li>
          <li data-i18n="vip_tasks">æ¯å‘¨èƒ½é‡ç»ƒä¹  / ç¥æ˜ä»ªå¼ä»»åŠ¡</li>
          <li data-i18n="vip_shop">èƒ½é‡å•†åŸä¸“å±æŠ˜æ‰£ & å¾¡å®ˆè®¢åˆ¶</li>
        </ul>
      </div>
    </div>

    <div class="group-title" style="margin-top:14px" data-i18n="login_title">ğŸ’ ç™»å…¥ VIP åŠŸèƒ½</div>

    <section class="astro-auth">
      <div class="auth-grid">
        <!-- å·¦ä¾§ï¼šè¾“å…¥ + æ³¨å†Œ/ç™»å½• -->
        <div class="panel">
          <div class="head" data-i18n="panel_login_head">è´¦æˆ·ç™»å½• / æ³¨å†Œ</div>
          <div class="body">
            <div class="row" id="authFields">
              <label for="email" class="sr-only" data-i18n="ph_email">é‚®ç®± Email</label>
              <input
                id="email"
                name="email"
                type="email"
                inputmode="email"
                autocomplete="username"
                placeholder=""
                data-i18n-ph="ph_email"
                required
              />
              <label for="password" class="sr-only" data-i18n="ph_label_password">å¯†ç  Password</label>
              <input
                id="password"
                name="password"
                type="password"
                autocomplete="current-password"
                placeholder="å¯†ç  Passwordï¼ˆè‡³å°‘8ä½ï¼Œå«å¤§å°å†™æ•°å­—ç¬¦å·ï¼‰"
                data-i18n-ph="ph_password"
                required
              />
            </div>
            <div class="spacer"></div>
            <form id="loginForm" class="row one">
              <button class="btn block" id="loginBtn" type="submit" data-i18n="btn_login">ç™»å…¥è´¦æˆ·</button>
            </form>
            <div class="spacer"></div>
            <div class="row one">
              <button class="btn ghost block" id="resetBtn" type="button" data-i18n="btn_reset">ğŸ”‘ é‡è®¾å¯†ç </button>
            </div>
            <div class="spacer"></div>
            <form class="row one" id="registerForm">
              <button class="btn block" id="registerBtn" type="submit" data-i18n="btn_register">æ³¨å†Œè´¦æˆ·</button>
              <div class="muted" data-i18n="note_price">æ³¨å†Œè´¦å·èµ é€ä¸€æ¬¡å…è´¹ä½“éªŒ</div>
              <div class="spacer"></div>
              <div class="error-message" id="authError" style="display:none"></div>
            </form>
          </div>
        </div>

        <!-- å³ä¾§ï¼šä¼šå‘˜ä¸è¿”å› -->
        <div class="panel">
          <div class="head" data-i18n="panel_member_head">ä¼šå‘˜æœåŠ¡</div>
          <div class="body">
            <div class="row one">
              <a class="btn btn-gold block" href="https://yourshopifyshop.com/products/monthly-vip" target="_blank" rel="noopener noreferrer" data-i18n="btn_upgrade">ğŸ’ å‡çº§ä¸º VIPï¼ˆæœˆè´¹ï¼‰</a>
            </div>
            <div class="spacer"></div>
            <div class="row one">
              <a class="btn ghost block" href="https://yourshopifyshop.myshopify.com" target="_blank" rel="noopener noreferrer" data-i18n="btn_backshop">â† è¿”å›å‘½ç†å•†åŸ</a>
            </div>
            <div class="spacer"></div>
            <div class="muted" data-i18n="note_price1">$9.9 / æœˆè´¹ VIPï¼ˆå‘½ç†ç©ºé—´ + å¿ƒæ€œç©ºé—´ + çµæ€§è¯¾ç¨‹ï¼‰</div>
          </div>
        </div>
      </div>
    </section>
  </section>

  <footer>Â© 5XLiving â€¢ Astro Sanctuary</footer>
</main>

<!-- æµ®åŠ¨èŠå¤©æŒ‰é’® -->
<button class="ss-chat-fab" id="ssChatFab" type="button" aria-label="å¿ƒæ€œç®¡å®¶">
  <span data-i18n="chat_fab">é—®</span>
</button>

<!-- æµ®åŠ¨èŠå¤©é¢æ¿ -->
<div class="ss-chat-panel" id="ssChatPanel" role="dialog" aria-modal="true" aria-labelledby="ssChatTitle">
  <div class="ss-chat-head">
    <div class="ss-chat-title" id="ssChatTitle" data-i18n="chat_title">å¿ƒæ€œç®¡å®¶ Â· Chat</div>
    <button class="ss-close" id="ssChatClose" type="button">âœ•</button>
  </div>
  <div class="ss-chat-body" id="ssChatBody"></div>
  <div class="ss-chat-input">
    <input
      id="ssChatInput"
      type="text"
      data-i18n-ph="chat_placeholder"
      placeholder="è¯·é—®æ‚¨æƒ³äº†è§£ä»€ä¹ˆï¼Ÿï¼ˆå¦‚ï¼šå¦‚ä½•å¼€å§‹å…è´¹ä½“éªŒï¼‰"
    />
    <button class="btn" id="ssChatSend" type="button" data-i18n="chat_send">å‘é€</button>
  </div>
</div>  

<script>  
/* ===== åŸºæœ¬é…ç½® ===== */
const API_BASE = 'https://throbbing-lab-1440.hello5xliving.workers.dev';
const LANG_KEY = '5x_lang';

/* å·¥å…· */
const $  = id => document.getElementById(id);
const getLang = () => localStorage.getItem(LANG_KEY) || document.documentElement.lang || 'zh-CN';
const setLang = v => {
  localStorage.setItem(LANG_KEY, v);
  document.documentElement.lang = v;
};

/* ===== i18n è¯åº“ ===== */
const i18n = {
  "zh-CN": {
    brand:'5xLiving Â· å‘½ç†å¿ƒæ€œç©ºé—´ Â· Soul Sanctuary', 
    title:"ä¹æ˜Ÿæ°”å­¦æ·±åº¦åˆ†æ Â· 5XLiving",
    title_kyuusei_brief:"ä¹æ˜Ÿæ°”å­¦æ·±åº¦åˆ†æ",
    lang_label:"è¯­è¨€",
    form_title:"ä¹æ˜Ÿæ°”å­¦ Â· ä¸“ä¸šå‘½ç†åˆ†æ",
    birth_label:"å‡ºç”Ÿæ—¥æœŸ",
    gender_label:"æ€§åˆ«",
    gender_male:"ç”·æ€§",
    gender_female:"å¥³æ€§",
    analysis_type:"åˆ†æç±»å‹",
    analysis_type_comprehensive:"ç»¼åˆå‘½ç†åˆ†æ",
    analysis_type_career:"äº‹ä¸šè´¢è¿ä¸“é¡¹",
    analysis_type_relationship:"æ„Ÿæƒ…å©šå§»ä¸“é¡¹",
    analysis_type_health:"å¥åº·è¿åŠ¿ä¸“é¡¹",
    btn_gen:"ç”Ÿæˆä¸“ä¸šåˆ†ææŠ¥å‘Š",
    now_info_prefix:"å½“å‰ç³»ç»Ÿæ—¶é—´ï¼š",
    sec_star:"æ‚¨çš„ä¹æ˜Ÿå‘½ç›˜åˆ†æ",
    sec_star_main:"æœ¬å‘½ä¸»æ˜Ÿ",
    sec_star_elements:"äº”è¡Œèƒ½é‡åˆ†å¸ƒ",
    sec_deep:"æ·±åº¦å‘½ç†è§£è¯»",
    sec_personality:"æ€§æ ¼ç‰¹è´¨åˆ†æ",
    sec_talent:"å¤©èµ‹æ½œèƒ½",
    sec_challenge:"äººç”Ÿè¯¾é¢˜",
    sec_development:"å‘å±•å»ºè®®",
    sec_fortune:"è¿åŠ¿èµ°åŠ¿åˆ†æ",
    sec_advice:"ä¸“ä¸šè°ƒæ•´å»ºè®®",
    advice_direction:"æ–¹ä½è°ƒæ•´",
    advice_color:"è‰²å½©è¿ç”¨",
    advice_career:"èŒä¸šå‘å±•",
    advice_relationship:"äººé™…å…³ç³»",
    sec_ai:"å¿ƒæ€œç®¡å®¶è§£è¯»ä¸å»ºè®®",

    spec_title:"ä¸“é¡¹æ·±åº¦åˆ†æ",
    spec_core:"æ ¸å¿ƒåˆ†æ",
    spec_opportunity:"å…³é”®æœºé‡",
    spec_risk:"é£é™©æç¤º",
    spec_action:"è¡ŒåŠ¨æŒ‡å—",

    badge_elem:"äº”è¡Œ", badge_color:"è‰²", badge_kw:"å…³é”®è¯",
    about_label:"æ€§æ ¼å€¾å‘",

    please_birth:"è¯·å…ˆé€‰æ‹©å‡ºç”Ÿæ—¥æœŸ",
    bad_date:"æ—¥æœŸæ ¼å¼æœ‰è¯¯",
    generating:"æ­£åœ¨ç”Ÿæˆè§£è¯»â€¦",
    retry:"æŠ±æ­‰ï¼Œæš‚æ—¶æ— æ³•ç”Ÿæˆï¼Œè¯·ç¨åå†è¯•ã€‚",
    neterr:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•ã€‚",

    vip_title:"ğŸŒ™ ä¼šå‘˜åŒºåŸŸ VIP Segment",
    vip_mingli:"ğŸ— å‘½ç†ç©ºé—´ä¸“å±å†…å®¹",
    vip_xinlian:"ğŸŒ™ å¿ƒæ€œç©ºé—´ä¸“å±å†…å®¹",
    vip_love:"å§»ç¼˜æ–¹å‘ï¼šæ‹çˆ±ç¼˜åˆ†ã€å©šå§»èµ°åŠ¿",
    vip_career:"äº‹ä¸šæ–¹å‘ï¼šèŒåœºå‘å±•ã€åˆ›ä¸šæ½œåŠ›",
    vip_wealth:"è´¢è¿æ–¹å‘ï¼šè´¢ä½åˆ†æã€ç†è´¢æ—¶æœº",
    vip_pet:"å® ç‰©å‘½ç†ï¼šä¼´ä¾£åŠ¨ç‰©çš„æ€§æ ¼ä¸ç¼˜åˆ†",
    vip_hepan:"åˆç›˜åˆ†æï¼šå©šæœŸæ‹©æ—¥ã€æ–°ç”Ÿæ‹©æ—¶",
    vip_name:"æµ‹ååˆ†æï¼šå…¬å¸åã€å®å®åã€å‘½åæ”¹è¿",
    vip_fengshui:"è´¢ä½åˆç›˜ï¼šä½å®¶ / åŠå…¬å®¤åŠ¨çº¿é…åˆ",
    vip_record:"çµæ€§è®°å½•ï¼šç…§ç‰‡ã€æ¢¦å¢ƒã€å£°éŸ³ã€æ„¿æœ›ç¥ˆç¥·",
    vip_course:"å‘½ç†è¯¾ç¨‹ï¼šå…«å­— / å¡”ç½— / å æ˜Ÿ / çµæ•° / äººç±»å›¾",
    vip_memorial:"å®¶æ—çºªå¿µç³»ç»Ÿï¼šäº²äººçµæ€§çºªå¿µ & å»¶ç»­",
    vip_tasks:"æ¯å‘¨èƒ½é‡ç»ƒä¹  / ç¥æ˜ä»ªå¼ä»»åŠ¡",
    vip_shop:"èƒ½é‡å•†åŸä¸“å±æŠ˜æ‰£ & å¾¡å®ˆè®¢åˆ¶",
    login_title:"ğŸ’ ç™»å…¥ VIP åŠŸèƒ½",

    ph_email:"é‚®ç®± Email",
    ph_password:"å¯†ç  Passwordï¼ˆè‡³å°‘8ä½ï¼Œå«å¤§å°å†™æ•°å­—ç¬¦å·ï¼‰",
    ph_label_password:"å¯†ç  Password",
    panel_login_head:"è´¦æˆ·ç™»å½• / æ³¨å†Œ",
    panel_member_head:"ä¼šå‘˜æœåŠ¡",
    btn_login:"ç™»å…¥è´¦æˆ·",
    btn_reset:"ğŸ”‘ é‡è®¾å¯†ç ",
    btn_register:"æ³¨å†Œè´¦æˆ·",
    btn_upgrade:"ğŸ’ å‡çº§ä¸º VIPï¼ˆæœˆè´¹ï¼‰",
    btn_backshop:"â† è¿”å›å‘½ç†å•†åŸ",
    note_price:"æ³¨å†Œè´¦å·èµ é€ä¸€æ¬¡å…è´¹ä½“éªŒ",
    note_price1:"$9.9 / æœˆè´¹ VIPï¼ˆå‘½ç†ç©ºé—´ + å¿ƒæ€œç©ºé—´ + çµæ€§è¯¾ç¨‹ï¼‰",

    chip_career:"äº‹ä¸š",
    chip_love:"æ„Ÿæƒ…",
    chip_money:"è´¢è¿",
    chip_list:"ä»Šæ—¥å¾…åŠ",
    chip_30d:"30å¤©å»ºè®®",

    chat_fab:"é—®",
    chat_title:"å¿ƒæ€œç®¡å®¶ Â· Chat",
    chat_placeholder:"è¯·é—®æ‚¨æƒ³äº†è§£ä»€ä¹ˆï¼Ÿï¼ˆå¦‚ï¼šå¦‚ä½•å¼€å§‹å…è´¹ä½“éªŒï¼‰",
    chat_send:"å‘é€",
  },

  "zh-TW": {
    brand:'5xLiving Â· å‘½ç†å¿ƒæ€œç©ºé—´ Â· Soul Sanctuary', 
    title:"ä¹æ˜Ÿæ°£å­¸æ·±åº¦åˆ†æ Â· 5XLiving",
    title_kyuusei_brief:"ä¹æ˜Ÿæ°£å­¸æ·±åº¦åˆ†æ",
    lang_label:"èªè¨€",
    form_title:"ä¹æ˜Ÿæ°£å­¸ Â· å°ˆæ¥­å‘½ç†åˆ†æ",
    birth_label:"å‡ºç”Ÿæ—¥æœŸ",
    gender_label:"æ€§åˆ¥",
    gender_male:"ç”·æ€§",
    gender_female:"å¥³æ€§",
    analysis_type:"åˆ†æé¡å‹",
    analysis_type_comprehensive:"ç¶œåˆå‘½ç†åˆ†æ",
    analysis_type_career:"äº‹æ¥­è²¡é‹å°ˆé …",
    analysis_type_relationship:"æ„Ÿæƒ…å©šå§»å°ˆé …",
    analysis_type_health:"å¥åº·é‹å‹¢å°ˆé …",
    btn_gen:"ç”Ÿæˆå°ˆæ¥­åˆ†æå ±å‘Š",
    now_info_prefix:"ç•¶å‰ç³»çµ±æ™‚é–“ï¼š",
    sec_star:"æ‚¨çš„ä¹æ˜Ÿå‘½ç›¤åˆ†æ",
    sec_star_main:"æœ¬å‘½ä¸»æ˜Ÿ",
    sec_star_elements:"äº”è¡Œèƒ½é‡åˆ†ä½ˆ",
    sec_deep:"æ·±åº¦å‘½ç†è§£è®€",
    sec_personality:"æ€§æ ¼ç‰¹è³ªåˆ†æ",
    sec_talent:"å¤©è³¦æ½›èƒ½",
    sec_challenge:"äººç”Ÿèª²é¡Œ",
    sec_development:"ç™¼å±•å»ºè­°",
    sec_fortune:"é‹å‹¢èµ°å‹¢åˆ†æ",
    sec_advice:"å°ˆæ¥­èª¿æ•´å»ºè­°",
    advice_direction:"æ–¹ä½èª¿æ•´",
    advice_color:"è‰²å½©é‹ç”¨",
    advice_career:"è·æ¶¯ç™¼å±•",
    advice_relationship:"äººéš›é—œä¿‚",
    sec_ai:"å¿ƒæ†ç®¡å®¶è§£è®€èˆ‡å»ºè­°",

    spec_title:"å°ˆé …æ·±åº¦åˆ†æ",
    spec_core:"æ ¸å¿ƒåˆ†æ",
    spec_opportunity:"é—œéµæ©Ÿé‡",
    spec_risk:"é¢¨éšªæç¤º",
    spec_action:"è¡Œå‹•æŒ‡å—",

    badge_elem:"äº”è¡Œ",
    badge_color:"è‰²",
    badge_kw:"é—œéµè©",
    about_label:"æ€§æ ¼å‚¾å‘",

    please_birth:"è«‹å…ˆé¸æ“‡å‡ºç”Ÿæ—¥æœŸ",
    bad_date:"æ—¥æœŸæ ¼å¼æœ‰èª¤",
    generating:"æ­£åœ¨ç”Ÿæˆè§£è®€â€¦",
    retry:"æŠ±æ­‰ï¼Œæš«æ™‚ç„¡æ³•ç”Ÿæˆï¼Œè«‹ç¨å¾Œå†è©¦ã€‚",
    neterr:"ç¶²è·¯ç•°å¸¸ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚",

    vip_title:"ğŸŒ™ æœƒå“¡å€åŸŸ VIP Segment",
    vip_mingli:"ğŸ— å‘½ç†ç©ºé–“å°ˆå±¬å…§å®¹",
    vip_xinlian:"ğŸŒ™ å¿ƒæ†ç©ºé–“å°ˆå±¬å…§å®¹",
    vip_love:"å§»ç·£æ–¹å‘ï¼šæˆ€æ„›ç·£åˆ†ã€å©šå§»èµ°å‹¢",
    vip_career:"äº‹æ¥­æ–¹å‘ï¼šè·å ´ç™¼å±•ã€å‰µæ¥­æ½›åŠ›",
    vip_wealth:"è²¡é‹æ–¹å‘ï¼šè²¡ä½åˆ†æã€ç†è²¡æ™‚æ©Ÿ",
    vip_pet:"å¯µç‰©å‘½ç†ï¼šä¼´ä¾¶å‹•ç‰©çš„æ€§æ ¼èˆ‡ç·£åˆ†",
    vip_hepan:"åˆç›¤åˆ†æï¼šå©šæœŸæ“‡æ—¥ã€æ–°ç”Ÿæ“‡æ™‚",
    vip_name:"æ¸¬ååˆ†æï¼šå…¬å¸åã€å¯¶å¯¶åã€å‘½åæ”¹é‹",
    vip_fengshui:"è²¡ä½åˆç›¤ï¼šä½å®¶ / è¾¦å…¬å®¤å‹•ç·šé…åˆ",
    vip_record:"éˆæ€§è¨˜éŒ„ï¼šç…§ç‰‡ã€å¤¢å¢ƒã€è²éŸ³ã€é¡˜æœ›ç¥ˆç¦±",
    vip_course:"å‘½ç†èª²ç¨‹ï¼šå…«å­— / å¡”ç¾… / å æ˜Ÿ / éˆæ•¸ / äººé¡åœ–",
    vip_memorial:"å®¶æ—ç´€å¿µç³»çµ±ï¼šè¦ªäººéˆæ€§ç´€å¿µèˆ‡å»¶çºŒ",
    vip_tasks:"æ¯é€±èƒ½é‡ç·´ç¿’ / ç¥æ˜å„€å¼ä»»å‹™",
    vip_shop:"èƒ½é‡å•†åŸå°ˆå±¬æŠ˜æ‰£èˆ‡å¾¡å®ˆè¨‚è£½",
    login_title:"ğŸ’ ç™»å…¥ VIP åŠŸèƒ½",

    ph_email:"ä¿¡ç®± Email",
    ph_password:"å¯†ç¢¼ Passwordï¼ˆè‡³å°‘ 8 ç¢¼ï¼Œå«å¤§å°å¯«æ•¸å­—ç¬¦è™Ÿï¼‰",
    ph_label_password:"å¯†ç¢¼ Password",
    panel_login_head:"å¸³æˆ¶ç™»å…¥ / è¨»å†Š",
    panel_member_head:"æœƒå“¡æœå‹™",
    btn_login:"ç™»å…¥å¸³æˆ¶",
    btn_reset:"ğŸ”‘ é‡è¨­å¯†ç¢¼",
    btn_register:"è¨»å†Šå¸³æˆ¶",
    btn_upgrade:"ğŸ’ å‡ç´šç‚º VIPï¼ˆæœˆè²»ï¼‰",
    btn_backshop:"â† è¿”å›å‘½ç†å•†åŸ",
    note_price:"è¨»å†Šå¸³è™Ÿè´ˆé€ä¸€æ¬¡å…è²»é«”é©—",
    note_price1:"$9.9 / æœˆè²» VIPï¼ˆå‘½ç†ç©ºé–“ + å¿ƒæ†ç©ºé–“ + éˆæ€§èª²ç¨‹ï¼‰",

    chip_career:"äº‹æ¥­",
    chip_love:"æ„Ÿæƒ…",
    chip_money:"è²¡é‹",
    chip_list:"ä»Šæ—¥å¾…è¾¦",
    chip_30d:"30 å¤©å»ºè­°",

    chat_fab:"å•",
    chat_title:"å¿ƒæ†ç®¡å®¶ Â· Chat",
    chat_placeholder:"è«‹å•æ‚¨æƒ³äº†è§£ä»€éº¼ï¼Ÿï¼ˆä¾‹å¦‚ï¼šå¦‚ä½•é–‹å§‹å…è²»é«”é©—ï¼‰",
    chat_send:"é€å‡º",
  },

  "en": {
    brand:'5xLiving Â· å‘½ç†å¿ƒæ€œç©ºé—´ Â· Soul Sanctuary', 
    title:"Kyuusei Deep Analysis Â· 5XLiving",
    title_kyuusei_brief:"Kyuusei Deep Analysis",
    lang_label:"Language",
    form_title:"Kyuusei Â· Professional Destiny Analysis",
    birth_label:"Birth date",
    gender_label:"Gender",
    gender_male:"Male",
    gender_female:"Female",
    analysis_type:"Analysis type",
    analysis_type_comprehensive:"Comprehensive destiny analysis",
    analysis_type_career:"Career & wealth focus",
    analysis_type_relationship:"Love & marriage focus",
    analysis_type_health:"Health focus",
    btn_gen:"Generate professional analysis report",
    now_info_prefix:"Current system time: ",
    sec_star:"Your Kyuusei chart analysis",
    sec_star_main:"Main star",
    sec_star_elements:"Five Elements distribution",
    sec_deep:"In-depth destiny reading",
    sec_personality:"Personality traits",
    sec_talent:"Talents & potentials",
    sec_challenge:"Life lessons",
    sec_development:"Development advice",
    sec_fortune:"Fortune trend analysis",
    sec_advice:"Professional adjustment advice",
    advice_direction:"Direction adjustment",
    advice_color:"Colour usage",
    advice_career:"Career development",
    advice_relationship:"Relationships",
    sec_ai:"Xinlian Butler Â· Insights & Advice",

    spec_title:"Focused deep analysis",
    spec_core:"Core insight",
    spec_opportunity:"Key opportunities",
    spec_risk:"Risk alerts",
    spec_action:"Action guide",

    badge_elem:"Element",
    badge_color:"Colour",
    badge_kw:"Keywords",
    about_label:"Personality tendency",

    please_birth:"Please select your birth date first",
    bad_date:"Invalid date format",
    generating:"Generating your readingâ€¦",
    retry:"Sorry, unable to generate for now. Please try again later.",
    neterr:"Network error. Please try again later.",

    vip_title:"ğŸŒ™ VIP Area Â· VIP Segment",
    vip_mingli:"ğŸ— Destiny Space Â· Members-only content",
    vip_xinlian:"ğŸŒ™ Xinlian Space Â· Members-only content",
    vip_love:"Love: relationship destiny and marriage trends",
    vip_career:"Career: workplace development and entrepreneurship potential",
    vip_wealth:"Wealth: wealth position analysis and timing for finance",
    vip_pet:"Pet destiny: character and bond with companion animals",
    vip_hepan:"Synastry: wedding date selection & newborn timing",
    vip_name:"Name analysis: company names, baby names, and name-based adjustment",
    vip_fengshui:"Wealth + Feng Shui: home / office layout alignment",
    vip_record:"Spiritual records: photos, dreams, voice notes, prayers & wishes",
    vip_course:"Courses: Bazi / Tarot / Astrology / Numerology / Human Design",
    vip_memorial:"Family memorial system: spiritual remembrance & continuation",
    vip_tasks:"Weekly energy practices / deity ritual tasks",
    vip_shop:"Energy shop member discounts & custom amulets",
    login_title:"ğŸ’ Log in to VIP features",

    ph_email:"Email",
    ph_password:"Password (at least 8 characters, including upper/lowercase letters, numbers & symbols)",
    ph_label_password:"Password",
    panel_login_head:"Account login / registration",
    panel_member_head:"Membership services",
    btn_login:"Log in",
    btn_reset:"ğŸ”‘ Reset password",
    btn_register:"Register account",
    btn_upgrade:"ğŸ’ Upgrade to VIP (monthly)",
    btn_backshop:"â† Back to metaphysics shop",
    note_price:"Register an account to receive one free trial",
    note_price1:"$9.9 / month VIP (Destiny Space + Xinlian Space + Spiritual Courses)",

    chip_career:"Career",
    chip_love:"Love",
    chip_money:"Wealth",
    chip_list:"Today's to-do list",
    chip_30d:"30-day advice",

    chat_fab:"Ask",
    chat_title:"Xinlian Butler Â· Chat",
    chat_placeholder:"What would you like to know? (e.g. how to start the free trial)",
    chat_send:"Send",
  },

  "ja-JP": {
    brand:'5xLiving Â· å‘½ç†å¿ƒæ€œç©ºé—´ Â· Soul Sanctuary', 
    title:"ä¹æ˜Ÿæ°—å­¦ãƒ»ãƒ‡ã‚£ãƒ¼ãƒ—åˆ†æ Â· 5XLiving",
    title_kyuusei_brief:"ä¹æ˜Ÿæ°—å­¦ãƒ‡ã‚£ãƒ¼ãƒ—åˆ†æ",
    lang_label:"è¨€èª",
    form_title:"ä¹æ˜Ÿæ°—å­¦ãƒ»ãƒ—ãƒ­é‘‘å®š",
    birth_label:"ç”Ÿå¹´æœˆæ—¥",
    gender_label:"æ€§åˆ¥",
    gender_male:"ç”·æ€§",
    gender_female:"å¥³æ€§",
    analysis_type:"åˆ†æã‚¿ã‚¤ãƒ—",
    analysis_type_comprehensive:"ç·åˆé‘‘å®š",
    analysis_type_career:"ä»•äº‹ãƒ»é‡‘é‹ãƒ•ã‚©ãƒ¼ã‚«ã‚¹",
    analysis_type_relationship:"æ‹æ„›ãƒ»çµå©šãƒ•ã‚©ãƒ¼ã‚«ã‚¹",
    analysis_type_health:"å¥åº·é‹ãƒ•ã‚©ãƒ¼ã‚«ã‚¹",
    btn_gen:"ãƒ—ãƒ­é‘‘å®šãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ",
    now_info_prefix:"ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ æ™‚åˆ»ï¼š",
    sec_star:"ã‚ãªãŸã®ä¹æ˜Ÿç›¤ã®åˆ†æ",
    sec_star_main:"æœ¬å‘½æ˜Ÿ",
    sec_star_elements:"äº”è¡Œã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒãƒ©ãƒ³ã‚¹",
    sec_deep:"è©³ç´°ãªé‹å‹¢ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°",
    sec_personality:"æ€§æ ¼å‚¾å‘ã®åˆ†æ",
    sec_talent:"æ‰èƒ½ãƒ»ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«",
    sec_challenge:"äººç”Ÿã®ãƒ†ãƒ¼ãƒ",
    sec_development:"æˆé•·ã¸ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹",
    sec_fortune:"é‹å‹¢ã®æµã‚Œ",
    sec_advice:"ãƒ—ãƒ­ã®èª¿æ•´ã‚¢ãƒ‰ãƒã‚¤ã‚¹",
    advice_direction:"æ–¹ä½ã®èª¿æ•´",
    advice_color:"ãƒ©ãƒƒã‚­ãƒ¼ã‚«ãƒ©ãƒ¼æ´»ç”¨",
    advice_career:"ã‚­ãƒ£ãƒªã‚¢ã®ç™ºå±•",
    advice_relationship:"äººé–“é–¢ä¿‚ãƒ»ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚·ãƒƒãƒ—",
    sec_ai:"å¿ƒæ†ãƒãƒˆãƒ©ãƒ¼ã‹ã‚‰ã®è§£èª­ã¨ææ¡ˆ",

    spec_title:"ãƒ•ã‚©ãƒ¼ã‚«ã‚¹åˆ†æ",
    spec_core:"ã‚³ã‚¢åˆ†æ",
    spec_opportunity:"ãƒãƒ£ãƒ³ã‚¹",
    spec_risk:"ãƒªã‚¹ã‚¯æ³¨æ„",
    spec_action:"è¡Œå‹•ã‚¬ã‚¤ãƒ‰",

    badge_elem:"äº”è¡Œ",
    badge_color:"ã‚«ãƒ©ãƒ¼",
    badge_kw:"ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰",
    about_label:"æ€§æ ¼å‚¾å‘",

    please_birth:"ã¾ãšç”Ÿå¹´æœˆæ—¥ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚",
    bad_date:"æ—¥ä»˜ã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚",
    generating:"ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã™â€¦",
    retry:"ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€‚ã—ã°ã‚‰ãã—ã¦ã‹ã‚‰ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚",
    neterr:"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚æ™‚é–“ã‚’ãŠã„ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚",

    vip_title:"ğŸŒ™ ä¼šå“¡ã‚¨ãƒªã‚¢ãƒ»VIP ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ",
    vip_mingli:"ğŸ— å‘½ç†ã‚¹ãƒšãƒ¼ã‚¹ãƒ»ä¼šå“¡é™å®šã‚³ãƒ³ãƒ†ãƒ³ãƒ„",
    vip_xinlian:"ğŸŒ™ å¿ƒæ†ã‚¹ãƒšãƒ¼ã‚¹ãƒ»ä¼šå“¡é™å®šã‚³ãƒ³ãƒ†ãƒ³ãƒ„",
    vip_love:"æ‹æ„›ãƒ»ç¸çµã³ï¼šæ‹æ„›é‹ã¨çµå©šã®æµã‚Œ",
    vip_career:"ä»•äº‹ï¼šã‚­ãƒ£ãƒªã‚¢æˆé•·ãƒ»èµ·æ¥­ã®å¯èƒ½æ€§",
    vip_wealth:"é‡‘é‹ï¼šè²¡ã®ãƒã‚¸ã‚·ãƒ§ãƒ³åˆ†æã¨è³‡ç”£é‹ç”¨ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°",
    vip_pet:"ãƒšãƒƒãƒˆå‘½ç†ï¼šãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚¢ãƒ‹ãƒãƒ«ã®æ€§æ ¼ã¨ã”ç¸",
    vip_hepan:"ç›¸æ€§é‘‘å®šï¼šå…¥ç±æ—¥ï¼æŒ™å¼æ—¥ãƒ»å‡ºç”£ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®é¸å®š",
    vip_name:"å‘½åé‘‘å®šï¼šä¼šç¤¾åãƒ»èµ¤ã¡ã‚ƒã‚“ã®åå‰ãƒ»æ”¹åã«ã‚ˆã‚‹é–‹é‹",
    vip_fengshui:"è²¡ä½Ã—é¢¨æ°´ï¼šè‡ªå®…ï¼ã‚ªãƒ•ã‚£ã‚¹å‹•ç·šã¨ã®çµ„ã¿åˆã‚ã›",
    vip_record:"ã‚¹ãƒ”ãƒªãƒãƒ¥ã‚¢ãƒ«è¨˜éŒ²ï¼šå†™çœŸãƒ»å¤¢ãƒ»éŸ³å£°ãƒ»ç¥ˆã‚Šã¨é¡˜ã„äº‹",
    vip_course:"è¬›åº§ï¼šå››æŸ±æ¨å‘½ï¼ˆå…«å­—ï¼‰ï¼ã‚¿ãƒ­ãƒƒãƒˆï¼å æ˜Ÿè¡“ï¼æ•°ç§˜ï¼ãƒ’ãƒ¥ãƒ¼ãƒãƒ³ãƒ‡ã‚¶ã‚¤ãƒ³",
    vip_memorial:"å®¶æ—ãƒ¡ãƒ¢ãƒªã‚¢ãƒ«ï¼šã”å…ˆç¥–ãƒ»æ•…äººã®ã‚¹ãƒ”ãƒªãƒãƒ¥ã‚¢ãƒ«è¨˜å¿µã‚¹ãƒšãƒ¼ã‚¹",
    vip_tasks:"æ¯é€±ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ¯ãƒ¼ã‚¯ï¼ç¥æ§˜ã¸ã®ãƒªãƒãƒ¥ã‚¢ãƒ«",
    vip_shop:"ã‚¨ãƒŠã‚¸ãƒ¼ã‚·ãƒ§ãƒƒãƒ—ä¼šå“¡å‰²å¼•ï¼†ã‚ªãƒ¼ãƒ€ãƒ¼ãƒ¡ã‚¤ãƒ‰å¾¡å®ˆã‚Š",
    login_title:"ğŸ’ VIP æ©Ÿèƒ½ã«ãƒ­ã‚°ã‚¤ãƒ³",

    ph_email:"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",
    ph_password:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆ8æ–‡å­—ä»¥ä¸Šãƒ»å¤§å°è‹±å­—ï¼‹æ•°å­—ï¼‹è¨˜å·ï¼‰",
    ph_label_password:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰",
    panel_login_head:"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ ãƒ­ã‚°ã‚¤ãƒ³ï¼æ–°è¦ç™»éŒ²",
    panel_member_head:"ä¼šå“¡ã‚µãƒ¼ãƒ“ã‚¹",
    btn_login:"ãƒ­ã‚°ã‚¤ãƒ³",
    btn_reset:"ğŸ”‘ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒªã‚»ãƒƒãƒˆ",
    btn_register:"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ–°è¦ç™»éŒ²",
    btn_upgrade:"ğŸ’ VIPï¼ˆæœˆé¡ï¼‰ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰",
    btn_backshop:"â† å‘½ç†ã‚·ãƒ§ãƒƒãƒ—ã«æˆ»ã‚‹",
    note_price:"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²ã§ 1 å›ç„¡æ–™ä½“é¨“ã‚’ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ",
    note_price1:"$9.9 / æœˆé¡ VIPï¼ˆå‘½ç†ã‚¹ãƒšãƒ¼ã‚¹ï¼‹å¿ƒæ†ã‚¹ãƒšãƒ¼ã‚¹ï¼‹ã‚¹ãƒ”ãƒªãƒãƒ¥ã‚¢ãƒ«è¬›åº§ï¼‰",

    chip_career:"ä»•äº‹",
    chip_love:"æ‹æ„›",
    chip_money:"é‡‘é‹",
    chip_list:"ä»Šæ—¥ã® ToDo",
    chip_30d:"30 æ—¥ã‚¢ãƒ‰ãƒã‚¤ã‚¹",

    chat_fab:"å•",
    chat_title:"å¿ƒæ†ãƒãƒˆãƒ©ãƒ¼ Â· Chat",
    chat_placeholder:"çŸ¥ã‚ŠãŸã„ã“ã¨ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼šç„¡æ–™ä½“é¨“ã®å§‹ã‚æ–¹ï¼‰",
    chat_send:"é€ä¿¡",
  },

  "th-TH": {
    brand:'5xLiving Â· å‘½ç†å¿ƒæ€œç©ºé—´ Â· Soul Sanctuary', 
    title:"à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸„à¸´à¸§à¹€à¸‹à¸¢à¹Œà¹€à¸à¹‰à¸²à¸”à¸²à¸§à¹€à¸Šà¸´à¸‡à¸¥à¸¶à¸ Â· 5XLiving",
    title_kyuusei_brief:"à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸„à¸´à¸§à¹€à¸‹à¸¢à¹Œà¹€à¸à¹‰à¸²à¸”à¸²à¸§à¹€à¸Šà¸´à¸‡à¸¥à¸¶à¸",
    lang_label:"à¸ à¸²à¸©à¸²",
    form_title:"à¸„à¸´à¸§à¹€à¸‹à¸¢à¹Œà¹€à¸à¹‰à¸²à¸”à¸²à¸§ Â· à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸”à¸§à¸‡à¹à¸šà¸šà¸¡à¸·à¸­à¸­à¸²à¸Šà¸µà¸",
    birth_label:"à¸§à¸±à¸™à¹€à¸”à¸·à¸­à¸™à¸›à¸µà¹€à¸à¸´à¸”",
    gender_label:"à¹€à¸à¸¨",
    gender_male:"à¸Šà¸²à¸¢",
    gender_female:"à¸«à¸à¸´à¸‡",
    analysis_type:"à¸›à¸£à¸°à¹€à¸ à¸—à¸à¸²à¸£à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œ",
    analysis_type_comprehensive:"à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸”à¸§à¸‡à¸ à¸²à¸à¸£à¸§à¸¡",
    analysis_type_career:"à¹€à¸™à¹‰à¸™à¸à¸²à¸£à¸‡à¸²à¸™à¹à¸¥à¸°à¸à¸²à¸£à¹€à¸‡à¸´à¸™",
    analysis_type_relationship:"à¹€à¸™à¹‰à¸™à¸„à¸§à¸²à¸¡à¸£à¸±à¸à¹à¸¥à¸°à¸à¸²à¸£à¹à¸•à¹ˆà¸‡à¸‡à¸²à¸™",
    analysis_type_health:"à¹€à¸™à¹‰à¸™à¸ªà¸¸à¸‚à¸ à¸²à¸",
    btn_gen:"à¸ªà¸£à¹‰à¸²à¸‡à¸£à¸²à¸¢à¸‡à¸²à¸™à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸”à¸§à¸‡",
    now_info_prefix:"à¹€à¸§à¸¥à¸²à¸£à¸°à¸šà¸šà¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™: ",
    sec_star:"à¸à¸²à¸£à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸œà¸±à¸‡à¸„à¸´à¸§à¹€à¸‹à¸¢à¹Œà¹€à¸à¹‰à¸²à¸”à¸²à¸§à¸‚à¸­à¸‡à¸„à¸¸à¸“",
    sec_star_main:"à¸”à¸²à¸§à¸›à¸£à¸°à¸ˆà¸³à¸•à¸±à¸§",
    sec_star_elements:"à¸ªà¸¡à¸”à¸¸à¸¥à¸˜à¸²à¸•à¸¸à¸—à¸±à¹‰à¸‡à¸«à¹‰à¸²",
    sec_deep:"à¸„à¸³à¸—à¸³à¸™à¸²à¸¢à¹€à¸Šà¸´à¸‡à¸¥à¸¶à¸",
    sec_personality:"à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸šà¸¸à¸„à¸¥à¸´à¸à¸ à¸²à¸",
    sec_talent:"à¸à¸£à¸ªà¸§à¸£à¸£à¸„à¹Œà¹à¸¥à¸°à¸¨à¸±à¸à¸¢à¸ à¸²à¸",
    sec_challenge:"à¸šà¸—à¹€à¸£à¸µà¸¢à¸™à¹ƒà¸™à¸Šà¸µà¸§à¸´à¸•",
    sec_development:"à¸„à¸³à¹à¸™à¸°à¸™à¸³à¹ƒà¸™à¸à¸²à¸£à¸à¸±à¸’à¸™à¸²",
    sec_fortune:"à¹à¸™à¸§à¹‚à¸™à¹‰à¸¡à¸”à¸§à¸‡à¸Šà¸°à¸•à¸²",
    sec_advice:"à¸„à¸³à¹à¸™à¸°à¸™à¸³à¹€à¸Šà¸´à¸‡à¸§à¸´à¸Šà¸²à¸Šà¸µà¸à¹ƒà¸™à¸à¸²à¸£à¸›à¸£à¸±à¸šà¸ªà¸¡à¸”à¸¸à¸¥",
    advice_direction:"à¸à¸²à¸£à¸›à¸£à¸±à¸šà¸—à¸´à¸¨à¸—à¸²à¸‡",
    advice_color:"à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸ªà¸µà¹€à¸ªà¸£à¸´à¸¡à¸”à¸§à¸‡",
    advice_career:"à¸à¸²à¸£à¸à¸±à¸’à¸™à¸²à¸ªà¸²à¸¢à¸­à¸²à¸Šà¸µà¸",
    advice_relationship:"à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œà¹à¸¥à¸°à¸œà¸¹à¹‰à¸„à¸™à¸£à¸­à¸šà¸•à¸±à¸§",
    sec_ai:"à¸„à¸³à¹à¸›à¸¥à¹à¸¥à¸°à¸„à¸³à¹à¸™à¸°à¸™à¸³à¸ˆà¸²à¸à¸œà¸¹à¹‰à¸Šà¹ˆà¸§à¸¢ Xinlian",

    spec_title:"à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¹€à¸Šà¸´à¸‡à¸¥à¸¶à¸à¹à¸šà¸šà¹‚à¸Ÿà¸à¸±à¸ª",
    spec_core:"à¹à¸à¸™à¸«à¸¥à¸±à¸",
    spec_opportunity:"à¹‚à¸­à¸à¸²à¸ªà¸ªà¸³à¸„à¸±à¸",
    spec_risk:"à¸‚à¹‰à¸­à¸„à¸§à¸£à¸£à¸°à¸§à¸±à¸‡",
    spec_action:"à¹à¸™à¸§à¸—à¸²à¸‡à¸›à¸à¸´à¸šà¸±à¸•à¸´",

    badge_elem:"à¸˜à¸²à¸•à¸¸à¸—à¸±à¹‰à¸‡à¸«à¹‰à¸²",
    badge_color:"à¸ªà¸µ",
    badge_kw:"à¸„à¸³à¸ªà¸³à¸„à¸±à¸",
    about_label:"à¹à¸™à¸§à¹‚à¸™à¹‰à¸¡à¸šà¸¸à¸„à¸¥à¸´à¸à¸ à¸²à¸",

    please_birth:"à¸à¸£à¸¸à¸“à¸²à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¹€à¸”à¸·à¸­à¸™à¸›à¸µà¹€à¸à¸´à¸”à¸à¹ˆà¸­à¸™",
    bad_date:"à¸£à¸¹à¸›à¹à¸šà¸šà¸§à¸±à¸™à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡",
    generating:"à¸à¸³à¸¥à¸±à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸³à¸—à¸³à¸™à¸²à¸¢â€¦",
    retry:"à¸‚à¸­à¸­à¸ à¸±à¸¢ à¸‚à¸“à¸°à¸™à¸µà¹‰à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸ªà¸£à¹‰à¸²à¸‡à¸œà¸¥à¹„à¸”à¹‰ à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆà¸ à¸²à¸¢à¸«à¸¥à¸±à¸‡",
    neterr:"à¹€à¸„à¸£à¸·à¸­à¸‚à¹ˆà¸²à¸¢à¸‚à¸±à¸”à¸‚à¹‰à¸­à¸‡ à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡à¸ à¸²à¸¢à¸«à¸¥à¸±à¸‡",

    vip_title:"ğŸŒ™ à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¸ªà¸¡à¸²à¸Šà¸´à¸ VIP",
    vip_mingli:"ğŸ— à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¸”à¸§à¸‡à¸Šà¸°à¸•à¸² Â· à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¸¡à¸²à¸Šà¸´à¸",
    vip_xinlian:"ğŸŒ™ à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆ Xinlian Â· à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¸¡à¸²à¸Šà¸´à¸",
    vip_love:"à¸”à¹‰à¸²à¸™à¸„à¸§à¸²à¸¡à¸£à¸±à¸: à¸”à¸§à¸‡à¸„à¸§à¸²à¸¡à¸£à¸±à¸à¹à¸¥à¸°à¹à¸™à¸§à¹‚à¸™à¹‰à¸¡à¸à¸²à¸£à¹à¸•à¹ˆà¸‡à¸‡à¸²à¸™",
    vip_career:"à¸”à¹‰à¸²à¸™à¸à¸²à¸£à¸‡à¸²à¸™: à¸à¸²à¸£à¹€à¸•à¸´à¸šà¹‚à¸•à¹ƒà¸™à¸‡à¸²à¸™à¹à¸¥à¸°à¸¨à¸±à¸à¸¢à¸ à¸²à¸à¸à¸²à¸£à¸—à¸³à¸˜à¸¸à¸£à¸à¸´à¸ˆ",
    vip_wealth:"à¸”à¹‰à¸²à¸™à¸à¸²à¸£à¹€à¸‡à¸´à¸™: à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸•à¸³à¹à¸«à¸™à¹ˆà¸‡à¸—à¸£à¸±à¸à¸¢à¹Œà¹à¸¥à¸°à¸ˆà¸±à¸‡à¸«à¸§à¸°à¸à¸²à¸£à¸¥à¸‡à¸—à¸¸à¸™",
    vip_pet:"à¸”à¸§à¸‡à¸ªà¸±à¸•à¸§à¹Œà¹€à¸¥à¸µà¹‰à¸¢à¸‡: à¸šà¸¸à¸„à¸¥à¸´à¸à¹à¸¥à¸°à¸ªà¸²à¸¢à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œà¸à¸±à¸šà¸ªà¸±à¸•à¸§à¹Œà¸„à¸¹à¹ˆà¹ƒà¸ˆ",
    vip_hepan:"à¸”à¸§à¸‡à¸„à¸¹à¹ˆà¹à¸¥à¸°à¸§à¸±à¸™à¸¡à¸‡à¸„à¸¥: à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¹à¸•à¹ˆà¸‡à¸‡à¸²à¸™ / à¸§à¸±à¸™à¸„à¸¥à¸­à¸”",
    vip_name:"à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸Šà¸·à¹ˆà¸­: à¸Šà¸·à¹ˆà¸­à¸šà¸£à¸´à¸©à¸±à¸— à¸Šà¸·à¹ˆà¸­à¹€à¸”à¹‡à¸ à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸Šà¸·à¹ˆà¸­à¹€à¸ªà¸£à¸´à¸¡à¸”à¸§à¸‡",
    vip_fengshui:"à¸®à¸§à¸‡à¸ˆà¸¸à¹‰à¸¢à¸—à¸£à¸±à¸à¸¢à¹Œ: à¸à¸²à¸£à¸ˆà¸±à¸”à¸§à¸²à¸‡à¸šà¹‰à¸²à¸™ / à¸ªà¸³à¸™à¸±à¸à¸‡à¸²à¸™à¹ƒà¸«à¹‰à¸ªà¸­à¸”à¸„à¸¥à¹‰à¸­à¸‡à¸à¸±à¸šà¸”à¸§à¸‡",
    vip_record:"à¸šà¸±à¸™à¸—à¸¶à¸à¹€à¸Šà¸´à¸‡à¸ˆà¸´à¸•à¸§à¸´à¸à¸à¸²à¸“: à¸£à¸¹à¸›à¸ à¸²à¸ à¸„à¸§à¸²à¸¡à¸à¸±à¸™ à¹€à¸ªà¸µà¸¢à¸‡ à¸ à¸²à¸§à¸™à¸²à¹à¸¥à¸°à¸„à¸³à¸­à¸˜à¸´à¸©à¸à¸²à¸™",
    vip_course:"à¸„à¸­à¸£à¹Œà¸ªà¹€à¸£à¸µà¸¢à¸™: à¹‚à¸›à¹Šà¸¢à¸«à¸¢à¸µà¹ˆà¸ªà¸µà¹ˆà¹€à¸–à¸µà¸¢à¸§ (å…«å­—) / à¸—à¸²à¹‚à¸£à¸•à¹Œ / à¹‚à¸«à¸£à¸²à¸¨à¸²à¸ªà¸•à¸£à¹Œ / à¹€à¸¥à¸‚à¸¨à¸²à¸ªà¸•à¸£à¹Œ / Human Design",
    vip_memorial:"à¸£à¸°à¸šà¸šà¸£à¸³à¸¥à¸¶à¸à¸–à¸¶à¸‡à¸„à¸£à¸­à¸šà¸„à¸£à¸±à¸§: à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¸£à¸³à¸¥à¸¶à¸à¸—à¸²à¸‡à¸ˆà¸´à¸•à¸§à¸´à¸à¸à¸²à¸“à¹ƒà¸«à¹‰à¸„à¸™à¸—à¸µà¹ˆà¸£à¸±à¸",
    vip_tasks:"à¹à¸šà¸šà¸à¸¶à¸à¸à¸¥à¸±à¸‡à¸‡à¸²à¸™à¸›à¸£à¸°à¸ˆà¸³à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ / à¸ à¸²à¸£à¸à¸´à¸ˆà¸”à¹‰à¸²à¸™à¸à¸´à¸˜à¸µà¸à¸£à¸£à¸¡",
    vip_shop:"à¸ªà¹ˆà¸§à¸™à¸¥à¸”à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¸¡à¸²à¸Šà¸´à¸à¹à¸¥à¸°à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸£à¸²à¸‡à¸ªà¸±à¹ˆà¸‡à¸—à¸³à¸à¸´à¹€à¸¨à¸©",
    login_title:"ğŸ’ à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¹€à¸à¸·à¹ˆà¸­à¹ƒà¸Šà¹‰à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™ VIP",

    ph_email:"à¸­à¸µà¹€à¸¡à¸¥",
    ph_password:"à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™ (à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 8 à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£ à¸¡à¸µà¸•à¸±à¸§à¸à¸´à¸¡à¸à¹Œà¹ƒà¸«à¸à¹ˆ à¹€à¸¥à¹‡à¸ à¸•à¸±à¸§à¹€à¸¥à¸‚ à¹à¸¥à¸°à¸ªà¸±à¸à¸¥à¸±à¸à¸©à¸“à¹Œ)",
    ph_label_password:"à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™",
    panel_login_head:"à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š / à¸ªà¸¡à¸±à¸„à¸£à¸ªà¸¡à¸²à¸Šà¸´à¸",
    panel_member_head:"à¸šà¸£à¸´à¸à¸²à¸£à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¸¡à¸²à¸Šà¸´à¸",
    btn_login:"à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š",
    btn_reset:"ğŸ”‘ à¸£à¸µà¹€à¸‹à¹‡à¸•à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™",
    btn_register:"à¸ªà¸¡à¸±à¸„à¸£à¸šà¸±à¸à¸Šà¸µà¹ƒà¸«à¸¡à¹ˆ",
    btn_upgrade:"ğŸ’ à¸­à¸±à¸›à¹€à¸à¸£à¸”à¹€à¸›à¹‡à¸™ VIP (à¸£à¸²à¸¢à¹€à¸”à¸·à¸­à¸™)",
    btn_backshop:"â† à¸à¸¥à¸±à¸šà¹„à¸›à¸¢à¸±à¸‡à¸£à¹‰à¸²à¸™à¸„à¹‰à¸²à¹‚à¸«à¸£à¸²à¸¨à¸²à¸ªà¸•à¸£à¹Œ",
    note_price:"à¸ªà¸¡à¸±à¸„à¸£à¸šà¸±à¸à¸Šà¸µà¸§à¸±à¸™à¸™à¸µà¹‰ à¸£à¸±à¸šà¸ªà¸´à¸—à¸˜à¸´à¹Œà¸—à¸”à¸¥à¸­à¸‡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸Ÿà¸£à¸µ 1 à¸„à¸£à¸±à¹‰à¸‡",
    note_price1:"$9.9 / à¹€à¸”à¸·à¸­à¸™ VIP (à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¸”à¸§à¸‡à¸Šà¸°à¸•à¸² + à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆ Xinlian + à¸„à¸­à¸£à¹Œà¸ªà¸ˆà¸´à¸•à¸§à¸´à¸à¸à¸²à¸“)",

    chip_career:"à¸à¸²à¸£à¸‡à¸²à¸™",
    chip_love:"à¸„à¸§à¸²à¸¡à¸£à¸±à¸",
    chip_money:"à¸à¸²à¸£à¹€à¸‡à¸´à¸™",
    chip_list:"à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸—à¸³à¸§à¸±à¸™à¸™à¸µà¹‰",
    chip_30d:"à¸„à¸³à¹à¸™à¸°à¸™à¸³ 30 à¸§à¸±à¸™",

    chat_fab:"à¸–à¸²à¸¡",
    chat_title:"à¸œà¸¹à¹‰à¸Šà¹ˆà¸§à¸¢ Xinlian Â· à¹à¸Šà¸—",
    chat_placeholder:"à¸„à¸¸à¸“à¸­à¸¢à¸²à¸à¸£à¸¹à¹‰à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸­à¸°à¹„à¸£? (à¹€à¸Šà¹ˆà¸™ à¸§à¸´à¸˜à¸µà¹€à¸£à¸´à¹ˆà¸¡à¸—à¸”à¸¥à¸­à¸‡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸Ÿà¸£à¸µ)",
    chat_send:"à¸ªà¹ˆà¸‡",
  },

  "ms": {
    brand:'5xLiving Â· å‘½ç†å¿ƒæ€œç©ºé—´ Â· Soul Sanctuary', 
    title:"Analisis Mendalam Kyuusei Sembilan Bintang Â· 5XLiving",
    title_kyuusei_brief:"Analisis Mendalam Kyuusei",
    lang_label:"Bahasa",
    form_title:"Kyuusei Sembilan Bintang Â· Analisis Takdir Profesional",
    birth_label:"Tarikh lahir",
    gender_label:"Jantina",
    gender_male:"Lelaki",
    gender_female:"Perempuan",
    analysis_type:"Jenis analisis",
    analysis_type_comprehensive:"Analisis takdir menyeluruh",
    analysis_type_career:"Fokus kerjaya & kekayaan",
    analysis_type_relationship:"Fokus cinta & perkahwinan",
    analysis_type_health:"Fokus kesihatan",
    btn_gen:"Jana laporan analisis profesional",
    now_info_prefix:"Masa sistem semasa: ",
    sec_star:"Analisis carta Kyuusei anda",
    sec_star_main:"Bintang utama",
    sec_star_elements:"Taburan Lima Unsur",
    sec_deep:"Pembacaan takdir yang mendalam",
    sec_personality:"Analisis ciri peribadi",
    sec_talent:"Bakat & potensi",
    sec_challenge:"Pelajaran hidup",
    sec_development:"Nasihat pembangunan",
    sec_fortune:"Analisis aliran tuah",
    sec_advice:"Cadangan pelarasan profesional",
    advice_direction:"Pelarasan arah",
    advice_color:"Penggunaan warna",
    advice_career:"Perkembangan kerjaya",
    advice_relationship:"Hubungan & interaksi",
    sec_ai:"Butler Xinlian Â· Tafsiran & Nasihat",

    spec_title:"Analisis fokus mendalam",
    spec_core:"Analisis teras",
    spec_opportunity:"Peluang utama",
    spec_risk:"Peringatan risiko",
    spec_action:"Panduan tindakan",

    badge_elem:"Lima Unsur",
    badge_color:"Warna",
    badge_kw:"Kata kunci",
    about_label:"Kecenderungan personaliti",

    please_birth:"Sila pilih tarikh lahir terlebih dahulu",
    bad_date:"Format tarikh tidak sah",
    generating:"Sedang menjana tafsiranâ€¦",
    retry:"Maaf, tidak dapat menjana buat masa ini. Sila cuba lagi kemudian.",
    neterr:"Ralat rangkaian. Sila cuba lagi kemudian.",

    vip_title:"ğŸŒ™ Zon Ahli VIP",
    vip_mingli:"ğŸ— Ruang Takdir Â· Kandungan khas ahli",
    vip_xinlian:"ğŸŒ™ Ruang Xinlian Â· Kandungan khas ahli",
    vip_love:"Arah jodoh: nasib percintaan dan trend perkahwinan",
    vip_career:"Arah kerjaya: perkembangan di tempat kerja & potensi keusahawanan",
    vip_wealth:"Arah kekayaan: analisis sudut rezeki & masa pelaburan",
    vip_pet:"Takdir haiwan peliharaan: personaliti & jalinan dengan haiwan teman",
    vip_hepan:"Analisis padanan: pemilihan tarikh kahwin / tarikh kelahiran bayi",
    vip_name:"Analisis nama: nama syarikat, nama bayi & penukaran nama untuk menaikkan tuah",
    vip_fengshui:"Sudut rezeki + feng shui: susun atur rumah / pejabat selaras dengan takdir",
    vip_record:"Rekod spiritual: gambar, mimpi, rakaman suara, doa & hajat",
    vip_course:"Kursus: Bazi / Tarot / Astrologi / Human Design",
    vip_memorial:"Sistem peringatan keluarga: ruang kenangan rohani untuk orang tersayang",
    vip_tasks:"Latihan tenaga mingguan / tugasan ritual",
    vip_shop:"Diskaun khas ahli & jimat perlindungan tempahan khas",
    login_title:"ğŸ’ Log masuk untuk fungsi VIP",

    ph_email:"Emel",
    ph_password:"Kata laluan (sekurang-kurangnya 8 aksara, termasuk huruf besar, huruf kecil, nombor & simbol)",
    ph_label_password:"Kata laluan",
    panel_login_head:"Log masuk / Daftar akaun",
    panel_member_head:"Perkhidmatan ahli",
    btn_login:"Log masuk",
    btn_reset:"ğŸ”‘ Tetapkan semula kata laluan",
    btn_register:"Daftar akaun",
    btn_upgrade:"ğŸ’ Naik taraf ke VIP (bulanan)",
    btn_backshop:"â† Kembali ke kedai metafizik",
    note_price:"Daftar akaun untuk menerima satu sesi percubaan percuma",
    note_price1:"$9.9 / bulan VIP (Ruang Takdir + Ruang Xinlian + Kursus kerohanian)",

    chip_career:"Kerjaya",
    chip_love:"Cinta",
    chip_money:"Kekayaan",
    chip_list:"Senarai tugas hari ini",
    chip_30d:"Nasihat 30 hari",

    chat_fab:"Tanya",
    chat_title:"Butler Xinlian Â· Chat",
    chat_placeholder:"Apa yang ingin anda ketahui? (contoh: cara mulakan percubaan percuma)",
    chat_send:"Hantar",
  }
};

/* ç®€å•ç¿»è¯‘å‡½æ•° */
function t(key){
  const L = i18n[getLang()] || i18n["zh-CN"];
  return L[key] || (i18n["zh-CN"][key] || key);
}

/* åº”ç”¨åˆ° DOM */
function applyI18n(){
  document.querySelectorAll("[data-i18n]").forEach(el=>{
    const key = el.getAttribute("data-i18n");
    el.textContent = t(key);
  });
  document.querySelectorAll("[data-i18n-ph]").forEach(el=>{
    const key = el.getAttribute("data-i18n-ph");
    el.setAttribute("placeholder", t(key));
  });
  const titleEl = document.querySelector("title[data-i18n]");
  if (titleEl) titleEl.textContent = t(titleEl.getAttribute("data-i18n"));
}

/* å½“å‰æ—¶é—´æ˜¾ç¤º */
function updateNowInfo(){
  const box = $('nowInfo');
  if (!box) return;
  const lang = getLang();
  let locale = 'zh-CN';
  if (lang === 'zh-TW') locale = 'zh-TW';
  else if (lang === 'en') locale = 'en-US';
  else if (lang === 'ja-JP') locale = 'ja-JP';
  else if (lang === 'th-TH') locale = 'th-TH';
  else if (lang === 'ms') locale = 'ms-MY';
  const nowStr = new Date().toLocaleString(locale);
  box.textContent = (t('now_info_prefix') || '') + nowStr;
}

/* ===== æµ®åŠ¨ Chat é€»è¾‘ ===== */
async function askAI(prompt, extraCtx){
  const lang = getLang();
  const payload = {
    lang,
    source: 'kyuusei-deep',
    messages: [
      {
        role: "system",
        content: "You are Xinlian Butler, a gentle metaphysics & life advisor for 5XLiving, combining Nine Star Ki, Bazi style language and practical, grounded advice. Always reply in the user interface language."
      },
      {
        role: "user",
        content: (extraCtx || "") + "\n\n" + prompt
      }
    ]
  };
  const res = await fetch(API_BASE + "/api/chat", {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify(payload)
  });
  if (!res.ok) throw new Error("bad status " + res.status);
  const data = await res.json();
  return data.reply || data.text || (data.choices && data.choices[0]?.message?.content) || "";
}

(function(){
  const fab   = $('ssChatFab');
  const panel = $('ssChatPanel');
  const body  = $('ssChatBody');
  const input = $('ssChatInput');
  const send  = $('ssChatSend');
  const closeBtn = $('ssChatClose');

  if (!fab || !panel || !body || !input || !send || !closeBtn) return;

  function appendBubble(text, role){
    const div = document.createElement('div');
    div.className = 'chat-bubble ' + (role === 'user' ? 'user' : 'bot');
    div.textContent = text;
    body.appendChild(div);
    body.scrollTop = body.scrollHeight;
  }

  function togglePanel(show){
    if (typeof show === 'boolean') {
      panel.style.display = show ? 'block' : 'none';
    } else {
      panel.style.display = (panel.style.display === 'block' ? 'none' : 'block');
    }
  }

  fab.addEventListener('click', () => togglePanel());
  closeBtn.addEventListener('click', () => togglePanel(false));

  async function doSend(){
    const text = input.value.trim();
    if (!text) return;

    appendBubble(text, 'user');
    input.value = '';
    send.disabled = true;

    const waitText = t('generating') || 'æ­£åœ¨ç”Ÿæˆè§£è¯»â€¦';
    appendBubble(waitText, 'bot');

    try{
      const reply = await askAI(text);
      body.removeChild(body.lastChild);
      appendBubble(reply || (t('retry') || 'æš‚æ—¶æ— æ³•å›å¤ï¼Œè¯·ç¨åå†è¯•ã€‚'), 'bot');
    }catch(e){
      console.warn('[chat] error:', e);
      body.removeChild(body.lastChild);
      appendBubble(t('neterr') || 'ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•ã€‚', 'bot');
    }finally{
      send.disabled = false;
    }
  }

  send.addEventListener('click', doSend);
  input.addEventListener('keydown', e=>{
    if (e.key === 'Enter' && !e.shiftKey){
      e.preventDefault();
      doSend();
    }
  });
})();  

/* ===== Butler AI: èŠ¯ç‰‡æ¸²æŸ“ ===== */
function renderChips() {
  let box = $('aiChips');
  if (!box) return;
  box.innerHTML = '';

  const chips = [
    { key: 'chip_career', fallback: 'äº‹ä¸š', intent:'career' },
    { key: 'chip_love',   fallback: 'æ„Ÿæƒ…', intent:'love' },
    { key: 'chip_money',  fallback: 'è´¢è¿', intent:'wealth' },
    { key: 'chip_list',   fallback: 'ä»Šæ—¥å¾…åŠ', intent:'todo' },
    { key: 'chip_30d',    fallback: '30å¤©å»ºè®®', intent:'30d' },
  ];

  chips.forEach((c) => {
    const label = t(c.key) || c.fallback;
    const btn = document.createElement('button');
    btn.type = 'button';
    btn.className = 'chip';
    btn.textContent = label;
    btn.setAttribute('data-i18n', c.key);

    btn.addEventListener('click', async () => {
      const aiBox = $('aiText');
      if (aiBox) {
        aiBox.textContent = t('generating') || 'æ­£åœ¨ç”Ÿæˆè§£è¯»â€¦';
      }
      try{
        if (!window._lastKyuuseiCtx) {
          if (aiBox) aiBox.textContent = t('please_birth') || 'è¯·å…ˆé€‰æ‹©å‡ºç”Ÿæ—¥æœŸå¹¶ç”Ÿæˆå‘½ç›˜ã€‚';
          return;
        }
        const ctx = window._lastKyuuseiCtx;
        const basePrompt = `
        ä¹æ˜Ÿæ°”å­¦ä¸»æ˜Ÿï¼š${ctx.starName} (${ctx.starJP})
        äº”è¡Œä¸»å…ƒç´ ï¼š${ctx.mainElement}
        å½“å‰åˆ†æç±»å‹ï¼š${ctx.analysisTypeLabel}
        å‡ºç”Ÿæ—¥æœŸï¼š${ctx.birthStr}
        æ€§åˆ«ï¼ˆåŸå§‹è¾“å…¥ï¼‰ï¼š${ctx.gender || '-'}
        `;
        const intentTextMap = {
          career: "è¯·æ ¹æ®ä»¥ä¸Šä¹æ˜Ÿä¿¡æ¯ï¼Œé‡ç‚¹ä»äº‹ä¸šä¸è´¢è¿è§’åº¦ç»™å‡ºå®ç”¨å»ºè®®ï¼Œå†™æˆ 2â€“3 æ®µè¯´æ˜ä¸ 3â€“5 æ¡å¯æ‰§è¡Œè¡ŒåŠ¨ã€‚",
          love: "è¯·æ ¹æ®ä»¥ä¸Šä¹æ˜Ÿä¿¡æ¯ï¼Œé‡ç‚¹ä»æ„Ÿæƒ…ä¸äº²å¯†å…³ç³»è§’åº¦ç»™å‡ºå®ç”¨å»ºè®®ï¼Œå…¼é¡¾å•èº«ä¸å·²æœ‰ä¼´ä¾£çš„æƒ…å†µã€‚",
          wealth: "è¯·æ ¹æ®ä»¥ä¸Šä¹æ˜Ÿä¿¡æ¯ï¼Œä»è´¢å¯Œå¸ƒå±€ã€æ”¶å…¥ç»“æ„ä¸èµ„é‡‘æµåŠ¨è§’åº¦ç»™å‡ºå»ºè®®ï¼ŒåŠ¡å®ã€å…·ä½“ï¼Œä¸è®²ç©ºæ³›å¿ƒçµé¸¡æ±¤ã€‚",
          todo: "è¯·æ ¹æ®ä»¥ä¸Šä¹æ˜Ÿä¿¡æ¯ï¼Œå¸®æˆ‘å†™å‡ºä»Šå¤©å¯ä»¥æ‰§è¡Œçš„ 3â€“7 æ¡å°ä»»åŠ¡ï¼Œå¸®åŠ©æˆ‘è°ƒé¡ºè¿åŠ¿ä¸å¿ƒæ€ã€‚",
          "30d": "è¯·æ ¹æ®ä»¥ä¸Šä¹æ˜Ÿä¿¡æ¯ï¼Œå†™å‡ºæœªæ¥ 30 å¤©çš„é‡ç‚¹æé†’ä¸è¡ŒåŠ¨æ–¹å‘ï¼Œæœ€å¥½åˆ†æˆ 3 ä¸ªé˜¶æ®µã€‚"
        };
        const reply = await askAI(intentTextMap[c.intent] || '', basePrompt);
        if (aiBox) aiBox.textContent = reply || (t('retry') || 'æš‚æ—¶æ— æ³•ç”Ÿæˆï¼Œè¯·ç¨åå†è¯•ã€‚');
      }catch(e){
        console.warn('[chips ai] error', e);
        if ($('aiText')) $('aiText').textContent = t('neterr') || 'ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•ã€‚';
      }
    });

    box.appendChild(btn);
  });
}

/* ===== ä¹æ˜Ÿç®—æ³• ===== */
function reduce1(n){
  let s = Math.abs(n).toString().split('').reduce((a,b)=>a+Number(b),0);
  while(s>9) s = s.toString().split('').reduce((a,b)=>a+Number(b),0);
  return s;
}
function isBeforeSetsubun(d){
  const m = d.getMonth(), day = d.getDate();
  return (m===0)||(m===1&&day<=3);
}
function calcHonmei(dateStr){
  const d=new Date(dateStr);
  if(isNaN(d))return null;
  const root=reduce1(d.getFullYear());
  let num=(isBeforeSetsubun(d)?12:11)-root;
  while(num<=0)num+=9;
  return num;
}

/* ===== ä¹æ˜Ÿæ•°æ® - æ”¯æŒ6ç§è¯­è¨€ ===== */
const STARS = {
  1: {
    name: {
      'zh-CN': 'ä¸€ç™½æ°´æ˜Ÿ',
      'zh-TW': 'ä¸€ç™½æ°´æ˜Ÿ',
      'en': 'One White Water Star',
      'ja-JP': 'ä¸€ç™½æ°´æ˜Ÿ',
      'th-TH': 'à¸”à¸²à¸§à¸™à¹‰à¸³à¸«à¸™à¸¶à¹ˆà¸‡à¸‚à¸²à¸§',
      'ms': 'Bintang Air Putih 1'
    },
    elem: { 'zh-CN': 'æ°´', 'zh-TW': 'æ°´', 'en': 'Water', 'ja-JP': 'æ°´', 'th-TH': 'à¸™à¹‰à¸³', 'ms': 'Air' },
    color: { 'zh-CN': 'ç™½', 'zh-TW': 'ç™½', 'en': 'White', 'ja-JP': 'ç™½', 'th-TH': 'à¸‚à¸²à¸§', 'ms': 'Putih' },
    key: {
      'zh-CN': ['æµåŠ¨', 'ç›´è§‰', 'æ²Ÿé€š'],
      'zh-TW': ['æµå‹•', 'ç›´è¦º', 'æºé€š'],
      'en': ['Flow', 'Intuition', 'Communication'],
      'ja-JP': ['æµã‚Œ', 'ç›´æ„Ÿ', 'ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³'],
      'th-TH': ['à¸à¸²à¸£à¹„à¸«à¸¥à¹€à¸§à¸µà¸¢à¸™', 'à¸ªà¸±à¸à¸Šà¸²à¸•à¸à¸²à¸“', 'à¸à¸²à¸£à¸ªà¸·à¹ˆà¸­à¸ªà¸²à¸£'],
      'ms': ['Aliran', 'Intuisi', 'Komunikasi']
    },
    about: {
      'zh-CN': 'æ•æ„Ÿç»†è…»ã€å…±æƒ…åŠ›å¼ºï¼Œè¡ŒåŠ¨çµæ´»ï¼Œæ“…é•¿èµ„è®¯ä¸å…³ç³»åè°ƒã€‚',
      'zh-TW': 'æ•æ„Ÿç´°è†©ã€å…±æƒ…åŠ›å¼·ï¼Œè¡Œå‹•éˆæ´»ï¼Œæ“…é•·è³‡è¨Šèˆ‡é—œä¿‚å”èª¿ã€‚',
      'en': 'Sensitive and empathetic, moves flexibly, good at coordinating information and relationships.',
      'ja-JP': 'ç¹Šç´°ã§å…±æ„ŸåŠ›ãŒé«˜ãã€å‹•ããŒæŸ”è»Ÿã§ã€æƒ…å ±ã‚„äººé–“é–¢ä¿‚ã®èª¿æ•´ãŒå¾—æ„ã§ã™ã€‚',
      'th-TH': 'à¸­à¹ˆà¸­à¸™à¹„à¸«à¸§à¹à¸¥à¸°à¸¡à¸µà¹€à¸¡à¸•à¸•à¸²à¸ªà¸¹à¸‡ à¹€à¸„à¸¥à¸·à¹ˆà¸­à¸™à¹„à¸«à¸§à¸„à¸¥à¹ˆà¸­à¸‡à¸•à¸±à¸§ à¹€à¸«à¸¡à¸²à¸°à¸à¸±à¸šà¸‡à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹à¸¥à¸°à¸à¸²à¸£à¸›à¸£à¸°à¸ªà¸²à¸™à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ',
      'ms': 'Peka dan mudah berempati, bergerak dengan lincah, mahir menyelaras maklumat dan hubungan.'
    }
  },
  2: {
    name: {
      'zh-CN': 'äºŒé»‘åœŸæ˜Ÿ',
      'zh-TW': 'äºŒé»‘åœŸæ˜Ÿ',
      'en': 'Two Black Earth Star',
      'ja-JP': 'äºŒé»’åœŸæ˜Ÿ',
      'th-TH': 'à¸”à¸²à¸§à¸”à¸´à¸™à¸ªà¸­à¸‡à¸”à¸³',
      'ms': 'Bintang Tanah Hitam 2'
    },
    elem: { 'zh-CN': 'åœŸ', 'zh-TW': 'åœŸ', 'en': 'Earth', 'ja-JP': 'åœŸ', 'th-TH': 'à¸”à¸´à¸™', 'ms': 'Tanah' },
    color: { 'zh-CN': 'é»‘', 'zh-TW': 'é»‘', 'en': 'Black', 'ja-JP': 'é»’', 'th-TH': 'à¸”à¸³', 'ms': 'Hitam' },
    key: {
      'zh-CN': ['æ»‹å…»', 'æ‰¿è½½', 'è€æ€§'],
      'zh-TW': ['æ»‹é¤Š', 'æ‰¿è¼‰', 'è€æ€§'],
      'en': ['Nurturing', 'Supporting', 'Patience'],
      'ja-JP': ['æ»‹é¤Š', 'å—å®¹', 'å¿è€'],
      'th-TH': ['à¸à¸²à¸£à¹€à¸¥à¸µà¹‰à¸¢à¸‡à¸”à¸¹', 'à¸à¸²à¸£à¸£à¸±à¸šà¸ à¸²à¸£à¸°', 'à¸„à¸§à¸²à¸¡à¸­à¸”à¸—à¸™'],
      'ms': ['Pemeliharaan', 'Menampung', 'Kesabaran']
    },
    about: {
      'zh-CN': 'åŠ¡å®ç¨³å¥ã€é‡è§†ç§©åºä¸ç…§æ–™ï¼Œæ“…é•¿æŒç»­è€•è€˜ä¸è½åœ°ã€‚',
      'zh-TW': 'å‹™å¯¦ç©©å¥ã€é‡è¦–ç§©åºèˆ‡ç…§æ–™ï¼Œæ“…é•·æŒçºŒè€•è€˜èˆ‡è½åœ°ã€‚',
      'en': 'Practical and steady, values order and care, excels at long-term cultivation.',
      'ja-JP': 'ç¾å®Ÿçš„ã§å®‰å®šå¿—å‘ã€ç§©åºã‚„ã‚±ã‚¢ã‚’å¤§åˆ‡ã«ã—ã€ã‚³ãƒ„ã‚³ãƒ„ã¨ç‰©äº‹ã‚’å½¢ã«ã—ã¦ã„ãã‚¿ã‚¤ãƒ—ã€‚',
      'th-TH': 'à¸ˆà¸£à¸´à¸‡à¸ˆà¸±à¸‡à¹à¸¥à¸°à¸¡à¸±à¹ˆà¸™à¸„à¸‡ à¹ƒà¸«à¹‰à¸„à¸§à¸²à¸¡à¸ªà¸³à¸„à¸±à¸à¸à¸±à¸šà¸£à¸°à¹€à¸šà¸µà¸¢à¸šà¹à¸¥à¸°à¸à¸²à¸£à¸”à¸¹à¹à¸¥ à¹€à¸«à¸¡à¸²à¸°à¸à¸±à¸šà¸‡à¸²à¸™à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸¥à¸‡à¸¡à¸·à¸­à¸—à¸³à¸•à¹ˆà¸­à¹€à¸™à¸·à¹ˆà¸­à¸‡à¸¢à¸²à¸§',
      'ms': 'Praktikal dan stabil, mementingkan aturan dan penjagaan, kuat dalam kerja yang perlu diusahakan sedikit demi sedikit.'
    }
  },
  3: {
    name: {
      'zh-CN': 'ä¸‰ç¢§æœ¨æ˜Ÿ',
      'zh-TW': 'ä¸‰ç¢§æœ¨æ˜Ÿ',
      'en': 'Three Jade Wood Star',
      'ja-JP': 'ä¸‰ç¢§æœ¨æ˜Ÿ',
      'th-TH': 'à¸”à¸²à¸§à¹„à¸¡à¹‰à¸ªà¸²à¸¡à¹€à¸‚à¸µà¸¢à¸§',
      'ms': 'Bintang Kayu Hijau 3'
    },
    elem: { 'zh-CN': 'æœ¨', 'zh-TW': 'æœ¨', 'en': 'Wood', 'ja-JP': 'æœ¨', 'th-TH': 'à¹„à¸¡à¹‰', 'ms': 'Kayu' },
    color: { 'zh-CN': 'ç¢§', 'zh-TW': 'ç¢§', 'en': 'Jade Green', 'ja-JP': 'ç¢§', 'th-TH': 'à¹€à¸‚à¸µà¸¢à¸§à¸­à¸¡à¸Ÿà¹‰à¸²', 'ms': 'Hijau kebiruan' },
    key: {
      'zh-CN': ['ç”Ÿå‘', 'è¡¨è¾¾', 'çªç ´'],
      'zh-TW': ['ç”Ÿç™¼', 'è¡¨é”', 'çªç ´'],
      'en': ['Growth', 'Expression', 'Breakthrough'],
      'ja-JP': ['æˆé•·', 'è¡¨ç¾', 'ãƒ–ãƒ¬ã‚¤ã‚¯ã‚¹ãƒ«ãƒ¼'],
      'th-TH': ['à¸à¸²à¸£à¹€à¸•à¸´à¸šà¹‚à¸•', 'à¸à¸²à¸£à¹à¸ªà¸”à¸‡à¸­à¸­à¸', 'à¸à¸²à¸£à¸—à¸°à¸¥à¸¸à¸‚à¸µà¸”à¸ˆà¸³à¸à¸±à¸”'],
      'ms': ['Pertumbuhan', 'Ekspresi', 'Terobosan']
    },
    about: {
      'zh-CN': 'å¥½å¥‡ã€è¡¨è¾¾æ¬²å¼ºï¼Œå–œæ¬¢åˆ›æ„ä¸å¼€ç–†æ‹“åœŸã€‚',
      'zh-TW': 'å¥½å¥‡ã€è¡¨é”æ¬²å¼·ï¼Œå–œæ­¡å‰µæ„èˆ‡é–‹ç–†æ‹“åœŸã€‚',
      'en': 'Curious with strong desire to express, loves creativity and pioneering.',
      'ja-JP': 'å¥½å¥‡å¿ƒãŒå¼·ãã€è‡ªå·±è¡¨ç¾æ¬²ã‚‚è±Šã‹ã€ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ãªæ´»å‹•ã‚„æ–°ã—ã„é ˜åŸŸã‚’åˆ‡ã‚Šé–‹ãã“ã¨ã‚’å¥½ã‚€ã€‚',
      'th-TH': 'à¸­à¸¢à¸²à¸à¸£à¸¹à¹‰à¸­à¸¢à¸²à¸à¹€à¸«à¹‡à¸™à¹à¸¥à¸°à¸Šà¸­à¸šà¹à¸ªà¸”à¸‡à¸•à¸±à¸§à¸•à¸™ à¸£à¸±à¸à¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¸ªà¸£à¹‰à¸²à¸‡à¸ªà¸£à¸£à¸„à¹Œà¹à¸¥à¸°à¸à¸²à¸£à¸šà¸¸à¸à¹€à¸šà¸´à¸à¸ªà¸´à¹ˆà¸‡à¹ƒà¸«à¸¡à¹ˆ',
      'ms': 'Ingin tahu dan suka bersuara, gemar kreativiti dan meneroka wilayah baharu.'
    }
  },
  4: {
    name: {
      'zh-CN': 'å››ç»¿æœ¨æ˜Ÿ',
      'zh-TW': 'å››ç¶ æœ¨æ˜Ÿ',
      'en': 'Four Green Wood Star',
      'ja-JP': 'å››ç·‘æœ¨æ˜Ÿ',
      'th-TH': 'à¸”à¸²à¸§à¹„à¸¡à¹‰à¸ªà¸µà¹ˆà¹€à¸‚à¸µà¸¢à¸§',
      'ms': 'Bintang Kayu Hijau 4'
    },
    elem: { 'zh-CN': 'æœ¨', 'zh-TW': 'æœ¨', 'en': 'Wood', 'ja-JP': 'æœ¨', 'th-TH': 'à¹„à¸¡à¹‰', 'ms': 'Kayu' },
    color: { 'zh-CN': 'ç»¿', 'zh-TW': 'ç¶ ', 'en': 'Green', 'ja-JP': 'ç·‘', 'th-TH': 'à¹€à¸‚à¸µà¸¢à¸§', 'ms': 'Hijau' },
    key: {
      'zh-CN': ['åè°ƒ', 'äº¤æµ', 'æ—…è¡Œ'],
      'zh-TW': ['å”èª¿', 'äº¤æµ', 'æ—…è¡Œ'],
      'en': ['Coordination', 'Exchange', 'Travel'],
      'ja-JP': ['èª¿å’Œ', 'äº¤æµ', 'æ—…'],
      'th-TH': ['à¸à¸²à¸£à¸›à¸£à¸°à¸ªà¸²à¸™à¸‡à¸²à¸™', 'à¸à¸²à¸£à¹à¸¥à¸à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™', 'à¸à¸²à¸£à¹€à¸”à¸´à¸™à¸—à¸²à¸‡'],
      'ms': ['Penyelarasan', 'Pertukaran', 'Perjalanan']
    },
    about: {
      'zh-CN': 'æ¸©å’ŒåŒ…å®¹ï¼Œæ“…é•¿æ²Ÿé€šåè°ƒä¸çŸ¥è¯†æ•´åˆã€‚',
      'zh-TW': 'æº«å’ŒåŒ…å®¹ï¼Œæ“…é•·æºé€šå”èª¿èˆ‡çŸ¥è­˜æ•´åˆã€‚',
      'en': 'Gentle and inclusive, good at communication, mediation and knowledge integration.',
      'ja-JP': 'ç©ã‚„ã‹ã§åŒ…å®¹åŠ›ãŒã‚ã‚Šã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚„èª¿æ•´ã€çŸ¥è­˜ã®ç·¨é›†ãƒ»çµ±åˆãŒå¾—æ„ã€‚',
      'th-TH': 'à¸­à¹ˆà¸­à¸™à¹‚à¸¢à¸™ à¹€à¸›à¸´à¸”à¸à¸§à¹‰à¸²à¸‡à¸”à¹‰à¸²à¸™à¸„à¸§à¸²à¸¡à¸„à¸´à¸” à¹€à¸à¹ˆà¸‡à¸à¸²à¸£à¸ªà¸·à¹ˆà¸­à¸ªà¸²à¸£ à¸›à¸£à¸°à¸™à¸µà¸›à¸£à¸°à¸™à¸­à¸¡ à¹à¸¥à¸°à¸ˆà¸±à¸”à¸£à¸°à¸šà¸šà¸„à¸§à¸²à¸¡à¸£à¸¹à¹‰',
      'ms': 'Lembut dan mudah menerima, pandai berkomunikasi, berunding dan menggabungkan ilmu.'
    }
  },
  5: {
    name: {
      'zh-CN': 'äº”é»„åœŸæ˜Ÿ',
      'zh-TW': 'äº”é»ƒåœŸæ˜Ÿ',
      'en': 'Five Yellow Earth Star',
      'ja-JP': 'äº”é»„åœŸæ˜Ÿ',
      'th-TH': 'à¸”à¸²à¸§à¸”à¸´à¸™à¸«à¹‰à¸²à¹€à¸«à¸¥à¸·à¸­à¸‡',
      'ms': 'Bintang Tanah Kuning 5'
    },
    elem: { 'zh-CN': 'åœŸ', 'zh-TW': 'åœŸ', 'en': 'Earth', 'ja-JP': 'åœŸ', 'th-TH': 'à¸”à¸´à¸™', 'ms': 'Tanah' },
    color: { 'zh-CN': 'é»„', 'zh-TW': 'é»ƒ', 'en': 'Yellow', 'ja-JP': 'é»„', 'th-TH': 'à¹€à¸«à¸¥à¸·à¸­à¸‡', 'ms': 'Kuning' },
    key: {
      'zh-CN': ['ä¸­å®«', 'æƒè¡¡', 'é‡å¯'],
      'zh-TW': ['ä¸­å®®', 'æ¬Šè¡¡', 'é‡å•Ÿ'],
      'en': ['Center', 'Balance', 'Restart'],
      'ja-JP': ['ä¸­å¿ƒ', 'ãƒãƒ©ãƒ³ã‚¹', 'ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ'],
      'th-TH': ['à¸ˆà¸¸à¸”à¸¨à¸¹à¸™à¸¢à¹Œà¸à¸¥à¸²à¸‡', 'à¸à¸²à¸£à¸Šà¸±à¹ˆà¸‡à¸™à¹‰à¸³à¸«à¸™à¸±à¸', 'à¸à¸²à¸£à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¹ƒà¸«à¸¡à¹ˆ'],
      'ms': ['Pusat', 'Timbangan', 'Permulaan semula']
    },
    about: {
      'zh-CN': 'å±…ä¸­å®šç›˜ã€æŠ—å‹åŠ›å¼ºï¼Œæ“…é•¿ç­–ç•¥ä¸å±æœºç®¡ç†ã€‚',
      'zh-TW': 'å±…ä¸­å®šç›¤ã€æŠ—å£“åŠ›å¼·ï¼Œæ“…é•·ç­–ç•¥èˆ‡å±æ©Ÿç®¡ç†ã€‚',
      'en': 'Holds the center, strong under pressure, skilled at strategy and crisis management.',
      'ja-JP': 'ä¸­å¿ƒã«ç«‹ã£ã¦å…¨ä½“ã‚’è¦‹æ¸¡ã—ã€ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã«å¼·ã„ã€æˆ¦ç•¥ã‚„å±æ©Ÿç®¡ç†ã«é©æ€§ãŒã‚ã‚‹ã€‚',
      'th-TH': 'à¸¢à¸·à¸™à¸­à¸¢à¸¹à¹ˆà¸à¸¶à¹ˆà¸‡à¸à¸¥à¸²à¸‡à¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œ à¸¡à¸­à¸‡à¸ à¸²à¸à¸£à¸§à¸¡à¹€à¸à¹ˆà¸‡ à¸­à¸”à¸—à¸™à¸•à¹ˆà¸­à¹à¸£à¸‡à¸à¸”à¸”à¸±à¸™ à¹€à¸«à¸¡à¸²à¸°à¸à¸±à¸šà¸‡à¸²à¸™à¸§à¸²à¸‡à¸à¸¥à¸¢à¸¸à¸—à¸˜à¹Œà¹à¸¥à¸°à¸ˆà¸±à¸”à¸à¸²à¸£à¸§à¸´à¸à¸¤à¸•',
      'ms': 'Menjadi titik tengah yang menstabilkan keadaan, tahan tekanan, hebat dalam strategi dan pengurusan krisis.'
    }
  },
  6: {
    name: {
      'zh-CN': 'å…­ç™½é‡‘æ˜Ÿ',
      'zh-TW': 'å…­ç™½é‡‘æ˜Ÿ',
      'en': 'Six White Metal Star',
      'ja-JP': 'å…­ç™½é‡‘æ˜Ÿ',
      'th-TH': 'à¸”à¸²à¸§à¹‚à¸¥à¸«à¸°à¸«à¸à¸‚à¸²à¸§',
      'ms': 'Bintang Logam Putih 6'
    },
    elem: { 'zh-CN': 'é‡‘', 'zh-TW': 'é‡‘', 'en': 'Metal', 'ja-JP': 'é‡‘', 'th-TH': 'à¹‚à¸¥à¸«à¸°', 'ms': 'Logam' },
    color: { 'zh-CN': 'ç™½', 'zh-TW': 'ç™½', 'en': 'White', 'ja-JP': 'ç™½', 'th-TH': 'à¸‚à¸²à¸§', 'ms': 'Putih' },
    key: {
      'zh-CN': ['ç§©åº', 'è´£ä»»', 'é¢†å¯¼'],
      'zh-TW': ['ç§©åº', 'è²¬ä»»', 'é ˜å°'],
      'en': ['Order', 'Responsibility', 'Leadership'],
      'ja-JP': ['ç§©åº', 'è²¬ä»»', 'ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—'],
      'th-TH': ['à¸£à¸°à¹€à¸šà¸µà¸¢à¸š', 'à¸„à¸§à¸²à¸¡à¸£à¸±à¸šà¸œà¸´à¸”à¸Šà¸­à¸š', 'à¸ à¸²à¸§à¸°à¸œà¸¹à¹‰à¸™à¸³'],
      'ms': ['Tertib', 'Tanggungjawab', 'Kepimpinan']
    },
    about: {
      'zh-CN': 'è‡ªå¾‹æœæ–­ï¼Œé‡è§†è§„åˆ™ä¸é•¿è¿œè§„åˆ’ã€‚',
      'zh-TW': 'è‡ªå¾‹æœæ–·ï¼Œé‡è¦–è¦å‰‡èˆ‡é•·é è¦åŠƒã€‚',
      'en': 'Self-disciplined and decisive, values rules and long-term vision.',
      'ja-JP': 'è‡ªå¾‹å¿ƒãŒé«˜ãã€æ±ºæ–­åŠ›ã‚‚ã‚ã‚‹ã€ãƒ«ãƒ¼ãƒ«ã‚„é•·æœŸçš„ãªãƒ“ã‚¸ãƒ§ãƒ³ã‚’é‡è¦–ã™ã‚‹ãƒªãƒ¼ãƒ€ãƒ¼æ°—è³ªã€‚',
      'th-TH': 'à¸¡à¸µà¸§à¸´à¸™à¸±à¸¢à¹à¸¥à¸°à¸•à¸±à¸”à¸ªà¸´à¸™à¹ƒà¸ˆà¹„à¸”à¹‰à¸Šà¸±à¸”à¹€à¸ˆà¸™ à¹ƒà¸«à¹‰à¸„à¸§à¸²à¸¡à¸ªà¸³à¸„à¸±à¸à¸à¸±à¸šà¸à¸à¹€à¸à¸“à¸‘à¹Œà¹à¸¥à¸°à¸§à¸´à¸ªà¸±à¸¢à¸—à¸±à¸¨à¸™à¹Œà¸£à¸°à¸¢à¸°à¸¢à¸²à¸§',
      'ms': 'Berdisiplin dan tegas, mengutamakan peraturan dan visi jangka panjang.'
    }
  },
  7: {
    name: {
      'zh-CN': 'ä¸ƒèµ¤é‡‘æ˜Ÿ',
      'zh-TW': 'ä¸ƒèµ¤é‡‘æ˜Ÿ',
      'en': 'Seven Red Metal Star',
      'ja-JP': 'ä¸ƒèµ¤é‡‘æ˜Ÿ',
      'th-TH': 'à¸”à¸²à¸§à¹‚à¸¥à¸«à¸°à¹€à¸ˆà¹‡à¸”à¹à¸”à¸‡',
      'ms': 'Bintang Logam Merah 7'
    },
    elem: { 'zh-CN': 'é‡‘', 'zh-TW': 'é‡‘', 'en': 'Metal', 'ja-JP': 'é‡‘', 'th-TH': 'à¹‚à¸¥à¸«à¸°', 'ms': 'Logam' },
    color: { 'zh-CN': 'èµ¤', 'zh-TW': 'èµ¤', 'en': 'Red', 'ja-JP': 'èµ¤', 'th-TH': 'à¹à¸”à¸‡', 'ms': 'Merah' },
    key: {
      'zh-CN': ['ç¤¾äº¤', 'å“å‘³', 'äº«å—'],
      'zh-TW': ['ç¤¾äº¤', 'å“å‘³', 'äº«å—'],
      'en': ['Socializing', 'Taste', 'Enjoyment'],
      'ja-JP': ['ç¤¾äº¤', 'ã‚»ãƒ³ã‚¹', 'æ¥½ã—ã¿'],
      'th-TH': ['à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸ªà¸±à¸‡à¸„à¸¡', 'à¸£à¸ªà¸™à¸´à¸¢à¸¡', 'à¸„à¸§à¸²à¸¡à¹€à¸à¸¥à¸´à¸”à¹€à¸à¸¥à¸´à¸™'],
      'ms': ['Pergaulan', 'Cita rasa', 'Menikmati']
    },
    about: {
      'zh-CN': 'äººç¼˜å¥½ã€å®¡ç¾ä½³ï¼Œé€‚åˆå“ç‰Œä¸ç¤¾äº¤åœºåŸŸã€‚',
      'zh-TW': 'äººç·£å¥½ã€å¯©ç¾ä½³ï¼Œé©åˆå“ç‰Œèˆ‡ç¤¾äº¤å ´åŸŸã€‚',
      'en': 'Charming with good people skills and aesthetics, suited to branding and social settings.',
      'ja-JP': 'äººå½“ãŸã‚ŠãŒè‰¯ãã€å¯©ç¾çœ¼ã«ã‚‚æµã¾ã‚Œã¦ã„ã‚‹ã€ãƒ–ãƒ©ãƒ³ãƒ‰ã¥ãã‚Šã‚„ç¤¾äº¤ã®å ´ã§è¼ãã‚„ã™ã„ã‚¿ã‚¤ãƒ—ã€‚',
      'th-TH': 'à¸¡à¸µà¹€à¸ªà¸™à¹ˆà¸«à¹Œà¹à¸¥à¸°à¹€à¸‚à¹‰à¸²à¸à¸±à¸šà¸„à¸™à¸‡à¹ˆà¸²à¸¢ à¹€à¸‹à¸™à¸ªà¹Œà¸”à¹‰à¸²à¸™à¸„à¸§à¸²à¸¡à¸ªà¸§à¸¢à¸‡à¸²à¸¡à¸”à¸µ à¹€à¸«à¸¡à¸²à¸°à¸à¸±à¸šà¸‡à¸²à¸™à¹à¸šà¸£à¸™à¸”à¹Œà¹à¸¥à¸°à¸‡à¸²à¸™à¸ªà¸±à¸‡à¸„à¸¡',
      'ms': 'Mesra dan mudah disukai, mempunyai cita rasa yang baik, sesuai dalam dunia jenama dan suasana sosial.'
    }
  },
  8: {
    name: {
      'zh-CN': 'å…«ç™½åœŸæ˜Ÿ',
      'zh-TW': 'å…«ç™½åœŸæ˜Ÿ',
      'en': 'Eight White Earth Star',
      'ja-JP': 'å…«ç™½åœŸæ˜Ÿ',
      'th-TH': 'à¸”à¸²à¸§à¸”à¸´à¸™à¹à¸›à¸”à¸‚à¸²à¸§',
      'ms': 'Bintang Tanah Putih 8'
    },
    elem: { 'zh-CN': 'åœŸ', 'zh-TW': 'åœŸ', 'en': 'Earth', 'ja-JP': 'åœŸ', 'th-TH': 'à¸”à¸´à¸™', 'ms': 'Tanah' },
    color: { 'zh-CN': 'ç™½', 'zh-TW': 'ç™½', 'en': 'White', 'ja-JP': 'ç™½', 'th-TH': 'à¸‚à¸²à¸§', 'ms': 'Putih' },
    key: {
      'zh-CN': ['ç§¯ç´¯', 'è½¬æŠ˜', 'å®šå±±'],
      'zh-TW': ['ç©ç´¯', 'è½‰æŠ˜', 'å®šå±±'],
      'en': ['Accumulation', 'Turning Point', 'Steady Mountain'],
      'ja-JP': ['è“„ç©', 'è»¢æ›', 'å®‰å®š'],
      'th-TH': ['à¸à¸²à¸£à¸ªà¸±à¹ˆà¸‡à¸ªà¸¡', 'à¸ˆà¸¸à¸”à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™', 'à¸ à¸¹à¹€à¸‚à¸²à¸¡à¸±à¹ˆà¸™à¸„à¸‡'],
      'ms': ['Pengumpulan', 'Titik perubahan', 'Gunung tetap']
    },
    about: {
      'zh-CN': 'ç¨³ä¸­æ±‚å˜ã€åšç§¯è–„å‘ï¼Œå…³é”®æ—¶åˆ»èƒ½ç¿»ç›˜ã€‚',
      'zh-TW': 'ç©©ä¸­æ±‚è®Šã€åšç©è–„ç™¼ï¼Œé—œéµæ™‚åˆ»èƒ½ç¿»ç›¤ã€‚',
      'en': 'Seeks change through stability, accumulates quietly, can turn situations around at key moments.',
      'ja-JP': 'å®‰å®šã®ä¸­ã§å°‘ã—ãšã¤å¤‰åŒ–ã‚’èµ·ã“ã—ã€ã˜ã£ãã‚ŠåŠ›ã‚’è“„ãˆã‚‹ã€å‹è² ã©ã“ã‚ã§å¤§ããæµã‚Œã‚’å¤‰ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚',
      'th-TH': 'à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹à¸›à¸¥à¸‡à¸­à¸¢à¹ˆà¸²à¸‡à¸„à¹ˆà¸­à¸¢à¹€à¸›à¹‡à¸™à¸„à¹ˆà¸­à¸¢à¹„à¸›à¸šà¸™à¸à¸·à¹‰à¸™à¸à¸²à¸™à¸—à¸µà¹ˆà¸¡à¸±à¹ˆà¸™à¸„à¸‡ à¸ªà¸±à¹ˆà¸‡à¸ªà¸¡à¸à¸¥à¸±à¸‡à¹„à¸§à¹‰à¸™à¸²à¸™à¹à¸¥à¸°à¸à¸¥à¸´à¸à¹€à¸à¸¡à¹„à¸”à¹‰à¹ƒà¸™à¸ˆà¸±à¸‡à¸«à¸§à¸°à¸ªà¸³à¸„à¸±à¸',
      'ms': 'Mencari perubahan melalui kestabilan, mengumpul kekuatan secara senyap dan boleh mengubah keadaan pada saat penting.'
    }
  },
  9: {
    name: {
      'zh-CN': 'ä¹ç´«ç«æ˜Ÿ',
      'zh-TW': 'ä¹ç´«ç«æ˜Ÿ',
      'en': 'Nine Purple Fire Star',
      'ja-JP': 'ä¹ç´«ç«æ˜Ÿ',
      'th-TH': 'à¸”à¸²à¸§à¹„à¸Ÿà¹€à¸à¹‰à¸²à¸¡à¹ˆà¸§à¸‡',
      'ms': 'Bintang Api Ungu 9'
    },
    elem: { 'zh-CN': 'ç«', 'zh-TW': 'ç«', 'en': 'Fire', 'ja-JP': 'ç«', 'th-TH': 'à¹„à¸Ÿ', 'ms': 'Api' },
    color: { 'zh-CN': 'ç´«', 'zh-TW': 'ç´«', 'en': 'Purple', 'ja-JP': 'ç´«', 'th-TH': 'à¸¡à¹ˆà¸§à¸‡', 'ms': 'Ungu' },
    key: {
      'zh-CN': ['å…‰å½©', 'çµæ„Ÿ', 'ä¼ æ’­'],
      'zh-TW': ['å…‰å½©', 'éˆæ„Ÿ', 'å‚³æ’­'],
      'en': ['Brilliance', 'Inspiration', 'Broadcast'],
      'ja-JP': ['è¼ã', 'ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³', 'ç™ºä¿¡'],
      'th-TH': ['à¸„à¸§à¸²à¸¡à¹‚à¸”à¸”à¹€à¸”à¹ˆà¸™', 'à¹à¸£à¸‡à¸šà¸±à¸™à¸”à¸²à¸¥à¹ƒà¸ˆ', 'à¸à¸²à¸£à¹€à¸œà¸¢à¹à¸à¸£à¹ˆ'],
      'ms': ['Sinar', 'Inspirasi', 'Penyebaran']
    },
    about: {
      'zh-CN': 'çƒ­æƒ…å¤–æ”¾ã€çµæ„Ÿå¤šï¼Œé€‚åˆç™»å°è¡¨è¾¾ä¸IPæ‰“é€ ã€‚',
      'zh-TW': 'ç†±æƒ…å¤–æ”¾ã€éˆæ„Ÿå¤šï¼Œé©åˆç™»å°è¡¨é”èˆ‡IPæ‰“é€ ã€‚',
      'en': 'Passionate and expressive with many ideas, suited to being on stage and building personal brand.',
      'ja-JP': 'æƒ…ç†±çš„ã§è¡¨ç¾åŠ›ãŒé«˜ãã€ã²ã‚‰ã‚ãã‚‚è±Šå¯Œã€ã‚¹ãƒ†ãƒ¼ã‚¸ã«ç«‹ã¤ã“ã¨ã‚„è‡ªåˆ†ã®ä¸–ç•Œè¦³ã‚’ç™ºä¿¡ã™ã‚‹æ´»å‹•ã«å‘ã„ã¦ã„ã‚‹ã€‚',
      'th-TH': 'à¸¡à¸µà¹„à¸Ÿà¹à¸£à¸‡à¹à¸¥à¸°à¸Šà¸­à¸šà¹à¸ªà¸”à¸‡à¸­à¸­à¸ à¹„à¸­à¹€à¸”à¸µà¸¢à¹€à¸¢à¸­à¸° à¹€à¸«à¸¡à¸²à¸°à¸à¸±à¸šà¸à¸²à¸£à¸‚à¸¶à¹‰à¸™à¹€à¸§à¸—à¸µà¹à¸¥à¸°à¸ªà¸£à¹‰à¸²à¸‡à¸•à¸±à¸§à¸•à¸™à¸«à¸£à¸·à¸­à¹à¸šà¸£à¸™à¸”à¹Œà¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡',
      'ms': 'Bersemangat dan ekspresif, penuh ilham, sesuai untuk berada di pentas dan membina jenama peribadi.'
    }
  }
};

/* ===== æ·±åº¦åˆ†ææ•°æ® ===== */
const STARS_DEEP = {
  1: {
    element: 'æ°´',
    elements: { æœ¨: 1, ç«: 2, åœŸ: 2, é‡‘: 3, æ°´: 4 },
    directions: { favorable: ['åŒ—', 'ä¸œå—', 'å—'], avoid: ['è¥¿å—', 'ä¸œåŒ—'] },
    text: {
      'zh-CN': {
        personality: 'ç›´è§‰æ•é”ï¼Œé€‚åº”åŠ›å¼ºï¼Œå¿ƒæ€ç»†è…»å¦‚æ°´ï¼Œèƒ½æ„ŸçŸ¥ä»–äººæƒ…ç»ªå˜åŒ–ã€‚ä½†æœ‰æ—¶è¿‡äºæ•æ„Ÿï¼Œå®¹æ˜“å—ç¯å¢ƒå½±å“è€Œæ³¢åŠ¨ã€‚',
        talents: ['å¿«é€Ÿå­¦ä¹ æ–°äº‹ç‰©', 'è°ƒè§£äººé™…å…³ç³»', 'åˆ›æ„è¡¨è¾¾', 'å±æœºæ„ŸçŸ¥'],
        challenges: 'å»ºç«‹ç¨³å®šçš„æƒ…æ„Ÿè¾¹ç•Œï¼Œé¿å…è¿‡åº¦å¸æ”¶ä»–äººè´Ÿé¢æƒ…ç»ªï¼Œå­¦ä¼šåœ¨å˜åŒ–ä¸­ä¿æŒå†…åœ¨å®šåŠ›ã€‚',
        career_analysis: {
          strengths: ['æ²Ÿé€šåè°ƒèƒ½åŠ›', 'åˆ›æ„ç­–åˆ’', 'å±æœºå¤„ç†', 'å¿«é€Ÿé€‚åº”'],
          opportunities: ['å¿ƒç†å’¨è¯¢', 'åª’ä½“åˆ›ä½œ', 'å¤–äº¤è´¸æ˜“', 'è‰ºæœ¯è¡¨è¾¾'],
          risks: ['å†³ç­–çŠ¹è±«ä¸å†³', 'æ˜“å—ç¯å¢ƒå½±å“', 'ç¼ºä¹åšæŒ', 'æƒ…æ„Ÿæ¶ˆè€—'],
          actions: ['æ¯æ—¥å†¥æƒ³15åˆ†é’Ÿ', 'å­¦ä¹ ä¸€é—¨è¡¨è¾¾è‰ºæœ¯', 'å¯»æ‰¾æ°´å…ƒç´ ç›¸å…³è¡Œä¸š', 'å»ºç«‹å·¥ä½œä¸ç”Ÿæ´»çš„è¾¹ç•Œ']
        },
        relationship_analysis: {
          strengths: ['å–„è§£äººæ„', 'æµªæ¼«ä½“è´´', 'çµæ´»å˜é€š', 'æƒ…æ„Ÿä¸°å¯Œ'],
          opportunities: ['æ‰©å¤§ç¤¾äº¤åœˆ', 'å­¦ä¹ æƒ…æ„Ÿè¡¨è¾¾æŠ€å·§', 'å»ºç«‹æ·±åº¦æƒ…æ„Ÿè¿æ¥', 'å‚åŠ æ–‡åŒ–è‰ºæœ¯æ´»åŠ¨'],
          risks: ['æƒ…æ„Ÿä¾èµ–', 'è¾¹ç•Œæ¨¡ç³Š', 'å®¹æ˜“å—ä¼¤', 'è¿‡åº¦å¦¥å'],
          actions: ['ç»ƒä¹ è¡¨è¾¾çœŸå®æ„Ÿå—', 'è®¾å®šæ¸…æ™°çš„æƒ…æ„Ÿç•Œé™', 'åŸ¹å…»ç‹¬ç«‹å…´è¶£çˆ±å¥½', 'å­¦ä¹ æƒ…æ„Ÿè‡ªæˆ‘è°ƒèŠ‚']
        },
        health_analysis: {
          strengths: ['æ–°é™ˆä»£è°¢å¿«', 'æ¢å¤åŠ›å¼º', 'æŸ”éŸ§æ€§å¥½'],
          risks: ['è‚¾è„æ³Œå°¿ç³»ç»Ÿ', 'è€³éƒ¨é—®é¢˜', 'æƒ…ç»ªæ³¢åŠ¨', 'å¤±çœ '],
          actions: ['æ¯å¤©å–è¶³2å‡æ°´', 'ç»ƒä¹ é™åå†¥æƒ³', 'é¿å…è¿‡åº¦åˆºæ¿€', 'ä¿è¯å……è¶³ç¡çœ ']
        }
      },
      'zh-TW': {
        personality: 'ç›´è¦ºæ•éŠ³ï¼Œé©æ‡‰åŠ›å¼·ï¼Œå¿ƒæ€ç´°è†©å¦‚æ°´ï¼Œèƒ½æ„ŸçŸ¥ä»–äººæƒ…ç·’è®ŠåŒ–ã€‚ä½†æœ‰æ™‚éæ–¼æ•æ„Ÿï¼Œå®¹æ˜“å—ç’°å¢ƒå½±éŸ¿è€Œæ³¢å‹•ã€‚',
        talents: ['å¿«é€Ÿå­¸ç¿’æ–°äº‹ç‰©', 'èª¿è§£äººéš›é—œä¿‚', 'å‰µæ„è¡¨é”', 'å±æ©Ÿæ„ŸçŸ¥'],
        challenges: 'å»ºç«‹ç©©å®šçš„æƒ…æ„Ÿé‚Šç•Œï¼Œé¿å…éåº¦å¸æ”¶ä»–äººè² é¢æƒ…ç·’ï¼Œå­¸æœƒåœ¨è®ŠåŒ–ä¸­ä¿æŒå…§åœ¨å®šåŠ›ã€‚',
        career_analysis: {
          strengths: ['æºé€šå”èª¿èƒ½åŠ›', 'å‰µæ„ç­–åŠƒ', 'å±æ©Ÿè™•ç†', 'å¿«é€Ÿé©æ‡‰'],
          opportunities: ['å¿ƒç†è«®è©¢', 'åª’é«”å‰µä½œ', 'å¤–äº¤è²¿æ˜“', 'è—è¡“è¡¨é”'],
          risks: ['æ±ºç­–çŒ¶è±«ä¸æ±º', 'æ˜“å—ç’°å¢ƒå½±éŸ¿', 'ç¼ºä¹å …æŒ', 'æƒ…æ„Ÿæ¶ˆè€—'],
          actions: ['æ¯æ—¥å†¥æƒ³15åˆ†é˜', 'å­¸ç¿’ä¸€é–€è¡¨é”è—è¡“', 'å°‹æ‰¾æ°´å…ƒç´ ç›¸é—œè¡Œæ¥­', 'å»ºç«‹å·¥ä½œèˆ‡ç”Ÿæ´»çš„é‚Šç•Œ']
        },
        relationship_analysis: {
          strengths: ['å–„è§£äººæ„', 'æµªæ¼«é«”è²¼', 'éˆæ´»è®Šé€š', 'æƒ…æ„Ÿè±å¯Œ'],
          opportunities: ['æ“´å¤§ç¤¾äº¤åœˆ', 'å­¸ç¿’æƒ…æ„Ÿè¡¨é”æŠ€å·§', 'å»ºç«‹æ·±åº¦æƒ…æ„Ÿé€£æ¥', 'åƒåŠ æ–‡åŒ–è—è¡“æ´»å‹•'],
          risks: ['æƒ…æ„Ÿä¾è³´', 'é‚Šç•Œæ¨¡ç³Š', 'å®¹æ˜“å—å‚·', 'éåº¦å¦¥å”'],
          actions: ['ç·´ç¿’è¡¨é”çœŸå¯¦æ„Ÿå—', 'è¨­å®šæ¸…æ™°çš„æƒ…æ„Ÿç•Œé™', 'åŸ¹é¤Šç¨ç«‹èˆˆè¶£æ„›å¥½', 'å­¸ç¿’æƒ…æ„Ÿè‡ªæˆ‘èª¿ç¯€']
        },
        health_analysis: {
          strengths: ['æ–°é™³ä»£è¬å¿«', 'æ¢å¾©åŠ›å¼·', 'æŸ”éŸŒæ€§å¥½'],
          risks: ['è…è‡Ÿæ³Œå°¿ç³»çµ±', 'è€³éƒ¨å•é¡Œ', 'æƒ…ç·’æ³¢å‹•', 'å¤±çœ '],
          actions: ['æ¯å¤©å–è¶³2å‡æ°´', 'ç·´ç¿’éœåå†¥æƒ³', 'é¿å…éåº¦åˆºæ¿€', 'ä¿è­‰å……è¶³ç¡çœ ']
        }
      },
      'en': {
        personality: 'Intuitive and highly adaptable, mind is subtle like water, can sense others\' emotional changes. But sometimes too sensitive, easily affected by environment.',
        talents: ['Quick learning', 'Mediating relationships', 'Creative expression', 'Crisis sensing'],
        challenges: 'Establish stable emotional boundaries, avoid absorbing others\' negative emotions, learn to maintain inner stability amid changes.',
        career_analysis: {
          strengths: ['Communication skills', 'Creative planning', 'Crisis management', 'Fast adaptation'],
          opportunities: ['Counseling', 'Media creation', 'International trade', 'Artistic expression'],
          risks: ['Indecisive', 'Easily influenced', 'Lack persistence', 'Emotional drain'],
          actions: ['Meditate 15 minutes daily', 'Learn an expressive art', 'Explore water-related industries', 'Set work-life boundaries']
        },
        relationship_analysis: {
          strengths: ['Empathetic', 'Romantic and caring', 'Flexible', 'Emotionally rich'],
          opportunities: ['Expand social circle', 'Learn emotional expression skills', 'Build deep connections', 'Join cultural activities'],
          risks: ['Emotional dependency', 'Blurred boundaries', 'Vulnerable', 'Over-compromise'],
          actions: ['Practice expressing true feelings', 'Set clear emotional boundaries', 'Cultivate independent interests', 'Learn emotional self-regulation']
        },
        health_analysis: {
          strengths: ['Fast metabolism', 'Strong recovery', 'Good flexibility'],
          risks: ['Kidney/urinary system', 'Ear problems', 'Mood swings', 'Insomnia'],
          actions: ['Drink 2 liters of water daily', 'Practice meditation', 'Avoid overstimulation', 'Ensure sufficient sleep']
        }
      },
      'ja-JP': {
        personality: 'ç›´æ„ŸãŒé‹­ãã€é©å¿œåŠ›ãŒé«˜ã„ã€‚å¿ƒã¯æ°´ã®ã‚ˆã†ã«ç´°ã‚„ã‹ã§ã€ä»–äººã®æ„Ÿæƒ…ã®å¤‰åŒ–ã‚’æ„Ÿã˜å–ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ãŸã ã—ã€æ™‚ã«ã¯æ•æ„Ÿã™ãã¦ç’°å¢ƒã®å½±éŸ¿ã‚’å—ã‘ã‚„ã™ã„ã€‚',
        talents: ['æ–°ã—ãç‰©äº‹ã‚’ç´ æ—©ãå­¦ã¶', 'äººé–“é–¢ä¿‚ã®èª¿åœ', 'å‰µé€ çš„ãªè¡¨ç¾', 'å±æ©Ÿå¯ŸçŸ¥'],
        challenges: 'å®‰å®šã—ãŸæ„Ÿæƒ…ã®å¢ƒç•Œç·šã‚’ç¯‰ãã€ä»–äººã®ãƒã‚¬ãƒ†ã‚£ãƒ–ãªæ„Ÿæƒ…ã‚’éåº¦ã«å¸åã™ã‚‹ã®ã‚’é¿ã‘ã€å¤‰åŒ–ã®ä¸­ã§ã‚‚å†…é¢ã®å®‰å®šã‚’ä¿ã¤ã“ã¨ã‚’å­¦ã¶ã€‚',
        career_analysis: {
          strengths: ['ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³èƒ½åŠ›', 'å‰µé€ çš„ãªè¨ˆç”»', 'å±æ©Ÿç®¡ç†', 'è¿…é€Ÿãªé©å¿œ'],
          opportunities: ['ã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°', 'ãƒ¡ãƒ‡ã‚£ã‚¢åˆ¶ä½œ', 'å›½éš›è²¿æ˜“', 'èŠ¸è¡“è¡¨ç¾'],
          risks: ['æ±ºæ–­åŠ›ã«æ¬ ã‘ã‚‹', 'ç’°å¢ƒã®å½±éŸ¿ã‚’å—ã‘ã‚„ã™ã„', 'ç¶™ç¶šæ€§ãŒãªã„', 'æ„Ÿæƒ…çš„æ¶ˆè€—'],
          actions: ['æ¯æ—¥15åˆ†ã®ç‘æƒ³', 'è¡¨ç¾èŠ¸è¡“ã‚’å­¦ã¶', 'æ°´ã«é–¢é€£ã™ã‚‹æ¥­ç•Œã‚’æ¢ã™', 'ä»•äº‹ã¨ç”Ÿæ´»ã®å¢ƒç•Œã‚’è¨­ã‘ã‚‹']
        }
      },
      'th-TH': {
        personality: 'à¸ªà¸±à¸à¸Šà¸²à¸•à¸à¸²à¸“à¹à¸«à¸¥à¸¡à¸„à¸¡ à¸›à¸£à¸±à¸šà¸•à¸±à¸§à¹„à¸”à¹‰à¸”à¸µà¸¡à¸²à¸ à¸ˆà¸´à¸•à¹ƒà¸ˆà¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸­à¹ˆà¸­à¸™à¹€à¸«à¸¡à¸·à¸­à¸™à¸™à¹‰à¸³ à¸£à¸±à¸šà¸£à¸¹à¹‰à¸à¸²à¸£à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹à¸›à¸¥à¸‡à¸—à¸²à¸‡à¸­à¸²à¸£à¸¡à¸“à¹Œà¸‚à¸­à¸‡à¸œà¸¹à¹‰à¸­à¸·à¹ˆà¸™à¹„à¸”à¹‰ à¹à¸•à¹ˆà¸šà¸²à¸‡à¸„à¸£à¸±à¹‰à¸‡à¸à¹‡à¸­à¹ˆà¸­à¸™à¹„à¸«à¸§à¹€à¸à¸´à¸™à¹„à¸› à¸£à¸±à¸šà¸­à¸´à¸—à¸˜à¸´à¸à¸¥à¸ˆà¸²à¸à¸ªà¸ à¸²à¸à¹à¸§à¸”à¸¥à¹‰à¸­à¸¡à¹„à¸”à¹‰à¸‡à¹ˆà¸²à¸¢',
        talents: ['à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¸ªà¸´à¹ˆà¸‡à¹ƒà¸«à¸¡à¹ˆà¹„à¸”à¹‰à¹€à¸£à¹‡à¸§', 'à¹„à¸à¸¥à¹ˆà¹€à¸à¸¥à¸µà¹ˆà¸¢à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ', 'à¸à¸²à¸£à¹à¸ªà¸”à¸‡à¸­à¸­à¸à¸­à¸¢à¹ˆà¸²à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸ªà¸£à¸£à¸„à¹Œ', 'à¸£à¸±à¸šà¸£à¸¹à¹‰à¸§à¸´à¸à¸¤à¸•à¸à¸²à¸£à¸“à¹Œ'],
        challenges: 'à¸ªà¸£à¹‰à¸²à¸‡à¸‚à¸­à¸šà¹€à¸‚à¸•à¸—à¸²à¸‡à¸­à¸²à¸£à¸¡à¸“à¹Œà¸—à¸µà¹ˆà¸¡à¸±à¹ˆà¸™à¸„à¸‡ à¸«à¸¥à¸µà¸à¹€à¸¥à¸µà¹ˆà¸¢à¸‡à¸à¸²à¸£à¸”à¸¹à¸”à¸‹à¸±à¸šà¸­à¸²à¸£à¸¡à¸“à¹Œà¸”à¹‰à¸²à¸™à¸¥à¸šà¸‚à¸­à¸‡à¸œà¸¹à¹‰à¸­à¸·à¹ˆà¸™à¸¡à¸²à¸à¹€à¸à¸´à¸™à¹„à¸› à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¸—à¸µà¹ˆà¸ˆà¸°à¸£à¸±à¸à¸©à¸²à¸„à¸§à¸²à¸¡à¸ªà¸‡à¸šà¸ à¸²à¸¢à¹ƒà¸™à¸—à¹ˆà¸²à¸¡à¸à¸¥à¸²à¸‡à¸à¸²à¸£à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹à¸›à¸¥à¸‡',
        career_analysis: {
          strengths: ['à¸—à¸±à¸à¸©à¸°à¸à¸²à¸£à¸ªà¸·à¹ˆà¸­à¸ªà¸²à¸£', 'à¸à¸²à¸£à¸§à¸²à¸‡à¹à¸œà¸™à¸ªà¸£à¹‰à¸²à¸‡à¸ªà¸£à¸£à¸„à¹Œ', 'à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸§à¸´à¸à¸¤à¸•', 'à¸à¸²à¸£à¸›à¸£à¸±à¸šà¸•à¸±à¸§à¹€à¸£à¹‡à¸§'],
          opportunities: ['à¸à¸²à¸£à¹ƒà¸«à¹‰à¸„à¸³à¸›à¸£à¸¶à¸à¸©à¸²', 'à¸à¸²à¸£à¸ªà¸£à¹‰à¸²à¸‡à¸ªà¸·à¹ˆà¸­', 'à¸à¸²à¸£à¸„à¹‰à¸²à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸›à¸£à¸°à¹€à¸—à¸¨', 'à¸à¸²à¸£à¹à¸ªà¸”à¸‡à¸­à¸­à¸à¸—à¸²à¸‡à¸¨à¸´à¸¥à¸›à¸°'],
          risks: ['à¸¥à¸±à¸‡à¹€à¸¥à¹ƒà¸™à¸à¸²à¸£à¸•à¸±à¸”à¸ªà¸´à¸™à¹ƒà¸ˆ', 'à¹„à¸”à¹‰à¸£à¸±à¸šà¸­à¸´à¸—à¸˜à¸´à¸à¸¥à¸ˆà¸²à¸à¸ªà¸´à¹ˆà¸‡à¹à¸§à¸”à¸¥à¹‰à¸­à¸¡à¸‡à¹ˆà¸²à¸¢', 'à¸‚à¸²à¸”à¸„à¸§à¸²à¸¡à¸•à¹ˆà¸­à¹€à¸™à¸·à¹ˆà¸­à¸‡', 'à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸à¸¥à¸±à¸‡à¸‡à¸²à¸™à¸—à¸²à¸‡à¸­à¸²à¸£à¸¡à¸“à¹Œ'],
          actions: ['à¸™à¸±à¹ˆà¸‡à¸ªà¸¡à¸²à¸˜à¸´à¸—à¸¸à¸à¸§à¸±à¸™ 15 à¸™à¸²à¸—à¸µ', 'à¹€à¸£à¸µà¸¢à¸™à¸¨à¸´à¸¥à¸›à¸°à¸à¸²à¸£à¹à¸ªà¸”à¸‡à¸­à¸­à¸', 'à¸ªà¸³à¸£à¸§à¸ˆà¸­à¸¸à¸•à¸ªà¸²à¸«à¸à¸£à¸£à¸¡à¸—à¸µà¹ˆà¹€à¸à¸µà¹ˆà¸¢à¸§à¸‚à¹‰à¸­à¸‡à¸à¸±à¸šà¸™à¹‰à¸³', 'à¸à¸³à¸«à¸™à¸”à¸‚à¸­à¸šà¹€à¸‚à¸•à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸‡à¸²à¸™à¹à¸¥à¸°à¸Šà¸µà¸§à¸´à¸•à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§']
        }
      },
      'ms': {
        personality: 'Intuitif dan sangat mudah menyesuaikan diri, fikiran halus seperti air, boleh merasai perubahan emosi orang lain. Tetapi kadang-kadang terlalu sensitif, mudah dipengaruhi oleh persekitaran.',
        talents: ['Belajar perkara baharu dengan cepat', 'Mengurus hubungan', 'Ekspresi kreatif', 'Merasa krisis'],
        challenges: 'Wujudkan sempadan emosi yang stabil, elakkan menyerap emosi negatif orang lain secara berlebihan, belajar mengekalkan kestabilan dalaman di tengah perubahan.',
        career_analysis: {
          strengths: ['Kemahiran komunikasi', 'Perancangan kreatif', 'Pengurusan krisis', 'Penyesuaian cepat'],
          opportunities: ['Kaunseling', 'Penciptaan media', 'Perdagangan antarabangsa', 'Ekspresi seni'],
          risks: ['Ragu-ragu membuat keputusan', 'Mudah dipengaruhi persekitaran', 'Kurang tekun', 'Keletihan emosi'],
          actions: ['Bermeditasi 15 minit setiap hari', 'Belajar seni ekspresi', 'Terokai industri berkaitan air', 'Tetapkan sempadan kerja-kehidupan']
        }
      }
    }
  },
  2: {
    element: 'åœŸ',
    elements: { æœ¨: 2, ç«: 1, åœŸ: 4, é‡‘: 2, æ°´: 1 },
    directions: { favorable: ['ä¸œåŒ—', 'è¥¿å—', 'è¥¿'], avoid: ['ä¸œ', 'ä¸œå—'] },
    text: {
      'zh-CN': {
        personality: 'ç¨³é‡åŠ¡å®ï¼Œè„šè¸å®åœ°ï¼Œå¦‚åŒå¤§åœ°èˆ¬å¯é ã€‚æœ‰è€å¿ƒå’ŒæŒä¹…åŠ›ï¼Œé‡è§†å®¶åº­ä¸å®‰å…¨æ„Ÿï¼Œåšäº‹ä¸€æ­¥ä¸€ä¸ªè„šå°ã€‚',
        talents: ['é¡¹ç›®ç®¡ç†', 'èµ„æºæ•´åˆ', 'é•¿æœŸè§„åˆ’', 'é£é™©æ§åˆ¶'],
        challenges: 'å…‹æœå›ºæ‰§å·±è§ï¼Œå­¦ä¼šæ¥å—æ–°å˜åŒ–ï¼Œæ›´å¼€æ”¾åœ°è¡¨è¾¾å†…å¿ƒæƒ…æ„Ÿï¼Œé¿å…è¿‡äºä¿å®ˆè€Œé”™å¤±æœºä¼šã€‚',
        career_analysis: {
          strengths: ['æ‰§è¡ŒåŠ›å¼º', 'èµ„æºç®¡ç†', 'é£é™©è¯„ä¼°', 'æŒç»­åŠ›'],
          opportunities: ['æˆ¿åœ°äº§', 'å†œä¸šå›­è‰º', 'è¡Œæ”¿ç®¡ç†', 'å’¨è¯¢é¡¾é—®'],
          risks: ['æŠ—æ‹’å˜åŒ–', 'æ²Ÿé€šä¸è¶³', 'è¿‡åº¦ä¿å®ˆ', 'æ€ç»´å›ºåŒ–'],
          actions: ['å­¦ä¹ æ–°æŠ€èƒ½', 'å®šæœŸå¤ç›˜è°ƒæ•´', 'å»ºç«‹åˆä½œç½‘ç»œ', 'æ‹“å±•è§†é‡']
        },
        relationship_analysis: {
          strengths: ['å¯é ç¨³å®š', 'è´£ä»»æ„Ÿå¼º', 'å¿ è¯šä½“è´´', 'åŠ¡å®å…³æ€€'],
          opportunities: ['å»ºç«‹å®¶åº­', 'æ·±åº¦åˆä½œå…³ç³»', 'ç¤¾åŒºå‚ä¸', 'ä¼ ç»Ÿä»·å€¼è§‚'],
          risks: ['æƒ…æ„Ÿå‹æŠ‘', 'æ²Ÿé€šä¸ç•…', 'è¿‡åº¦æ§åˆ¶', 'ç¼ºä¹æµªæ¼«'],
          actions: ['å­¦ä¹ æƒ…æ„Ÿè¡¨è¾¾', 'å¼€æ”¾æ²Ÿé€š', 'åŸ¹å…»å…±åŒå…´è¶£', 'å¹³è¡¡å·¥ä½œä¸å®¶åº­']
        },
        health_analysis: {
          strengths: ['ä½“è´¨ç¨³å¥', 'è€åŠ›å¼º', 'æ¢å¤åŠ›å¥½'],
          risks: ['æ¶ˆåŒ–ç³»ç»Ÿ', 'å…³èŠ‚é—®é¢˜', 'ä»£è°¢ç¼“æ…¢', 'æƒ…ç»ªå‹æŠ‘'],
          actions: ['è§„å¾‹é¥®é£Ÿ', 'é€‚åº¦è¿åŠ¨', 'å­¦ä¹ æ”¾æ¾', 'å®šæœŸä½“æ£€']
        }
      },
      'en': {
        personality: 'Steady and practical, down-to-earth, reliable like the earth. Patient and enduring, values family and security, works step by step.',
        talents: ['Project management', 'Resource integration', 'Long-term planning', 'Risk control'],
        challenges: 'Overcome stubbornness, learn to accept new changes, express inner feelings more openly, avoid missing opportunities due to being too conservative.',
        career_analysis: {
          strengths: ['Strong execution', 'Resource management', 'Risk assessment', 'Sustainability'],
          opportunities: ['Real estate', 'Agriculture/gardening', 'Administration', 'Consulting'],
          risks: ['Resistant to change', 'Poor communication', 'Overly conservative', 'Rigid thinking'],
          actions: ['Learn new skills', 'Regular review and adjustment', 'Build cooperative networks', 'Expand horizons']
        }
      },
      'ja-JP': {
        personality: 'ç€å®Ÿã§ç¾å®Ÿçš„ã€åœ°ã«è¶³ãŒã¤ã„ã¦ã„ã‚‹ã€å¤§åœ°ã®ã‚ˆã†ã«é ¼ã‚Šã«ãªã‚‹ã€‚å¿è€å¼·ãæŒç¶šåŠ›ãŒã‚ã‚Šã€å®¶æ—ã¨å®‰å…¨æ€§ã‚’é‡è¦–ã—ã€ä¸€æ­©ä¸€æ­©ç€å®Ÿã«é€²ã‚€ã€‚',
        talents: ['ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†', 'ãƒªã‚½ãƒ¼ã‚¹çµ±åˆ', 'é•·æœŸçš„ãªè¨ˆç”»', 'ãƒªã‚¹ã‚¯ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«'],
        challenges: 'é ‘å›ºã•ã‚’å…‹æœã—ã€æ–°ã—ã„å¤‰åŒ–ã‚’å—ã‘å…¥ã‚Œã‚‹ã“ã¨ã‚’å­¦ã³ã€å†…é¢ã®æ„Ÿæƒ…ã‚’ã‚‚ã£ã¨ã‚ªãƒ¼ãƒ—ãƒ³ã«è¡¨ç¾ã—ã€ä¿å®ˆçš„ã™ãã¦æ©Ÿä¼šã‚’é€ƒã•ãªã„ã‚ˆã†ã«ã™ã‚‹ã€‚'
      },
      'th-TH': {
        personality: 'à¸¡à¸±à¹ˆà¸™à¸„à¸‡à¹à¸¥à¸°à¸ˆà¸£à¸´à¸‡à¸ˆà¸±à¸‡ à¸¢à¸·à¸™à¸«à¸¢à¸±à¸”à¸šà¸™à¸à¸·à¹‰à¸™à¸”à¸´à¸™ à¹€à¸Šà¸·à¹ˆà¸­à¸–à¸·à¸­à¹„à¸”à¹‰à¹€à¸«à¸¡à¸·à¸­à¸™à¸œà¸·à¸™à¸”à¸´à¸™ à¸­à¸”à¸—à¸™à¹à¸¥à¸°à¸¡à¸µà¸„à¸§à¸²à¸¡à¸­à¸”à¸à¸¥à¸±à¹‰à¸™ à¹ƒà¸«à¹‰à¸„à¸§à¸²à¸¡à¸ªà¸³à¸„à¸±à¸à¸à¸±à¸šà¸„à¸£à¸­à¸šà¸„à¸£à¸±à¸§à¹à¸¥à¸°à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢ à¸—à¸³à¸—à¸µà¸¥à¸°à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™',
        talents: ['à¸à¸²à¸£à¸šà¸£à¸´à¸«à¸²à¸£à¹‚à¸„à¸£à¸‡à¸à¸²à¸£', 'à¸à¸²à¸£à¸šà¸¹à¸£à¸“à¸²à¸à¸²à¸£à¸—à¸£à¸±à¸à¸¢à¸²à¸à¸£', 'à¸à¸²à¸£à¸§à¸²à¸‡à¹à¸œà¸™à¸£à¸°à¸¢à¸°à¸¢à¸²à¸§', 'à¸à¸²à¸£à¸„à¸§à¸šà¸„à¸¸à¸¡à¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡'],
        challenges: 'à¹€à¸­à¸²à¸Šà¸™à¸°à¸„à¸§à¸²à¸¡à¸”à¸·à¹‰à¸­à¸£à¸±à¹‰à¸™ à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¸—à¸µà¹ˆà¸ˆà¸°à¸¢à¸­à¸¡à¸£à¸±à¸šà¸à¸²à¸£à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹à¸›à¸¥à¸‡à¹ƒà¸«à¸¡à¹ˆ à¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸£à¸¹à¹‰à¸ªà¸¶à¸à¸ à¸²à¸¢à¹ƒà¸™à¸­à¸¢à¹ˆà¸²à¸‡à¹€à¸›à¸´à¸”à¹€à¸œà¸¢à¸¡à¸²à¸à¸‚à¸¶à¹‰à¸™ à¸«à¸¥à¸µà¸à¹€à¸¥à¸µà¹ˆà¸¢à¸‡à¸à¸²à¸£à¸à¸¥à¸²à¸”à¹‚à¸­à¸à¸²à¸ªà¹€à¸à¸£à¸²à¸°à¸­à¸™à¸¸à¸£à¸±à¸à¸©à¸™à¸´à¸¢à¸¡à¹€à¸à¸´à¸™à¹„à¸›'
      },
      'ms': {
        personality: 'Stabil dan praktikal, berpijak di bumi, boleh dipercayai seperti bumi. Sabar dan tahan lasak, menghargai keluarga dan keselamatan, bekerja langkah demi langkah.',
        talents: ['Pengurusan projek', 'Penyepaduan sumber', 'Perancangan jangka panjang', 'Kawalan risiko'],
        challenges: 'Atasi degil, belajar menerima perubahan baru, luahkan perasaan dalaman dengan lebih terbuka, elakkan terlepas peluang kerana terlalu konservatif.'
      }
    }
  },
  3: {
    element: 'æœ¨',
    elements: { æœ¨: 4, ç«: 2, åœŸ: 1, é‡‘: 2, æ°´: 1 },
    directions: { favorable: ['ä¸œ', 'ä¸œå—', 'å—'], avoid: ['è¥¿', 'è¥¿åŒ—'] },
    text: {
      'zh-CN': {
        personality: 'æ´»åŠ›å……æ²›ï¼Œå¥½å¥‡å¿ƒå¼ºï¼Œå¦‚åŒæ˜¥å¤©çš„æ–°èŠ½å……æ»¡ç”Ÿæœºã€‚å–œæ¬¢æ¢ç´¢æ–°é¢†åŸŸï¼Œè¡¨è¾¾æ¬²æ—ºç››ï¼Œæœ‰å¼€æ‹“ç²¾ç¥ã€‚',
        talents: ['åˆ›æ„è®¾è®¡', 'å¸‚åœºè¥é”€', 'æ•™è‚²åŸ¹è®­', 'é¡¹ç›®å¯åŠ¨'],
        challenges: 'å­¦ä¹ ä¸“æ³¨ä¸åšæŒï¼Œé¿å…è™å¤´è›‡å°¾ï¼ŒåŸ¹å…»æ·±åº¦æ€è€ƒèƒ½åŠ›ï¼Œå¹³è¡¡å†²åŠ¨ä¸ç†æ€§ã€‚',
        career_analysis: {
          strengths: ['åˆ›æ„èƒ½åŠ›', 'å¿«é€Ÿå¯åŠ¨', 'å¸‚åœºè¥é”€', 'æ²Ÿé€šè¡¨è¾¾'],
          opportunities: ['è®¾è®¡è¡Œä¸š', 'æ–°åª’ä½“', 'æ•™è‚²åŸ¹è®­', 'åˆ›ä¸šé¡¹ç›®'],
          risks: ['ç¼ºä¹åšæŒ', 'æ³¨æ„åŠ›åˆ†æ•£', 'å†²åŠ¨å†³ç­–', 'è§„åˆ’ä¸è¶³'],
          actions: ['è®¾å®šæ˜ç¡®ç›®æ ‡', 'åŸ¹å…»ä¸“æ³¨åŠ›', 'å­¦ä¹ é¡¹ç›®ç®¡ç†', 'å»ºç«‹æ”¯æŒç³»ç»Ÿ']
        }
      },
      'en': {
        personality: 'Energetic and curious, like spring buds full of vitality. Likes to explore new fields, has strong desire to express, pioneering spirit.',
        talents: ['Creative design', 'Marketing', 'Education and training', 'Project initiation'],
        challenges: 'Learn focus and persistence, avoid starting strong but finishing weak, develop deep thinking ability, balance impulse and reason.',
        career_analysis: {
          strengths: ['Creative ability', 'Quick start', 'Marketing', 'Communication'],
          opportunities: ['Design industry', 'New media', 'Education and training', 'Entrepreneurship'],
          risks: ['Lack persistence', 'Distracted attention', 'Impulsive decisions', 'Insufficient planning'],
          actions: ['Set clear goals', 'Develop focus', 'Learn project management', 'Build support system']
        }
      }
    }
  },
  4: {
    element: 'æœ¨',
    elements: { æœ¨: 3, ç«: 2, åœŸ: 2, é‡‘: 1, æ°´: 2 },
    directions: { favorable: ['ä¸œå—', 'å—', 'ä¸œ'], avoid: ['è¥¿', 'è¥¿åŒ—'] },
    text: {
      'zh-CN': {
        personality: 'æ¸©å’Œå„’é›…ï¼Œå–„äºæ²Ÿé€šåè°ƒï¼Œå¦‚åŒæ˜¥é£èˆ¬ä»¤äººèˆ’é€‚ã€‚æ³¨é‡äººé™…å…³ç³»ï¼ŒçŸ¥è¯†é¢å¹¿ï¼Œæœ‰å­¦ä¹ èƒ½åŠ›ã€‚',
        talents: ['äººé™…åè°ƒ', 'çŸ¥è¯†ä¼ æ’­', 'æ–‡åŒ–äº¤æµ', 'å›¢é˜Ÿç®¡ç†'],
        challenges: 'å¢å¼ºå†³æ–­åŠ›ï¼Œé¿å…ä¼˜æŸ”å¯¡æ–­ï¼Œå­¦ä¼šè¯´ä¸ï¼Œå»ºç«‹ä¸ªäººè¾¹ç•Œã€‚',
        career_analysis: {
          strengths: ['æ²Ÿé€šåè°ƒ', 'çŸ¥è¯†æ•´åˆ', 'å›¢é˜Ÿåˆä½œ', 'å­¦ä¹ èƒ½åŠ›'],
          opportunities: ['æ•™è‚²è¡Œä¸š', 'æ–‡åŒ–ä¼ æ’­', 'äººåŠ›èµ„æº', 'å’¨è¯¢æœåŠ¡'],
          risks: ['ä¼˜æŸ”å¯¡æ–­', 'è¾¹ç•Œæ¨¡ç³Š', 'è¿‡åº¦å¦¥å', 'ç¼ºä¹ä¸»è§'],
          actions: ['è®­ç»ƒå†³ç­–èƒ½åŠ›', 'æ˜ç¡®ä¸ªäººè¾¹ç•Œ', 'å¢å¼ºè‡ªä¿¡', 'å‘å±•ä¸“ä¸šæ·±åº¦']
        }
      },
      'en': {
        personality: 'Gentle and scholarly, good at communication and coordination, comfortable like spring breeze. Values interpersonal relationships, wide knowledge, learning ability.',
        talents: ['Interpersonal coordination', 'Knowledge dissemination', 'Cultural exchange', 'Team management'],
        challenges: 'Enhance decision-making ability, avoid indecisiveness, learn to say no, establish personal boundaries.',
        career_analysis: {
          strengths: ['Communication and coordination', 'Knowledge integration', 'Team cooperation', 'Learning ability'],
          opportunities: ['Education industry', 'Cultural communication', 'Human resources', 'Consulting services'],
          risks: ['Indecisive', 'Blurred boundaries', 'Over-compromise', 'Lack of opinion'],
          actions: ['Train decision-making ability', 'Clarify personal boundaries', 'Enhance confidence', 'Develop professional depth']
        }
      }
    }
  },
  5: {
    element: 'åœŸ',
    elements: { æœ¨: 2, ç«: 2, åœŸ: 3, é‡‘: 2, æ°´: 1 },
    directions: { favorable: ['ä¸­å®«', 'è¥¿å—', 'ä¸œåŒ—'], avoid: ['ä¸œ', 'ä¸œå—'] },
    text: {
      'zh-CN': {
        personality: 'æ²‰ç¨³å†…æ•›ï¼Œæœ‰å¤§å±€è§‚ï¼Œå¦‚åŒå±±è„‰èˆ¬ç¨³é‡ã€‚å–„äºç»Ÿç­¹è§„åˆ’ï¼ŒæŠ—å‹èƒ½åŠ›å¼ºï¼Œå…³é”®æ—¶åˆ»èƒ½ç¨³ä½å±€é¢ã€‚',
        talents: ['æˆ˜ç•¥è§„åˆ’', 'å±æœºç®¡ç†', 'èµ„æºè°ƒé…', 'å±…ä¸­åè°ƒ'],
        challenges: 'å…‹æœä¿å®ˆå€¾å‘ï¼Œé€‚å½“å†’é™©ï¼Œæ›´å¼€æ”¾åœ°è¡¨è¾¾è‡ªæˆ‘ï¼Œé¿å…è¿‡åº¦æ§åˆ¶ã€‚',
        career_analysis: {
          strengths: ['æˆ˜ç•¥æ€ç»´', 'å±æœºå¤„ç†', 'èµ„æºç®¡ç†', 'ç¨³å®šå±€é¢'],
          opportunities: ['æˆ˜ç•¥è§„åˆ’', 'å±æœºç®¡ç†', 'é¡¹ç›®ç®¡ç†', 'è¡Œæ”¿ç®¡ç†'],
          risks: ['è¿‡äºä¿å®ˆ', 'ç¼ºä¹åˆ›æ–°', 'æ§åˆ¶æ¬²å¼º', 'åº”å˜ä¸è¶³'],
          actions: ['é€‚åº¦å†’é™©', 'å­¦ä¹ åˆ›æ–°æ€ç»´', 'æˆæƒä»–äºº', 'å¢å¼ºçµæ´»æ€§']
        }
      },
      'en': {
        personality: 'Calm and restrained, has overall perspective, steady like mountains. Good at overall planning, strong pressure resistance, can stabilize the situation at critical moments.',
        talents: ['Strategic planning', 'Crisis management', 'Resource allocation', 'Central coordination'],
        challenges: 'Overcome conservative tendencies, take appropriate risks, express yourself more openly, avoid over-control.',
        career_analysis: {
          strengths: ['Strategic thinking', 'Crisis handling', 'Resource management', 'Situation stabilization'],
          opportunities: ['Strategic planning', 'Crisis management', 'Project management', 'Administration'],
          risks: ['Too conservative', 'Lack of innovation', 'Strong desire to control', 'Insufficient adaptability'],
          actions: ['Take appropriate risks', 'Learn innovative thinking', 'Delegate to others', 'Enhance flexibility']
        }
      }
    }
  },
  6: {
    element: 'é‡‘',
    elements: { æœ¨: 1, ç«: 2, åœŸ: 2, é‡‘: 4, æ°´: 1 },
    directions: { favorable: ['è¥¿', 'è¥¿åŒ—', 'è¥¿å—'], avoid: ['å—', 'ä¸œå—'] },
    text: {
      'zh-CN': {
        personality: 'ä¸¥è°¨è‡ªå¾‹ï¼Œé‡è§†è§„åˆ™ä¸ç§©åºï¼Œå¦‚åŒç²¾å¯†çš„é‡‘å±ä»ªå™¨ã€‚æœ‰è´£ä»»æ„Ÿï¼Œè¿½æ±‚å®Œç¾ï¼Œåšäº‹æœ‰æ¡ç†ã€‚',
        talents: ['ç³»ç»Ÿç®¡ç†', 'è´¨é‡æ§åˆ¶', 'è´¢åŠ¡ç®¡ç†', 'è§„åˆ™åˆ¶å®š'],
        challenges: 'å­¦ä¼šæ”¾æ¾ï¼Œé¿å…è¿‡äºè‹›æ±‚å®Œç¾ï¼Œå¢å¼ºçµæ´»æ€§ï¼Œæ¥å—ä¸å®Œç¾ã€‚',
        career_analysis: {
          strengths: ['ç³»ç»Ÿæ€ç»´', 'è´¨é‡æ§åˆ¶', 'è´¢åŠ¡ç®¡ç†', 'è§„åˆ™æ„è¯†'],
          opportunities: ['é‡‘èè¡Œä¸š', 'è´¨é‡ç®¡ç†', 'ç³»ç»Ÿç®¡ç†', 'æ³•å¾‹è¡Œä¸š'],
          risks: ['è¿‡äºåˆ»æ¿', 'å®Œç¾ä¸»ä¹‰', 'ç¼ºä¹å¼¹æ€§', 'å‹åŠ›è¿‡å¤§'],
          actions: ['å­¦ä¹ æ”¾æ¾æŠ€å·§', 'æ¥å—ä¸å®Œç¾', 'å¢å¼ºçµæ´»æ€§', 'å¹³è¡¡å·¥ä½œä¸ç”Ÿæ´»']
        }
      },
      'en': {
        personality: 'Rigorous and self-disciplined, values rules and order, like precise metal instruments. Responsible, pursues perfection, works systematically.',
        talents: ['System management', 'Quality control', 'Financial management', 'Rule making'],
        challenges: 'Learn to relax, avoid being too demanding of perfection, enhance flexibility, accept imperfection.',
        career_analysis: {
          strengths: ['System thinking', 'Quality control', 'Financial management', 'Rule awareness'],
          opportunities: ['Financial industry', 'Quality management', 'System management', 'Legal industry'],
          risks: ['Too rigid', 'Perfectionism', 'Lack of flexibility', 'Excessive pressure'],
          actions: ['Learn relaxation techniques', 'Accept imperfection', 'Enhance flexibility', 'Balance work and life']
        }
      }
    }
  },
  7: {
    element: 'é‡‘',
    elements: { æœ¨: 2, ç«: 2, åœŸ: 1, é‡‘: 3, æ°´: 2 },
    directions: { favorable: ['è¥¿', 'è¥¿åŒ—', 'åŒ—'], avoid: ['å—', 'ä¸œå—'] },
    text: {
      'zh-CN': {
        personality: 'ç¤¾äº¤èƒ½åŠ›å¼ºï¼Œå®¡ç¾çœ¼å…‰å¥½ï¼Œå¦‚åŒç²¾ç¾çš„é‡‘å±é¥°å“ã€‚æ³¨é‡å“å‘³ï¼Œå–„äºäººé™…äº¤å¾€ï¼Œæœ‰è‰ºæœ¯æ„Ÿã€‚',
        talents: ['ç¤¾äº¤å…¬å…³', 'å“ç‰Œå»ºè®¾', 'è‰ºæœ¯è®¾è®¡', 'å•†ä¸šè°ˆåˆ¤'],
        challenges: 'é¿å…æµ®äºè¡¨é¢ï¼ŒåŸ¹å…»æ·±åº¦æ€è€ƒï¼Œç®¡ç†è´¢åŠ¡ï¼Œå¢å¼ºå†…åœ¨å®šåŠ›ã€‚',
        career_analysis: {
          strengths: ['ç¤¾äº¤èƒ½åŠ›', 'å“ç‰Œæ„è¯†', 'è‰ºæœ¯å®¡ç¾', 'è°ˆåˆ¤æŠ€å·§'],
          opportunities: ['å…¬å…³è¡Œä¸š', 'å“ç‰Œç®¡ç†', 'è‰ºæœ¯è®¾è®¡', 'å•†ä¸šåˆä½œ'],
          risks: ['è¡¨é¢åŠŸå¤«', 'ç¼ºä¹æ·±åº¦', 'è´¢åŠ¡é—®é¢˜', 'å®šåŠ›ä¸è¶³'],
          actions: ['åŸ¹å…»æ·±åº¦æ€è€ƒ', 'å­¦ä¹ è´¢åŠ¡ç®¡ç†', 'å¢å¼ºå†…åœ¨ä¿®å…»', 'å‘å±•ä¸“ä¸šæŠ€èƒ½']
        }
      },
      'en': {
        personality: 'Strong social skills, good aesthetic vision, like exquisite metal ornaments. Values taste, good at interpersonal communication, artistic sense.',
        talents: ['Social PR', 'Brand building', 'Art design', 'Business negotiation'],
        challenges: 'Avoid superficiality, cultivate deep thinking, manage finances, enhance inner stability.',
        career_analysis: {
          strengths: ['Social skills', 'Brand awareness', 'Artistic aesthetics', 'Negotiation skills'],
          opportunities: ['PR industry', 'Brand management', 'Art design', 'Business cooperation'],
          risks: ['Superficial', 'Lack depth', 'Financial problems', 'Insufficient stability'],
          actions: ['Cultivate deep thinking', 'Learn financial management', 'Enhance inner cultivation', 'Develop professional skills']
        }
      }
    }
  },
  8: {
    element: 'åœŸ',
    elements: { æœ¨: 1, ç«: 1, åœŸ: 4, é‡‘: 2, æ°´: 2 },
    directions: { favorable: ['ä¸œåŒ—', 'è¥¿å—', 'ä¸­å®«'], avoid: ['ä¸œ', 'ä¸œå—'] },
    text: {
      'zh-CN': {
        personality: 'ç¨³å¥åŠ¡å®ï¼Œç§¯ç´¯èƒ½åŠ›å¼ºï¼Œå¦‚åŒç¨³å›ºçš„å±±è„‰ã€‚å–„äºé•¿æœŸè§„åˆ’ï¼Œæœ‰è€å¿ƒï¼Œå…³é”®æ—¶åˆ»èƒ½åšç§¯è–„å‘ã€‚',
        talents: ['é•¿æœŸæŠ•èµ„', 'èµ„æºç§¯ç´¯', 'é¡¹ç›®ç®¡ç†', 'é£é™©æ§åˆ¶'],
        challenges: 'é¿å…è¿‡äºä¿å®ˆï¼Œé€‚å½“åˆ›æ–°ï¼Œå¢å¼ºè¡ŒåŠ¨åŠ›ï¼ŒæŠŠæ¡æ—¶æœºã€‚',
        career_analysis: {
          strengths: ['é•¿æœŸè§„åˆ’', 'èµ„æºç§¯ç´¯', 'é¡¹ç›®ç®¡ç†', 'é£é™©æ„è¯†'],
          opportunities: ['æŠ•èµ„ç†è´¢', 'èµ„æºç®¡ç†', 'é¡¹ç›®ç®¡ç†', 'åœ°äº§è¡Œä¸š'],
          risks: ['è¿‡äºä¿å®ˆ', 'è¡ŒåŠ¨è¿Ÿç¼“', 'é”™è¿‡æ—¶æœº', 'åˆ›æ–°ä¸è¶³'],
          actions: ['é€‚å½“åˆ›æ–°', 'å¢å¼ºè¡ŒåŠ¨åŠ›', 'å­¦ä¹ æ—¶æœºæŠŠæ¡', 'å¹³è¡¡é£é™©ä¸æ”¶ç›Š']
        }
      },
      'en': {
        personality: 'Steady and practical, strong accumulation ability, like stable mountains. Good at long-term planning, patient, can accumulate strength and make breakthroughs at critical moments.',
        talents: ['Long-term investment', 'Resource accumulation', 'Project management', 'Risk control'],
        challenges: 'Avoid being too conservative, innovate appropriately, enhance action power, seize opportunities.',
        career_analysis: {
          strengths: ['Long-term planning', 'Resource accumulation', 'Project management', 'Risk awareness'],
          opportunities: ['Investment and finance', 'Resource management', 'Project management', 'Real estate industry'],
          risks: ['Too conservative', 'Slow action', 'Miss opportunities', 'Insufficient innovation'],
          actions: ['Innovate appropriately', 'Enhance action power', 'Learn timing', 'Balance risk and return']
        }
      }
    }
  },
  9: {
    element: 'ç«',
    elements: { æœ¨: 2, ç«: 4, åœŸ: 1, é‡‘: 1, æ°´: 2 },
    directions: { favorable: ['å—', 'ä¸œå—', 'ä¸œ'], avoid: ['åŒ—', 'è¥¿åŒ—'] },
    text: {
      'zh-CN': {
        personality: 'çƒ­æƒ…å¤–æ”¾ï¼Œçµæ„Ÿä¸°å¯Œï¼Œå¦‚åŒæ˜äº®çš„ç«ç„°ã€‚æœ‰è¡¨ç°æ¬²ï¼Œå–„äºä¼ æ’­ï¼Œæœ‰é¢†å¯¼é­…åŠ›ã€‚',
        talents: ['å…¬ä¼—æ¼”è®²', 'åˆ›æ„ä¼ æ’­', 'å“ç‰Œæ‰“é€ ', 'é¢†å¯¼æ¿€åŠ±'],
        challenges: 'å­¦ä¹ ä¸“æ³¨æŒä¹…ï¼Œé¿å…ä¸‰åˆ†é’Ÿçƒ­åº¦ï¼Œç®¡ç†æƒ…ç»ªï¼Œå¢å¼ºç¨³å®šæ€§ã€‚',
        career_analysis: {
          strengths: ['å…¬ä¼—è¡¨è¾¾', 'åˆ›æ„èƒ½åŠ›', 'å“ç‰Œå»ºè®¾', 'é¢†å¯¼é­…åŠ›'],
          opportunities: ['åª’ä½“è¡Œä¸š', 'åˆ›æ„äº§ä¸š', 'å“ç‰Œä¼ æ’­', 'æ•™è‚²åŸ¹è®­'],
          risks: ['ç¼ºä¹æŒä¹…', 'æƒ…ç»ªæ³¢åŠ¨', 'æ³¨æ„åŠ›åˆ†æ•£', 'ç¨³å®šæ€§å·®'],
          actions: ['åŸ¹å…»ä¸“æ³¨åŠ›', 'å­¦ä¹ æƒ…ç»ªç®¡ç†', 'å¢å¼ºç¨³å®šæ€§', 'å»ºç«‹æ”¯æŒç³»ç»Ÿ']
        }
      },
      'en': {
        personality: 'Passionate and outgoing, rich in inspiration, like bright flames. Has desire to perform, good at dissemination, charismatic leadership.',
        talents: ['Public speaking', 'Creative communication', 'Brand building', 'Leadership motivation'],
        challenges: 'Learn focus and persistence, avoid short-term enthusiasm, manage emotions, enhance stability.',
        career_analysis: {
          strengths: ['Public expression', 'Creative ability', 'Brand building', 'Charismatic leadership'],
          opportunities: ['Media industry', 'Creative industry', 'Brand communication', 'Education and training'],
          risks: ['Lack persistence', 'Emotional fluctuations', 'Distracted attention', 'Poor stability'],
          actions: ['Develop focus', 'Learn emotion management', 'Enhance stability', 'Build support system']
        }
      }
    }
  }
};

/* HTML å®‰å…¨å¤„ç† */
function escapeHTML(str){
  return String(str).replace(/[&<>]/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;' }[c] || c));
}

/* åˆ—è¡¨æ‹¼è£… */
function joinList(arr){
  if (!arr || !arr.length) return '';
  const lang = getLang();
  const safe = arr.map(s=>`<li>${escapeHTML(s)}</li>`).join('');
  return `<ul style="margin: 8px 0; padding-left: 20px;">${safe}</ul>`;
}

/* è·å–æ˜Ÿæ˜Ÿæ–‡æœ¬ */
function getStarText(starNo) {
  const star = STARS_DEEP[starNo];
  if (!star || !star.text) return null;
  const langCode = getLang();
  
  // ä¼˜å…ˆè¿”å›å½“å‰è¯­è¨€çš„æ–‡æœ¬
  if (star.text[langCode]) return star.text[langCode];
  
  // å›é€€ç­–ç•¥
  if (langCode.startsWith('zh') && star.text['zh-CN']) return star.text['zh-CN'];
  if (star.text['en']) return star.text['en'];
  if (star.text['zh-CN']) return star.text['zh-CN'];
  
  return null;
}

/* è·å–æ·±åº¦è¯­è¨€æ•°æ® */
function getDeepLang(starNum) {
  const deep = STARS_DEEP[starNum];
  if (!deep) return null;
  const langCode = getLang();
  
  // è·å–å½“å‰è¯­è¨€çš„æ–‡æœ¬
  const text = deep.text ? deep.text[langCode] : null;
  
  // å¦‚æœæ²¡æœ‰å½“å‰è¯­è¨€çš„æ–‡æœ¬ï¼Œä½¿ç”¨å›é€€
  if (!text) {
    if (deep.text && deep.text['zh-CN']) return deep.text['zh-CN'];
    if (deep.text && deep.text['en']) return deep.text['en'];
    return null;
  }
  
  return text;
}

/* äº”è¡Œå›¾è¡¨ */
function buildElementChart(deep){
  const box = $('elementChart');
  if (!box) return;
  box.innerHTML = '';
  if (!deep || !deep.elements) return;

  const order = ['æœ¨','ç«','åœŸ','é‡‘','æ°´'];
  const lang = getLang();
  const elemNames = {
    'æœ¨': { 'zh-CN':'æœ¨', 'zh-TW':'æœ¨', 'en':'Wood', 'ja-JP':'æœ¨', 'th-TH':'à¹„à¸¡à¹‰', 'ms':'Kayu' },
    'ç«': { 'zh-CN':'ç«', 'zh-TW':'ç«', 'en':'Fire', 'ja-JP':'ç«', 'th-TH':'à¹„à¸Ÿ', 'ms':'Api' },
    'åœŸ': { 'zh-CN':'åœŸ', 'zh-TW':'åœŸ', 'en':'Earth', 'ja-JP':'åœŸ', 'th-TH':'à¸”à¸´à¸™', 'ms':'Tanah' },
    'é‡‘': { 'zh-CN':'é‡‘', 'zh-TW':'é‡‘', 'en':'Metal', 'ja-JP':'é‡‘', 'th-TH':'à¹‚à¸¥à¸«à¸°', 'ms':'Logam' },
    'æ°´': { 'zh-CN':'æ°´', 'zh-TW':'æ°´', 'en':'Water', 'ja-JP':'æ°´', 'th-TH':'à¸™à¹‰à¸³', 'ms':'Air' }
  };

  order.forEach(name=>{
    const val = deep.elements[name] ?? 0;
    const displayName = elemNames[name] ? (elemNames[name][lang] || elemNames[name]['en']) : name;
    const div = document.createElement('div');
    div.className = 'element-item' + (val >= 3 ? ' strong' : '');
    div.innerHTML = `
      <div class="element-name">${displayName}</div>
      <div class="element-value">${val}</div>
    `;
    box.appendChild(div);
  });
}

/* ===== ä¿®å¤ï¼šäº”è¡Œæ–‡å­—åˆ†æå‡½æ•° ===== */
function buildElementAnalysis(ctx, deep){
  const box = $('elementAnalysis');
  if (!box) return;
  if (!deep || !deep.elements){
    box.textContent = '';
    return;
  }
  const lang = getLang();
  const main = ctx.mainElement || '';
  const elems = deep.elements;
  const arr = Object.entries(elems);
  arr.sort((a,b)=>b[1]-a[1]);
  const strong = arr.filter(([_,v])=>v>=3).map(([k])=>k);
  const weak   = arr.filter(([_,v])=>v<=1).map(([k])=>k);

  // äº”è¡Œå…ƒç´ åç§°çš„å¤šè¯­è¨€æ˜ å°„
  const elemNames = {
    'æœ¨': { 
      'zh-CN': 'æœ¨', 'zh-TW': 'æœ¨', 'en': 'Wood', 
      'ja-JP': 'æœ¨', 'th-TH': 'à¹„à¸¡à¹‰', 'ms': 'Kayu' 
    },
    'ç«': { 
      'zh-CN': 'ç«', 'zh-TW': 'ç«', 'en': 'Fire', 
      'ja-JP': 'ç«', 'th-TH': 'à¹„à¸Ÿ', 'ms': 'Api' 
    },
    'åœŸ': { 
      'zh-CN': 'åœŸ', 'zh-TW': 'åœŸ', 'en': 'Earth', 
      'ja-JP': 'åœŸ', 'th-TH': 'à¸”à¸´à¸™', 'ms': 'Tanah' 
    },
    'é‡‘': { 
      'zh-CN': 'é‡‘', 'zh-TW': 'é‡‘', 'en': 'Metal', 
      'ja-JP': 'é‡‘', 'th-TH': 'à¹‚à¸¥à¸«à¸°', 'ms': 'Logam' 
    },
    'æ°´': { 
      'zh-CN': 'æ°´', 'zh-TW': 'æ°´', 'en': 'Water', 
      'ja-JP': 'æ°´', 'th-TH': 'à¸™à¹‰à¸³', 'ms': 'Air' 
    }
  };

  const mainDisplay = main ? (elemNames[main] ? (elemNames[main][lang] || elemNames[main]['en']) : main) : '';

  // å¤šè¯­è¨€æ–‡æ¡ˆ
  const messages = {
    'zh-CN': {
      intro: `ä½ çš„å‘½ç›˜ä»¥ã€Œ${mainDisplay || 'â€”'}ã€ä¸ºä¸»ï¼Œäº”è¡Œåˆ†å¸ƒæ•´ä½“æ¥çœ‹ï¼š`,
      strong: `åå¼ºï¼š${strong.length? strong.map(s => elemNames[s] ? elemNames[s]['zh-CN'] : s).join('ã€') : 'æš‚æ— æ˜æ˜¾åå¼º'}ï¼›`,
      weak: `åå¼±ï¼š${weak.length? weak.map(s => elemNames[s] ? elemNames[s]['zh-CN'] : s).join('ã€') : 'æš‚æ— æ˜æ˜¾åå¼±'}ã€‚`,
      advice: `å»ºè®®ä½ åœ¨æ—¥å¸¸é€‰æ‹©å·¥ä½œå†…å®¹ã€ç©ºé—´å¸ƒç½®ä¸äººé™…åˆä½œæ—¶ï¼Œå°½é‡é¡ºç€ä¸»äº”è¡Œã€Œ${mainDisplay || 'æ•´ä½“èƒ½é‡'}ã€çš„ç‰¹è´¨æ¥æ”¾å¤§ä¼˜åŠ¿ï¼Œå†ç”¨å…¶ä»–å…ƒç´ æ¥è¡¥è¶³çŸ­æ¿ã€‚`
    },
    'zh-TW': {
      intro: `ä½ çš„å‘½ç›¤ä»¥ã€Œ${mainDisplay || 'â€”'}ã€ç‚ºä¸»ï¼Œäº”è¡Œåˆ†ä½ˆæ•´é«”ä¾†çœ‹ï¼š`,
      strong: `åå¼·ï¼š${strong.length? strong.map(s => elemNames[s] ? elemNames[s]['zh-TW'] : s).join('ã€') : 'æš«ç„¡æ˜é¡¯åå¼·'}ï¼›`,
      weak: `åå¼±ï¼š${weak.length? weak.map(s => elemNames[s] ? elemNames[s]['zh-TW'] : s).join('ã€') : 'æš«ç„¡æ˜é¡¯åå¼±'}ã€‚`,
      advice: `å»ºè­°ä½ åœ¨æ—¥å¸¸é¸æ“‡å·¥ä½œå…§å®¹ã€ç©ºé–“ä½ˆç½®èˆ‡äººéš›åˆä½œæ™‚ï¼Œç›¡é‡é †è‘—ä¸»äº”è¡Œã€Œ${mainDisplay || 'æ•´é«”èƒ½é‡'}ã€çš„ç‰¹è³ªä¾†æ”¾å¤§å„ªå‹¢ï¼Œå†ç”¨å…¶ä»–å…ƒç´ ä¾†è£œè¶³çŸ­æ¿ã€‚`
    },
    'en': {
      intro: `Your chart is mainly rooted in ${mainDisplay || 'overall'} qi, with the Five Elements distributed as follows.`,
      strong: `Stronger elements: ${strong.length? strong.map(s => elemNames[s] ? elemNames[s]['en'] : s).join(', ') : 'none significantly dominant'};`,
      weak: `Weaker elements: ${weak.length? weak.map(s => elemNames[s] ? elemNames[s]['en'] : s).join(', ') : 'none significantly lacking'}.`,
      advice: `In daily life, lean into your main ${mainDisplay || 'overall'} qualities when choosing work style, space design and partnerships, then use the other elements to cover your blind spots.`
    },
    'ja-JP': {
      intro: `ã‚ãªãŸã®å‘½ç›¤ã¯ä¸»ã«ã€Œ${mainDisplay || 'â€”'}ã€ã«æ ¹ã–ã—ã¦ãŠã‚Šã€äº”è¡Œã®åˆ†å¸ƒã¯å…¨ä½“çš„ã«ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚`,
      strong: `å¼·ã„è¦ç´ ï¼š${strong.length? strong.map(s => elemNames[s] ? elemNames[s]['ja-JP'] : s).join('ã€') : 'ç‰¹ã«å¼·ã„ã‚‚ã®ã¯ã‚ã‚Šã¾ã›ã‚“'}ï¼›`,
      weak: `å¼±ã„è¦ç´ ï¼š${weak.length? weak.map(s => elemNames[s] ? elemNames[s]['ja-JP'] : s).join('ã€') : 'ç‰¹ã«å¼±ã„ã‚‚ã®ã¯ã‚ã‚Šã¾ã›ã‚“'}ã€‚`,
      advice: `æ—¥å¸¸ç”Ÿæ´»ã§ã¯ã€ä»•äº‹ã‚¹ã‚¿ã‚¤ãƒ«ã€ç©ºé–“ãƒ‡ã‚¶ã‚¤ãƒ³ã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚·ãƒƒãƒ—ã‚’é¸ã¶éš›ã«ã€ä¸»äº”è¡Œã€Œ${mainDisplay || 'å…¨ä½“ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼'}ã€ã®æ€§è³ªã‚’æ´»ã‹ã—ã¦å¼·ã¿ã‚’ä¼¸ã°ã—ã€ä»–ã®è¦ç´ ã§å¼±ç‚¹ã‚’è£œã†ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚`
    },
    'th-TH': {
      intro: `à¹à¸œà¸™à¸ à¸¹à¸¡à¸´à¸”à¸§à¸‡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¸¡à¸µà¸£à¸²à¸à¸à¸²à¸™à¸¡à¸²à¸ˆà¸²à¸à¸à¸¥à¸±à¸‡ã€Œ${mainDisplay || 'â€”'}ã€à¹€à¸›à¹‡à¸™à¸«à¸¥à¸±à¸ à¸à¸²à¸£à¸à¸£à¸°à¸ˆà¸²à¸¢à¸•à¸±à¸§à¸‚à¸­à¸‡à¸˜à¸²à¸•à¸¸à¸—à¸±à¹‰à¸‡à¸«à¹‰à¸²à¹‚à¸”à¸¢à¸£à¸§à¸¡à¸¡à¸µà¸”à¸±à¸‡à¸™à¸µà¹‰`,
      strong: `à¸˜à¸²à¸•à¸¸à¸—à¸µà¹ˆà¹€à¸‚à¹‰à¸¡à¹à¸‚à¹‡à¸‡: ${strong.length? strong.map(s => elemNames[s] ? elemNames[s]['th-TH'] : s).join('ã€') : 'à¹„à¸¡à¹ˆà¸¡à¸µà¸˜à¸²à¸•à¸¸à¹ƒà¸”à¹€à¸”à¹ˆà¸™à¸Šà¸±à¸”à¹€à¸›à¹‡à¸™à¸à¸´à¹€à¸¨à¸©'}ï¼›`,
      weak: `à¸˜à¸²à¸•à¸¸à¸—à¸µà¹ˆà¸­à¹ˆà¸­à¸™à¹à¸­: ${weak.length? weak.map(s => elemNames[s] ? elemNames[s]['th-TH'] : s).join('ã€') : 'à¹„à¸¡à¹ˆà¸¡à¸µà¸˜à¸²à¸•à¸¸à¹ƒà¸”à¸­à¹ˆà¸­à¸™à¹à¸­à¹€à¸›à¹‡à¸™à¸à¸´à¹€à¸¨à¸©'}ã€‚`,
      advice: `à¹ƒà¸™à¸Šà¸µà¸§à¸´à¸•à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™ à¹à¸™à¸°à¸™à¸³à¹ƒà¸«à¹‰à¸„à¸¸à¸“à¹ƒà¸Šà¹‰à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´à¸‚à¸­à¸‡à¸˜à¸²à¸•à¸¸à¸«à¸¥à¸±à¸ã€Œ${mainDisplay || 'à¸à¸¥à¸±à¸‡à¸‡à¸²à¸™à¹‚à¸”à¸¢à¸£à¸§à¸¡'}ã€à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸¥à¸·à¸­à¸à¸ªà¹„à¸•à¸¥à¹Œà¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™ à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¸à¸·à¹‰à¸™à¸—à¸µà¹ˆ à¹à¸¥à¸°à¸à¸²à¸£à¹€à¸›à¹‡à¸™à¸«à¸¸à¹‰à¸™à¸ªà¹ˆà¸§à¸™ à¹€à¸à¸·à¹ˆà¸­à¸‚à¸¢à¸²à¸¢à¸‚à¹‰à¸­à¹„à¸”à¹‰à¹€à¸›à¸£à¸µà¸¢à¸š à¹à¸¥à¹‰à¸§à¹ƒà¸Šà¹‰à¸˜à¸²à¸•à¸¸à¸­à¸·à¹ˆà¸™à¹† à¹€à¸à¸·à¹ˆà¸­à¹€à¸•à¸´à¸¡à¹€à¸•à¹‡à¸¡à¸ˆà¸¸à¸”à¸šà¸à¸à¸£à¹ˆà¸­à¸‡`
    },
    'ms': {
      intro: `Carta anda terutamanya berakar pada qi ${mainDisplay || 'keseluruhan'}, dengan Lima Unsur diagihkan seperti berikut.`,
      strong: `Unsur yang lebih kuat: ${strong.length? strong.map(s => elemNames[s] ? elemNames[s]['ms'] : s).join(', ') : 'tiada yang dominan secara ketara'};`,
      weak: `Unsur yang lebih lemah: ${weak.length? weak.map(s => elemNames[s] ? elemNames[s]['ms'] : s).join(', ') : 'tiada yang lemah secara ketara'}.`,
      advice: `Dalam kehidupan harian, manfaatkan kualiti ${mainDisplay || 'keseluruhan'} utama anda semasa memilih gaya kerja, reka bentuk ruang dan perkongsian, kemudian gunakan unsur lain untuk menampung kelemahan anda.`
    }
  };

  // è·å–å½“å‰è¯­è¨€çš„æ–‡æ¡ˆï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨è‹±æ–‡
  const msg = messages[lang] || messages['en'];
  
  let txt = msg.intro + '\n\n' + msg.strong + '\n' + msg.weak + '\n\n' + msg.advice;
  box.textContent = txt;
}

/* ===== ä¿®å¤ï¼šæ·±åº¦åˆ†æå¡ç‰‡ ===== */
function renderDeepSection(ctx, deepLang){
  const card = $('analysisCard');
  if (!card) return;
  if (!deepLang){
    card.style.display = 'none';
    return;
  }

  const pBox = $('personalityAnalysis');
  const tBox = $('talentAnalysis');
  const cBox = $('challengeAnalysis');
  const dBox = $('developmentAdvice');

  if (pBox) pBox.textContent = deepLang.personality || '';

  if (tBox){
    tBox.innerHTML = '';
    if (deepLang.talents){
      tBox.innerHTML = joinList(deepLang.talents);
    }
  }

  if (cBox){
    cBox.textContent = deepLang.challenges || '';
  }

  if (dBox){
    const ca = deepLang.career_analysis;
    const ra = deepLang.relationship_analysis;
    const ha = deepLang.health_analysis;
    const lang = getLang();
    
    let html = '';
    
    // äº‹ä¸šå‘å±•å»ºè®®
    if (ca && ca.actions){
      const title = lang.startsWith('zh') ? 'äº‹ä¸š / è´¢è¿æ–¹å‘ï¼š' : 
                    lang === 'en' ? 'Career / wealth direction:' :
                    lang === 'ja-JP' ? 'ã‚­ãƒ£ãƒªã‚¢ / è²¡é‹ã®æ–¹å‘ï¼š' :
                    lang === 'th-TH' ? 'à¸—à¸´à¸¨à¸—à¸²à¸‡à¸”à¹‰à¸²à¸™à¸­à¸²à¸Šà¸µà¸ / à¹‚à¸Šà¸„à¸¥à¸²à¸ ï¼š' :
                    lang === 'ms' ? 'Arah kerjaya / kekayaanï¼š' : 'Career / wealth:';
      html += `<p><strong>${title}</strong></p>${joinList(ca.actions)}`;
    }
    
    // æ„Ÿæƒ…å‘å±•å»ºè®®
    if (ra && ra.actions){
      const title = lang.startsWith('zh') ? 'æ„Ÿæƒ… / äººé™…æ–¹å‘ï¼š' : 
                    lang === 'en' ? 'Love / relationships direction:' :
                    lang === 'ja-JP' ? 'æ‹æ„› / äººé–“é–¢ä¿‚ã®æ–¹å‘ï¼š' :
                    lang === 'th-TH' ? 'à¸—à¸´à¸¨à¸—à¸²à¸‡à¸”à¹‰à¸²à¸™à¸„à¸§à¸²à¸¡à¸£à¸±à¸ / à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œï¼š' :
                    lang === 'ms' ? 'Arah cinta / hubunganï¼š' : 'Love / relationships:';
      html += `<p><strong>${title}</strong></p>${joinList(ra.actions)}`;
    }
    
    // å¥åº·å»ºè®®
    if (ha && ha.actions){
      const title = lang.startsWith('zh') ? 'å¥åº· / ç”Ÿæ´»ä¹ æƒ¯ï¼š' : 
                    lang === 'en' ? 'Health / lifestyle habits:' :
                    lang === 'ja-JP' ? 'å¥åº· / ç”Ÿæ´»ç¿’æ…£ï¼š' :
                    lang === 'th-TH' ? 'à¸ªà¸¸à¸‚à¸ à¸²à¸ / à¸™à¸´à¸ªà¸±à¸¢à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸Šà¸µà¸§à¸´à¸•ï¼š' :
                    lang === 'ms' ? 'Kesihatan / tabiat gaya hidupï¼š' : 'Health / lifestyle:';
      html += `<p><strong>${title}</strong></p>${joinList(ha.actions)}`;
    }
    
    dBox.innerHTML = html;
  }

  card.style.display = 'block';
}

/* ===== ä¿®å¤ï¼šè¿åŠ¿æ—¶é—´çº¿ ===== */
function buildFortuneTimeline(ctx){
  const box = $('fortuneTimeline');
  if (!box) return;
  box.innerHTML = '';

  const now = new Date();
  const y = now.getFullYear();
  const elem = ctx.mainElement || '';
  const lang = getLang();

  // è¿åŠ¿æ—¶é—´çº¿å¤šè¯­è¨€æ–‡æ¡ˆ
  const MSG = {
    'æ°´': {
      'zh-CN': [
        'ä½ ç»å†äº†å¤šæ¬¡ç¯å¢ƒä¸äººé™…ç»“æ„çš„è°ƒæ•´ï¼Œå­¦ä¹ åœ¨å˜åŒ–ä¸­ä¿æŒå¼¹æ€§ã€‚',
        'é€‚åˆé‡æ–°æ•´ç†äººè„‰ä¸åˆä½œæ–¹å¼ï¼ŒæŠŠåˆ†æ•£çš„æ³¨æ„åŠ›æ”¶å›åˆ°å°‘æ•°é‡è¦å…³ç³»ä¸Šã€‚',
        'æƒ…æ„Ÿä¸åˆä½œå°†æ›´ç¨³å®šï¼Œè‹¥å–„ç”¨ç›´è§‰ï¼Œæœ‰æœºä¼šåˆ‡å…¥æ›´é€‚åˆä½ çš„é¢†åŸŸã€‚'
      ],
      'zh-TW': [
        'ä½ ç¶“æ­·äº†å¤šæ¬¡ç’°å¢ƒèˆ‡äººéš›çµæ§‹çš„èª¿æ•´ï¼Œå­¸ç¿’åœ¨è®ŠåŒ–ä¸­ä¿æŒå½ˆæ€§ã€‚',
        'é©åˆé‡æ–°æ•´ç†äººè„ˆèˆ‡åˆä½œæ–¹å¼ï¼ŒæŠŠåˆ†æ•£çš„æ³¨æ„åŠ›æ”¶å›åˆ°å°‘æ•¸é‡è¦é—œä¿‚ä¸Šã€‚',
        'æƒ…æ„Ÿèˆ‡åˆä½œå°‡æ›´ç©©å®šï¼Œè‹¥å–„ç”¨ç›´è¦ºï¼Œæœ‰æ©Ÿæœƒåˆ‡å…¥æ›´é©åˆä½ çš„é ˜åŸŸã€‚'
      ],
      'en': [
        'In the last few years you have gone through many changes in environment and relationships, learning to stay flexible in motion.',
        'Now is a good time to reorganise your network and collaboration style, bringing scattered attention back to a few key connections.',
        'Relationships and collaboration can stabilise; if you trust your intuition, you can move into fields that fit you better.'
      ],
      'ja-JP': [
        'ã“ã“æ•°å¹´ã€ç’°å¢ƒã‚„äººé–“é–¢ä¿‚ã®å¤‰åŒ–ãŒä½•åº¦ã‚‚ã‚ã‚Šã€ãã®ä¸­ã§æŸ”è»Ÿã•ã‚’å­¦ã‚“ã§ãã¾ã—ãŸã€‚',
        'ä»Šã¯äººè„ˆã¨å”åŠ›ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æ•´ç†ã—ã€æ•£ã‚‰ã°ã£ãŸã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å¤§åˆ‡ãªå°‘æ•°ã®é–¢ä¿‚ã«æˆ»ã™ã®ã«è‰¯ã„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã™ã€‚',
        'æ„Ÿæƒ…é¢ã‚„å”åŠ›é–¢ä¿‚ã¯å®‰å®šã—ã‚„ã™ããªã‚Šã¾ã™ã€‚ç›´æ„Ÿã‚’ä¿¡ã˜ã‚Œã°ã€ã‚ãªãŸã«ã‚ˆã‚Šåˆã£ãŸåˆ†é‡ã«å…¥ã£ã¦ã„ããƒãƒ£ãƒ³ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚'
      ],
      'th-TH': [
        'à¸•à¸¥à¸­à¸”à¹„à¸¡à¹ˆà¸à¸µà¹ˆà¸›à¸µà¸—à¸µà¹ˆà¸œà¹ˆà¸²à¸™à¸¡à¸² à¸„à¸¸à¸“à¹€à¸ˆà¸­à¸à¸²à¸£à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹à¸›à¸¥à¸‡à¸—à¸±à¹‰à¸‡à¸ªà¸ à¸²à¸à¹à¸§à¸”à¸¥à¹‰à¸­à¸¡à¹à¸¥à¸°à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œà¸«à¸¥à¸²à¸¢à¸„à¸£à¸±à¹‰à¸‡ à¹à¸¥à¸°à¹„à¸”à¹‰à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¸—à¸µà¹ˆà¸ˆà¸°à¸¢à¸·à¸”à¸«à¸¢à¸¸à¹ˆà¸™à¸—à¹ˆà¸²à¸¡à¸à¸¥à¸²à¸‡à¸„à¸§à¸²à¸¡à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹à¸›à¸¥à¸‡à¸™à¸±à¹‰à¸™',
        'à¸Šà¹ˆà¸§à¸‡à¸™à¸µà¹‰à¹€à¸«à¸¡à¸²à¸°à¸—à¸µà¹ˆà¸ˆà¸°à¸ˆà¸±à¸”à¸£à¸°à¹€à¸šà¸µà¸¢à¸šà¹€à¸„à¸£à¸·à¸­à¸‚à¹ˆà¸²à¸¢à¸„à¸™à¸£à¸¹à¹‰à¸ˆà¸±à¸à¹à¸¥à¸°à¸£à¸¹à¸›à¹à¸šà¸šà¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸£à¹ˆà¸§à¸¡à¸à¸±à¸™à¹ƒà¸«à¸¡à¹ˆ à¸”à¸¶à¸‡à¸à¸¥à¸±à¸‡à¸—à¸µà¹ˆà¸à¸£à¸°à¸ˆà¸±à¸”à¸à¸£à¸°à¸ˆà¸²à¸¢à¸à¸¥à¸±à¸šà¸¡à¸²à¹‚à¸Ÿà¸à¸±à¸ªà¸—à¸µà¹ˆà¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œà¸ªà¸³à¸„à¸±à¸à¹„à¸¡à¹ˆà¸à¸µà¹ˆà¸­à¸¢à¹ˆà¸²à¸‡',
        'à¸”à¹‰à¸²à¸™à¸„à¸§à¸²à¸¡à¸£à¸¹à¹‰à¸ªà¸¶à¸à¹à¸¥à¸°à¸à¸²à¸£à¸£à¹ˆà¸§à¸¡à¸¡à¸·à¸­à¸ˆà¸°à¸¡à¸µà¹à¸™à¸§à¹‚à¸™à¹‰à¸¡à¸¡à¸±à¹ˆà¸™à¸„à¸‡à¸‚à¸¶à¹‰à¸™ à¸–à¹‰à¸²à¹€à¸Šà¸·à¹ˆà¸­à¹ƒà¸™à¸ªà¸±à¸à¸Šà¸²à¸•à¸à¸²à¸“à¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡ à¸„à¸¸à¸“à¸¡à¸µà¹‚à¸­à¸à¸²à¸ªà¹„à¸”à¹‰à¸à¹‰à¸²à¸§à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸ªà¸²à¸¢à¸‡à¸²à¸™à¸«à¸£à¸·à¸­à¸ªà¸™à¸²à¸¡à¸—à¸µà¹ˆà¹€à¸«à¸¡à¸²à¸°à¸à¸±à¸šà¸„à¸¸à¸“à¸¡à¸²à¸à¸à¸§à¹ˆà¸²à¹€à¸”à¸´à¸¡'
      ],
      'ms': [
        'Dalam beberapa tahun kebelakangan ini, anda telah melalui banyak perubahan dari segi persekitaran dan hubungan, dan belajar untuk kekal fleksibel dalam perubahan.',
        'Sekarang masa yang sesuai untuk menyusun semula rangkaian dan cara bekerjasama, menarik semula perhatian yang berselerak kepada beberapa hubungan yang benar-benar penting.',
        'Emosi dan kerjasama akan menjadi lebih stabil; jika anda mempercayai intuisi sendiri, anda berpeluang memasuki bidang yang lebih serasi dengan diri anda.'
      ]
    },
    'åœŸ': {
      'zh-CN': [
        'è¿‡å»å‡ å¹´ä½ ä¸»è¦åœ¨"æ‰“åœ°åŸº"ï¼Œå¾ˆå¤šæˆæœå°šåœ¨æš—å¤„é…é…¿ã€‚',
        'é€‚åˆæ£€è§†èµ„äº§ã€ä¹ æƒ¯ä¸äººé™…ç»“æ„ï¼Œåˆ å‡æ— ç”¨è´Ÿæ‹…ï¼Œä¸ºä¸‹ä¸€è½®ç´¯ç§¯è…¾å‡ºç©ºé—´ã€‚',
        'ç¨³å¥å‘ä¸Šï¼Œè‹¥æ„¿æ„åœ¨ç¨³å®šä¸­åšå‡ºæœ‰é™åº¦çš„æ”¹å˜ï¼Œå°†è¿æ¥è´¨å˜çº§åˆ«çš„æˆé•¿ã€‚'
      ],
      'zh-TW': [
        'éå»å¹¾å¹´ä½ ä¸»è¦åœ¨"æ‰“åœ°åŸº"ï¼Œå¾ˆå¤šæˆæœå°šåœ¨æš—è™•é†é‡€ã€‚',
        'é©åˆæª¢è¦–è³‡ç”¢ã€ç¿’æ…£èˆ‡äººéš›çµæ§‹ï¼Œåˆªæ¸›ç„¡ç”¨è² æ“”ï¼Œç‚ºä¸‹ä¸€è¼ªç´¯ç©é¨°å‡ºç©ºé–“ã€‚',
        'ç©©å¥å‘ä¸Šï¼Œè‹¥é¡˜æ„åœ¨ç©©å®šä¸­åšå‡ºæœ‰é™åº¦çš„æ”¹è®Šï¼Œå°‡è¿ä¾†è³ªè®Šç´šåˆ¥çš„æˆé•·ã€‚'
      ],
      'en': [
        'In the last few years you have mainly been "laying foundations"; many results are still ripening behind the scenes.',
        'Now is the time to review assets, habits and relationship structures, cutting away what no longer serves to make room for the next stage of growth.',
        'The trend is steadily upward; with measured changes on top of a stable base, you can trigger breakthrough-level growth.'
      ],
      'ja-JP': [
        'ã“ã“æ•°å¹´ã¯ä¸»ã«"åœŸå°ã¥ãã‚Š"ã®æ™‚æœŸã§ã€å¤šãã®æˆæœã¯ã¾ã æ°´é¢ä¸‹ã§ç†Ÿæˆã—ã¦ã„ã¾ã™ã€‚',
        'ä»Šã¯è³‡ç”£ãƒ»ç¿’æ…£ãƒ»äººé–“é–¢ä¿‚ã®æ§‹é€ ã‚’è¦‹ç›´ã—ã€å½¹ã«ç«‹ãŸãªã„è² æ‹…ã‚’æ‰‹æ”¾ã—ã¦ã€æ¬¡ã®è“„ç©ã®ãŸã‚ã®ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç©ºã‘ã‚‹ã®ã«è‰¯ã„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã™ã€‚',
        'æµã‚Œã¯å®‰å®šã—ã¦ä¸Šå‘ãã§ã™ã€‚å®‰å®šã‚’ä¿ã¡ãªãŒã‚‰ã‚‚å°‘ã—ãšã¤å¤‰åŒ–ã‚’åŠ ãˆã‚Œã°ã€è³ªçš„ãªé£›èºã«ã¤ãªãŒã‚‹æˆé•·ãŒæœŸå¾…ã§ãã¾ã™ã€‚'
      ],
      'th-TH': [
        'à¸•à¸¥à¸­à¸”à¹„à¸¡à¹ˆà¸à¸µà¹ˆà¸›à¸µà¸—à¸µà¹ˆà¸œà¹ˆà¸²à¸™à¸¡à¸² à¸„à¸¸à¸“à¹€à¸«à¸¡à¸·à¸­à¸™à¸à¸³à¸¥à¸±à¸‡ "à¸¥à¸‡à¸à¸²à¸™à¸£à¸²à¸" à¸«à¸¥à¸²à¸¢à¸­à¸¢à¹ˆà¸²à¸‡ à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œà¸ˆà¸£à¸´à¸‡ à¹† à¸¢à¸±à¸‡à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸Šà¹ˆà¸§à¸‡à¸šà¹ˆà¸¡à¹€à¸à¸²à¸°',
        'à¸•à¸­à¸™à¸™à¸µà¹‰à¹€à¸«à¸¡à¸²à¸°à¸à¸±à¸šà¸à¸²à¸£à¸—à¸šà¸—à¸§à¸™à¸—à¸£à¸±à¸à¸¢à¹Œà¸ªà¸´à¸™ à¸™à¸´à¸ªà¸±à¸¢ à¹à¸¥à¸°à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ à¸•à¸±à¸”à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸ˆà¸³à¹€à¸›à¹‡à¸™à¸­à¸­à¸à¹„à¸›à¹€à¸à¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¸¡à¸µà¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸ªà¸°à¸ªà¸¡à¸£à¸­à¸šà¹ƒà¸«à¸¡à¹ˆ',
        'à¹à¸™à¸§à¹‚à¸™à¹‰à¸¡à¹‚à¸”à¸¢à¸£à¸§à¸¡à¸„à¹ˆà¸­à¸¢ à¹† à¸‚à¸¶à¹‰à¸™à¸­à¸¢à¹ˆà¸²à¸‡à¸¡à¸±à¹ˆà¸™à¸„à¸‡ à¸–à¹‰à¸²à¸„à¸¸à¸“à¸¢à¸­à¸¡à¸›à¸£à¸±à¸šà¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸šà¸²à¸‡à¸­à¸¢à¹ˆà¸²à¸‡à¸šà¸™à¸à¸·à¹‰à¸™à¸à¸²à¸™à¸—à¸µà¹ˆà¸¡à¸±à¹ˆà¸™à¸„à¸‡à¸™à¸µà¹‰ à¸ˆà¸°à¹€à¸à¸´à¸”à¸à¸²à¸£à¹€à¸•à¸´à¸šà¹‚à¸•à¹à¸šà¸šà¸à¹‰à¸²à¸§à¸à¸£à¸°à¹‚à¸”à¸”à¹„à¸”à¹‰'
      ],
      'ms': [
        'Dalam beberapa tahun yang lalu, anda banyak fokus pada "membina asas"; banyak hasil masih sedang matang di belakang tabir.',
        'Sekarang masa yang sesuai untuk menilai semula aset, tabiat dan struktur hubungan, membuang beban yang tidak lagi berguna supaya ada ruang untuk pertumbuhan seterusnya.',
        'Haluan hidup sedang naik secara stabil; dengan perubahan kecil tetapi terancang di atas asas yang kukuh, anda boleh mencetuskan pertumbuhan pada tahap terobosan.'
      ]
    },
    // ... å…¶ä»–å…ƒç´ çš„ç±»ä¼¼ç»“æ„ï¼ˆæœ¨ã€é‡‘ã€ç«ï¼‰
    'default': {
      'zh-CN': [
        'ä½ åœ¨å°è¯•ä¸è°ƒæ•´ä¸­å‰è¿›ã€‚',
        'é€‚åˆé‡æ–°ç›˜ç‚¹è‡ªå·±çœŸæ­£æƒ³å®ˆæŠ¤çš„æ–¹å‘ã€‚',
        'æœªæ¥å‡ å¹´æ˜¯å†å®šä½ä¸å†å‡ºå‘çš„é‡è¦é˜¶æ®µã€‚'
      ],
      'zh-TW': [
        'ä½ åœ¨å˜—è©¦èˆ‡èª¿æ•´ä¸­å‰é€²ã€‚',
        'é©åˆé‡æ–°ç›¤é»è‡ªå·±çœŸæ­£æƒ³å®ˆè­·çš„æ–¹å‘ã€‚',
        'æœªä¾†å¹¾å¹´æ˜¯å†å®šä½èˆ‡å†å‡ºç™¼çš„é‡è¦éšæ®µã€‚'
      ],
      'en': [
        'You are moving forward through trial and adjustment.',
        'Now is a good time to review what you truly want to protect and invest in.',
        'The coming years are important for re-positioning yourself and starting again with clearer intention.'
      ],
      'ja-JP': [
        'ä»Šã¯è©¦è¡ŒéŒ¯èª¤ã¨å¾®èª¿æ•´ã‚’ã—ãªãŒã‚‰å‰ã«é€²ã‚“ã§ã„ã‚‹æ®µéšã§ã™ã€‚',
        'æœ¬å½“ã«å®ˆã‚ŠãŸã„ã‚‚ã®ãƒ»åŠ›ã‚’æ³¨ããŸã„æ–¹å‘ã‚’ã€æ”¹ã‚ã¦è¦‹ç›´ã™ã®ã«è‰¯ã„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã™ã€‚',
        'ã“ã‚Œã‹ã‚‰æ•°å¹´ã¯ã€è‡ªåˆ†ã®ç«‹ã¡ä½ç½®ã‚’å†è¨­å®šã—ã€ã‚ˆã‚Šæ˜ç¢ºãªæ„å›³ã‚’æŒã£ã¦å†ã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚‹å¤§äº‹ãªæ™‚æœŸã«ãªã‚Šã¾ã™ã€‚'
      ],
      'th-TH': [
        'à¸•à¸­à¸™à¸™à¸µà¹‰à¸„à¸¸à¸“à¸à¸³à¸¥à¸±à¸‡à¸à¹‰à¸²à¸§à¹„à¸›à¸‚à¹‰à¸²à¸‡à¸«à¸™à¹‰à¸²à¸œà¹ˆà¸²à¸™à¸à¸²à¸£à¸¥à¸­à¸‡à¸œà¸´à¸”à¸¥à¸­à¸‡à¸–à¸¹à¸à¹à¸¥à¸°à¸à¸²à¸£à¸›à¸£à¸±à¸šà¸•à¸±à¸§',
        'à¹€à¸›à¹‡à¸™à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²à¸—à¸µà¹ˆà¸”à¸µà¹ƒà¸™à¸à¸²à¸£à¸—à¸šà¸—à¸§à¸™à¸§à¹ˆà¸²à¸­à¸°à¹„à¸£à¸„à¸·à¸­à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸„à¸¸à¸“à¸­à¸¢à¸²à¸à¸›à¸à¸›à¹‰à¸­à¸‡à¹à¸¥à¸°à¸­à¸¢à¸²à¸à¸¥à¸‡à¸—à¸¸à¸™à¸à¸¥à¸±à¸‡à¸Šà¸µà¸§à¸´à¸•à¸¥à¸‡à¹„à¸›à¸ˆà¸£à¸´à¸‡ à¹†',
        'à¹„à¸¡à¹ˆà¸à¸µà¹ˆà¸›à¸µà¸•à¹ˆà¸­à¸ˆà¸²à¸à¸™à¸µà¹‰à¹€à¸›à¹‡à¸™à¸Šà¹ˆà¸§à¸‡à¸ªà¸³à¸„à¸±à¸à¸‚à¸­à¸‡à¸à¸²à¸£à¸ˆà¸±à¸”à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡à¸•à¸±à¸§à¹€à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ à¹à¸¥à¸°à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡à¸”à¹‰à¸§à¸¢à¹€à¸ˆà¸•à¸™à¸²à¸—à¸µà¹ˆà¸Šà¸±à¸”à¹€à¸ˆà¸™à¸à¸§à¹ˆà¸²à¹€à¸”à¸´à¸¡'
      ],
      'ms': [
        'Anda sedang bergerak ke hadapan melalui percubaan dan penyesuaian.',
        'Sekarang masa yang baik untuk menilai semula apa yang benar-benar ingin anda lindungi dan laburkan.',
        'Beberapa tahun akan datang penting untuk anda menetapkan semula kedudukan dan memulakan semula dengan niat yang lebih jelas.'
      ]
    }
  };

  // æ ¹æ®å½“å‰è¯­è¨€æŒ‘é€‰å¯¹åº”ä¸‰æ®µæ–‡æ¡ˆ
  function pickText(pack){
    if (!pack) return ['', '', ''];
    if (pack[lang]) return pack[lang];
    const base = lang.split('-')[0];
    if (pack[base]) return pack[base];
    if (pack['en']) return pack['en'];
    if (pack['zh-CN']) return pack['zh-CN'];
    const first = Object.values(pack)[0];
    return first || ['', '', ''];
  }

  const pack = MSG[elem] || MSG['default'];
  const [pastMsg, nowMsg, futureMsg] = pickText(pack);

  // æ—¶é—´æ®µ label å¤šè¯­è¨€
  const LABELS = {
    'zh-CN': ['è¿‡å»ä¸‰å¹´', 'ç°åœ¨ & æœªæ¥12ä¸ªæœˆ', 'æœªæ¥2â€“3å¹´'],
    'zh-TW': ['éå»ä¸‰å¹´', 'ç¾åœ¨ & æœªä¾†12å€‹æœˆ', 'æœªä¾†2â€“3å¹´'],
    'en': ['Past 3 years', 'Now â€“ next 12 months', 'Next 2â€“3 years'],
    'ja-JP': ['éå»3å¹´', 'ç¾åœ¨ã€œä»Šå¾Œ12ã‹æœˆ', 'ä»Šå¾Œ2ã€œ3å¹´'],
    'th-TH': ['3 à¸›à¸µà¸—à¸µà¹ˆà¸œà¹ˆà¸²à¸™à¸¡à¸²', 'à¸•à¸­à¸™à¸™à¸µà¹‰â€“12 à¹€à¸”à¸·à¸­à¸™à¸‚à¹‰à¸²à¸‡à¸«à¸™à¹‰à¸²', '2â€“3 à¸›à¸µà¸‚à¹‰à¸²à¸‡à¸«à¸™à¹‰à¸²'],
    'ms': ['3 tahun lalu', 'Sekarang â€“ 12 bulan akan datang', '2â€“3 tahun akan datang']
  };

  function pickLabels(){
    if (LABELS[lang]) return LABELS[lang];
    const base = lang.split('-')[0];
    if (LABELS[base]) return LABELS[base];
    return LABELS['en'];
  }

  const [labelPast, labelNow, labelFuture] = pickLabels();

  function mkItem(period, text){
    const item = document.createElement('div');
    item.className = 'timeline-item';
    item.innerHTML = `
      <div class="timeline-period">${escapeHTML(period)}</div>
      <div>${escapeHTML(text || '')}</div>
    `;
    box.appendChild(item);
  }

  mkItem(`${labelPast}ï¼ˆâ‰ˆ ${y-3} â€“ ${y-1}ï¼‰`, pastMsg);
  mkItem(`${labelNow}ï¼ˆâ‰ˆ ${y} â€“ ${y+1}ï¼‰`, nowMsg);
  mkItem(`${labelFuture}ï¼ˆâ‰ˆ ${y+1} â€“ ${y+3}ï¼‰`, futureMsg);
}

/* ===== ä¿®å¤ï¼šä¸“ä¸šå»ºè®® 4 å¡ç‰‡ ===== */
function buildAdvice(ctx){
  const deepLang = getDeepLang(ctx.starNum);
  const deep = STARS_DEEP[ctx.starNum];
  const lang = getLang();

  // æ–¹å‘å»ºè®®
  const dirBox = $('directionAdvice');
  if (dirBox && deep && deep.directions){
    const fav = deep.directions.favorable ? deep.directions.favorable.join(lang.startsWith('zh') ? 'ã€' : ', ') : '';
    const avoid = deep.directions.avoid ? deep.directions.avoid.join(lang.startsWith('zh') ? 'ã€' : ', ') : '';
    
    const messages = {
      'zh-CN': `æœ‰åˆ©æ–¹ä½ï¼š${fav}ï¼›éœ€ç•™æ„ï¼š${avoid}ã€‚å»ºè®®é‡è¦ä¼šè®®ã€å·¥ä½œä¸ç¡çœ æ–¹å‘å°½é‡é¡ºç€æœ‰åˆ©æ–¹ä½ï¼Œå‹åŠ›å¤§çš„æ—¶æœŸé¿å…é•¿æœŸé¢å‘éœ€ç•™æ„æ–¹ä½ã€‚`,
      'zh-TW': `æœ‰åˆ©æ–¹ä½ï¼š${fav}ï¼›éœ€ç•™æ„ï¼š${avoid}ã€‚å»ºè­°é‡è¦æœƒè­°ã€å·¥ä½œèˆ‡ç¡çœ æ–¹å‘ç›¡é‡é †è‘—æœ‰åˆ©æ–¹ä½ï¼Œå£“åŠ›å¤§çš„æ™‚æœŸé¿å…é•·æœŸé¢å‘éœ€ç•™æ„æ–¹ä½ã€‚`,
      'en': `Favorable directions: ${fav}; Be cautious with: ${avoid}. Try to align key work, sleep and meeting directions with the favorable side, especially during stressful periods.`,
      'ja-JP': `æœ‰åˆ©ãªæ–¹ä½ï¼š${fav}ï¼›æ³¨æ„ã™ã¹ãæ–¹ä½ï¼š${avoid}ã€‚é‡è¦ãªä¼šè­°ã€ä»•äº‹ã€ç¡çœ ã®æ–¹å‘ã¯ã§ãã‚‹ã ã‘æœ‰åˆ©ãªæ–¹ä½ã«åˆã‚ã›ã€ã‚¹ãƒˆãƒ¬ã‚¹ã®å¤šã„æ™‚æœŸã¯æ³¨æ„ã™ã¹ãæ–¹ä½ã‚’é•·æœŸé–“å‘ã‹ãªã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚`,
      'th-TH': `à¸—à¸´à¸¨à¸—à¸²à¸‡à¸—à¸µà¹ˆà¸”à¸µ: ${fav}; à¸—à¸´à¸¨à¸—à¸²à¸‡à¸—à¸µà¹ˆà¸„à¸§à¸£à¸£à¸°à¸§à¸±à¸‡: ${avoid} à¹à¸™à¸°à¸™à¸³à¹ƒà¸«à¹‰à¸«à¸±à¸™à¸«à¸™à¹‰à¸²à¹„à¸›à¸—à¸²à¸‡à¸—à¸´à¸¨à¸—à¸²à¸‡à¸—à¸µà¹ˆà¸”à¸µà¹ƒà¸™à¸Šà¹ˆà¸§à¸‡à¸à¸´à¸ˆà¸à¸£à¸£à¸¡à¸ªà¸³à¸„à¸±à¸ à¹€à¸Šà¹ˆà¸™ à¸à¸²à¸£à¸›à¸£à¸°à¸Šà¸¸à¸¡ à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™ à¹à¸¥à¸°à¸à¸²à¸£à¸™à¸­à¸™à¸«à¸¥à¸±à¸š à¹‚à¸”à¸¢à¹€à¸‰à¸à¸²à¸°à¹ƒà¸™à¸Šà¹ˆà¸§à¸‡à¸—à¸µà¹ˆà¸¡à¸µà¸„à¸§à¸²à¸¡à¹€à¸„à¸£à¸µà¸¢à¸”à¸ªà¸¹à¸‡`,
      'ms': `Arah baik: ${fav}; Arah berhati-hati: ${avoid}. Cuba sejajarkan arah kerja, tidur dan mesyuarat penting dengan sisi yang baik, terutamanya semasa tempoh tertekan.`
    };
    
    dirBox.textContent = messages[lang] || messages['en'];
  } else if (dirBox) {
    const messages = {
      'zh-CN': 'å»ºè®®å¤šå¾…åœ¨è®©ä½ èº«å¿ƒæ”¾æ¾ã€å…‰çº¿å……è¶³ã€ç©ºæ°”æµåŠ¨çš„ç©ºé—´ã€‚è‹¥é•¿æ—¶é—´æ„Ÿåˆ°å‹æŠ‘ï¼Œå¯ä»¥å°è¯•è°ƒæ•´åŠå…¬æ¡Œã€åºŠä½æˆ–å¸¸ç”¨åº§ä½çš„æœå‘ã€‚',
      'zh-TW': 'å»ºè­°å¤šå¾…åœ¨è®“ä½ èº«å¿ƒæ”¾é¬†ã€å…‰ç·šå……è¶³ã€ç©ºæ°£æµå‹•çš„ç©ºé–“ã€‚è‹¥é•·æ™‚é–“æ„Ÿåˆ°å£“æŠ‘ï¼Œå¯ä»¥å˜—è©¦èª¿æ•´è¾¦å…¬æ¡Œã€åºŠä½æˆ–å¸¸ç”¨åº§ä½çš„æœå‘ã€‚',
      'en': 'Spend more time in spaces where your body relaxes and the air & light feel good. If you feel stuck for a long time, try changing your desk, bed or usual sitting direction.',
      'ja-JP': 'å¿ƒèº«ãŒãƒªãƒ©ãƒƒã‚¯ã‚¹ã§ãã€å…‰ãŒååˆ†ã§ã€ç©ºæ°—ã®æµã‚ŒãŒè‰¯ã„ç©ºé–“ã§éã”ã™ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚é•·æ™‚é–“åœ§è¿«æ„Ÿã‚’æ„Ÿã˜ã‚‹å ´åˆã¯ã€æœºã€ãƒ™ãƒƒãƒ‰ã€ã‚ˆãä½¿ã†å¸­ã®å‘ãã‚’å¤‰ãˆã¦ã¿ã¦ãã ã•ã„ã€‚',
      'th-TH': 'à¹à¸™à¸°à¸™à¸³à¹ƒà¸«à¹‰à¹ƒà¸Šà¹‰à¹€à¸§à¸¥à¸²à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¸—à¸µà¹ˆà¸£à¹ˆà¸²à¸‡à¸à¸²à¸¢à¸œà¹ˆà¸­à¸™à¸„à¸¥à¸²à¸¢ à¹à¸ªà¸‡à¸ªà¸§à¹ˆà¸²à¸‡à¹€à¸à¸µà¸¢à¸‡à¸à¸­ à¹à¸¥à¸°à¸­à¸²à¸à¸²à¸¨à¹„à¸«à¸¥à¹€à¸§à¸µà¸¢à¸™à¸”à¸µ à¸–à¹‰à¸²à¸£à¸¹à¹‰à¸ªà¸¶à¸à¸à¸”à¸”à¸±à¸™à¹€à¸›à¹‡à¸™à¹€à¸§à¸¥à¸²à¸™à¸²à¸™ à¸¥à¸­à¸‡à¸›à¸£à¸±à¸šà¸—à¸´à¸¨à¸—à¸²à¸‡à¸‚à¸­à¸‡à¹‚à¸•à¹Šà¸°à¸—à¸³à¸‡à¸²à¸™ à¹€à¸•à¸µà¸¢à¸‡ à¸«à¸£à¸·à¸­à¸—à¸µà¹ˆà¸™à¸±à¹ˆà¸‡à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸šà¹ˆà¸­à¸¢',
      'ms': 'Luangkan lebih banyak masa di ruang di mana badan anda berehat dan udara & cahaya terasa baik. Jika anda merasa tersekat untuk masa yang lama, cuba ubah arah meja, katil atau tempat duduk biasa anda.'
    };
    
    dirBox.textContent = messages[lang] || messages['en'];
  }

  // é¢œè‰²å»ºè®®
  const colorBox = $('colorAdvice');
  if (colorBox){
    let txt;
    if (deep && deep.color){
      const messages = {
        'zh-CN': `ä¸»è°ƒé¢œè‰²ï¼š${deep.color}ã€‚æ—¥å¸¸å¯å¤šè¿ç”¨å¯¹åº”è‰²ç³»åœ¨ç©¿ç€ã€å°ç‰©ä¸å·¥ä½œç¯å¢ƒä¸­ï¼ˆå¦‚æ–‡ä»¶å¤¹ã€æ‰‹æœºå£³ã€åº§ä½é™„è¿‘çš„å°ç‰©ä»¶ï¼‰ï¼Œè¥é€ "çœ‹è§å°±å®‰å¿ƒ"çš„èƒ½é‡é”šç‚¹ã€‚`,
        'zh-TW': `ä¸»èª¿é¡è‰²ï¼š${deep.color}ã€‚æ—¥å¸¸å¯å¤šé‹ç”¨å°æ‡‰è‰²ç³»åœ¨ç©¿è‘—ã€å°ç‰©èˆ‡å·¥ä½œç’°å¢ƒä¸­ï¼ˆå¦‚è³‡æ–™å¤¾ã€æ‰‹æ©Ÿæ®¼ã€åº§ä½é™„è¿‘çš„å°ç‰©ä»¶ï¼‰ï¼Œç‡Ÿé€ "çœ‹è¦‹å°±å®‰å¿ƒ"çš„èƒ½é‡éŒ¨é»ã€‚`,
        'en': `Main colours: ${deep.color}. Use these tones more often in clothes, accessories and workspace details (files, phone case, desk items) as visual anchors to stabilise your qi.`,
        'ja-JP': `ãƒ¡ã‚¤ãƒ³ã‚«ãƒ©ãƒ¼ï¼š${deep.color}ã€‚æ—¥å¸¸çš„ã«è¡£æœã€å°ç‰©ã€ä½œæ¥­ç’°å¢ƒï¼ˆãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã€ã‚¹ãƒãƒ›ã‚±ãƒ¼ã‚¹ã€ãƒ‡ã‚¹ã‚¯å‘¨ã‚Šã®å°ç‰©ãªã©ï¼‰ã§å¯¾å¿œã™ã‚‹è‰²èª¿ã‚’å¤šãä½¿ç”¨ã—ã€ã€Œè¦‹ã‚‹ã¨å®‰å¿ƒã™ã‚‹ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®ã‚¢ãƒ³ã‚«ãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã€‚`,
        'th-TH': `à¸ªà¸µà¸«à¸¥à¸±à¸: ${deep.color} à¹ƒà¸™à¸Šà¸µà¸§à¸´à¸•à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™à¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¹€à¸‰à¸”à¸ªà¸µà¸—à¸µà¹ˆà¸•à¸£à¸‡à¸à¸±à¸™à¹ƒà¸™à¹€à¸ªà¸·à¹‰à¸­à¸œà¹‰à¸² à¸‚à¸­à¸‡à¹ƒà¸Šà¹‰à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢ à¹à¸¥à¸°à¸ªà¸ à¸²à¸à¹à¸§à¸”à¸¥à¹‰à¸­à¸¡à¹ƒà¸™à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™ (à¹€à¸Šà¹ˆà¸™ à¹à¸Ÿà¹‰à¸¡ à¸à¸£à¸°à¹€à¸›à¹‹à¸²à¹‚à¸—à¸£à¸¨à¸±à¸à¸—à¹Œ à¸‚à¸­à¸‡à¹ƒà¸Šà¹‰à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢à¸£à¸­à¸šà¸—à¸µà¹ˆà¸™à¸±à¹ˆà¸‡) à¹€à¸à¸·à¹ˆà¸­à¸ªà¸£à¹‰à¸²à¸‡à¸ˆà¸¸à¸”à¸¢à¸¶à¸”à¸à¸¥à¸±à¸‡à¸‡à¸²à¸™à¸—à¸µà¹ˆ "à¹€à¸«à¹‡à¸™à¹à¸¥à¹‰à¸§à¸£à¸¹à¹‰à¸ªà¸¶à¸à¸ªà¸šà¸²à¸¢à¹ƒà¸ˆ"`,
        'ms': `Warna utama: ${deep.color}. Gunakan nada ini lebih kerap dalam pakaian, aksesori dan butiran ruang kerja (fail, sarung telefon, item meja) sebagai penanda visual untuk menstabilkan qi anda.`
      };
      txt = messages[lang] || messages['en'];
    } else {
      const messages = {
        'zh-CN': 'å»ºè®®è¡£ç€ä»¥ 1â€“2 ç§åŸºç¡€è‰²åšä¸»è½´ï¼Œå°‘é‡åŠ å…¥äº®è‰²ç‚¹ç¼€å³å¯ï¼Œé¿å…é¢œè‰²è¿‡å¤šå¯¼è‡´å¿ƒç¥åˆ†æ•£ã€‚',
        'zh-TW': 'å»ºè­°è¡£è‘—ä»¥ 1â€“2 ç¨®åŸºç¤è‰²åšä¸»è»¸ï¼Œå°‘é‡åŠ å…¥äº®è‰²é»ç¶´å³å¯ï¼Œé¿å…é¡è‰²éå¤šå°è‡´å¿ƒç¥åˆ†æ•£ã€‚',
        'en': 'Choose 1â€“2 base colours for clothing, with small bright accents. Too many colours at once can scatter your focus.',
        'ja-JP': 'è¡£æœã¯1ã€œ2ã¤ã®ãƒ™ãƒ¼ã‚¹ã‚«ãƒ©ãƒ¼ã‚’è»¸ã«ã—ã€å°‘é‡ã®æ˜ã‚‹ã„è‰²ã§ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚’ã¤ã‘ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚è‰²ãŒå¤šã™ãã‚‹ã¨é›†ä¸­åŠ›ãŒæ•£æ¼«ã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚',
        'th-TH': 'à¹à¸™à¸°à¸™à¸³à¹€à¸ªà¸·à¹‰à¸­à¸œà¹‰à¸²à¹ƒà¸«à¹‰à¹ƒà¸Šà¹‰à¸ªà¸µà¸à¸·à¹‰à¸™à¸à¸²à¸™ 1â€“2 à¸ªà¸µà¹€à¸›à¹‡à¸™à¸«à¸¥à¸±à¸ à¹€à¸à¸´à¹ˆà¸¡à¸ªà¸µà¸ªà¸§à¹ˆà¸²à¸‡à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢à¹€à¸à¸·à¹ˆà¸­à¹€à¸ªà¸£à¸´à¸¡ à¸«à¸¥à¸µà¸à¹€à¸¥à¸µà¹ˆà¸¢à¸‡à¸ªà¸µà¸¡à¸²à¸à¹€à¸à¸´à¸™à¹„à¸›à¹€à¸à¸£à¸²à¸°à¸ˆà¸°à¸—à¸³à¹ƒà¸«à¹‰à¸ªà¸¡à¸²à¸˜à¸´à¸à¸£à¸°à¸ˆà¸²à¸¢',
        'ms': 'Pilih 1â€“2 warna asas untuk pakaian, dengan aksen terang kecil. Terlalu banyak warna sekaligus boleh mencerai-beraikan tumpuan anda.'
      };
      txt = messages[lang] || messages['en'];
    }
    colorBox.textContent = txt;
  }

  // èŒä¸šå»ºè®®
  const careerBox = $('careerAdvice');
  if (careerBox){
    if (deepLang && deepLang.career_analysis){
      const ca = deepLang.career_analysis;
      let html = '';
      
      if (ca.strengths && ca.strengths.length) {
        const label = lang.startsWith('zh') ? 'ä¼˜åŠ¿ï¼š' : 
                      lang === 'en' ? 'Strengths:' :
                      lang === 'ja-JP' ? 'å¼·ã¿ï¼š' :
                      lang === 'th-TH' ? 'à¸ˆà¸¸à¸”à¹à¸‚à¹‡à¸‡ï¼š' :
                      lang === 'ms' ? 'Kekuatanï¼š' : 'Strengths:';
        html += `<p><strong>${label}</strong></p>${joinList(ca.strengths)}`;
      }
      
      if (ca.opportunities && ca.opportunities.length) {
        const label = lang.startsWith('zh') ? 'æœºé‡ï¼š' : 
                      lang === 'en' ? 'Opportunities:' :
                      lang === 'ja-JP' ? 'æ©Ÿä¼šï¼š' :
                      lang === 'th-TH' ? 'à¹‚à¸­à¸à¸²à¸ªï¼š' :
                      lang === 'ms' ? 'Peluangï¼š' : 'Opportunities:';
        html += `<p><strong>${label}</strong></p>${joinList(ca.opportunities)}`;
      }
      
      if (ca.actions && ca.actions.length) {
        const label = lang.startsWith('zh') ? 'è¡ŒåŠ¨å»ºè®®ï¼š' : 
                      lang === 'en' ? 'Action steps:' :
                      lang === 'ja-JP' ? 'è¡Œå‹•ææ¡ˆï¼š' :
                      lang === 'th-TH' ? 'à¸„à¸³à¹à¸™à¸°à¸™à¸³à¸à¸²à¸£à¸›à¸à¸´à¸šà¸±à¸•à¸´ï¼š' :
                      lang === 'ms' ? 'Langkah tindakanï¼š' : 'Action steps:';
        html += `<p><strong>${label}</strong></p>${joinList(ca.actions)}`;
      }
      
      careerBox.innerHTML = html;
    } else {
      const messages = {
        'zh-CN': 'ç›®å‰é€‚åˆèµ°"ä¸€ä¸ªä¸»çº¿ + å°‘é‡ä¾§é¡¹ç›®"çš„ç»“æ„ï¼Œå·¥ä½œä¸Šå…ˆç¡®å®šæœ€æƒ³è¢«çœ‹è§çš„å®šä½ï¼Œå†å†³å®šè¦ä¸è¦æ¥é¢å¤–çš„æ¡ˆå­æˆ–å…¼èŒã€‚',
        'zh-TW': 'ç›®å‰é©åˆèµ°"ä¸€å€‹ä¸»ç·š + å°‘é‡å´é …ç›®"çš„çµæ§‹ï¼Œå·¥ä½œä¸Šå…ˆç¢ºå®šæœ€æƒ³è¢«çœ‹è¦‹çš„å®šä½ï¼Œå†æ±ºå®šè¦ä¸è¦æ¥é¡å¤–çš„æ¡ˆå­æˆ–å…¼è·ã€‚',
        'en': 'You are currently suited to "one main track + a few side projects". First clarify how you want to be seen professionally, then decide which extra projects to accept.',
        'ja-JP': 'ç¾åœ¨ã¯"1ã¤ã®ãƒ¡ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ + å°‘æ•°ã®ã‚µã‚¤ãƒ‰ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ"ã®æ§‹é€ ãŒé©ã—ã¦ã„ã¾ã™ã€‚ä»•äº‹ä¸Šã§ã¾ãšæœ€ã‚‚è¦‹ã‚‰ã‚ŒãŸã„ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚’æ˜ç¢ºã«ã—ã€ãã‚Œã‹ã‚‰è¿½åŠ ã®æ¡ˆä»¶ã‚„å‰¯æ¥­ã‚’å—ã‘å…¥ã‚Œã‚‹ã‹ã©ã†ã‹ã‚’æ±ºã‚ã¾ã™ã€‚',
        'th-TH': 'à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™à¹€à¸«à¸¡à¸²à¸°à¸à¸±à¸šà¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡ "à¹€à¸ªà¹‰à¸™à¸—à¸²à¸‡à¸«à¸¥à¸±à¸à¸«à¸™à¸¶à¹ˆà¸‡à¹€à¸ªà¹‰à¸™ + à¹‚à¸„à¸£à¸‡à¸à¸²à¸£à¸‚à¹‰à¸²à¸‡à¹€à¸„à¸µà¸¢à¸‡à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢" à¹ƒà¸™à¸‡à¸²à¸™à¸„à¸§à¸£à¸à¸³à¸«à¸™à¸”à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡à¸—à¸µà¹ˆà¸­à¸¢à¸²à¸à¹ƒà¸«à¹‰à¹€à¸«à¹‡à¸™à¸¡à¸²à¸à¸—à¸µà¹ˆà¸ªà¸¸à¸”à¸à¹ˆà¸­à¸™ à¹à¸¥à¹‰à¸§à¸ˆà¸¶à¸‡à¸•à¸±à¸”à¸ªà¸´à¸™à¹ƒà¸ˆà¸§à¹ˆà¸²à¸ˆà¸°à¸£à¸±à¸šà¹‚à¸„à¸£à¸‡à¸à¸²à¸£à¹€à¸à¸´à¹ˆà¸¡à¸«à¸£à¸·à¸­à¸‡à¸²à¸™à¸à¸²à¸£à¹Œà¸—à¹„à¸—à¸¡à¹Œà¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ',
        'ms': 'Anda kini sesuai dengan struktur "satu landasan utama + beberapa projek sampingan". Pertama jelaskan bagaimana anda ingin dilihat secara profesional, kemudian tentukan projek tambahan mana yang akan diterima.'
      };
      careerBox.textContent = messages[lang] || messages['en'];
    }
  }

  // äººé™…å…³ç³»å»ºè®®
  const relBox = $('relationshipAdvice');
  if (relBox){
    if (deepLang && deepLang.relationship_analysis){
      const ra = deepLang.relationship_analysis;
      let html = '';
      
      if (ra.strengths && ra.strengths.length) {
        const label = lang.startsWith('zh') ? 'ä¼˜åŠ¿ï¼š' : 
                      lang === 'en' ? 'Strengths:' :
                      lang === 'ja-JP' ? 'å¼·ã¿ï¼š' :
                      lang === 'th-TH' ? 'à¸ˆà¸¸à¸”à¹à¸‚à¹‡à¸‡ï¼š' :
                      lang === 'ms' ? 'Kekuatanï¼š' : 'Strengths:';
        html += `<p><strong>${label}</strong></p>${joinList(ra.strengths)}`;
      }
      
      if (ra.actions && ra.actions.length) {
        const label = lang.startsWith('zh') ? 'è¡ŒåŠ¨å»ºè®®ï¼š' : 
                      lang === 'en' ? 'Action tips:' :
                      lang === 'ja-JP' ? 'è¡Œå‹•ã®ãƒ’ãƒ³ãƒˆï¼š' :
                      lang === 'th-TH' ? 'à¹€à¸„à¸¥à¹‡à¸”à¸¥à¸±à¸šà¸à¸²à¸£à¸›à¸à¸´à¸šà¸±à¸•à¸´ï¼š' :
                      lang === 'ms' ? 'Petua tindakanï¼š' : 'Action tips:';
        html += `<p><strong>${label}</strong></p>${joinList(ra.actions)}`;
      }
      
      relBox.innerHTML = html;
    } else {
      const messages = {
        'zh-CN': 'å»ºè®®å…ˆæ²Ÿé€š"ç›¸å¤„èŠ‚å¥"å’Œ"ç•Œçº¿"ï¼Œå†è°ˆä»·å€¼è§‚æˆ–æœªæ¥è§„åˆ’ï¼Œä¼šæ¯”è¾ƒé¡ºã€‚',
        'zh-TW': 'å»ºè­°å…ˆæºé€š"ç›¸è™•ç¯€å¥"å’Œ"ç•Œç·š"ï¼Œå†è«‡åƒ¹å€¼è§€æˆ–æœªä¾†è¦åŠƒï¼Œæœƒæ¯”è¼ƒé †ã€‚',
        'en': 'Discuss pace and boundaries first, then values and future plans. That sequence usually flows better for you.',
        'ja-JP': 'ã¾ãš"ä»˜ãåˆã„ã®ãƒšãƒ¼ã‚¹"ã¨"å¢ƒç•Œç·š"ã‚’è©±ã—åˆã„ã€ãã‚Œã‹ã‚‰ä¾¡å€¤è¦³ã‚„å°†æ¥ã®è¨ˆç”»ã«ã¤ã„ã¦è©±ã™ã¨ã€ã‚ˆã‚Šã‚¹ãƒ ãƒ¼ã‚ºã«é€²ã¿ã¾ã™ã€‚',
        'th-TH': 'à¹à¸™à¸°à¸™à¸³à¹ƒà¸«à¹‰à¸ªà¸·à¹ˆà¸­à¸ªà¸²à¸£à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸š "à¸ˆà¸±à¸‡à¸«à¸§à¸°à¸à¸²à¸£à¸­à¸¢à¸¹à¹ˆà¸£à¹ˆà¸§à¸¡à¸à¸±à¸™" à¹à¸¥à¸° "à¹€à¸ªà¹‰à¸™à¹€à¸‚à¸•" à¸à¹ˆà¸­à¸™ à¹à¸¥à¹‰à¸§à¸ˆà¸¶à¸‡à¸à¸¹à¸”à¸„à¸¸à¸¢à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸šà¸„à¹ˆà¸²à¸™à¸´à¸¢à¸¡à¸«à¸£à¸·à¸­à¹à¸œà¸™à¸­à¸™à¸²à¸„à¸• à¸ˆà¸°à¸£à¸²à¸šà¸£à¸·à¹ˆà¸™à¸à¸§à¹ˆà¸²',
        'ms': 'Bincangkan dahulu "rentak perhubungan" dan "sempadan", kemudian barulah nilai atau perancangan masa depan. Urutan itu biasanya lebih lancar untuk anda.'
      };
      relBox.textContent = messages[lang] || messages['en'];
    }
  }
}

/* æœ¬å‘½ä¸»æ˜ŸåŒºå— */
function renderStarSection(ctx, deep, deepLang){
  const card = $('starCard');
  if (!card) return;

  const star = STARS[ctx.starNum] || null;
  const langCode = getLang();

  const starNameEl = $('starName');
  const starJPEl = $('starJP');
  const starBadges = $('starBadges');
  const starAbout = $('starAbout');
  const indicator = $('analysisTypeIndicator');

  // æ˜¾ç¤ºä¸»æ˜Ÿåç§°
  if (starNameEl && star) {
    const starName = star.name && star.name[langCode] 
      ? star.name[langCode] 
      : `Star ${ctx.starNum}`;
    starNameEl.textContent = starName;
    
    // æ˜¾ç¤ºæ—¥æ–‡/ç½—é©¬éŸ³ï¼ˆå¦‚æœæœ‰ï¼‰
    if (starJPEl) {
      const jpName = star.name && star.name['ja-JP'] ? star.name['ja-JP'] : '';
      starJPEl.textContent = jpName;
    }
  }

  // åˆ†æç±»å‹æŒ‡ç¤ºå™¨
  if (indicator) {
    indicator.textContent = ctx.analysisTypeLabel || '';
  }

  // åˆ›å»ºå¾½ç« 
  if (starBadges && star) {
    starBadges.innerHTML = '';
    
    // å…ƒç´ å¾½ç« 
    const elem = star.elem && star.elem[langCode] ? star.elem[langCode] : '';
    if (elem) {
      const elemBadge = document.createElement('span');
      elemBadge.className = 'badge';
      elemBadge.textContent = `${t('badge_elem')}ï¼š${elem}`;
      starBadges.appendChild(elemBadge);
    }
    
    // é¢œè‰²å¾½ç« 
    const color = star.color && star.color[langCode] ? star.color[langCode] : '';
    if (color) {
      const colorBadge = document.createElement('span');
      colorBadge.className = 'badge';
      colorBadge.textContent = `${t('badge_color')}ï¼š${color}`;
      starBadges.appendChild(colorBadge);
    }
    
    // å…³é”®è¯å¾½ç« 
    const keywords = star.key && star.key[langCode] ? star.key[langCode] : [];
    if (keywords && keywords.length > 0) {
      const keywordText = langCode.startsWith('zh') 
        ? keywords.join('ã€') 
        : keywords.join(', ');
      const keyBadge = document.createElement('span');
      keyBadge.className = 'badge';
      keyBadge.textContent = `${t('badge_kw')}ï¼š${keywordText}`;
      starBadges.appendChild(keyBadge);
    }
  }

  // å…³äºæè¿°
  if (starAbout && star) {
    const aboutText = star.about && star.about[langCode] 
      ? star.about[langCode] 
      : '';
    const label = t('about_label');
    starAbout.textContent = (label ? label + 'ï¼š' : '') + aboutText;
  }

  // æ„å»ºå…ƒç´ å›¾è¡¨å’Œåˆ†æ
  buildElementChart(deep);
  buildElementAnalysis(ctx, deep);
  card.style.display = 'block';
}

/* æ·±åº¦åˆ†æ 4 å¡ç‰‡ */
function renderDeepSection(ctx, deepLang){
  const card = $('analysisCard');
  if (!card) return;
  if (!deepLang){
    card.style.display = 'none';
    return;
  }

  const pBox = $('personalityAnalysis');
  const tBox = $('talentAnalysis');
  const cBox = $('challengeAnalysis');
  const dBox = $('developmentAdvice');

  if (pBox) pBox.textContent = deepLang.personality || '';

  if (tBox){
    tBox.innerHTML = '';
    if (deepLang.talents){
      tBox.innerHTML = joinList(deepLang.talents);
    }
  }

  if (cBox){
    cBox.textContent = deepLang.challenges || '';
  }

  if (dBox){
    const ca = deepLang.career_analysis;
    const ra = deepLang.relationship_analysis;
    const ha = deepLang.health_analysis;
    let html = '';
    if (ca && ca.actions){
      html += `<p><strong>${getLang().startsWith('zh') ? 'äº‹ä¸š / è´¢è¿æ–¹å‘ï¼š' : 'Career / wealth:'}</strong></p>${joinList(ca.actions)}`;
    }
    if (ra && ra.actions){
      html += `<p><strong>${getLang().startsWith('zh') ? 'æ„Ÿæƒ… / äººé™…æ–¹å‘ï¼š' : 'Love / relationships:'}</strong></p>${joinList(ra.actions)}`;
    }
    if (ha && ha.actions){
      html += `<p><strong>${getLang().startsWith('zh') ? 'å¥åº· / ç”Ÿæ´»ä¹ æƒ¯ï¼š' : 'Health / lifestyle:'}</strong></p>${joinList(ha.actions)}`;
    }
    dBox.innerHTML = html;
  }

  card.style.display = 'block';
}

/* ä¸“é¡¹åˆ†æå¡ï¼ˆæŒ‰ç±»å‹åˆ‡æ¢ï¼‰ */
function renderSpecializedSection(ctx, deepLang){
  const card = $('specializedCard');
  if (!card) return;

  if (ctx.analysisType === 'comprehensive' || !deepLang){
    card.style.display = 'none';
    return;
  }

  const titleEl = $('specializedTitle');
  const sub1 = $('specializedSubtitle1');
  const sub2 = $('specializedSubtitle2');
  const sub3 = $('specializedSubtitle3');
  const sub4 = $('specializedSubtitle4');
  const c1 = $('specializedContent1');
  const c2 = $('specializedContent2');
  const c3 = $('specializedContent3');
  const c4 = $('specializedContent4');

  if (!titleEl || !sub1 || !sub2 || !sub3 || !sub4 || !c1 || !c2 || !c3 || !c4){
    card.style.display = 'none';
    return;
  }

  titleEl.textContent = t('spec_title');

  let pack;
  if (ctx.analysisType === 'career'){
    pack = deepLang.career_analysis;
    sub1.textContent = t('spec_core');
    sub2.textContent = t('spec_opportunity');
    sub3.textContent = t('spec_risk');
    sub4.textContent = t('spec_action');
    c1.textContent = deepLang.career || '';
  }else if (ctx.analysisType === 'relationship'){
    pack = deepLang.relationship_analysis;
    sub1.textContent = t('spec_core');
    sub2.textContent = t('spec_opportunity');
    sub3.textContent = t('spec_risk');
    sub4.textContent = t('spec_action');
    c1.textContent = deepLang.personality || '';
  }else if (ctx.analysisType === 'health'){
    pack = deepLang.health_analysis;
    sub1.textContent = t('spec_core');
    sub2.textContent = t('spec_opportunity');
    sub3.textContent = t('spec_risk');
    sub4.textContent = t('spec_action');
    c1.textContent = (pack && pack.strengths && pack.strengths.join(' / ')) || '';
  }

  if (!pack){
    card.style.display = 'none';
    return;
  }

  c2.innerHTML = pack.opportunities ? joinList(pack.opportunities) : '';
  c3.innerHTML = pack.risks ? joinList(pack.risks) : '';
  c4.innerHTML = pack.actions ? joinList(pack.actions) : '';

  card.style.display = 'block';
}

/* Butler ä¸»æŠ¥å‘Šï¼ˆè‡ªåŠ¨ AI ä¸€æ¬¡ï¼‰ */
async function updateAiReport(ctx){
  const aiCard = $('aiCard');
  const aiBox = $('aiText');
  if (!aiCard || !aiBox) return;

  aiCard.style.display = 'block';
  aiBox.textContent = t('generating') || 'æ­£åœ¨ç”Ÿæˆè§£è¯»â€¦';

  try{
    const deepLang = getDeepLang(ctx.starNum) || {};
    const star = STARS[ctx.starNum];
    const lang = getLang();
    const extra = `
ä¸»æ˜Ÿï¼š${star ? star.name[lang] : ctx.starNum} (${star ? star.name['ja-JP'] : ''})
ä¸»äº”è¡Œï¼š${ctx.mainElement || (star ? star.elem[lang] : '')}
åˆ†æç±»å‹ï¼š${ctx.analysisTypeLabel}
å‡ºç”Ÿæ—¥æœŸï¼š${ctx.birthStr}
æ€§åˆ«ï¼ˆåŸå§‹è¾“å…¥ï¼‰ï¼š${ctx.gender || '-'}
åŸºç¡€æ€§æ ¼ï¼š${deepLang.personality || ''}
`;

    const prompt = lang.startsWith('zh')
      ? "è¯·æ‰®æ¼”æ¸©æŸ”ã€åŠ¡å®çš„å‘½ç†é¡¾é—®ï¼Œä»ä¸Šé¢çš„ä¹æ˜Ÿä¿¡æ¯å‡ºå‘ï¼Œå†™ä¸€ä»½'ä¹æ˜Ÿæ°”å­¦æ·±åº¦æŠ¥å‘Šç²¾ç®€ç‰ˆ'ã€‚ç»“æ„åŒ…å«ï¼š1ï¼‰æ ¸å¿ƒç”»åƒï¼›2ï¼‰ä»Šå¹´ï½æ˜å¹´çš„é‡ç‚¹æé†’ï¼›3ï¼‰å¯ä»¥é©¬ä¸Šæ‰§è¡Œçš„ 3â€“5 æ¡è°ƒæ•´å»ºè®®ã€‚è¯­è¨€è´´è¿‘æ—¥å¸¸å£è¯­ã€ä¸è¦å¤ªç„ã€‚"
      : "Based on the Nine Star Ki information above, write a concise 'Deep Kyuusei Brief': (1) core portrait, (2) key focus from now to the next 12 months, (3) 3â€“5 actionable suggestions. Keep it warm, practical and down-to-earth.";

    const reply = await askAI(prompt, extra);
    aiBox.textContent = reply || (t('retry') || 'æš‚æ—¶æ— æ³•ç”Ÿæˆï¼Œè¯·ç¨åå†è¯•ã€‚');
  }catch(e){
    console.warn('[ai report] error', e);
    const aiBox = $('aiText');
    if (aiBox) aiBox.textContent = t('neterr') || 'ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•ã€‚';
  }
}

/* ç”Ÿæˆä¹æ˜ŸæŠ¥å‘Šä¸»æµç¨‹ */
function buildKyuuseiReport(){
  const birthInput  = $('birthdate');
  const genderInput = $('gender');
  const typeSelect  = $('analysisType');

  if (!birthInput){
    console.warn('[kyuusei] #birthdate not found');
    return;
  }

  const birthStr = (birthInput.value || '').trim();
  if (!birthStr){
    alert(t('please_birth'));
    birthInput.focus && birthInput.focus();
    return;
  }

  const starNum = calcHonmei(birthStr);
  if (!starNum || !STARS[starNum]){
    alert(t('bad_date'));
    return;
  }

  // åˆ†æç±»å‹
  const analysisType = (typeSelect && typeSelect.value) || 'comprehensive';
  const typeKeyMap = {
    comprehensive:'analysis_type_comprehensive',
    career:'analysis_type_career',
    relationship:'analysis_type_relationship',
    health:'analysis_type_health'
  };
  const analysisTypeLabel = t(typeKeyMap[analysisType] || 'analysis_type_comprehensive') || '';

  // ä¸»æ˜Ÿä¸æ·±åº¦èµ„æ–™
  const deep     = STARS_DEEP ? STARS_DEEP[starNum] : null;
  const deepLang = getStarText(starNum);

  const starMeta = STARS[starNum];
  const lang = getLang();
  const mainElement = deep ? deep.element : (starMeta.elem ? starMeta.elem[lang] : '');

  // æŠ¥å‘Šä¸Šä¸‹æ–‡ï¼ˆç»™æ¸²æŸ“ + AI ç”¨ï¼‰
  const ctx = {
    starNum,
    starName: starMeta.name ? (starMeta.name[lang] || starMeta.name['zh-CN']) : `Star ${starNum}`,
    starJP: starMeta.name ? (starMeta.name['ja-JP'] || '') : '',
    mainElement,
    birthStr,
    gender: (genderInput && genderInput.value) || '',
    analysisType,
    analysisTypeLabel
  };
  window._lastKyuuseiCtx = ctx;

  // æ¸²æŸ“å„åŒºå—
  renderStarSection(ctx, deep, deepLang);
  renderDeepSection(ctx, deepLang);
  renderSpecializedSection(ctx, deepLang);
  buildFortuneTimeline(ctx);
  buildAdvice(ctx);

  // æ˜¾ç¤ºå¡ç‰‡
  const fortuneCard = $('fortuneCard');
  const adviceCard  = $('adviceCard');
  if (fortuneCard) fortuneCard.style.display = 'block';
  if (adviceCard)  adviceCard.style.display  = 'block';

  // AI å¡ç‰‡
  const aiCard = $('aiCard');
  if (aiCard) aiCard.style.display = 'block';

  updateAiReport(ctx);

  // æ»šåˆ°ä¸»æ˜Ÿå¡ç‰‡
  const starCard = $('starCard');
  if (starCard && starCard.scrollIntoView){
    setTimeout(() => {
      starCard.scrollIntoView({ behavior:'smooth', block:'start' });
    }, 0);
  }
}

/* è¯­è¨€åˆ‡æ¢æ—¶é‡æ¸²æŸ“å…¨éƒ¨å†…å®¹ */
function rerenderFromCtx(){
  applyI18n();
  updateNowInfo();
  renderChips();

  const ctx = window._lastKyuuseiCtx;
  if (!ctx) return;

  const deep = STARS_DEEP[ctx.starNum];
  const deepLang = getStarText(ctx.starNum);

  // æ›´æ–°åˆ†æç±»å‹æ ‡ç­¾ï¼ˆè·Ÿéšè¯­è¨€ï¼‰
  const typeKeyMap = {
    comprehensive:'analysis_type_comprehensive',
    career:'analysis_type_career',
    relationship:'analysis_type_relationship',
    health:'analysis_type_health'
  };
  ctx.analysisTypeLabel = t(typeKeyMap[ctx.analysisType] || 'analysis_type_comprehensive');

  // æ›´æ–°æ˜Ÿæ˜Ÿæ•°æ®ä¸­çš„å¤šè¯­è¨€éƒ¨åˆ†
  const starMeta = STARS[ctx.starNum];
  if (starMeta) {
    const langCode = getLang();
    ctx.starName = starMeta.name && starMeta.name[langCode] 
      ? starMeta.name[langCode] 
      : `Star ${ctx.starNum}`;
    ctx.starJP = starMeta.name && starMeta.name['ja-JP'] 
      ? starMeta.name['ja-JP'] 
      : '';
    ctx.mainElement = deep ? deep.element : (starMeta.elem ? starMeta.elem[langCode] : '');
  }

  // é‡æ–°æ¸²æŸ“æ‰€æœ‰éƒ¨åˆ†
  renderStarSection(ctx, deep, deepLang);
  renderDeepSection(ctx, deepLang);
  renderSpecializedSection(ctx, deepLang);
  buildFortuneTimeline(ctx);
  buildAdvice(ctx);

  // é‡æ–°ç”ŸæˆAIæŠ¥å‘Š
  updateAiReport(ctx);
}
  
/* DOM Ready åˆå§‹åŒ– */
document.addEventListener('DOMContentLoaded', () => {
  // è®¾ç½®å½“å‰è¯­è¨€
  const select = $('langSelect');
  const current = getLang();
  document.documentElement.lang = current;
  
  if (select) {
    select.value = current;
    select.addEventListener('change', e => {
      const v = e.target.value;
      setLang(v);
      rerenderFromCtx();
    });
  }

  // è®¾ç½®é»˜è®¤å‡ºç”Ÿæ—¥æœŸä¸ºä»Šå¤©
  const now = new Date();
  const birthInput = $('birthdate');
  if (birthInput && !birthInput.value) {
    const y = now.getFullYear();
    const m = String(now.getMonth() + 1).padStart(2, '0');
    const d = String(now.getDate()).padStart(2, '0');
    birthInput.value = `${y}-${m}-${d}`;
  }

  // åˆå§‹åŒ–
  renderChips();
  applyI18n();
  updateNowInfo();

  // ç»‘å®šç”ŸæˆæŠ¥å‘ŠæŒ‰é’®
  const btn = $('go');
  if (btn) {
    btn.addEventListener('click', buildKyuuseiReport);
  }
});
</script>    
</body>
</html>














