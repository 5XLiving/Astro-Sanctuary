<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title data-i18n="page_title">命理供门 · 灵数简评（免费版）</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0f14; --card:#11161dCC; --line:#1f2a36; --text:#e8edf3; --muted:#98a7b7;
      --brand:#d4af37; --accent:#58b9ff; --radius:14px; --shadow:0 8px 30px rgba(0,0,0,.35); --blur:10px;
    }
    html,body{height:100%} html{font-size:16px}
    @media(min-width:768px){ html{font-size:17px} } @media(min-width:1200px){ html{font-size:18px} }
    body{
      margin:0; color:var(--text);
      background: radial-gradient(1200px 600px at 70% -10%, #16202b 10%, transparent 60%) no-repeat,
                  linear-gradient(180deg,#0b0f14,#0b0f14);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans SC", Arial, sans-serif;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    body::before{
      content:""; position:fixed; inset:0; z-index:-2;
      background:url('assets/images/gate.jpg') center/cover no-repeat;
      filter:brightness(.45) saturate(.9) blur(2px);
    }
    .glow{position:fixed; inset:auto auto 10% -10%; width:45vw; height:45vw; max-width:700px; max-height:700px;
      background:radial-gradient(closest-side, #2a98ff33, transparent 70%); filter:blur(30px); z-index:-1; pointer-events:none;}

    .container{width:100%; max-width:1000px; padding:24px 16px 80px; margin:0 auto;}
    header{position:sticky; top:0; z-index:10; backdrop-filter:saturate(140%) blur(12px);
      background:#0b0f14cc; border-bottom:1px solid #0f1622;}
    .head-inner{display:flex; align-items:center; justify-content:space-between; gap:14px; padding:16px}
    .brand{display:flex; align-items:center; gap:12px;}
    .brand-badge{width:36px; height:36px; border-radius:10px; background:linear-gradient(145deg,#273243,#0e141c);
      display:grid; place-items:center; color:var(--brand); font-weight:700; box-shadow:var(--shadow)}
    .title{font-family:"Noto Serif SC","Noto Serif",serif; font-weight:600; letter-spacing:.02em; font-size:1.1rem}
    .subtitle{color:var(--muted); font-size:.9rem}

    /* 语言选择器 */
    .lang{display:flex; align-items:center; gap:8px}
    .lang label{color:var(--muted); font-size:.9rem}
    .lang select{
      appearance:none; border-radius:10px; border:1px solid #243244; background:#0e1520; color:var(--text);
      padding:10px 34px 10px 12px; font-size:.95rem;
      background-image:url("data:image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2398a7b7' stroke-width='2' fill='none'/%3E%3C/svg%3E");
      background-repeat:no-repeat; background-position:calc(100% - 12px) 50%;
    }

    .card{background:var(--card); border:1px solid var(--line); border-radius:var(--radius);
      box-shadow:var(--shadow); backdrop-filter: blur(var(--blur)); padding:18px;}
    .section{margin-top:18px}
    .section h2{
      font-family:"Noto Serif SC","Noto Serif",serif; font-weight:600; font-size:1.2rem; margin:0 0 12px;
      display:flex; align-items:center; gap:10px
    }
    .section h2::before{
      content:""; width:8px; height:8px; border-radius:50%; background:var(--accent); box-shadow:0 0 0 4px #58b9ff22
    }

    .row{display:grid; gap:12px}
    @media(min-width:640px){ .row-2{grid-template-columns:1fr 1fr} .row-3{grid-template-columns:1fr 1fr 1fr} }
    input,select,button{
      width:100%; box-sizing:border-box; border-radius:12px; border:1px solid #243244;
      background:#0e1520; color:var(--text); padding:14px 13px; font-size:1rem; outline:none;
    }
    input::placeholder{color:#6f8092}
    select{appearance:none; background-image:url("data:image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2398a7b7' stroke-width='2' fill='none'/%3E%3C/svg%3E"); background-repeat:no-repeat; background-position:calc(100% - 12px) 50%}

    .btn{
      background:linear-gradient(180deg,#1d2a3a,#101723); border:1px solid #28364a;
      font-weight:600; letter-spacing:.02em; cursor:pointer; transition:transform .05s ease, box-shadow .2s ease, border .2s ease;
    }
    .btn:hover{box-shadow:0 6px 18px rgba(88,185,255,.15), inset 0 1px 0 #2e3c50}
    .btn:active{transform:translateY(1px)}
    .btn[disabled]{opacity:.6; cursor:not-allowed}

    .muted{color:var(--muted)} .error{color:#ff8f8f; margin-top:8px}
    footer{color:#6c7b8c; font-size:.85rem; text-align:center; padding:30px 0}

    .stack{display:grid; gap:12px}
    .pill{border:1px solid #263448; background:#0e1520; border-radius:12px; padding:12px}
    .pill .tag{display:inline-block; font-size:.82rem; padding:3px 8px; border-radius:999px; border:1px solid #2b3a4f; color:#c7d5e6; background:#0b111b}
    .big{font-weight:700}
    /* 标题与副标题都走 Noto Serif，大小与 Index 页一致 */
.title{
  font-family:"Noto Serif SC","Noto Serif",serif;
  font-weight:600;
  letter-spacing:.02em;
  font-size:1.1rem;    /* 与 Index 保持一致 */
}
.subtitle{
  font-family:"Noto Serif SC","Noto Serif",serif;
  font-weight:400;
  font-size:.95rem;    /* 与 Index 保持一致 */
  color:var(--muted);
  line-height:1.25;
}

/* 右侧两行排版到一列、与品牌对齐 */
.subhead{
  display:flex;
  flex-direction:column;
  align-items:flex-end;   /* 右对齐更精致 */
  gap:2px;
}

/* 小屏时允许自动换行，避免挤压 */
@media (max-width:520px){
  .head-inner{ flex-wrap:wrap; }
  .subhead{ align-items:flex-start; }
}
  </style>
</head>
<body>
  <div class="glow"></div>
<header class="site-header">
  <div class="head-inner container">
    <!-- 品牌：点击回 5xLiving · 八字简评 首页 -->
    <a class="brand" href="https://astro.5xliving.com">
      <span class="brand-badge">5X</span>
      <span class="title">
        5xLiving · <span data-i18n="title_bazi_brief">八字简评</span>
      </span>
    </a>
         <!-- 右侧副标题（两行） -->
    <div class="subhead">
      <div class="subtitle" data-i18n="tagline_main">命理供门 · 灵数简评</div>
          <div class="subtitle" data-i18n="tagline_subtitle">免费版 · 与首页统一风格 | VIP 可解锁完整灵数地图</div>
        </div>
      </div>
      <div class="lang">
        <label for="langSelect" data-i18n="lang_label">语言</label>
        <select id="langSelect" aria-label="Language">
          <option value="zh-CN">简体中文</option>
          <option value="zh-TW">繁體中文</option>
          <option value="en">English</option>
          <option value="ja">日本語</option>
          <option value="th">ไทย</option>
          <option value="ms">Bahasa Melayu</option>
        </select>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- 表单 -->
    <section class="card section">
      <h2 data-i18n="form_title">输入生日 · 生成灵数</h2>
      <div class="row row-3">
        <input type="date" id="birthdate" data-i18n-ph="ph_birthdate">
        <select id="calcRule">
          <option value="p" data-i18n="rule_pyth">毕达哥拉斯 / Pythagorean</option>
          <option value="c" disabled data-i18n="rule_chal">迦勒底 / Chaldean（即将支持）</option>
        </select>
        <button class="btn" id="btnGen" onclick="generateReport()" data-i18n="btn_gen">生成分析</button>
      </div>
      <div class="muted" style="margin-top:6px" data-i18n="hint_text">
        说明：生命路径 = 生日所有数字相加并降至 1–9（保留 11/22/33）；情感数字 = 出生日（DD）同样规则。
      </div>
      <div class="error" id="error" style="display:none"></div>
    </section>

    <!-- 结果 -->
    <section class="card section" id="result" style="display:none;">
      <h2 data-i18n="res_title">分析结果</h2>
      <div class="stack">
        <div class="pill">
          <span class="tag" data-i18n="lp_title">生命路径数</span>
          <div style="margin-top:6px">
            <div class="big"><span data-i18n="lp_value">Life Path</span>：<strong id="lifePath">—</strong></div>
            <div class="muted" id="lifePathDesc"></div>
          </div>
        </div>

        <div class="pill">
          <span class="tag" data-i18n="love_title">情感数字</span>
          <div style="margin-top:6px">
            <div class="big"><span data-i18n="love_value">Love Number</span>：<strong id="loveNumber">—</strong></div>
            <div class="muted" id="loveDesc"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- 升级提示 -->
    <section class="card section">
      <h2 data-i18n="full_title">完整解析</h2>
      <div class="muted" data-i18n="full_text">
        升级 VIP 可获得完整灵数地图（人格/灵魂/目标/成熟/生日/挑战）、人际匹配、事业方向与感情密码。
      </div>
    </section>
  </main>

  <footer>© 5XLiving • Astro Sanctuary</footer>

  <script>
    // ---------- 计算工具 ----------
    const masters = new Set([11,22,33]);
    function reduceNum(n){
      // 保留大师数 11/22/33；否则降到 1-9
      while(n>9 && !masters.has(n)){
        n = String(n).split("").reduce((s,d)=>s+Number(d),0);
      }
      return n;
    }
    function parseDateDigits(iso){
      // 允许 YYYY-MM-DD 或空
      if(!iso) return null;
      const d = iso.replace(/[^0-9]/g,""); // 取纯数字
      if(d.length<8) return null;
      return d.split("").map(Number);
    }
    function calcLifePath(iso){
      const digits = parseDateDigits(iso);
      if(!digits) return null;
      const sum = digits.reduce((s,v)=>s+v,0);
      return reduceNum(sum);
    }
    function calcLoveNumber(iso){
      // 以“日”DD为基数
      if(!iso) return null;
      const dd = Number(iso.split("-")[2]||"0");
      if(!dd) return null;
      return reduceNum(dd);
    }

    // ---------- 文案（简要） ----------
    const brief = {
      lp:{
        1:"独立、自主、领导力强，适合开创型路线；注意别过度强势。",
        2:"温和、协调、敏感度高，擅长合作与倾听；需避免过度迎合。",
        3:"表达力强、社交与创意并重；注意分心，持之以恒是关键。",
        4:"务实、结构感强，重秩序与稳定；留意僵化与保守。",
        5:"自由、变化、探索；管理好节奏与边界，避免过度冒险。",
        6:"责任、关怀、美感；注意完美主义与过度操心。",
        7:"内省、研究、灵性与洞察；学会表达与连接。",
        8:"野心、成就、资源整合；需平衡权力与良善。",
        9:"人文、疗愈、艺术与包容；设立界限，避免过度牺牲。",
        11:"灵感使命、直觉超感；落地执行与规律作息很重要。",
        22:"大师建构、把抽象化为实务；请善用团队与耐心。",
        33:"无条件爱、服务与疗愈；先照顾好自己再照亮他人。"
      },
      love:{
        1:"在关系中追求主导与效率，学会柔软与倾听能更稳。",
        2:"渴望亲密与安全感，细腻体贴；避免过度依附。",
        3:"需要表达与玩心，爱情里重视互动与仪式感。",
        4:"以责任与承诺为核心，慢热但踏实可靠。",
        5:"热爱自由与新鲜感，需要尊重空间的伴侣。",
        6:"愿意照顾与付出，向往家庭与稳定美好生活。",
        7:"重视精神连接与灵魂共鸣，需要被理解的安静角落。",
        8:"在关系里也讲目标与效率，需要势均力敌的伙伴。",
        9:"包容与付出，但要学会不拯救、不内耗。",
        11:"感应敏锐、灵魂契合度要求高，情绪需要温柔对待。",
        22:"关系中的大格局与长期建构者，务实又愿景导向。",
        33:"以爱疗愈的能量流动，先自爱，后相爱。"
      }
    };

    // ---------- 交互 ----------
    const $ = id => document.getElementById(id);
    function showErr(msg){ const e=$("error"); e.textContent=msg; e.style.display="block"; setTimeout(()=>e.style.display='none',4000); }

    function generateReport(){
      const iso = $("birthdate").value;
      if(!iso) return showErr(t("err_need_birthdate"));

      const lp = calcLifePath(iso);
      const lv = calcLoveNumber(iso);

      $("lifePath").textContent = lp ?? "—";
      $("loveNumber").textContent = lv ?? "—";
      $("lifePathDesc").textContent = lp ? brief.lp[lp] : "";
      $("loveDesc").textContent = lv ? brief.love[lv] : "";

      $("result").style.display = "block";
      window.scrollTo({ top: $("result").offsetTop - 10, behavior:"smooth" });
    }

    // ---------- 多语言（与 index 同风格） ----------
    const translations = {
      "zh-CN":{
        page_title:"命理供门 · 灵数简评（免费版）",
        site_title:"命理供门 · 灵数简评",
        site_subtitle:"免费版 · 与首页统一风格 | VIP 可解锁完整灵数地图",
        lang_label:"语言",
        form_title:"输入生日 · 生成灵数",
        ph_birthdate:"出生日期",
        rule_pyth:"毕达哥拉斯 / Pythagorean",
        rule_chal:"迦勒底 / Chaldean（即将支持）",
        btn_gen:"生成分析",
        hint_text:"说明：生命路径 = 生日所有数字相加并降至 1–9（保留 11/22/33）；情感数字 = 出生日（DD）同样规则。",
        res_title:"分析结果",
        lp_title:"生命路径数", lp_value:"Life Path",
        love_title:"情感数字", love_value:"Love Number",
        full_title:"完整解析",
        full_text:"升级 VIP 可获得完整灵数地图（人格/灵魂/目标/成熟/生日/挑战）、人际匹配、事业方向与感情密码。",
        err_need_birthdate:"请先选择出生日期"
      },
      "zh-TW":{
        page_title:"命理供門 · 靈數簡評（免費版）",
        site_title:"命理供門 · 靈數簡評",
        site_subtitle:"免費版 · 與首頁同風格 | VIP 解鎖完整靈數地圖",
        lang_label:"語言",
        form_title:"輸入生日 · 產生靈數",
        ph_birthdate:"出生日期",
        rule_pyth:"畢達哥拉斯 / Pythagorean",
        rule_chal:"迦勒底 / Chaldean（即將支援）",
        btn_gen:"生成分析",
        hint_text:"說明：生命路徑 = 生日數字總合降至 1–9（保留 11/22/33）；情感數字 = 出生日（DD）。",
        res_title:"分析結果",
        lp_title:"生命路徑數", lp_value:"Life Path",
        love_title:"情感數字", love_value:"Love Number",
        full_title:"完整解析",
        full_text:"升級 VIP 可獲完整靈數地圖（人格/靈魂/目標/成熟/生日/挑戰）、人際匹配、事業方向與感情密碼。",
        err_need_birthdate:"請先選擇出生日期"
      },
      "en":{
        page_title:"Numerology · Quick Reading (Free)",
        site_title:"Numerology · Quick Reading",
        site_subtitle:"Free · Unified style | VIP unlocks full numerology map",
        lang_label:"Language",
        form_title:"Enter Birth Date · Get Numbers",
        ph_birthdate:"Birth date",
        rule_pyth:"Pythagorean",
        rule_chal:"Chaldean (coming soon)",
        btn_gen:"Generate",
        hint_text:"Life Path = sum of all birthdate digits reduced to 1–9 (keep 11/22/33). Love Number = day (DD), same rule.",
        res_title:"Results",
        lp_title:"Life Path", lp_value:"Life Path",
        love_title:"Love Number", love_value:"Love Number",
        full_title:"Full Reading",
        full_text:"Upgrade to VIP for full numerology map (Personality/Soul/Goal/Maturity/Birthday/Challenges), matches, career & love guidance.",
        err_need_birthdate:"Please pick your birth date first"
      },
      "ja":{
        page_title:"数秘術 · クイック鑑定（無料）",
        site_title:"数秘術 · クイック鑑定",
        site_subtitle:"無料版・統一デザイン｜VIPで完全版マップ",
        lang_label:"言語",
        form_title:"誕生日を入力 · 数を算出",
        ph_birthdate:"誕生日",
        rule_pyth:"ピタゴラス式",
        rule_chal:"カルデアン（準備中）",
        btn_gen:"鑑定する",
        hint_text:"ライフパス＝生年月日の全桁合計を1–9に縮約（11/22/33は維持）。ラブナンバー＝誕生日DD、同様。",
        res_title:"結果",
        lp_title:"ライフパス", lp_value:"Life Path",
        love_title:"ラブナンバー", love_value:"Love Number",
        full_title:"完全鑑定",
        full_text:"VIPで数秘マップ（人格/魂/目標/成熟/誕生日/課題）、相性、キャリア&恋愛ガイダンスを解放。",
        err_need_birthdate:"まず誕生日を選択してください"
      },
      "th":{
        page_title:"ตัวเลขชีวิต · แบบย่อ (ฟรี)",
        site_title:"ตัวเลขชีวิต · แบบย่อ",
        site_subtitle:"ฟรี · สไตล์เดียวกับหน้าแรก | VIP ปลดล็อกแผนที่ตัวเลขเต็ม",
        lang_label:"ภาษา",
        form_title:"ใส่วันเกิด · คำนวณ",
        ph_birthdate:"วันเกิด",
        rule_pyth:"พีทาโกรัส",
        rule_chal:"ชาลเดียน (เร็วๆ นี้)",
        btn_gen:"ดูผล",
        hint_text:"Life Path = ผลรวมตัวเลขวันเกิดทั้งหมด เหลือ 1–9 (คง 11/22/33); Love Number = วัน (DD) กติกาเดียวกัน",
        res_title:"ผลลัพธ์",
        lp_title:"Life Path", lp_value:"Life Path",
        love_title:"Love Number", love_value:"Love Number",
        full_title:"วิเคราะห์เต็ม",
        full_text:"อัปเกรด VIP เพื่อดูแผนที่ตัวเลขครบ (บุคลิก/วิญญาณ/เป้าหมาย/วุฒิภาวะ/วันเกิด/ความท้าทาย) ความสัมพันธ์ อาชีพ และความรัก",
        err_need_birthdate:"กรุณาเลือกวันเกิดก่อน"
      },
      "ms":{
        page_title:"Numerologi · Ringkas (Percuma)",
        site_title:"Numerologi · Ringkas",
        site_subtitle:"Percuma · Gaya seragam | VIP membuka peta numerologi penuh",
        lang_label:"Bahasa",
        form_title:"Masukkan tarikh lahir · Jana nombor",
        ph_birthdate:"Tarikh lahir",
        rule_pyth:"Pythagorean",
        rule_chal:"Chaldean (akan datang)",
        btn_gen:"Jana",
        hint_text:"Life Path = jumlah semua digit tarikh lahir dikurang ke 1–9 (kekal 11/22/33); Love Number = hari (DD), peraturan sama",
        res_title:"Keputusan",
        lp_title:"Life Path", lp_value:"Life Path",
        love_title:"Love Number", love_value:"Love Number",
        full_title:"Pembacaan penuh",
        full_text:"Naik taraf VIP untuk peta numerologi penuh (Personaliti/Jiwa/Matlamat/Kematangan/Hari Lahir/Cabaran), padanan, kerjaya & cinta.",
        err_need_birthdate:"Sila pilih tarikh lahir terlebih dahulu"
      }
    };

    const LANG_KEY="site_lang";
    function getLang(){ return localStorage.getItem(LANG_KEY) || document.documentElement.lang || "zh-CN"; }
    function setLang(code){ localStorage.setItem(LANG_KEY, code); document.documentElement.lang = code; }
    function t(key){
      const L = translations[getLang()] || translations["zh-CN"];
      return L[key] || (translations["zh-CN"][key] || key);
    }
    function applyI18n(){
      document.querySelectorAll("[data-i18n]").forEach(el=>{
        const key = el.getAttribute("data-i18n");
        el.textContent = t(key);
      });
      document.querySelectorAll("[data-i18n-ph]").forEach(el=>{
        const key = el.getAttribute("data-i18n-ph");
        el.setAttribute("placeholder", t(key));
      });
      const titleEl = document.querySelector("title[data-i18n]");
      if (titleEl) titleEl.textContent = t(titleEl.getAttribute("data-i18n"));
    }
    (function initLang(){
      const select = document.getElementById("langSelect");
      const current = getLang();
      select.value = current;
      applyI18n();
      select.addEventListener("change", ()=>{
        setLang(select.value); applyI18n();
      });
    })();
  </script>
</body>
</html>

