<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title data-i18n="page_title">çµæ•°ç®€è¯„</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600&family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0f14; --card:#11161dcc; --line:#1f2a36; --text:#e8edf3; --muted:#98a7b7;
      --brand:#d4af37; --gold:#d4af37; --gold2:#f2d27a; --accent:#58b9ff;
      --radius:14px; --shadow:0 8px 30px rgba(0,0,0,.35);
    }
    html,body{height:100%}
    html{font-size:16px}
    @media (min-width:768px){ html{font-size:17px} }
    @media (min-width:1200px){ html{font-size:18px} }

    body{
      margin:0; color:var(--text);
      background: radial-gradient(1200px 600px at 70% -10%, #16202b 10%, transparent 60%) no-repeat,
                  linear-gradient(180deg,#0b0f14,#0b0f14);
      font-family: Inter,system-ui,-apple-system,"Noto Sans SC","Segoe UI",Roboto,Arial,sans-serif;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    body::before{content:""; position:fixed; inset:0; z-index:-2; background:#090d13 url('') center/cover no-repeat; filter:brightness(.45) saturate(.9) blur(2px)}
    .container{max-width:1100px;margin:0 auto;padding:24px 16px 80px}

    /* å¤´éƒ¨ */
    .site-header{position:sticky;top:0;z-index:10;background:#0b0f14cc;border-bottom:1px solid #0f1622;backdrop-filter:saturate(140%) blur(12px)}
    .head-inner{display:flex;align-items:center;justify-content:space-between;gap:14px;padding:14px 16px}
    .brand{display:flex; align-items:center; gap:10px; text-decoration:none; color:var(--text)}
    .brand-badge{display:inline-grid; place-items:center; width:34px; height:34px; border-radius:8px; background:linear-gradient(180deg,#0e1520,#0b1018); border:1px solid #2a3546; box-shadow:0 4px 14px rgba(0,0,0,.35); font-weight:800; color:#ffe084}
    .title{font-family:"Noto Serif SC","Noto Serif",serif !important; font-weight:600 !important; letter-spacing:.02em; font-size:1.1rem !important; line-height:1.25}
    .title a{ color: inherit; text-decoration: none; }
    .title a:hover{ text-decoration: underline; text-underline-offset: 3px; }
    .lang{display:flex; align-items:center; gap:8px}
    .lang label{white-space:nowrap; color:var(--muted)}
    .lang select{
      appearance:none; min-width:170px; border-radius:10px; border:1px solid #243244;
      background:#0e1520; color:#e8edf3; padding:10px 34px 10px 12px; font-size:.95rem;
      background-image:url("data:image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2398a7b7' stroke-width='2' fill='none'/%3E%3C/svg%3E");
      background-repeat:no-repeat; background-position:calc(100% - 12px) 50%;
    }
    @media (max-width:520px){ .title{font-size:1rem} .lang select{min-width:140px} }

    /* åŸºç¡€å— */
    .h1{margin:12px 0 6px; color:#ffe084; font-weight:800; font-size:1.8rem}
    .sub{color:var(--muted)}
    .card{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);backdrop-filter:blur(10px);padding:18px;margin:16px 0}
    .row{display:grid; gap:12px; grid-template-columns:1fr}
    @media(min-width:760px){ .row.cols-2{grid-template-columns:1fr 1fr} .row.cols-3{grid-template-columns:1fr 1fr 1fr} }
    label.muted{display:block;margin-bottom:4px}
    input,select,textarea{width:100%;box-sizing:border-box;border-radius:12px;border:1px solid #243244;background:#0e1520;color:var(--text);padding:12px;font-size:15px;outline:none}
    input::placeholder{color:#6f8092}
    .btn{display:inline-grid;place-items:center;padding:12px 16px;border-radius:12px;border:1px solid #e6c76e;background:linear-gradient(180deg,#fff9e6,#e6c76e);color:#191919;font-weight:800;cursor:pointer}
    .btn[disabled]{opacity:.6;cursor:not-allowed}
    .btn.ghost{background:transparent;color:var(--gold2);border:1px solid rgba(212,175,55,.45);box-shadow:none}

    .report{margin-top:12px;display:grid;gap:10px}
    .report .sec{padding:12px;border:1px solid var(--line);background:#0e1520;border-radius:12px}
    .report .sec h3{margin:0 0 6px;color:#f2d27a;font-size:1.05rem}
    .report p,.report li{line-height:1.7}

    /* ä¼šå‘˜åŒº */
    .columns{display:grid;gap:12px;grid-template-columns:1fr}
    @media(min-width:900px){ .columns{grid-template-columns:1fr 1fr} }
    .list-block{border:1px solid #263448;background:#0e1520;border-radius:12px;padding:16px}
    .list-block ul{margin:.2rem 0 0;padding-left:1.1rem}
    .group-title{font-size:1.05rem;color:#ffe084;margin:6px 0 14px}
    .astro-auth{max-width:980px;margin:28px auto;padding:20px 18px;background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01));border:1px solid rgba(212,175,55,.22);border-radius:14px;box-shadow:0 18px 50px rgba(0,0,0,.35)}
    .auth-grid{display:grid;gap:18px;grid-template-columns:1.2fr .8fr}
    @media(max-width:860px){ .auth-grid{grid-template-columns:1fr} }
    .panel{background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01));border:1px solid rgba(212,175,55,.22);border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    .panel .head{padding:16px 18px;border-bottom:1px solid rgba(212,175,55,.22);color:var(--gold);font-weight:700;letter-spacing:.3px}
    .panel .body{padding:18px}
    .spacer{height:12px}
    .auth-grid > * { min-width: 0; }
    .panel .body .row.one > * { min-width: 0; }

    footer{color:#6c7b8c;font-size:.85rem;text-align:center;padding:30px 0}

    /* èŠå¤© */
    .ss-chat-fab{
      position:fixed;right:18px;bottom:18px;z-index:50;width:56px;height:56px;border-radius:50%;
      background:linear-gradient(180deg,#fff9e6,#e6c76e);color:#191919;display:grid;place-items:center;font-weight:800;
      box-shadow:0 8px 30px rgba(0,0,0,.35);cursor:pointer;border:1px solid #e6c76e
    }
    .ss-chat-panel{
      position:fixed;right:18px;bottom:88px;z-index:50;width:min(460px,92vw);display:none;
      background:#0e1520;border:1px solid #243244;border-radius:14px;box-shadow:var(--shadow)
    }
    .ss-chat-head{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid #243244}
    .ss-chat-title{font-weight:700}
    .ss-close{cursor:pointer;opacity:.8}
    .ss-chat-body{max-height:300px;overflow:auto;padding:10px 12px}
    .ss-msg{padding:8px 10px;background:#0f1624;border:1px solid #243244;border-radius:10px;margin:6px 0;max-width:80%}
    .ss-msg.me{margin-left:auto;background:#132033}
    .ss-chat-input{display:flex;align-items:center;gap:8px;padding:10px 12px;border-top:1px solid #243244}
    .ss-chat-input input{flex:1 1 auto;min-width:0}
    .ss-chat-input .btn,.ss-chat-input button{flex:0 0 auto;width:auto !important;white-space:nowrap;padding:10px 14px}

    /* AI æ–‡æ¡ˆåŒº */
    .ai-content{
      white-space:pre-wrap;
      line-height:1.6;       /* è¡Œè·ç¨å¾®æ”¶ç´§ä¸€ç‚¹ */
    }
    .ai-content h3{
      margin:0.4em 0 0.2em;  /* å°æ ‡é¢˜ä¸Šä¸‹é—´è·ç¼©å° */
      font-size:1.05rem;
    }
    .ai-content p{
      margin:0.3em 0;        /* æ®µè½é—´è·å˜å°ï¼Œä¸ä¼šä¸€å¨ç©ºç™½ */
    }
    .ai-content br{
      line-height:1;         /* æ¢è¡Œä¸è¦å†æ‹–é«˜è¡Œè· */
    }
    .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
    .chip{padding:6px 10px;border-radius:999px;border:1px solid #2a3546;background:#0e1520;color:#e8edf3;cursor:pointer}
    .skeleton{display:grid;gap:8px}
    .skeleton div{height:12px;border-radius:6px;background:linear-gradient(90deg,#1a2431,#1f2b3b,#1a2431);animation:sh 1.2s infinite}
    @keyframes sh{0%{opacity:.5}50%{opacity:1}100%{opacity:.5}}
    .ai-lock-overlay{position:static;inset:auto;background:none;backdrop-filter:none;margin-top:10px;padding-top:10px;border-top:1px solid var(--line);text-align:center}
    .ai-lock-overlay .tip{color:#ffd88a;font-weight:700;margin-bottom:4px}
    .ai-lock-overlay .sub{color:var(--muted)}

    .error{color:#ff6b6b;margin-top:8px;display:none}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}
    .block{width:100%}
    .footnote{color:var(--muted);font-size:.85rem;margin-top:8px}
  </style>
</head>
<body>
  <!-- å¤´éƒ¨ -->
  <header class="site-header">
    <div class="head-inner container">
      <a class="brand" href="https://astro.5xliving.com" target="_self" rel="nofollow">
        <span class="brand-badge">5X</span>
        <span class="title">5xLiving Â· <span data-i18n="site_title">çµæ•°ç®€è¯„</span></span>
      </a>
      <div class="lang">
        <label for="langSelect" class="muted" data-i18n="lang_label">è¯­è¨€</label>
        <select id="langSelect" aria-label="Language">
          <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
          <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
          <option value="en">English</option>
          <option value="ja">æ—¥æœ¬èª</option>
          <option value="th">à¹„à¸—à¸¢</option>
          <option value="ms">Bahasa Melayu</option>
        </select>
      </div>
    </div>
  </header>

  <main class="container">
    <h1 class="h1" data-i18n="page_title">çµæ•°ç®€è¯„</h1>
    <p class="sub" data-i18n="site_subtitle">å…è´¹ç‰ˆ Â· ä¸é¦–é¡µç»Ÿä¸€é£æ ¼ | VIP å¯è§£é”å®Œæ•´çµæ•°åœ°å›¾</p>

    <!-- è¡¨å• -->
    <section class="card">
      <div class="row cols-3">
        <div>
          <label class="muted" for="birthdate" data-i18n="ph_birthdate">å‡ºç”Ÿæ—¥æœŸ</label>
          <input type="date" id="birthdate" data-i18n-ph="ph_birthdate">
        </div>
        <div>
          <label class="muted" for="calcRule" data-i18n="rule_pyth">æ¯•è¾¾å“¥æ‹‰æ–¯</label>
          <select id="calcRule">
            <option value="p" data-i18n="rule_pyth">æ¯•è¾¾å“¥æ‹‰æ–¯ / Pythagorean</option>
          </select>
        </div>
        <div style="display:flex;align-items:flex-end">
          <button class="btn" id="btnGen" data-i18n="btn_gen">ç”Ÿæˆåˆ†æ</button>
        </div>
      </div>
      <div class="muted" style="margin-top:6px" data-i18n="hint_text">
      </div>
      <div class="error" id="error" style="display:none"></div>
    </section>

    <!-- ç»“æœ -->
    <section class="card" id="result" style="display:none">
      <h2 style="margin:0 0 10px;color:var(--gold)" data-i18n="res_title">å¿ƒæ€œç®¡å®¶è§£è¯»ä¸å»ºè®®</h2>
      <div id="numReport" class="report"></div>
    </section>

    <!-- ä¼šå‘˜åŒº -->
    <section class="card section">
      <h2 class="group-title" data-i18n="vip_title">ğŸŒ™ ä¼šå‘˜åŒºåŸŸ VIP Segment</h2>
      <div class="columns">
        <div class="list-block">
          <div class="group-title" data-i18n="vip_mingli">ğŸ— å‘½ç†ç©ºé—´ä¸“å±å†…å®¹</div>
          <ul>
            <li data-i18n="vip_love">å§»ç¼˜æ–¹å‘ï¼šæ‹çˆ±ç¼˜åˆ†ã€å©šå§»èµ°åŠ¿</li>
            <li data-i18n="vip_career">äº‹ä¸šæ–¹å‘ï¼šèŒåœºå‘å±•ã€åˆ›ä¸šæ½œåŠ›</li>
            <li data-i18n="vip_wealth">è´¢è¿æ–¹å‘ï¼šè´¢ä½åˆ†æã€ç†è´¢æ—¶æœº</li>
            <li data-i18n="vip_pet">å® ç‰©å‘½ç†ï¼šä¼´ä¾£åŠ¨ç‰©çš„æ€§æ ¼ä¸ç¼˜åˆ†</li>
            <li data-i18n="vip_hepan">åˆç›˜åˆ†æï¼šå©šæœŸæ‹©æ—¥ã€æ–°ç”Ÿæ‹©æ—¶</li>
            <li data-i18n="vip_name">æµ‹ååˆ†æï¼šå…¬å¸åã€å®å®åã€å‘½åæ”¹è¿</li>
            <li data-i18n="vip_fengshui">è´¢ä½åˆç›˜ï¼šä½å®¶ / åŠå…¬å®¤åŠ¨çº¿é…åˆ</li>
          </ul>
        </div>
        <div class="list-block">
          <div class="group-title" data-i18n="vip_xinlian">ğŸŒ™ å¿ƒæ€œç©ºé—´ä¸“å±å†…å®¹</div>
          <ul>
            <li data-i18n="vip_record">çµæ€§è®°å½•ï¼šç…§ç‰‡ã€æ¢¦å¢ƒã€å£°éŸ³ã€æ„¿æœ›ç¥ˆç¥·</li>
            <li data-i18n="vip_course">å‘½ç†è¯¾ç¨‹ï¼šå…«å­— / å¡”ç½— / å æ˜Ÿ / çµæ•° / äººç±»å›¾</li>
            <li data-i18n="vip_memorial">å®¶æ—çºªå¿µç³»ç»Ÿï¼šäº²äººçµæ€§çºªå¿µ & å»¶ç»­</li>
            <li data-i18n="vip_tasks">æ¯å‘¨èƒ½é‡ç»ƒä¹  / ç¥æ˜ä»ªå¼ä»»åŠ¡</li>
            <li data-i18n="vip_shop">èƒ½é‡å•†åŸä¸“å±æŠ˜æ‰£ & å¾¡å®ˆè®¢åˆ¶</li>
          </ul>
        </div>
      </div>

      <div class="group-title" style="margin-top:14px" data-i18n="login_title">ğŸ’ ç™»å…¥ VIP åŠŸèƒ½</div>

      <section class="astro-auth">
        <div class="auth-grid">
          <div class="panel">
            <div class="head" data-i18n="panel_login_head">è´¦æˆ·ç™»å½• / æ³¨å†Œ</div>
            <div class="body">
              <div class="row" id="authFields">
                <label for="email" class="sr-only" data-i18n="ph_email">é‚®ç®± Email</label>
                <input id="email" name="email" type="email" inputmode="email" autocomplete="username">
                <label for="password" class="sr-only" data-i18n="ph_label_password">å¯†ç  Password</label>
                <input id="password" type="password" autocomplete="new-password" placeholder="å¯†ç  Passwordï¼ˆè‡³å°‘8ä½ï¼Œå«å¤§å°å†™æ•°å­—ç¬¦å·ï¼‰" data-i18n-ph="ph_password" required/>
              </div>
              <div class="spacer"></div>
              <form id="loginForm" class="row one">
                <button class="btn block" id="loginBtn" type="submit" data-i18n="btn_login">ç™»å…¥è´¦æˆ·</button>
              </form>
              <div class="spacer"></div>
              <div class="row one">
                <button class="btn ghost block" id="resetBtn" type="button" data-i18n="btn_reset">ğŸ”‘ é‡è®¾å¯†ç </button>
              </div>
              <div class="spacer"></div>
              <form class="row one" id="registerForm">
                <button class="btn block" id="registerBtn" type="submit" data-i18n="btn_register">æ³¨å†Œè´¦æˆ·</button>
                <div class="muted" data-i18n="note_price">æ³¨å†Œè´¦å·èµ é€ä¸€æ¬¡å…è´¹ä½“éªŒ</div>
                <div class="spacer"></div>
                <div class="error-message" id="authError" style="display:none"></div>
              </form>
            </div>
          </div>

          <div class="panel">
            <div class="head" data-i18n="panel_member_head">ä¼šå‘˜æœåŠ¡</div>
            <div class="body">
              <div class="row one">
                <a class="btn block" href="https://yourshopifyshop.com/products/monthly-vip" target="_blank" rel="noopener noreferrer" data-i18n="btn_upgrade">ğŸ’ å‡çº§ä¸º VIPï¼ˆæœˆè´¹ï¼‰</a>
              </div>
              <div class="spacer"></div>
              <div class="row one">
                <a class="btn ghost block" href="https://yourshopifyshop.myshopify.com" target="_blank" rel="noopener noreferrer" data-i18n="btn_backshop">â† è¿”å›å‘½ç†å•†åŸ</a>
              </div>
              <div class="spacer"></div>
              <div class="muted" data-i18n="note_price1">$9.9 / æœˆè´¹ VIPï¼ˆå‘½ç†ç©ºé—´ + å¿ƒæ€œç©ºé—´ + çµæ€§è¯¾ç¨‹ï¼‰</div>
            </div>
          </div>
        </div>
      </section>
    </section>
  </main>

  <footer>Â© 5XLiving â€¢ Astro Sanctuary</footer>

<script>
(function(){
'use strict';

/* ===== åŸºç¡€å¸¸é‡ ===== */
const API_BASE = 'https://throbbing-lab-1440.hello5xliving.workers.dev';
const LANG_KEY = 'site_lang';
const gid = id => document.getElementById(id);
window.lastNumCtx = null;  // è®°ä½æœ€è¿‘ä¸€æ¬¡çš„ numerology ç»“æœ  

/* ===== i18n ===== */
const translations = {
  "zh-CN": {
    "page_title":"çµæ•°ç®€è¯„", "site_title":"çµæ•°ç®€è¯„",
    "site_subtitle":"å…è´¹ç‰ˆ Â· ä¸é¦–é¡µç»Ÿä¸€é£æ ¼ | VIP å¯è§£é”å®Œæ•´çµæ•°åœ°å›¾",
    "lang_label":"è¯­è¨€", "ph_birthdate":"å‡ºç”Ÿæ—¥æœŸ", "rule_pyth":"æ¯•è¾¾å“¥æ‹‰æ–¯", "btn_gen":"ç”Ÿæˆåˆ†æ",
    "res_title":"å¿ƒæ€œç®¡å®¶è§£è¯»ä¸å»ºè®®",
    "vip_title":"ğŸŒ™ ä¼šå‘˜åŒºåŸŸ VIP Segment","vip_mingli":"ğŸ— å‘½ç†ç©ºé—´ä¸“å±å†…å®¹",
    "vip_love":"å§»ç¼˜æ–¹å‘ï¼šæ‹çˆ±ç¼˜åˆ†ã€å©šå§»èµ°åŠ¿","vip_career":"äº‹ä¸šæ–¹å‘ï¼šèŒåœºå‘å±•ã€åˆ›ä¸šæ½œåŠ›",
    "vip_wealth":"è´¢è¿æ–¹å‘ï¼šè´¢ä½åˆ†æã€ç†è´¢æ—¶æœº","vip_pet":"å® ç‰©å‘½ç†ï¼šä¼´ä¾£åŠ¨ç‰©çš„æ€§æ ¼ä¸ç¼˜åˆ†",
    "vip_hepan":"åˆç›˜åˆ†æï¼šå©šæœŸæ‹©æ—¥ã€æ–°ç”Ÿæ‹©æ—¶","vip_name":"æµ‹ååˆ†æï¼šå…¬å¸åã€å®å®åã€å‘½åæ”¹è¿",
    "vip_fengshui":"è´¢ä½åˆç›˜ï¼šä½å®¶ / åŠå…¬å®¤åŠ¨çº¿é…åˆ",
    "vip_xinlian":"ğŸŒ™ å¿ƒæ€œç©ºé—´ä¸“å±å†…å®¹","vip_record":"çµæ€§è®°å½•ï¼šç…§ç‰‡ã€æ¢¦å¢ƒã€å£°éŸ³ã€æ„¿æœ›ç¥ˆç¥·",
    "vip_course":"å‘½ç†è¯¾ç¨‹ï¼šå…«å­— / å¡”ç½— / å æ˜Ÿ / çµæ•° / äººç±»å›¾",
    "vip_memorial":"å®¶æ—çºªå¿µç³»ç»Ÿï¼šäº²äººçµæ€§çºªå¿µ & å»¶ç»­","vip_tasks":"æ¯å‘¨èƒ½é‡ç»ƒä¹  / ç¥æ˜ä»ªå¼ä»»åŠ¡",
    "vip_shop":"èƒ½é‡å•†åŸä¸“å±æŠ˜æ‰£ & å¾¡å®ˆè®¢åˆ¶","login_title":"ğŸ’ ç™»å…¥ VIP åŠŸèƒ½",
    "panel_login_head":"è´¦æˆ·ç™»å½• / æ³¨å†Œ","ph_email":"é‚®ç®± Email",
    "ph_label_password":"å¯†ç  Password","ph_password":"å¯†ç  Passwordï¼ˆè‡³å°‘8ä½ï¼Œå«å¤§å°å†™æ•°å­—ç¬¦å·ï¼‰",
    "btn_login":"ç™»å…¥è´¦æˆ·","btn_reset":"ğŸ”‘ é‡è®¾å¯†ç ","btn_register":"æ³¨å†Œè´¦æˆ·",
    "note_price":"æ³¨å†Œè´¦å·èµ é€ä¸€æ¬¡å…è´¹ä½“éªŒ","panel_member_head":"ä¼šå‘˜æœåŠ¡",
    "btn_upgrade":"ğŸ’ å‡çº§ä¸º VIPï¼ˆæœˆè´¹ï¼‰","btn_backshop":"â† è¿”å›å‘½ç†å•†åŸ",
    "note_price1":"$9.9 / æœˆè´¹ VIPï¼ˆå‘½ç†ç©ºé—´ + å¿ƒæ€œç©ºé—´ + çµæ€§è¯¾ç¨‹ï¼‰",
    "chat_fab":"é—®","chat_placeholder":"è¾“å…¥æ‚¨çš„é—®é¢˜...","chat_send":"å‘é€",
    "ai_title":"å¿ƒæ€œç®¡å®¶è§£è¯»","ai_local_note":"ï¼ˆå·²åˆ‡æ¢æœ¬åœ°è§£è¯»æºï¼šç½‘ç»œæ³¢åŠ¨ï¼‰",
    "sec_basic":"åŸºç¡€ä¿¡æ¯",
    "sec_lp":"ç”Ÿå‘½è·¯å¾„æ•°å­—",
    "sec_love":"æƒ…æ„Ÿæ•°å­—",
    "hint_text":"ç”Ÿå‘½è·¯å¾„ = å°†è¥¿å…ƒå¹´/æœˆ/æ—¥æ‰€æœ‰æ•°å­—ç›¸åŠ å¹¶ç¼©å‡ä¸º 1â€“9ï¼Œ11 / 22 / 33 ä¿ç•™ä¸ºå¤§å¸ˆæ•°å­—ï¼›æƒ…æ„Ÿæ•°å­— = å‡ºç”Ÿæ—¥ï¼ˆDDï¼‰ç¼©å‡ä¸º 1â€“9ã€‚"
  },
  "zh-TW": {
    "page_title":"éˆæ•¸ç°¡è©•","site_title":"éˆæ•¸ç°¡è©•",
    "site_subtitle":"å…è²»ç‰ˆ Â· èˆ‡é¦–é é¢¨æ ¼ä¸€è‡´ï½œVIP å¯è§£é–å®Œæ•´éˆæ•¸åœ°åœ–",
    "lang_label":"èªè¨€","ph_birthdate":"å‡ºç”Ÿæ—¥æœŸ","rule_pyth":"ç•¢é”å“¥æ‹‰æ–¯","btn_gen":"ç”Ÿæˆè§£æ",
    "res_title":"å¿ƒæ†ç®¡å®¶è§£è®€èˆ‡å»ºè­°",
    "vip_title":"ğŸŒ™ æœƒå“¡å€åŸŸ VIP Segment","vip_mingli":"ğŸ— å‘½ç†ç©ºé–“å°ˆå±¬å…§å®¹",
    "vip_love":"å§»ç·£æ–¹å‘ï¼šæˆ€æ„›ç·£åˆ†ã€å©šå§»èµ°å‹¢","vip_career":"äº‹æ¥­æ–¹å‘ï¼šè·å ´ç™¼å±•ã€å‰µæ¥­æ½›åŠ›",
    "vip_wealth":"è²¡é‹æ–¹å‘ï¼šè²¡ä½åˆ†æã€ç†è²¡æ™‚æ©Ÿ","vip_pet":"å¯µç‰©å‘½ç†ï¼šä¼´ä¾¶å‹•ç‰©çš„æ€§æ ¼èˆ‡ç·£åˆ†",
    "vip_hepan":"åˆç›¤åˆ†æï¼šå©šæœŸæ“‡æ—¥ã€æ–°ç”Ÿæ“‡æ™‚","vip_name":"æ¸¬ååˆ†æï¼šå…¬å¸åã€å¯¶å¯¶åã€å‘½åæ”¹é‹",
    "vip_fengshui":"è²¡ä½åˆç›¤ï¼šä½å®¶ï¼è¾¦å…¬å®¤å‹•ç·šé…åˆ",
    "vip_xinlian":"ğŸŒ™ å¿ƒæ†ç©ºé–“å°ˆå±¬å…§å®¹","vip_record":"éˆæ€§è¨˜éŒ„ï¼šç…§ç‰‡ã€å¤¢å¢ƒã€è²éŸ³ã€é¡˜æœ›ç¥ˆç¦±",
    "vip_course":"å‘½ç†èª²ç¨‹ï¼šå…«å­—ï¼å¡”ç¾…ï¼å æ˜Ÿï¼éˆæ•¸ï¼äººé¡åœ–",
    "vip_memorial":"å®¶æ—ç´€å¿µç³»çµ±ï¼šè¦ªäººéˆæ€§ç´€å¿µï¼†å»¶çºŒ","vip_tasks":"æ¯é€±èƒ½é‡ç·´ç¿’ï¼ç¥æ˜å„€å¼ä»»å‹™",
    "vip_shop":"èƒ½é‡å•†åŸå°ˆå±¬æŠ˜æ‰£ï¼†å¾¡å®ˆè¨‚è£½","login_title":"ğŸ’ ç™»å…¥ VIP åŠŸèƒ½",
    "panel_login_head":"å¸³è™Ÿç™»å…¥ï¼è¨»å†Š","ph_email":"ä¿¡ç®± Email",
    "ph_label_password":"å¯†ç¢¼ Password","ph_password":"å¯†ç¢¼ Passwordï¼ˆè‡³å°‘ 8 ä½ï¼Œå«å¤§å°å¯«èˆ‡æ•¸å­—ç¬¦è™Ÿï¼‰",
    "btn_login":"ç™»å…¥å¸³è™Ÿ","btn_reset":"ğŸ”‘ é‡è¨­å¯†ç¢¼","btn_register":"è¨»å†Šå¸³è™Ÿ",
    "note_price":"è¨»å†Šå¸³è™Ÿè´ˆé€ä¸€æ¬¡å…è²»é«”é©—","panel_member_head":"æœƒå“¡æœå‹™",
    "btn_upgrade":"ğŸ’ å‡ç´šç‚º VIPï¼ˆæœˆè²»ï¼‰","btn_backshop":"â† è¿”å›å‘½ç†å•†åŸ",
    "note_price1":"$9.9 / æœˆè²» VIPï¼ˆå‘½ç†ç©ºé–“ï¼‹å¿ƒæ†ç©ºé–“ï¼‹éˆæ€§èª²ç¨‹ï¼‰",
    "chat_fab":"å•","chat_placeholder":"è¼¸å…¥æ‚¨çš„å•é¡Œâ€¦","chat_send":"é€å‡º",
    "ai_title":"å¿ƒæ†ç®¡å®¶è§£è®€","ai_local_note":"ï¼ˆå·²åˆ‡æ›æœ¬åœ°è§£è®€æºï¼šç¶²è·¯æ³¢å‹•ï¼‰",
    "sec_basic":"åŸºç¤è³‡è¨Š",
    "sec_lp":"ç”Ÿå‘½è·¯å¾‘æ•¸å­—",
    "sec_love":"æƒ…æ„Ÿæ•¸å­—",
    "hint_text":"ç”Ÿå‘½è·¯å¾‘ = å°‡è¥¿å…ƒå¹´ï¼æœˆï¼æ—¥æ‰€æœ‰æ•¸å­—ç›¸åŠ ä¸¦ç¸®æ¸›ç‚º 1â€“9ï¼Œ11 / 22 / 33 ä¿ç•™ç‚ºå¤§å¸«æ•¸ï¼›æƒ…æ„Ÿæ•¸å­— = å‡ºç”Ÿæ—¥ï¼ˆDDï¼‰ç¸®æ¸›ç‚º 1â€“9ã€‚"
  },
  "en": {
    "page_title":"Numerology Report","site_title":"Numerology Report",
    "site_subtitle":"Free version Â· VIP unlocks full numerology map",
    "lang_label":"Language","ph_birthdate":"Birth Date","rule_pyth":"Pythagorean","btn_gen":"Generate",
    "hint_text":"Life Path = sum of all digits in YYYYMMDD reduced to 1â€“9 (keep 11/22/33); Love Number = day (DD) reduced to 1â€“9.",
    "res_title":"Insights & Advice",
    "vip_title":"ğŸŒ™ VIP Segment","vip_mingli":"ğŸ— Astro Space Â· Exclusive",
    "vip_love":"Love: attraction patterns & marriage flow","vip_career":"Career: work style & business potential",
    "vip_wealth":"Wealth: money flow & timing","vip_pet":"Pet energy: temperament & bond with you",
    "vip_hepan":"Synastry: wedding date / baby timing","vip_name":"Names: company / baby / renaming for luck",
    "vip_fengshui":"Wealth & space: home / office layout sync",
    "vip_xinlian":"ğŸŒ™ Xinlian Space Â· Exclusive","vip_record":"Soul records: photos, dreams, voice, wishes",
    "vip_course":"Courses: Bazi / Tarot / Astrology / Numerology / Human Design",
    "vip_memorial":"Family memorial system","vip_tasks":"Weekly energy practice / ritual tasks",
    "vip_shop":"Energy shop discounts & amulets","login_title":"ğŸ’ VIP Login",
    "panel_login_head":"Account Login / Register","ph_email":"Email",
    "ph_label_password":"Password","ph_password":"Password (min 8 chars, mixed case & symbols)",
    "btn_login":"Login","btn_reset":"ğŸ”‘ Reset Password","btn_register":"Register",
    "note_price":"New account comes with one free trial","panel_member_head":"Membership",
    "btn_upgrade":"ğŸ’ Upgrade to VIP (Monthly)","btn_backshop":"â† Back to Astro Shop",
    "note_price1":"$9.9 / month VIP (Astro + Xinlian + Courses)",
    "chat_fab":"Chat","chat_placeholder":"Type your question...","chat_send":"Send",
    "ai_title":"Xinlian Butler Â· Insights","ai_local_note":"(Using local generator due to network)",
    "sec_basic":"Basic Information",
    "sec_lp":"Life Path Number",
    "sec_love":"Love Number"
  },
  "ja": {
    "page_title":"æ•°ç§˜è¡“ãƒ¬ãƒãƒ¼ãƒˆï¼ˆç°¡æ˜“ç‰ˆï¼‰","site_title":"æ•°ç§˜è¡“ãƒ¬ãƒãƒ¼ãƒˆ",
    "site_subtitle":"ç„¡æ–™ç‰ˆ Â· VIP ä¼šå“¡ã§å®Œå…¨ãªæ•°ç§˜ãƒãƒƒãƒ—ã‚’è§£æ”¾",
    "lang_label":"è¨€èª","ph_birthdate":"ç”Ÿå¹´æœˆæ—¥","rule_pyth":"ãƒ”ã‚¿ã‚´ãƒ©ã‚¹æ–¹å¼","btn_gen":"è§£æã‚’ç”Ÿæˆ",
    "hint_text":"ãƒ©ã‚¤ãƒ•ãƒ‘ã‚¹ãƒŠãƒ³ãƒãƒ¼ = ç”Ÿå¹´æœˆæ—¥ã®æ•°å­—ï¼ˆYYYYMMDDï¼‰ã‚’ã™ã¹ã¦è¶³ã—ã¦ 1ã€œ9 ã«ç¸®ç´„ï¼ˆ11/22/33 ã¯ãƒã‚¹ã‚¿ãƒ¼ãƒŠãƒ³ãƒãƒ¼ã¨ã—ã¦ä¿æŒï¼‰ã€‚ãƒ©ãƒ–ãƒŠãƒ³ãƒãƒ¼ = èª•ç”Ÿæ—¥ï¼ˆDDï¼‰ã‚’ 1ã€œ9 ã«ç¸®ç´„ã€‚",
    "res_title":"ã‚¤ãƒ³ã‚µã‚¤ãƒˆã¨ã‚¢ãƒ‰ãƒã‚¤ã‚¹",
    "vip_title":"ğŸŒ™ ä¼šå“¡ã‚¨ãƒªã‚¢ VIP Segment","vip_mingli":"ğŸ— å‘½ç†ã‚¹ãƒšãƒ¼ã‚¹é™å®šã‚³ãƒ³ãƒ†ãƒ³ãƒ„",
    "vip_love":"æ‹æ„›ãƒ»çµå©šï¼šã”ç¸ã®æµã‚Œã¨ãƒ‘ã‚¿ãƒ¼ãƒ³","vip_career":"ä»•äº‹ãƒ»ã‚­ãƒ£ãƒªã‚¢ï¼šé©æ€§ã¨èµ·æ¥­ã®å¯èƒ½æ€§",
    "vip_wealth":"ãŠé‡‘ãƒ»è±Šã‹ã•ï¼šåå…¥ã®æµã‚Œã¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°","vip_pet":"ãƒšãƒƒãƒˆï¼šæ€§æ ¼ã¨ã‚ãªãŸã¨ã®ã”ç¸",
    "vip_hepan":"ç›¸æ€§ãƒ»ã‚·ãƒŠã‚¹ãƒˆãƒªãƒ¼ï¼šçµå©šæ—¥ï¼å‡ºç”£ã‚¿ã‚¤ãƒŸãƒ³ã‚°","vip_name":"å‘½åé‘‘å®šï¼šä¼šç¤¾åãƒ»èµ¤ã¡ã‚ƒã‚“ã®åå‰ãƒ»æ”¹å",
    "vip_fengshui":"è²¡ä½ãƒ»ç©ºé–“ï¼šè‡ªå®…ï¼ã‚ªãƒ•ã‚£ã‚¹å‹•ç·šã¨ã®èª¿å’Œ",
    "vip_xinlian":"ğŸŒ™ å¿ƒæ†ã‚¹ãƒšãƒ¼ã‚¹é™å®šã‚³ãƒ³ãƒ†ãƒ³ãƒ„","vip_record":"ã‚¹ãƒ”ãƒªãƒãƒ¥ã‚¢ãƒ«è¨˜éŒ²ï¼šå†™çœŸãƒ»å¤¢ãƒ»å£°ãƒ»ç¥ˆã‚Š",
    "vip_course":"ã‚³ãƒ¼ã‚¹ï¼šå››æŸ±æ¨å‘½ï¼ã‚¿ãƒ­ãƒƒãƒˆï¼å æ˜Ÿè¡“ï¼æ•°ç§˜è¡“ï¼ãƒ’ãƒ¥ãƒ¼ãƒãƒ³ãƒ‡ã‚¶ã‚¤ãƒ³",
    "vip_memorial":"å®¶æ—ãƒ¡ãƒ¢ãƒªã‚¢ãƒ«ã‚·ã‚¹ãƒ†ãƒ ","vip_tasks":"æ¯é€±ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ¯ãƒ¼ã‚¯ï¼å„€å¼ã‚¿ã‚¹ã‚¯",
    "vip_shop":"ã‚¨ãƒŠã‚¸ãƒ¼ã‚·ãƒ§ãƒƒãƒ—å‰²å¼•ï¼†ãŠå®ˆã‚Šã‚«ã‚¹ã‚¿ãƒ ","login_title":"ğŸ’ VIP ãƒ­ã‚°ã‚¤ãƒ³",
    "panel_login_head":"ãƒ­ã‚°ã‚¤ãƒ³ï¼ç™»éŒ²","ph_email":"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",
    "ph_label_password":"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰","ph_password":"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆ8æ–‡å­—ä»¥ä¸Šãƒ»è‹±æ•°å­—ã¨è¨˜å·ï¼‰",
    "btn_login":"ãƒ­ã‚°ã‚¤ãƒ³","btn_reset":"ğŸ”‘ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å†è¨­å®š","btn_register":"æ–°è¦ç™»éŒ²",
    "note_price":"æ–°è¦ç™»éŒ²ã§ 1 å›ç„¡æ–™ä½“é¨“","panel_member_head":"ä¼šå“¡ã‚µãƒ¼ãƒ“ã‚¹",
    "btn_upgrade":"ğŸ’ VIPï¼ˆæœˆé¡ï¼‰ã¸ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰","btn_backshop":"â† å ã„ã‚·ãƒ§ãƒƒãƒ—ã¸æˆ»ã‚‹",
    "note_price1":"$9.9 / æœˆ Â· VIPï¼ˆå‘½ç†ã‚¹ãƒšãƒ¼ã‚¹ï¼‹å¿ƒæ†ã‚¹ãƒšãƒ¼ã‚¹ï¼‹ã‚³ãƒ¼ã‚¹ï¼‰",
    "chat_fab":"Chat","chat_placeholder":"ã”è³ªå•ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„â€¦","chat_send":"é€ä¿¡",
    "ai_title":"å¿ƒæ†ãƒãƒˆãƒ©ãƒ¼ãƒ»ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°","ai_local_note":"ï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸å®‰å®šã®ãŸã‚ãƒ­ãƒ¼ã‚«ãƒ«è§£é‡ˆã‚’ä½¿ç”¨ï¼‰",
    "sec_basic":"åŸºæœ¬æƒ…å ±",
    "sec_lp":"ãƒ©ã‚¤ãƒ•ãƒ‘ã‚¹ãƒŠãƒ³ãƒãƒ¼",
    "sec_love":"æ„Ÿæƒ…ï¼æ‹æ„›ãƒŠãƒ³ãƒãƒ¼"
  },
  "th": {
    "page_title":"à¸£à¸²à¸¢à¸‡à¸²à¸™à¸•à¸±à¸§à¹€à¸¥à¸‚à¸¨à¸²à¸ªà¸•à¸£à¹Œà¹à¸šà¸šà¸¢à¹ˆà¸­","site_title":"à¸£à¸²à¸¢à¸‡à¸²à¸™à¸•à¸±à¸§à¹€à¸¥à¸‚à¸¨à¸²à¸ªà¸•à¸£à¹Œ",
    "site_subtitle":"à¹€à¸§à¸­à¸£à¹Œà¸Šà¸±à¸™à¸Ÿà¸£à¸µ Â· VIP à¸›à¸¥à¸”à¸¥à¹‡à¸­à¸à¹à¸œà¸™à¸—à¸µà¹ˆà¸•à¸±à¸§à¹€à¸¥à¸‚à¹€à¸•à¹‡à¸¡à¸£à¸¹à¸›à¹à¸šà¸š",
    "lang_label":"à¸ à¸²à¸©à¸²","ph_birthdate":"à¸§à¸±à¸™à¹€à¸”à¸·à¸­à¸™à¸›à¸µà¹€à¸à¸´à¸”","rule_pyth":"à¸£à¸°à¸šà¸šà¸à¸´à¸—à¸²à¹‚à¸à¸£à¸±à¸ª","btn_gen":"à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸³à¸—à¸³à¸™à¸²à¸¢",
    "hint_text":"à¹€à¸¥à¸‚à¹€à¸ªà¹‰à¸™à¸—à¸²à¸‡à¸Šà¸µà¸§à¸´à¸• = à¸œà¸¥à¸£à¸§à¸¡à¸•à¸±à¸§à¹€à¸¥à¸‚à¸‚à¸­à¸‡à¸§à¸±à¸™à¹€à¸”à¸·à¸­à¸™à¸›à¸µà¹€à¸à¸´à¸” (YYYYMMDD) à¸¥à¸”à¹ƒà¸«à¹‰à¹€à¸«à¸¥à¸·à¸­ 1â€“9 à¹‚à¸”à¸¢à¹€à¸à¹‡à¸š 11/22/33 à¹€à¸›à¹‡à¸™à¹€à¸¥à¸‚à¸¡à¸²à¸ªà¹€à¸•à¸­à¸£à¹Œ; à¹€à¸¥à¸‚à¸„à¸§à¸²à¸¡à¸£à¸±à¸ = à¸§à¸±à¸™à¹€à¸à¸´à¸” (DD) à¸¥à¸”à¹ƒà¸«à¹‰à¹€à¸«à¸¥à¸·à¸­ 1â€“9.",
    "res_title":"à¸¡à¸¸à¸¡à¸¡à¸­à¸‡à¹à¸¥à¸°à¸„à¸³à¹à¸™à¸°à¸™à¸³",
    "vip_title":"ğŸŒ™ à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¸ªà¸¡à¸²à¸Šà¸´à¸ VIP","vip_mingli":"ğŸ— à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¸à¸´à¹€à¸¨à¸©à¹ƒà¸™à¹‚à¸‹à¸™à¸”à¸§à¸‡",
    "vip_love":"à¸„à¸§à¸²à¸¡à¸£à¸±à¸à¹à¸¥à¸°à¸„à¸¹à¹ˆà¸„à¸£à¸­à¸‡","vip_career":"à¸à¸²à¸£à¸‡à¸²à¸™à¹à¸¥à¸°à¸˜à¸¸à¸£à¸à¸´à¸ˆ",
    "vip_wealth":"à¸à¸²à¸£à¹€à¸‡à¸´à¸™à¹à¸¥à¸°à¸ˆà¸±à¸‡à¸«à¸§à¸°à¸£à¸²à¸¢à¹„à¸”à¹‰","vip_pet":"à¸ªà¸±à¸•à¸§à¹Œà¹€à¸¥à¸µà¹‰à¸¢à¸‡à¹à¸¥à¸°à¸ªà¸²à¸¢à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œ",
    "vip_hepan":"à¸„à¸§à¸²à¸¡à¹€à¸‚à¹‰à¸²à¸à¸±à¸™à¸‚à¸­à¸‡à¸”à¸§à¸‡ / à¸§à¸±à¸™à¹à¸•à¹ˆà¸‡à¸‡à¸²à¸™ / à¹€à¸§à¸¥à¸²à¹€à¸à¸´à¸”à¸¥à¸¹à¸","vip_name":"à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸Šà¸·à¹ˆà¸­à¸šà¸£à¸´à¸©à¸±à¸— / à¸¥à¸¹à¸ / à¸à¸²à¸£à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸Šà¸·à¹ˆà¸­",
    "vip_fengshui":"à¸®à¸§à¸‡à¸ˆà¸¸à¹‰à¸¢à¸”à¹‰à¸²à¸™à¸à¸²à¸£à¹€à¸‡à¸´à¸™ï¼šà¸šà¹‰à¸²à¸™ / à¸ªà¸³à¸™à¸±à¸à¸‡à¸²à¸™",
    "vip_xinlian":"ğŸŒ™ à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆ Xinlian à¸à¸´à¹€à¸¨à¸©","vip_record":"à¸šà¸±à¸™à¸—à¸¶à¸à¸ˆà¸´à¸•à¸§à¸´à¸à¸à¸²à¸“ï¼šà¸£à¸¹à¸›à¸ à¸²à¸ à¸„à¸§à¸²à¸¡à¸à¸±à¸™ à¹€à¸ªà¸µà¸¢à¸‡ à¸„à¸³à¸­à¸˜à¸´à¸©à¸à¸²à¸™",
    "vip_course":"à¸„à¸­à¸£à¹Œà¸ªï¼šà¸”à¸§à¸‡à¸ˆà¸µà¸™ / à¹„à¸à¹ˆà¸¢à¸´à¸›à¸‹à¸µ / à¹‚à¸«à¸£à¸²à¸¨à¸²à¸ªà¸•à¸£à¹Œ / à¸•à¸±à¸§à¹€à¸¥à¸‚ / Human Design",
    "vip_memorial":"à¸£à¸°à¸šà¸šà¸£à¸°à¸¥à¸¶à¸à¸–à¸¶à¸‡à¸„à¸£à¸­à¸šà¸„à¸£à¸±à¸§","vip_tasks":"à¹à¸šà¸šà¸à¸¶à¸à¸à¸¥à¸±à¸‡à¸‡à¸²à¸™à¸›à¸£à¸°à¸ˆà¸³à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ / à¸‡à¸²à¸™à¸à¸´à¸˜à¸µà¸à¸£à¸£à¸¡",
    "vip_shop":"à¸ªà¹ˆà¸§à¸™à¸¥à¸”à¸£à¹‰à¸²à¸™à¸à¸¥à¸±à¸‡à¸‡à¸²à¸™ & à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸£à¸²à¸‡","login_title":"ğŸ’ à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š VIP",
    "panel_login_head":"à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š / à¸ªà¸¡à¸±à¸„à¸£à¸ªà¸¡à¸²à¸Šà¸´à¸","ph_email":"à¸­à¸µà¹€à¸¡à¸¥",
    "ph_label_password":"à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™","ph_password":"à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™ (à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 8 à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£)",
    "btn_login":"à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š","btn_reset":"ğŸ”‘ à¸£à¸µà¹€à¸‹à¹‡à¸•à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™","btn_register":"à¸ªà¸¡à¸±à¸„à¸£à¸ªà¸¡à¸²à¸Šà¸´à¸",
    "note_price":"à¸ªà¸¡à¸±à¸„à¸£à¹ƒà¸«à¸¡à¹ˆà¸£à¸±à¸šà¸ªà¸´à¸—à¸˜à¸´à¹Œà¸—à¸”à¸¥à¸­à¸‡à¸Ÿà¸£à¸µ 1 à¸„à¸£à¸±à¹‰à¸‡","panel_member_head":"à¸šà¸£à¸´à¸à¸²à¸£à¸ªà¸¡à¸²à¸Šà¸´à¸",
    "btn_upgrade":"ğŸ’ à¸­à¸±à¸›à¹€à¸à¸£à¸”à¹€à¸›à¹‡à¸™ VIP (à¸£à¸²à¸¢à¹€à¸”à¸·à¸­à¸™)","btn_backshop":"â† à¸à¸¥à¸±à¸šà¸ªà¸¹à¹ˆà¸£à¹‰à¸²à¸™à¸„à¹‰à¸²",
    "note_price1":"$9.9 / à¹€à¸”à¸·à¸­à¸™ VIP (à¸”à¸§à¸‡ + Xinlian + à¸„à¸­à¸£à¹Œà¸ª)",
    "chat_fab":"à¸–à¸²à¸¡","chat_placeholder":"à¸à¸´à¸¡à¸à¹Œà¸„à¸³à¸–à¸²à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“...","chat_send":"à¸ªà¹ˆà¸‡",
    "ai_title":"à¸œà¸¹à¹‰à¸Šà¹ˆà¸§à¸¢ Xinlian Â· à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢","ai_local_note":"(à¹ƒà¸Šà¹‰à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œà¹à¸šà¸šà¸­à¸­à¸Ÿà¹„à¸¥à¸™à¹Œà¸Šà¸±à¹ˆà¸§à¸„à¸£à¸²à¸§)",
    "sec_basic":"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸·à¹‰à¸™à¸à¸²à¸™",
    "sec_lp":"à¹€à¸¥à¸‚à¹€à¸ªà¹‰à¸™à¸—à¸²à¸‡à¸Šà¸µà¸§à¸´à¸•",
    "sec_love":"à¹€à¸¥à¸‚à¸”à¹‰à¸²à¸™à¸­à¸²à¸£à¸¡à¸“à¹Œ / à¸„à¸§à¸²à¸¡à¸£à¸±à¸"
  },
  "ms": {
    "page_title":"Laporan Numerologi Ringkas","site_title":"Laporan Numerologi",
    "site_subtitle":"Versi percuma Â· VIP membuka peta numerologi penuh",
    "lang_label":"Bahasa","ph_birthdate":"Tarikh lahir","rule_pyth":"Sistem Pythagorean","btn_gen":"Jana Analisis",
    "hint_text":"Life Path = jumlah semua digit dalam tarikh lahir (YYYYMMDD) dikurangkan kepada 1â€“9, kekalkan 11/22/33; Nombor Cinta = hari (DD) dikurangkan kepada 1â€“9.",
    "res_title":"Pandangan & Nasihat",
    "vip_title":"ğŸŒ™ Segmen VIP","vip_mingli":"ğŸ— Kandungan Eksklusif Ruang Astrologi",
    "vip_love":"Cinta: pola tarikan & aliran perkahwinan","vip_career":"Kerjaya: gaya kerja & potensi bisnes",
    "vip_wealth":"Kewangan: aliran rezeki & masa yang sesuai","vip_pet":"Haiwan peliharaan: sikap & kaitan dengan anda",
    "vip_hepan":"Padanan carta: tarikh kahwin / masa kelahiran anak","vip_name":"Analisis nama: syarikat / bayi / penukaran nama",
    "vip_fengshui":"Fengshui rezeki: rumah / pejabat",
    "vip_xinlian":"ğŸŒ™ Ruang Xinlian Eksklusif","vip_record":"Rekod spiritual: gambar, mimpi, suara, doa",
    "vip_course":"Kursus: Bazi / Tarot / Astrologi / Numerologi / Human Design",
    "vip_memorial":"Sistem memorial keluarga","vip_tasks":"Latihan tenaga mingguan / tugasan ritual",
    "vip_shop":"Diskaun kedai tenaga & azimat","login_title":"ğŸ’ Log Masuk VIP",
    "panel_login_head":"Log masuk / Daftar","ph_email":"Emel",
    "ph_label_password":"Kata laluan","ph_password":"Kata laluan (min 8 aksara dengan huruf & simbol)",
    "btn_login":"Log masuk","btn_reset":"ğŸ”‘ Tetap semula kata laluan","btn_register":"Daftar",
    "note_price":"Akaun baharu menerima satu sesi percubaan percuma","panel_member_head":"Perkhidmatan ahli",
    "btn_upgrade":"ğŸ’ Naik taraf ke VIP (Bulanan)","btn_backshop":"â† Kembali ke kedai",
    "note_price1":"$9.9 / bulan VIP (Ruang Astro + Xinlian + Kursus)",
    "chat_fab":"Chat","chat_placeholder":"Tulis soalan anda...","chat_send":"Hantar",
    "ai_title":"Xinlian Butler Â· Insight","ai_local_note":"(Menggunakan penjana tempatan kerana rangkaian)",
    "sec_basic":"Maklumat Asas",
    "sec_lp":"Nombor Life Path",
    "sec_love":"Nombor Cinta"
  }
};
/* è¯­è¨€å·¥å…· */
function getLang(){ return localStorage.getItem(LANG_KEY) || document.documentElement.lang || "zh-CN"; }
function setLang(code){ localStorage.setItem(LANG_KEY, code); document.documentElement.lang = code; }
function t(key){
  const pack = translations[getLang()] || translations["zh-CN"];
  return pack[key] || (translations["zh-CN"][key] || key);
}
function applyI18n(){
  document.querySelectorAll("[data-i18n]").forEach(el=>{
    const key = el.getAttribute("data-i18n");
    el.textContent = t(key);
  });
  document.querySelectorAll("[data-i18n-ph]").forEach(el=>{
    const key = el.getAttribute("data-i18n-ph");
    el.setAttribute("placeholder", t(key));
  });
  const titleEl = document.querySelector("title[data-i18n]");
  if (titleEl){
    const key = titleEl.getAttribute("data-i18n");
    titleEl.textContent = t(key);
  }
}
function applyChatI18n(){
  const fab = gid('ssChatFab');
  const inp = gid('ssChatInput');
  const btn = gid('ssChatSend');
  const title = document.querySelector('.ss-chat-title');
  if (fab) fab.textContent = t('chat_fab');
  if (inp) inp.placeholder = t('chat_placeholder');
  if (btn) btn.textContent = t('chat_send');
  if (title) title.textContent = 'å¿ƒæ€œç®¡å®¶ Â· Chat';
}

/* ===== é”™è¯¯æç¤º ===== */
function showErr(msg){
  const e=gid('error'); if(!e) return;
  e.textContent=msg; e.style.display='block';
  setTimeout(()=>{e.style.display='none';}, 4000);
}
function hideErr(){
  const e=gid('error'); if(e){ e.style.display='none'; e.textContent=''; }
}

/* ===== ç»“æ„ä¿éšœ ===== */
function ensureRootStructure(){
  let result=gid('result');
  if(!result){
    result=document.createElement('section');
    result.id='result'; result.className='card'; result.style.display='none';
    const main=document.querySelector('main')||document.body;
    main.appendChild(result);
    const h2=document.createElement('h2');
    h2.style.cssText='margin:0 0 10px;color:var(--gold)';
    h2.setAttribute('data-i18n','res_title');
    h2.textContent=t('res_title');
    result.appendChild(h2);
  }
  let numReport=gid('numReport');
  if(!numReport){
    numReport=document.createElement('div');
    numReport.id='numReport';
    numReport.className='report';
    result.appendChild(numReport);
  }
  return numReport;
}

/* ===== çµæ•°æ ¸å¿ƒï¼ˆä¿æŒåŸè§„åˆ™ï¼šlife path sameï¼‰ ===== */
const masters={11:1,22:1,33:1};
const isMaster=n=>!!masters[n];
function reduceNum(n){
  while(n>9 && !isMaster(n)){
    n = String(n).split('').reduce((a,b)=>a+Number(b),0);
  }
  return n;
}
function parseDateDigits(iso){
  if(!iso) return null;
  const d=iso.replace(/[^0-9]/g,'');
  if(d.length<8) return null;
  return d.split('').map(Number);
}
function calcLifePath(iso){
  const d=parseDateDigits(iso);
  if(!d) return null;
  return reduceNum(d.reduce((a,b)=>a+b,0));
}
function calcLoveNumber(iso){
  if(!iso) return null;
  const p=iso.split('-');
  const dd=Number(p[2]||'0');
  if(!dd) return null;
  return reduceNum(dd);
}

/* ===== æ¸²æŸ“åŸºç¡€æ‘˜è¦ï¼ˆæ•°å­— + ç®€çŸ­è¯´æ˜ï¼‰ ===== */
function renderProReport(obj){
  const wrap = ensureRootStructure();
  const { iso, lp, lv } = obj;
  const lang = getLang() || 'zh-CN';

  const basicTitle = t('sec_basic');
  const lpTitle = t('sec_lp');
  const loveTitle = t('sec_love');

    // ===== æ ‡ç­¾æ–‡æ¡ˆï¼šæ ¹æ®è¯­è¨€åˆ‡æ¢ =====
  let birthLabel, lpLabel, loveLabel;
  switch (lang) {
    case 'zh-TW':
      birthLabel = 'å‡ºç”Ÿæ—¥æœŸï¼š';
      lpLabel = 'ç”Ÿå‘½è·¯å¾‘ ';
      loveLabel = 'æƒ…æ„Ÿæ•¸å­— ';
      break;
    case 'zh-CN':
      birthLabel = 'å‡ºç”Ÿæ—¥æœŸï¼š';
      lpLabel = 'ç”Ÿå‘½è·¯å¾„ ';
      loveLabel = 'æƒ…æ„Ÿæ•°å­— ';
      break;
    case 'ja':
      birthLabel = 'ç”Ÿå¹´æœˆæ—¥ï¼š';
      lpLabel = 'ãƒ©ã‚¤ãƒ•ãƒ‘ã‚¹ãƒŠãƒ³ãƒãƒ¼ ';
      loveLabel = 'æ„Ÿæƒ…ï¼æ‹æ„›ãƒŠãƒ³ãƒãƒ¼ ';
      break;
    default:
      birthLabel = 'Birth date: ';
      lpLabel = 'Life Path ';
      loveLabel = 'Love Number ';
  }

  // ===== å¤§å¸ˆæ•°å­—å°¾æ ‡ =====
  const lpTag = isMaster(lp)
    ? (lang.startsWith('zh') ? 'ï¼ˆå¤§å¸ˆæ•°å­—ï¼‰' : '(Master Number)')
    : '';
  const lvTag = isMaster(lv)
    ? (lang.startsWith('zh') ? 'ï¼ˆå¤§å¸ˆæ•°å­—ï¼‰' : '(Master Number)')
    : '';

  // ===== è¯­æ°”è¯´æ˜ï¼šä¸åŒè¯­è¨€ä¸åŒè¡¨ =====
  let tones;
  if (lang === 'ja') {
    tones = {
      1:'ä¸»ä½“æ€§ãŒå¼·ãã€ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’ç™ºæ®ã—ã‚„ã™ã„æ•°å­—ã§ã™ã€‚é ¼ã‚‹ã“ã¨ãƒ»äººã«ä»»ã›ã‚‹ã“ã¨ã‚‚å­¦ã³ã«ãªã‚Šã¾ã™ã€‚',
      2:'äººã®æ°—æŒã¡ã«æ•æ„Ÿã§ã€èª¿æ•´å½¹ã«ãªã‚Šã‚„ã™ã„ã‚¿ã‚¤ãƒ—ã§ã™ã€‚å¢ƒç•Œç·šã‚’æŒã¤ã“ã¨ã§ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å®ˆã‚Œã¾ã™ã€‚',
      3:'è¡¨ç¾åŠ›ã¨ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ãªæ„Ÿæ€§ãŒè±Šã‹ã§ã™ã€‚æ¥½ã—ã¿ãªãŒã‚‰ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã™ã‚‹ã¨é‹æ°—ãŒå‹•ãã¾ã™ã€‚',
      4:'å®‰å®šãƒ»ç§©åºãƒ»åœŸå°ã¥ãã‚Šã®æ•°å­—ã§ã™ã€‚é•·æœŸçš„ãªä»•çµ„ã¿ã¥ãã‚Šã«å‘ã„ã¦ã„ã¾ã™ãŒã€å¿ƒé…ã—ã™ãã«æ³¨æ„ã€‚',
      5:'å¤‰åŒ–ã¨è‡ªç”±ã‚’æ±‚ã‚ã‚‹æ¢ç©¶è€…ã‚¿ã‚¤ãƒ—ã§ã™ã€‚ç’°å¢ƒã‚’å¤‰ãˆã‚‹ã“ã¨ã§å¤§ããæˆé•·ã—ã¾ã™ãŒã€è‡ªå¾‹ã®ãƒãƒ©ãƒ³ã‚¹ã‚‚å¤§åˆ‡ã€‚',
      6:'è²¬ä»»æ„ŸãŒå¼·ãã€å®¶æ—ã‚„å‘¨å›²ã‚’å®ˆã‚ã†ã¨ã™ã‚‹å„ªã—ã•ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãšè‡ªåˆ†ã‚’æº€ãŸã™ã“ã¨ãŒãƒ†ãƒ¼ãƒã«ãªã‚Šã¾ã™ã€‚',
      7:'ç‰©äº‹ã‚’æ·±ãè€ƒãˆã€æ¢æ±‚ã—ãŸã„æ°—æŒã¡ãŒå¼·ã„æ•°å­—ã§ã™ã€‚ç›´æ„Ÿã¨ãƒ‡ãƒ¼ã‚¿ã®ä¸¡æ–¹ã‚’å¤§äº‹ã«ã™ã‚‹ã¨å®‰å®šã—ã¾ã™ã€‚',
      8:'æˆæœãƒ»é”æˆãƒ»ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã®æ•°å­—ã§ã™ã€‚ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚„ãŠé‡‘ã®æ‰±ã„ã«å­¦ã³ãŒã‚ã‚Šã¾ã™ã€‚',
      9:'å…±æ„ŸåŠ›ãŒé«˜ãã€äººã®ãŸã‚ã«å‹•ãã‚„ã™ã„ãƒ’ãƒ¥ãƒ¼ãƒãƒ‹ã‚¹ãƒˆã§ã™ã€‚æŠ±ãˆè¾¼ã¿ã™ããªã„æ‰‹æ”¾ã—ãŒå¤§äº‹ãªãƒ†ãƒ¼ãƒã§ã™ã€‚',
      11:'ç›´æ„Ÿã¨ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¼·ã„ãƒã‚¹ã‚¿ãƒ¼ãƒŠãƒ³ãƒãƒ¼ã§ã™ã€‚ groundingï¼ˆåœ°ã«è¶³ã‚’ã¤ã‘ã‚‹ã“ã¨ï¼‰ãŒéµã«ãªã‚Šã¾ã™ã€‚',
      22:'å¤§ããªãƒ“ã‚¸ãƒ§ãƒ³ã‚’ç¾å®Ÿã«è½ã¨ã—è¾¼ã‚€åŠ›ã‚’æŒã¤ãƒã‚¹ã‚¿ãƒ¼ãƒŠãƒ³ãƒãƒ¼ã§ã™ã€‚æ®µéšçš„ãªè¨ˆç”»ãŒæˆåŠŸã®ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚',
      33:'å¥‰ä»•ãƒ»ç™’ã—ãƒ»æ•™ãˆã‚‹ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒå¼·ã„æ•°å­—ã§ã™ã€‚è‡ªåˆ†ã‚’çŠ ç‰²ã«ã—éããªã„ã“ã¨ãŒæœ€å¤§ã®ãƒ†ãƒ¼ãƒã«ãªã‚Šã¾ã™ã€‚'
    };
  } else if (lang.startsWith('zh')) {
    tones = {
      1:'ç‹¬ç«‹ã€å¼€åˆ›ï¼Œå¾ˆé€‚åˆå¸¦å¤´ï¼›éœ€è¦å­¦ä¹ çš„æ˜¯ã€Œè¯·äººå¸®å¿™ã€ã€‚',
      2:'æ¸©å’Œã€æ•æ„Ÿï¼Œæ“…é•¿åè°ƒå…³ç³»ï¼›éœ€è¦ç•Œçº¿æ„Ÿé¿å…è¢«æ¶ˆè€—ã€‚',
      3:'è¡¨è¾¾åŠ›ä¸åˆ›æ„å¼ºï¼Œé€‚åˆè¯´å†™æ¼”ï¼›è¦é¿å…åˆ†å¿ƒä¸åŠé€”è€ŒåºŸã€‚',
      4:'é‡è§†ç§©åºä¸å®‰å…¨ï¼Œé€‚åˆæ­å»ºç³»ç»Ÿï¼›æœ‰æ—¶ä¼šè¿‡åº¦ç´§ç»·ä¸æ‹…å¿ƒã€‚',
      5:'çƒ­çˆ±è‡ªç”±ä¸å˜åŒ–ï¼Œé€‚åˆæ¢ç´¢ä¸æµåŠ¨ï¼›éœ€è¦è‡ªå¾‹æ¥é¿å…å¤±æ§ã€‚',
      6:'åœ¨ä¹è´£ä»»ä¸æ‰¿è¯ºï¼Œæœ‰ã€Œç…§é¡¾äººã€çš„å¤©æ€§ï¼›è¦å­¦ä¼šå…ˆç…§é¡¾è‡ªå·±ã€‚',
      7:'å†…åœ¨æ€è€ƒå¾ˆå¤šï¼Œå–œæ¬¢ç ”ç©¶ä¸æ·±åº¦ï¼›éœ€è¦ä¿¡ä»»ç›´è§‰ä¸èº«ä½“æ„Ÿå—ã€‚',
      8:'ç›®æ ‡æ„Ÿå¼ºï¼Œé€‚åˆç†è´¢ä¸ç®¡ç†ï¼›ä¹Ÿè¦å­¦ä¹ æŸ”è½¯ä¸åˆ†äº«ã€‚',
      9:'åŒ…å®¹ã€å…±æƒ…ï¼Œå®¹æ˜“ä¸ºåˆ«äººä»˜å‡ºï¼›è¦ç•™æ„æƒ…ç»ªç´¯ç§¯ä¸é€ƒé¿ã€‚',
      11:'çµæ„Ÿå¼ºã€æ„Ÿå—ç»†è…»ï¼Œæ˜¯ã€Œå¤©çº¿å‹ã€ï¼›éœ€è¦ç¨³æ‰åœ°æ°”ä¸ç°å®ç»“æ„ã€‚',
      22:'æœ‰æŠŠæ„¿æ™¯è½åœ°çš„èƒ½åŠ›ï¼Œé€‚åˆå¤§é¡¹ç›®ï¼›è¦åˆ†é˜¶æ®µæ‰§è¡Œï¼Œé¿å…è¿‡å‹ã€‚',
      33:'å¸¦æœ‰ç–—æ„ˆä¸æœåŠ¡ä½¿å‘½ï¼Œä½†è¦å…ˆç…§é¡¾å¥½è‡ªå·±ï¼Œæ‰ä¸ä¼šè¿‡åº¦é€æ”¯ã€‚'
    };
  } else {
    // å…¶ä»–è¯­è¨€ä¸€å¾‹è‹±æ–‡
    tones = {
      1:'Independent, pioneering, and needs room to lead.',
      2:'Gentle, cooperative, and sensitive to atmosphere.',
      3:'Expressive, creative, and thrives when sharing ideas.',
      4:'Structured, practical, and strong with systems.',
      5:'Dynamic, curious, and grows through change and travel.',
      6:'Caring, responsible, and focused on home and loved ones.',
      7:'Analytical, intuitive, and drawn to research or spirituality.',
      8:'Ambitious, strategic, and attracted to leadership and results.',
      9:'Compassionate, big-picture, and humanitarian.',
      11:'Highly intuitive and visionary, needs good energetic boundaries.',
      22:'Big-scale builder who can turn vision into concrete impact.',
      33:'Healing, teaching, and service-oriented, but must avoid self-sacrifice.'
    };
  }

  const lpNote = tones[lp] || '';
  const lvNote = tones[lv] || '';

  wrap.innerHTML = `
    <div class="sec">
      <h3>${basicTitle}</h3>
      <p>${birthLabel}${iso}</p>
    </div>
    <div class="sec">
      <h3>${lpTitle}</h3>
      <p>${lpLabel}<b>${lp}</b> ${lpTag}</p>
      ${lpNote ? `<p>${lpNote}</p>` : ''}
    </div>
    <div class="sec">
      <h3>${loveTitle}</h3>
      <p>${loveLabel}<b>${lv}</b> ${lvTag}</p>
      ${lvNote ? `<p>${lvNote}</p>` : ''}
    </div>
  `;
}

/* ===== æœ¬åœ°å…œåº•æ–‡æ¡ˆï¼ˆAI æŒ‚æ‰æ—¶ç”¨ï¼‰ ===== */
function localNumerologyInsight({lp,lv}){
  const tone = {
    1:'ç‹¬ç«‹/å¼€åˆ›ï¼Œè¡ŒåŠ¨è¦å¿«ä½†åˆ«å¿˜è®°å¤ç›˜ã€‚',
    2:'æ¸©å’Œ/åä½œï¼Œè®¾ç½®ç•Œçº¿è®©èƒ½é‡ä¸è¢«è€—æ•£ã€‚',
    3:'è¡¨è¾¾/åˆ›æ„ï¼Œç»™è‡ªå·±å›ºå®šâ€œè¾“å‡ºå°ä»ªå¼â€ã€‚',
    4:'ç§©åº/ç¨³å›ºï¼ŒæŠŠé•¿æœŸç›®æ ‡æ‹†æˆå‘¨æ¸…å•ã€‚',
    5:'å˜åŒ–/æ¢ç´¢ï¼Œè®¾å®šâ€œå¯æ§è¯•é”™â€çš„æŠ¤æ ã€‚',
    6:'ç…§æŠ¤/è´£ä»»ï¼Œå…ˆç…§é¡¾è‡ªå·±ï¼Œå†ç…§é¡¾ä¸–ç•Œã€‚',
    7:'æ´å¯Ÿ/ç ”ç©¶ï¼Œç»™ç›´è§‰æ‰¾æ•°æ®ä½œåŒç›Ÿã€‚',
    8:'æƒè¡¡/æˆå°±ï¼Œç›®æ ‡è¦é‡åŒ–ï¼ŒèŠ‚å¾‹è¦ç¨³å®šã€‚',
    9:'åˆ©ä»–/æ•´åˆï¼Œä¿ç•™ç‹¬å¤„æ—¶é—´è¡¥èƒ½ã€‚',
    11:'çµæ„Ÿ/è§‰å¯Ÿï¼Œç»ƒä¹ æŠŠçµæ„Ÿå†™æˆè¡ŒåŠ¨å¥ã€‚',
    22:'å®è§‚/è½åœ°ï¼Œç»™æ„¿æ™¯é…é‡Œç¨‹ç¢‘ä¸é¢„ç®—ã€‚',
    33:'ç–—æ„ˆ/æœåŠ¡ï¼Œå…ˆç•Œçº¿åå¥‰çŒ®ï¼Œé¿å…é€æ”¯ã€‚'
  };
  const key = (n)=>tone[n]||'ä¿æŒèŠ‚å¾‹ä¸ä¸“æ³¨ï¼ŒæŒç»­å°æ­¥å¿«è·‘ã€‚';
  return `
<h3>æ ¸å¿ƒç”»åƒ</h3>
<p>ç”Ÿå‘½è·¯å¾„ <b>${lp}</b>${isMaster(lp)?'ï¼ˆå¤§å¸ˆæ•°å­—ï¼‰':''} ä¸æƒ…æ„Ÿæ•°å­— <b>${lv}</b>${isMaster(lv)?'ï¼ˆå¤§å¸ˆæ•°å­—ï¼‰':''} çš„ç»„åˆï¼Œæ˜¾ç¤ºä½ çš„é•¿æœŸé©±åŠ¨åŠ›ä¸äº²å¯†/æƒ…ç»ªè¡¨è¾¾æ–¹å¼çš„äº’åŠ¨ã€‚</p>

<h3>ä¼˜åŠ¿ä¸ç›²ç‚¹</h3>
<p>â€¢ ç”Ÿå‘½è·¯å¾„ï¼š${key(lp)}<br>â€¢ æƒ…æ„Ÿæ•°å­—ï¼š${key(lv)}</p>

<h3>ä»Šæ—¥/æœ¬å‘¨å¯æ‰§è¡Œ</h3>
<p>â€¢ è®¾ä¸€ä¸ª 25 åˆ†é’Ÿçš„â€œå•ç‚¹å°å†²åˆºâ€ã€‚<br>â€¢ æŠŠä¸€ä¸ªç›®æ ‡å†™å‡ºâ€œå®Œæˆå®šä¹‰â€ã€‚<br>â€¢ ç”¨æ‰‹æœºé—¹é’Ÿè®¾ç½®ä¸€ä¸ªå›ºå®šèŠ‚å¾‹ï¼ˆæ¯æ—¥/æ¯å‘¨ï¼‰ã€‚</p>
  `;
}

/* ===== è°ƒç”¨ AIï¼ˆé‡è¯• + å…œåº•ï¼Œç”Ÿæˆå®Œæ•´å¤šæ®µæŠ¥å‘Šï¼‰ ===== */
async function fetchWithRetry(url, options, tries=3){
  let err;
  for(let i=0;i<tries;i++){
    try{
      const r = await fetch(url, options);
      if(r.ok) return r;
      err = new Error('HTTP '+r.status);
    }catch(e){ err = e; }
    await new Promise(res=>setTimeout(res, 500*Math.pow(2,i)));
  }
  throw err;
}

function mdToHtml(md){
  return (md||'')
   .replace(/^##\s+(.*)$/gim,'<h3>$1</h3>')
   .replace(/^###\s+(.*)$/gim,'<h4>$1</h4>')
   .replace(/^\s*[-*]\s+(.*)$/gm,'â€¢ $1')
   .replace(/\*\*(.+?)\*\*/g,'<b>$1</b>')
   .replace(/\n{2,}/g,'\n\n')
   .replace(/\n/g,'<br/>');
}

async function runAI(obj){
  const wrap = ensureRootStructure();
  const sec = document.createElement('div');
  sec.className='sec';
  sec.innerHTML = `<h3>${t('ai_title')}</h3>
    <div class="skeleton"><div></div><div></div><div></div></div>`;
  wrap.appendChild(sec);

  const lang = getLang();

  const sys = `
ä½ æ˜¯â€œå¿ƒæ€œç®¡å®¶â€ï¼Œä¸“ä¸šçµæ•°è§£è¯»å¸ˆã€‚
å½“å‰ç«™ç‚¹è¯­è¨€ä»£ç : ${lang}ã€‚
- å¦‚æœä»£ç ä¸º "en"ï¼Œè¯·å…¨ç¨‹ä½¿ç”¨è‹±æ–‡è¾“å‡ºï¼›
- "zh-CN" ç”¨ç®€ä½“ä¸­æ–‡ï¼›"zh-TW" ç”¨ç¹ä½“ä¸­æ–‡ï¼›
- å…¶ä»–è¯­è¨€ï¼ˆja/th/msï¼‰å¯ä¼˜å…ˆç”¨å¯¹åº”è¯­è¨€ï¼Œä¸ç¡®å®šæ—¶ç”¨è‹±æ–‡ã€‚

è¯·æ ¹æ®æä¾›çš„æ•°å­—ç”Ÿæˆã€å®Œæ•´çµæ•°æŠ¥å‘Šã€‘ï¼Œç»“æ„å›ºå®šä¸ºï¼š
## æ ¸å¿ƒç”»åƒ
æè¿°æ­¤äººçš„æ•´ä½“æ°”è´¨ä¸äººç”Ÿä¸»è½´ã€‚

## æ€§æ ¼ä¸å¤©èµ‹
å±•å¼€è¯´æ˜ç”Ÿå‘½è·¯å¾„æ•°å­—æ‰€ä»£è¡¨çš„æ€§æ ¼ä¼˜åŠ¿ã€å¤©èµ‹ä¸æ—¥å¸¸é£æ ¼ã€‚

## æ„Ÿæƒ…ä¸å…³ç³»
ä»æƒ…æ„Ÿæ•°å­—åˆ‡å…¥ï¼Œæè¿°äº²å¯†å…³ç³»ï¼æ²Ÿé€šæ–¹å¼ï¼å®‰å…¨æ„Ÿéœ€æ±‚ã€‚

## äº‹ä¸šä¸è´¢å¯Œ
è¯´æ˜é€‚åˆçš„å·¥ä½œé£æ ¼ã€èµšé’±æ–¹å¼ã€å®¹æ˜“å¡ä½çš„ç‚¹ï¼Œä»¥åŠå¯ä»¥å¦‚ä½•è°ƒæ•´ã€‚

## é˜¶æ®µè¯¾é¢˜ä¸ç–—æ„ˆ
æ¸©å’Œåœ°æŒ‡å‡ºå¯èƒ½çš„ç›²ç‚¹ä¸é˜¶æ®µè®®é¢˜ï¼Œå¹¶ç»™å‡ºä¸å“äººçš„ç–—æ„ˆå»ºè®®ã€‚

## ä»Šæ—¥/æœ¬å‘¨å¯æ‰§è¡Œ
ä»¥ 3â€“5 æ¡é¡¹ç›®ç¬¦å·åˆ—å‡ºè¡ŒåŠ¨å»ºè®®ï¼Œæ¯æ¡ç”¨åŠ¨è¯å¼€å¤´ï¼Œå¹¶å°½é‡é‡åŒ–
ï¼ˆä¾‹å¦‚ï¼šå†™ 3 ä»¶â€¦ã€é¢„ç•™ 20 åˆ†é’Ÿâ€¦ã€æœ¬å‘¨è‡³å°‘å°è¯• 1 æ¬¡â€¦ï¼‰ã€‚

è¯­æ°”è¦æ±‚ï¼šæ¸©æš–ã€å…·ä½“ã€å¯æ‰§è¡Œï¼Œé¿å…æå“å¼æˆ–å®¿å‘½è®ºç”¨è¯­ã€‚`;

  const user = `
å‡ºç”Ÿæ—¥æœŸ: ${obj.iso}
ç”Ÿå‘½è·¯å¾„: ${obj.lp}${isMaster(obj.lp)?'ï¼ˆå¤§å¸ˆæ•°å­—ï¼‰':''}
æƒ…æ„Ÿæ•°å­—: ${obj.lv}${isMaster(obj.lv)?'ï¼ˆå¤§å¸ˆæ•°å­—ï¼‰':''}

è¯·åœ¨æŠ¥å‘Šä¸­ï¼š
- æ˜ç¡®æåˆ°ç”Ÿå‘½è·¯å¾„æ•°å­—ä¸æƒ…æ„Ÿæ•°å­—ï¼Œå¹¶è§£é‡Šå®ƒä»¬çš„æ„ä¹‰ï¼›
- è¯´æ˜ä¸¤è€…ç»„åˆä¼šå¦‚ä½•å½±å“æ€§æ ¼ã€å…³ç³»ä¸å·¥ä½œï¼›
- æ‰€æœ‰å»ºè®®ç”¨å½“ä¸‹æ—¶æ€ï¼Œå¥½åƒåœ¨å¯¹å½“äº‹äººç›´æ¥è¯´è¯ã€‚`;

  try{
    const r = await fetchWithRetry(`${API_BASE}/api/chat`,{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({
        messages:[
          {role:'system',content:sys},
          {role:'user',content:user}
        ]
      })
    }, 3);

    const data = await r.json().catch(()=>({}));
    const raw = data?.reply || data?.text || (data?.choices && data.choices[0]?.message?.content) || '';
    const html = mdToHtml(raw||'');
    sec.innerHTML = `<h3>${t('ai_title')}</h3><div class="ai-content">${html}</div>`;
    if(!raw){ throw new Error('empty'); }
  }catch(e){
    const local = localNumerologyInsight(obj);
    // ä¸è¦è„šæ³¨ï¼Œä¸è¦å¤šä¸€å±‚ divï¼Œç›´æ¥å¡å†…å®¹
    sec.innerHTML = `<h3>${t('ai_title')}</h3><div class="ai-content">${local}</div>`;
    console.warn('AI fallback:', e?.message||e);
  }
}

/* ===== èŠå¤©ç»„ä»¶ ===== */
function mountChat(){
  if(gid('ssChatFab')) return;
  const fab = document.createElement('div');
  fab.id='ssChatFab';
  fab.className='ss-chat-fab';
  fab.title='å¿ƒæ€œç®¡å®¶';

  const panel = document.createElement('div');
  panel.id='ssChatPanel';
  panel.className='ss-chat-panel';
  panel.style.display='none';
  panel.innerHTML = `
    <div class="ss-chat-head">
      <div class="ss-chat-title">å¿ƒæ€œç®¡å®¶ Â· Chat</div>
      <div class="ss-close" id="ssChatClose">âœ•</div>
    </div>
    <div class="ss-chat-body" id="ssChatBody"></div>
    <div class="ss-chat-input">
      <input id="ssChatInput" type="text" />
      <button id="ssChatSend" class="btn">${t('chat_send')}</button>
    </div>`;

  document.body.appendChild(fab);
  document.body.appendChild(panel);
  applyChatI18n();

  const body = gid('ssChatBody');
  const input = gid('ssChatInput');

  const open=()=>{ panel.style.display='block'; input&&input.focus(); };
  const close=()=>{ panel.style.display='none'; };
  fab.onclick=open;
  gid('ssChatClose').onclick=close;

  function add(text,me=false){
    const d=document.createElement('div');
    d.className='ss-msg'+(me?' me':'');
    d.textContent=text;
    body.appendChild(d);
    body.scrollTop=body.scrollHeight;
  }

  gid('ssChatSend').onclick = async ()=>{
    const v = (input?.value||'').trim();
    if(!v) return;
    add(v,true);
    input.value='';
    try{
      const r = await fetchWithRetry(`${API_BASE}/api/chat`,{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({
          messages:[
            {role:'system',content:'ä½ æ˜¯â€œå¿ƒæ€œç®¡å®¶â€ï¼Œå›ç­”ç½‘ç«™å¯¼èˆª/åŠŸèƒ½/ä¼šå‘˜ç›¸å…³é—®é¢˜ï¼Œè¯­æ°”æ¸©æš–ç®€æ´ã€‚'},
            {role:'user',content:v}
          ]
        })
      },2);
      const data = await r.json().catch(()=>({}));
      const reply = data?.reply || data?.text || (data?.choices && data.choices[0]?.message?.content) || 'ç¨åå†è¯•ã€‚';
      add(reply);
    }catch(e){
      add('ç½‘ç»œæœ‰ç‚¹å¿™ï¼Œæˆ‘ç¨åå†å›ç­”ã€‚');
    }
  };
}

/* ===== ç™»å½•/æ³¨å†Œï¼ˆå ä½ï¼‰ ===== */
async function safeJson(resp){
  try{return await resp.json();}catch{return {ok:false,msg:'upstream_error'};}
}
async function loginFlow(email,password){
  try{
    const res = await safeJson(await fetch(`${API_BASE}/api/login`,{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({email,password})
    }));
    if(res.ok){
      localStorage.setItem('vipEmail',res.email||email);
      alert('ç™»å½•æˆåŠŸ');
      return;
    }
    if(res.msg==='no_account') return showErr('è´¦æˆ·ä¸å­˜åœ¨');
    if(res.msg==='wrong_pwd') return showErr('å¯†ç é”™è¯¯');
    showErr('ç™»å½•å¤±è´¥ï¼š'+(res.msg||''));
  }catch(e){
    showErr('ç½‘ç»œé”™è¯¯ï¼š'+e.message);
  }
}
async function registerFlow(email,password){
  try{
    const res = await safeJson(await fetch(`${API_BASE}/api/register`,{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({email,password})
    }));
    if(res.ok){
      alert('æ³¨å†ŒæˆåŠŸï¼è¯·ç™»å½•ã€‚');
      return;
    }
    showErr('æ³¨å†Œå¤±è´¥ï¼š'+(res.msg||'')); 
  }catch(e){
    showErr('ç½‘ç»œé”™è¯¯ï¼š'+e.message);
  }
}

/* ===== åˆå§‹åŒ– ===== */
function initLangUI(){
  const select = gid('langSelect');
  const current = getLang();
  if(select){
    select.value = current;
    select.addEventListener('change', ()=>{
      setLang(select.value);
      applyI18n();
      applyChatI18n();
      // â˜… å¦‚æœå·²ç»æœ‰ç»“æœï¼Œå°±ç”¨æ–°è¯­è¨€é‡æ¸²æŸ“
      if (window.lastNumCtx) {
        renderProReport(window.lastNumCtx);
        runAI(window.lastNumCtx);
      }
    });
  }
  applyI18n();
}

function initAuthHandlers(){
  gid('loginForm')?.addEventListener('submit', async (e)=>{
    e.preventDefault();
    const email=gid('email').value;
    const pwd=gid('password').value;
    if(!email||!pwd){showErr('è¯·å¡«å†™é‚®ç®±å’Œå¯†ç ');return;}
    await loginFlow(email,pwd);
  });
  gid('registerForm')?.addEventListener('submit', async (e)=>{
    e.preventDefault();
    const email=gid('email').value;
    const pwd=gid('password').value;
    if(!email||!pwd){showErr('è¯·å¡«å†™é‚®ç®±å’Œå¯†ç ');return;}
    if(pwd.length<8){showErr('å¯†ç è‡³å°‘éœ€è¦8ä½å­—ç¬¦');return;}
    await registerFlow(email,pwd);
  });
  gid('resetBtn')?.addEventListener('click', ()=>alert('å¯†ç é‡ç½®åŠŸèƒ½å³å°†å¼€æ”¾'));
}

document.addEventListener('DOMContentLoaded', ()=>{
  initLangUI();
  ensureRootStructure();
  mountChat();
  initAuthHandlers();

  const bd=gid('birthdate');
  const btn=gid('btnGen');

  // é¢„è®¾å‡ºç”Ÿæ—¥æœŸä¸ºä»Šå¤©ï¼ˆbirthdate é»˜è®¤ä»Šå¤©ï¼‰
  if (bd && !bd.value){
    const today = new Date();
    bd.value = today.toISOString().split('T')[0];
  }

  function generateNow(){
    const iso=bd?bd.value:'';
    if(!iso){
      showErr(getLang()==='en' ? 'Please select your birth date.' : 'è¯·é€‰æ‹©å‡ºç”Ÿæ—¥æœŸ');
      return;
    }
    hideErr();
    const lp=calcLifePath(iso);
    const lv=calcLoveNumber(iso);
    if(!lp||!lv){
      showErr(getLang()==='en' ? 'Invalid date format.' : 'æ—¥æœŸæ ¼å¼é”™è¯¯ï¼Œè¯·æ£€æŸ¥è¾“å…¥');
      return;
    }
    gid('result').style.display='block';
    const payload = {iso,lp,lv};
    window.lastNumCtx = payload;          // â† è®°ä½è¿™æ¬¡çš„ç»“æœ
    renderProReport(payload);
    runAI(payload);
    gid('result').scrollIntoView({behavior:'smooth',block:'start'});
  }

  btn?.addEventListener('click', generateNow);
  bd?.addEventListener('keydown', (e)=>{
    if(e.key==='Enter') generateNow();
  });
});
})();
</script>
</body>
</html>





